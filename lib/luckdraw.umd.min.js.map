{"version":3,"sources":["webpack://luckdraw/webpack/universalModuleDefinition","webpack://luckdraw/webpack/bootstrap","webpack://luckdraw/./node_modules/core-js/internals/to-string-tag-support.js","webpack://luckdraw/./node_modules/core-js/internals/function-bind-context.js","webpack://luckdraw/./node_modules/core-js/internals/object-get-own-property-descriptor.js","webpack://luckdraw/./node_modules/konva/lib/Tween.js","webpack://luckdraw/./node_modules/core-js/internals/ie8-dom-define.js","webpack://luckdraw/./node_modules/konva/lib/Layer.js","webpack://luckdraw/./node_modules/core-js/internals/an-instance.js","webpack://luckdraw/./node_modules/core-js/internals/html.js","webpack://luckdraw/./node_modules/core-js/internals/a-function.js","webpack://luckdraw/./node_modules/core-js/internals/check-correctness-of-iteration.js","webpack://luckdraw/./node_modules/core-js/internals/engine-is-ios.js","webpack://luckdraw/./node_modules/core-js/internals/require-object-coercible.js","webpack://luckdraw/./node_modules/core-js/internals/array-method-has-species-support.js","webpack://luckdraw/./node_modules/konva/lib/shapes/Circle.js","webpack://luckdraw/./node_modules/core-js/internals/iterate.js","webpack://luckdraw/./node_modules/core-js/internals/to-absolute-index.js","webpack://luckdraw/./node_modules/core-js/internals/export.js","webpack://luckdraw/./node_modules/core-js/internals/object-get-own-property-names.js","webpack://luckdraw/./node_modules/core-js/internals/set-species.js","webpack://luckdraw/./node_modules/core-js/internals/task.js","webpack://luckdraw/./node_modules/core-js/internals/engine-v8-version.js","webpack://luckdraw/./node_modules/core-js/internals/engine-user-agent.js","webpack://luckdraw/./node_modules/core-js/internals/get-iterator-method.js","webpack://luckdraw/./node_modules/core-js/internals/object-define-properties.js","webpack://luckdraw/./node_modules/core-js/internals/a-possible-prototype.js","webpack://luckdraw/./node_modules/core-js/modules/es.string.iterator.js","webpack://luckdraw/./node_modules/core-js/internals/iterators.js","webpack://luckdraw/./node_modules/core-js/internals/path.js","webpack://luckdraw/./node_modules/core-js/internals/indexed-object.js","webpack://luckdraw/./node_modules/core-js/internals/add-to-unscopables.js","webpack://luckdraw/./node_modules/core-js/internals/host-report-errors.js","webpack://luckdraw/./node_modules/konva/lib/Validators.js","webpack://luckdraw/./node_modules/core-js/internals/species-constructor.js","webpack://luckdraw/./node_modules/core-js/internals/native-symbol.js","webpack://luckdraw/./node_modules/konva/lib/Node.js","webpack://luckdraw/./node_modules/core-js/internals/array-includes.js","webpack://luckdraw/./node_modules/core-js/internals/to-length.js","webpack://luckdraw/./node_modules/core-js/internals/has.js","webpack://luckdraw/./node_modules/konva/lib/shapes/Text.js","webpack://luckdraw/./node_modules/core-js/internals/shared.js","webpack://luckdraw/./node_modules/core-js/internals/own-keys.js","webpack://luckdraw/./node_modules/core-js/internals/whitespaces.js","webpack://luckdraw/./node_modules/core-js/internals/string-trim.js","webpack://luckdraw/./node_modules/core-js/internals/create-property-descriptor.js","webpack://luckdraw/./node_modules/core-js/internals/string-multibyte.js","webpack://luckdraw/./node_modules/core-js/internals/array-species-create.js","webpack://luckdraw/./node_modules/core-js/internals/internal-state.js","webpack://luckdraw/./node_modules/core-js/internals/redefine.js","webpack://luckdraw/./node_modules/core-js/internals/inherit-if-required.js","webpack://luckdraw/./node_modules/core-js/internals/object-get-own-property-symbols.js","webpack://luckdraw/./node_modules/core-js/internals/enum-bug-keys.js","webpack://luckdraw/./node_modules/core-js/internals/to-object.js","webpack://luckdraw/./node_modules/core-js/internals/object-create.js","webpack://luckdraw/./node_modules/konva/lib/PointerEvents.js","webpack://luckdraw/./node_modules/core-js/internals/define-iterator.js","webpack://luckdraw/./node_modules/core-js/internals/native-weak-map.js","webpack://luckdraw/./node_modules/core-js/internals/an-object.js","webpack://luckdraw/./node_modules/core-js/internals/descriptors.js","webpack://luckdraw/./node_modules/core-js/internals/is-object.js","webpack://luckdraw/./node_modules/@soda/get-current-script/index.js","webpack://luckdraw/./node_modules/core-js/internals/inspect-source.js","webpack://luckdraw/external {\"commonjs\":\"vue\",\"commonjs2\":\"vue\",\"root\":\"Vue\"}","webpack://luckdraw/./node_modules/core-js/internals/uid.js","webpack://luckdraw/./node_modules/core-js/internals/create-non-enumerable-property.js","webpack://luckdraw/./node_modules/core-js/internals/is-forced.js","webpack://luckdraw/./node_modules/regenerator-runtime/runtime.js","webpack://luckdraw/./node_modules/core-js/internals/call-with-safe-iteration-closing.js","webpack://luckdraw/./node_modules/core-js/internals/object-define-property.js","webpack://luckdraw/./node_modules/konva/lib/Util.js","webpack://luckdraw/./node_modules/core-js/internals/create-iterator-constructor.js","webpack://luckdraw/./node_modules/core-js/internals/to-integer.js","webpack://luckdraw/./node_modules/core-js/modules/es.number.constructor.js","webpack://luckdraw/./node_modules/core-js/internals/array-method-uses-to-length.js","webpack://luckdraw/./node_modules/core-js/internals/iterators-core.js","webpack://luckdraw/./node_modules/core-js/internals/object-to-string.js","webpack://luckdraw/./node_modules/core-js/internals/microtask.js","webpack://luckdraw/./node_modules/core-js/internals/well-known-symbol.js","webpack://luckdraw/./node_modules/core-js/internals/array-iteration.js","webpack://luckdraw/./node_modules/core-js/internals/to-primitive.js","webpack://luckdraw/./node_modules/core-js/internals/is-pure.js","webpack://luckdraw/./node_modules/konva/lib/Context.js","webpack://luckdraw/./node_modules/core-js/internals/classof-raw.js","webpack://luckdraw/./node_modules/core-js/internals/shared-store.js","webpack://luckdraw/(webpack)/buildin/global.js","webpack://luckdraw/./node_modules/core-js/internals/object-keys-internal.js","webpack://luckdraw/./node_modules/core-js/internals/document-create-element.js","webpack://luckdraw/./node_modules/core-js/internals/promise-resolve.js","webpack://luckdraw/./node_modules/core-js/internals/set-global.js","webpack://luckdraw/./node_modules/core-js/internals/hidden-keys.js","webpack://luckdraw/./node_modules/core-js/internals/fails.js","webpack://luckdraw/./node_modules/core-js/internals/get-built-in.js","webpack://luckdraw/./node_modules/core-js/internals/object-property-is-enumerable.js","webpack://luckdraw/./node_modules/core-js/internals/object-set-prototype-of.js","webpack://luckdraw/./node_modules/core-js/modules/es.object.to-string.js","webpack://luckdraw/./node_modules/core-js/internals/set-to-string-tag.js","webpack://luckdraw/./node_modules/konva/lib/BaseLayer.js","webpack://luckdraw/./node_modules/konva/lib/Global.js","webpack://luckdraw/./node_modules/core-js/modules/es.array.map.js","webpack://luckdraw/./node_modules/core-js/internals/global.js","webpack://luckdraw/./node_modules/core-js/modules/web.dom-collections.iterator.js","webpack://luckdraw/./node_modules/core-js/internals/object-keys.js","webpack://luckdraw/./node_modules/konva/lib/DragAndDrop.js","webpack://luckdraw/./node_modules/core-js/internals/object-get-prototype-of.js","webpack://luckdraw/./node_modules/core-js/internals/correct-prototype-getter.js","webpack://luckdraw/./node_modules/core-js/modules/es.array.iterator.js","webpack://luckdraw/./node_modules/core-js/internals/redefine-all.js","webpack://luckdraw/./node_modules/core-js/internals/perform.js","webpack://luckdraw/./node_modules/core-js/modules/es.promise.js","webpack://luckdraw/./node_modules/core-js/internals/copy-constructor-properties.js","webpack://luckdraw/./node_modules/core-js/internals/is-array.js","webpack://luckdraw/./node_modules/core-js/internals/is-array-iterator-method.js","webpack://luckdraw/./node_modules/konva/lib/Container.js","webpack://luckdraw/./node_modules/konva/lib/Stage.js","webpack://luckdraw/./node_modules/konva/lib/Animation.js","webpack://luckdraw/./node_modules/core-js/internals/new-promise-capability.js","webpack://luckdraw/./node_modules/konva/lib/Factory.js","webpack://luckdraw/./node_modules/core-js/internals/classof.js","webpack://luckdraw/./node_modules/konva/lib/Canvas.js","webpack://luckdraw/./node_modules/core-js/internals/shared-key.js","webpack://luckdraw/./node_modules/@vue/cli-service/lib/commands/build/setPublicPath.js","webpack://luckdraw/./packages/luck-draw/luck-draw.vue?8dd7","webpack://luckdraw/./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","webpack://luckdraw/./node_modules/@babel/runtime/helpers/esm/classCallCheck.js","webpack://luckdraw/./node_modules/@babel/runtime/helpers/esm/createClass.js","webpack://luckdraw/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://luckdraw/./node_modules/@babel/runtime/helpers/esm/inherits.js","webpack://luckdraw/./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","webpack://luckdraw/./node_modules/@babel/runtime/helpers/esm/isNativeReflectConstruct.js","webpack://luckdraw/./node_modules/@babel/runtime/helpers/esm/typeof.js","webpack://luckdraw/./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","webpack://luckdraw/./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","webpack://luckdraw/./node_modules/@babel/runtime/helpers/esm/createSuper.js","webpack://luckdraw/./node_modules/tslib/tslib.es6.js","webpack://luckdraw/./node_modules/vue-class-component/dist/vue-class-component.esm.js","webpack://luckdraw/./node_modules/vue-property-decorator/lib/vue-property-decorator.js","webpack://luckdraw/./packages/luck-draw/luck-draw.ts","webpack://luckdraw/./packages/luck-draw/luck-draw.ts?332c","webpack://luckdraw/./node_modules/vue-loader/lib/runtime/componentNormalizer.js","webpack://luckdraw/./packages/luck-draw/luck-draw.vue","webpack://luckdraw/./packages/index.ts","webpack://luckdraw/./node_modules/@vue/cli-service/lib/commands/build/entry-lib.js","webpack://luckdraw/./node_modules/core-js/internals/to-indexed-object.js","webpack://luckdraw/./node_modules/konva/lib/Shape.js","webpack://luckdraw/./node_modules/core-js/internals/dom-iterables.js","webpack://luckdraw/./node_modules/core-js/internals/use-symbol-as-uid.js","webpack://luckdraw/./node_modules/core-js/internals/native-promise-constructor.js"],"names":["root","factory","exports","module","require","define","amd","self","this","__WEBPACK_EXTERNAL_MODULE__8bbf__","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","wellKnownSymbol","TO_STRING_TAG","test","String","aFunction","fn","that","length","undefined","a","b","apply","arguments","DESCRIPTORS","propertyIsEnumerableModule","createPropertyDescriptor","toIndexedObject","toPrimitive","has","IE8_DOM_DEFINE","nativeGetOwnPropertyDescriptor","getOwnPropertyDescriptor","f","O","P","error","Util_1","Animation_1","Node_1","Global_1","blacklist","node","duration","easing","onFinish","yoyo","PAUSED","PLAYING","REVERSING","idCounter","colorAttrs","TweenEngine","prop","propFunc","func","begin","finish","_pos","_change","prevPos","_time","_position","_startTime","_finish","pause","fire","str","handler","setTime","reverse","play","reset","update","getTime","setPosition","getPosition","state","getTimer","onEnterFrame","seek","Date","Tween","config","nodeId","_id","Easings","Linear","layers","getLayer","Konva","getLayers","Util","anim","Animation","tween","_tweenFunc","_addListeners","attrs","tweens","_addAttr","onReset","end","start","diff","tweenId","len","trueEnd","trueStart","endRGBA","getAttr","_isArray","Math","max","_prepareArrayForTween","closed","indexOf","push","startRGBA","colorToRGBA","g","attr","newVal","round","setAttr","_this","onPlay","onReverse","onPause","stop","points","destroy","thisId","Node","to","params","BackEaseIn","BackEaseOut","BackEaseInOut","ElasticEaseIn","abs","PI","asin","pow","sin","ElasticEaseOut","ElasticEaseInOut","BounceEaseOut","BounceEaseIn","BounceEaseInOut","EaseIn","EaseOut","EaseInOut","StrongEaseIn","StrongEaseOut","StrongEaseInOut","fails","createElement","__extends","extendStatics","setPrototypeOf","__proto__","Array","__","constructor","Container_1","Factory_1","BaseLayer_1","Canvas_1","Shape_1","Validators_1","HASH","BEFORE_DRAW","DRAW","INTERSECTION_OFFSETS","x","y","INTERSECTION_OFFSETS_LEN","Layer","_super","hitCanvas","HitCanvas","pixelRatio","setSize","_a","width","height","_validateAdd","child","type","getType","throw","getIntersection","pos","selector","obj","intersectionOffset","shape","hitGraphEnabled","isVisible","spiralSearchDistance","continueSearch","_getIntersection","findAncestor","antialiased","colorKey","ratio","context","getImageData","data","p3","_rgbToHex","shapes","drawScene","can","top","layer","canvas","getCanvas","_fire","clearBeforeDraw","getContext","clear","Container","drawHit","getHitCanvas","bounds","BaseLayer","enableHitGraph","disableHitGraph","toggleHitCanvas","parent","added","_canvas","parentNode","content","removeChild","appendChild","nodeType","_registerNode","Factory","addGetterSetter","getBooleanValidator","Collection","mapMethods","it","Constructor","TypeError","getBuiltIn","ITERATOR","SAFE_CLOSING","called","iteratorWithReturn","next","done","from","exec","SKIP_CLOSING","ITERATION_SUPPORT","userAgent","V8_VERSION","SPECIES","METHOD_NAME","array","foo","Boolean","Circle","_sceneFunc","beginPath","arc","radius","closePath","fillStrokeShape","getWidth","getHeight","setWidth","setHeight","Shape","_centroid","className","_attrsAffectingSize","getNumberValidator","anObject","isArrayIteratorMethod","toLength","getIteratorMethod","callWithSafeIterationClosing","Result","stopped","result","iterate","iterable","AS_ENTRIES","IS_ITERATOR","iterator","iterFn","index","step","boundFunction","toInteger","min","integer","global","createNonEnumerableProperty","redefine","setGlobal","copyConstructorProperties","isForced","options","source","FORCED","target","targetProperty","sourceProperty","descriptor","TARGET","GLOBAL","STATIC","stat","noTargetGet","forced","sham","internalObjectKeys","enumBugKeys","hiddenKeys","concat","getOwnPropertyNames","definePropertyModule","CONSTRUCTOR_NAME","configurable","defer","channel","port","classof","html","IS_IOS","location","set","setImmediate","clearImmediate","process","MessageChannel","Dispatch","counter","queue","ONREADYSTATECHANGE","run","id","runner","listener","event","post","postMessage","protocol","host","args","Function","nextTick","now","port2","port1","onmessage","addEventListener","importScripts","setTimeout","match","version","versions","v8","split","Iterators","objectKeys","defineProperties","Properties","keys","isObject","charAt","InternalStateModule","defineIterator","STRING_ITERATOR","setInternalState","getInternalState","getterFor","iterated","string","point","propertyIsEnumerable","UNSCOPABLES","ArrayPrototype","console","_formatValue","val","_isString","toString","_isBoolean","RGBComponent","alphaComponent","isUnminified","_isNumber","warn","getNumberOrAutoValidator","isNumber","isAuto","getStringValidator","getFunctionValidator","_isFunction","getNumberArrayValidator","forEach","item","isBool","getComponentValidator","components","defaultConstructor","S","C","getOwnPropertySymbols","DragAndDrop_1","ids","names","_addId","_removeId","_addName","_removeName","nodes","no","splice","ABSOLUTE_OPACITY","ABSOLUTE_TRANSFORM","ABSOLUTE_SCALE","CANVAS","CHANGE","CHILDREN","KONVA","LISTENING","MOUSEENTER","MOUSELEAVE","NAME","SET","SHAPE","SPACE","STAGE","TRANSFORM","UPPER_STAGE","VISIBLE","TRANSFORM_CHANGE_STR","join","emptyChildren","eventListeners","_cache","Map","_lastPos","_batchingTransformChange","_needClearTransformCache","_filterUpToDate","_isUnderCache","children","_dragEventId","setAttrs","on","_clearCache","_clearSelfAndDescendantCache","hasChildren","getChildren","delete","_getCache","privateGetter","cache","_getCanvasCache","forceEvent","isCached","each","clearCache","conf","rect","getClientRect","skipTransform","relativeTo","getParent","ceil","offset","drawBorder","cachedSceneCanvas","SceneCanvas","cachedFilterCanvas","cachedHitCanvas","sceneContext","hitContext","isCache","imageSmoothingEnabled","_context","save","translate","restore","stroke","scene","filter","hit","Error","_transformedRect","minX","minY","maxX","maxY","trans","getAbsoluteTransform","transformed","_drawCachedSceneCanvas","_applyOpacity","_applyGlobalCompositeOperation","canvasCache","cacheCanvas","_getCachedSceneCanvas","drawImage","_drawCachedHitCanvas","imageData","filters","cachedCanvas","sceneCanvas","filterCanvas","filterContext","putImageData","e","message","evtStr","_delegate","parts","baseEvent","events","off","callback","_off","dispatchEvent","evt","removeEventListener","stopNode","targets","findAncestors","cloneObject","currentTarget","remove","isDragging","stopDrag","DD","_dragElements","_remove","_clearCaches","_setChildrenIndices","subname","method","_capitalize","getAncestors","ancestors","getAttrs","_setAttr","isListening","_isListening","listening","_isVisible","visible","shouldDrawHit","show","hide","getZIndex","getAbsoluteZIndex","depth","getDepth","addChildren","toArray","getStage","_batchTransformChanges","getAbsolutePosition","haveCachedParent","absoluteMatrix","getMatrix","absoluteTransform","Transform","slice","getTranslation","setAbsolutePosition","origTrans","_clearTransform","_getAbsoluteTransform","invert","_setTransform","rotation","scaleX","scaleY","offsetX","offsetY","skewX","skewY","move","change","changeX","changeY","_eachAncestorReverse","family","unshift","rotate","theta","moveToTop","moveUp","moveDown","moveToBottom","setZIndex","zIndex","getAbsoluteOpacity","_getAbsoluteOpacity","absOpacity","opacity","moveTo","newContainer","add","toObject","defaultValue","nonPlainObject","_isPlainObject","getClassName","_prepareToStringify","toJSON","JSON","stringify","includeSelf","res","_isMatch","ancestor","isAncestorOf","sel","selectorArr","replace","isValidSelector","hasName","_getStage","eventType","bubble","_fireAndBubble","at","transformsEnabled","multiply","getTransform","copy","getAbsoluteScale","transform","decompose","getAbsoluteRotation","_getTransform","getAngle","skew","scale","clone","allListeners","_toKonvaCanvas","box","stage","toCanvas","toDataURL","mimeType","quality","url","toImage","_urlToImage","img","size","getSize","getDragDistance","dragDistance","evtName","evtListeners","_fireChangeEvent","oldVal","setId","oldId","setName","oldNames","newNames","addName","oldName","newName","fullName","removeName","_setComponentAttr","component","compareShape","shouldStop","stopBubble","cancelBubble","draw","_createDragElement","pointerId","ap","_getPointerById","_changedPointerPositions","startPointerPos","dragStatus","startDrag","elem","_setDragPosition","newNodePos","dbf","dragBoundFunc","bounded","batchDraw","_endDragBefore","_endDragAfter","setDraggable","draggable","_dragChange","_listenDrag","_dragCleanup","shouldCheckButton","canDrag","dragButtons","hasDraggingChild","container","parse","_createNode","_NODES_REGISTRY","Class","addComponentsGetterSetter","isValid","backCompat","rotateDeg","setRotationDeg","getRotationDeg","toAbsoluteIndex","createMethod","IS_INCLUDES","$this","el","fromIndex","includes","argument","dummyContext","Global_2","AUTO","CENTER","JUSTIFY","CHANGE_KONVA","CONTEXT_2D","DASH","LEFT","TEXT","TEXT_UPPER","TOP","BOTTOM","MIDDLE","NORMAL","PX_SPACE","RIGHT","WORD","CHAR","NONE","ELLIPSIS","ATTR_CHANGE_LIST","attrChangeListLen","getDummyContext","createCanvasElement","_fillFunc","fillText","_partialText","_partialTextX","_partialTextY","_strokeFunc","strokeText","checkDefaultFill","fillLinearGradientColorStops","fillRadialGradientColorStops","fillPatternImage","fill","trimRight","Text","_setTextData","padding","fontSize","lineHeightPx","lineHeight","textArr","textArrLen","verticalAlign","alignY","align","totalWidth","letterSpacing","textDecoration","shouldUnderline","shouldLineThrough","translateY","lineTranslateX","lineTranslateY","_getContextFont","spacesNumber","oneWord","lineWidth","text","lastLine","lineTo","strokeStyle","li","letter","floor","measureSize","_hitFunc","setText","getTextWidth","textWidth","getTextHeight","textHeight","metrics","font","measureText","UA","isIE","fontStyle","fontFamily","fontVariant","_addTextLine","line","trim","_getTextWidth","lines","fixedWidth","fixedHeight","maxWidth","maxHeightPx","currentHeightPx","wrap","shouldWrap","wrapAtWord","shouldAddEllipsis","ellipsis","additionalWidth","low","high","matchWidth","mid","substr","substrWidth","wrapIndex","nextChar","nextIsSpaceOrDash","lastIndexOf","trimLeft","getStrokeScaleEnabled","overWriteSetter","IS_PURE","store","copyright","getOwnPropertyNamesModule","getOwnPropertySymbolsModule","requireObjectCoercible","whitespaces","whitespace","ltrim","RegExp","rtrim","TYPE","bitmap","writable","CONVERT_TO_STRING","first","second","position","charCodeAt","codeAt","isArray","originalArray","NATIVE_WEAK_MAP","objectHas","sharedKey","WeakMap","enforce","wmget","wmhas","wmset","metadata","STATE","inspectSource","enforceInternalState","TEMPLATE","unsafe","simple","dummy","Wrapper","NewTarget","NewTargetPrototype","activeXDocument","documentCreateElement","GT","LT","PROTOTYPE","SCRIPT","IE_PROTO","EmptyConstructor","scriptTag","NullProtoObjectViaActiveX","write","close","temp","parentWindow","NullProtoObjectViaIFrame","iframeDocument","iframe","JS","style","display","src","contentWindow","document","open","F","NullProtoObject","domain","ActiveXObject","Captures","SUPPORT_POINTER_EVENTS","_global","getCapturedShape","createEvent","hasPointerCapture","setPointerCapture","releaseCapture","PointerEvent","$","createIteratorConstructor","getPrototypeOf","setToStringTag","IteratorsCore","IteratorPrototype","BUGGY_SAFARI_ITERATORS","KEYS","VALUES","ENTRIES","returnThis","Iterable","IteratorConstructor","DEFAULT","IS_SET","CurrentIteratorPrototype","methods","KEY","getIterationMethod","KIND","defaultIterator","IterablePrototype","INCORRECT_VALUES_NAME","nativeIterator","anyNativeIterator","entries","values","proto","getCurrentScript","currentScript","err","pageSource","inlineScriptSourceRegExp","inlineScriptSource","ieStackRegExp","ffStackRegExp","stackDetails","stack","scriptLocation","currentLocation","href","hash","scripts","getElementsByTagName","documentElement","outerHTML","readyState","innerHTML","functionToString","postfix","random","replacement","feature","detection","normalize","POLYFILL","NATIVE","toLowerCase","runtime","Op","hasOwn","$Symbol","iteratorSymbol","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","innerFn","outerFn","tryLocsList","protoGenerator","Generator","generator","Context","_invoke","makeInvokeMethod","tryCatch","arg","GenStateSuspendedStart","GenStateSuspendedYield","GenStateExecuting","GenStateCompleted","ContinueSentinel","GeneratorFunction","GeneratorFunctionPrototype","getProto","NativeIteratorPrototype","Gp","defineIteratorMethods","AsyncIterator","PromiseImpl","invoke","resolve","reject","record","__await","then","unwrapped","previousPromise","enqueue","callInvokeWithMethodAndArg","doneResult","delegate","delegateResult","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","info","resultName","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","iteratorMethod","isNaN","displayName","isGeneratorFunction","genFun","ctor","mark","awrap","async","Promise","iter","pop","skipTempReset","prev","rootEntry","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","thrown","delegateYield","regeneratorRuntime","accidentalStrictMode","returnMethod","nativeDefineProperty","Attributes","toCollection","arr","collection","_mapMethod","methodName","prot","sx","sy","rad","cos","m11","m12","m21","m22","matrix","dx","dy","m0","m1","m2","m3","m4","m5","yt","xt","delta","sqrt","acos","_getRotation","OBJECT_ARRAY","OBJECT_NUMBER","OBJECT_STRING","OBJECT_BOOLEAN","PI_OVER_DEG180","DEG180_OVER_PI","EMPTY_STRING","ZERO","KONVA_WARNING","KONVA_ERROR","RGB_PAREN","COLORS","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","transparent","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","RGB_REGEX","animQueue","_isElement","isFinite","firstChar","toUpperCase","_sign","number","requestAnimFrame","requestAnimationFrame","cb","createImageElement","_isInDocument","_simplifyArray","retArr","util","imageObj","glob","Image","onload","_hexToRgb","hex","bigint","parseInt","getRandomColor","randColor","def","getRGB","color","rgb","substring","_namedColorToRBA","_hex3ColorToRGBA","_hex6ColorToRGBA","_rgbColorToRGBA","_rgbaColorToRGBA","_hslColorToRGBA","map","Number","hsl","h","t2","t3","t1","haveIntersection","r1","r2","retObj","cloneArray","_degToRad","deg","_radToDeg","radians","angleDeg","showWarnings","extend","Ctor","oldProto","__super__","super","_getControlPoints","x0","y0","x1","y1","x2","y2","d01","d12","fa","fb","p1x","p1y","p2x","p2y","_expandPoints","tension","cp","allPoints","_inRange","left","right","_getProjectionToSegment","x3","y3","dist","pd2","u","_getProjectionToLine","pt","isClosed","pc","MAX_VALUE","p1","p2","proj","px","py","pdist","startArray","endArray","newStart","pr","desc","visitedByCircularReferenceRemoval","_assign","_getFirstPointerId","touches","changedTouches","identifier","inheritIfRequired","NUMBER","NativeNumber","NumberPrototype","BROKEN_CLASSOF","toNumber","third","radix","maxCode","digits","code","NaN","NumberWrapper","valueOf","j","thrower","ACCESSORS","argument0","argument1","PrototypeOfArrayIteratorPrototype","arrayIterator","TO_STRING_TAG_SUPPORT","flush","head","last","notify","toggle","promise","macrotask","MutationObserver","WebKitMutationObserver","IS_NODE","queueMicrotaskDescriptor","queueMicrotask","exit","enter","createTextNode","observe","characterData","task","shared","uid","NATIVE_SYMBOL","USE_SYMBOL_AS_UID","WellKnownSymbolsStore","createWellKnownSymbol","withoutSetter","IndexedObject","arraySpeciesCreate","IS_MAP","IS_FILTER","IS_SOME","IS_EVERY","IS_FIND_INDEX","NO_HOLES","callbackfn","specificCreate","some","every","find","findIndex","input","PREFERRED_STRING","COMMA","OPEN_PAREN","CLOSE_PAREN","OPEN_PAREN_BRACKET","CLOSE_BRACKET_PAREN","SEMICOLON","DOUBLE_PAREN","EQUALS","CONTEXT_METHODS","CONTEXT_PROPERTIES","traceArrMax","enableTrace","traceArr","_enableTrace","fillShape","fillEnabled","_fill","strokeShape","hasStroke","_stroke","getTrace","relaxed","trace","clearTrace","_trace","shift","getPixelRatio","setTransform","clearRect","_applyLineCap","lineCap","getLineCap","_applyLineJoin","lineJoin","getLineJoin","a0","a1","a2","a3","a4","a5","arcTo","bezierCurveTo","clip","createImageData","createLinearGradient","createPattern","createRadialGradient","a6","a7","a8","ellipse","isPointInPath","fillRect","strokeRect","quadraticCurveTo","setLineDash","getLineDash","origSetter","ret","origMethod","globalCompositeOperation","getGlobalCompositeOperation","SceneContext","_fillColor","_fillPattern","fillPatternX","getFillPatternX","fillPatternY","getFillPatternY","fillPatternRotation","getFillPatternRotation","fillPatternOffsetX","getFillPatternOffsetX","fillPatternOffsetY","getFillPatternOffsetY","fillPatternScaleX","getFillPatternScaleX","fillPatternScaleY","getFillPatternScaleY","_getFillPattern","_fillLinearGradient","grd","_getLinearGradient","_fillRadialGradient","_getRadialGradient","hasColor","fillPriority","getFillPriority","hasPattern","getFillPatternImage","hasLinearGradient","getFillLinearGradientColorStops","hasRadialGradient","getFillRadialGradientColorStops","_strokeLinearGradient","getStrokeLinearGradientStartPoint","getStrokeLinearGradientEndPoint","colorStops","getStrokeLinearGradientColorStops","addColorStop","dash","strokeScaleEnabled","dashEnabled","dashOffset","strokeWidth","getShadowForStrokeEnabled","_applyShadow","getShadowRGBA","blur","getShadowBlur","getShadowOffset","HitContext","_fillFuncHit","hasHitStroke","hitStrokeWidth","_strokeFuncHit","SHARED","window","EXISTS","newPromiseCapability","promiseCapability","path","variable","namespace","nativePropertyIsEnumerable","NASHORN_BUG","1","V","aPossiblePrototype","setter","CORRECT_SETTER","TAG","_waitingForDraw","_checkVisibility","_setSmoothEnabled","createPNGStream","insertBefore","moved","_applyTransform","PI_OVER_180","detectBrowser","_detectIE","ua","msie","trident","rv","edge","_parseUA","mobile","ieMobile","browser","WorkerGlobalScope","isBrowser","param","dblClickWindow","angle","_pointerEventsEnabled","hitOnDragEnabled","captureTouchEventsEnabled","listenClickTap","inDblClickWindow","isDragReady","navigator","_injectGlobal","NodeClass","$map","arrayMethodHasSpeciesSupport","arrayMethodUsesToLength","HAS_SPECIES_SUPPORT","USES_TO_LENGTH","check","globalThis","DOMIterables","ArrayIteratorMethods","ArrayValues","COLLECTION_NAME","CollectionPrototype","flag","justDragged","_drag","setPointersPositions","distance","drawNode","CORRECT_PROTOTYPE_GETTER","ObjectPrototype","addToUnscopables","ARRAY_ITERATOR","kind","Arguments","Internal","OwnPromiseCapability","PromiseWrapper","nativeThen","NativePromise","redefineAll","setSpecies","anInstance","checkCorrectnessOfIteration","speciesConstructor","microtask","promiseResolve","hostReportErrors","newPromiseCapabilityModule","perform","PROMISE","getInternalPromiseState","PromiseConstructor","$fetch","newGenericPromiseCapability","DISPATCH_EVENT","UNHANDLED_REJECTION","REJECTION_HANDLED","PENDING","FULFILLED","REJECTED","HANDLED","UNHANDLED","GLOBAL_CORE_JS_PROMISE","PromiseRejectionEvent","FakePromise","INCORRECT_ITERATION","all","isThenable","isReject","notified","chain","reactions","ok","exited","reaction","fail","rejection","onHandleUnhandled","onUnhandled","reason","initEvent","IS_UNHANDLED","isUnhandled","emit","unwrap","internalReject","internalResolve","wrapper","executor","onFulfilled","onRejected","fetch","capability","$promiseResolve","remaining","alreadyCalled","race","ownKeys","getOwnPropertyDescriptorModule","filterFunc","results","removeChildren","destroyChildren","_i","_children","_generalFind","findOne","_descendants","valid","getAllIntersections","intersects","caching","_drawChildren","drawMethod","skipBuffer","skipComposition","clipX","clipY","clipWidth","clipHeight","clipFunc","hasClip","hasComposition","layerUnderDrag","dragSkip","selfRect","Infinity","skipShadow","skipStroke","hasVisible","PointerEvents","STRING","PX","MOUSEOUT","MOUSEOVER","MOUSEMOVE","MOUSEDOWN","MOUSEUP","POINTERMOVE","POINTERDOWN","POINTERUP","POINTERCANCEL","LOSTPOINTERCAPTURE","CONTEXTMENU","CLICK","DBL_CLICK","TOUCHSTART","TOUCHEND","TAP","DBL_TAP","TOUCHMOVE","WHEEL","CONTENT_MOUSEOUT","CONTENT_MOUSEOVER","CONTENT_MOUSEMOVE","CONTENT_MOUSEDOWN","CONTENT_MOUSEUP","CONTENT_CONTEXTMENU","CONTENT_CLICK","CONTENT_DBL_CLICK","CONTENT_TOUCHSTART","CONTENT_TOUCHEND","CONTENT_DBL_TAP","CONTENT_TAP","CONTENT_TOUCHMOVE","CONTENT_WHEEL","RELATIVE","KONVA_CONTENT","UNDERSCORE","CONTAINER","MAX_LAYERS_NUMBER","EVENTS","eventsLength","addEvent","ctx","eventName","NO_POINTERS_MESSAGE","checkNoClip","stages","Stage","_pointerPositions","_buildDOM","_bindContentEvents","_resizeDOM","isLayer","isFastLayer","setContainer","getElementsByClassName","getElementById","parentElement","getPointerPosition","getPointersPositions","getContent","layerCanvas","bufferCanvas","bufferHitCanvas","_mouseenter","_mouseover","_mouseout","targetShape","eventsEnabled","pointerPos","_mousemove","_touchmove","differentTarget","cancelable","preventDefault","_mousedown","_touchstart","clickStartShape","_mouseup","_touchend","clickEndShape","fireDblClick","clearTimeout","dblTimeout","_contextmenu","triggeredOnShape","hasShape","tapStartShape","processedShapesIds","tapTriggered","dblTapTriggered","_wheel","_pointerdown","_pointermove","_pointerup","_pointercancel","_lostpointercapture","contentPosition","_getContentPosition","touch","clientX","clientY","_setPointerPosition","getBoundingClientRect","clientWidth","clientHeight","userSelect","setAttribute","performance","animIdCounter","frame","time","timeDiff","lastTime","frameRate","setLayers","lays","addLayer","isRunning","animations","_addAnimation","_removeAnimation","_updateFrameObject","_handleAnimation","_runFrames","layersLen","needRedraw","layerHash","_animationLoop","Anim","animRunning","PromiseCapability","$$resolve","$$reject","GET","validator","after","addGetter","addSetter","addOverloadedGetterSetter","capitalize","basicValidator","capitalizedAttr","addDeprecatedGetterSetter","oldMethodName","newMethodName","oldGetter","oldSetter","deprecated","afterSetFilter","classofRaw","CORRECT_ARGUMENTS","tryGet","tag","callee","_pixelRatio","Context_1","getDevicePixelRatio","devicePixelRatio","backingStoreRatio","webkitBackingStorePixelRatio","mozBackingStorePixelRatio","msBackingStorePixelRatio","oBackingStorePixelRatio","backingStorePixelRatio","Canvas","margin","border","background","setPixelRatio","previousRatio","render","_vm","_h","$createElement","_c","_self","ref","staticClass","staticStyle","staticRenderFns","asyncGeneratorStep","gen","_next","_throw","_asyncToGenerator","_classCallCheck","instance","_defineProperties","props","_createClass","protoProps","staticProps","_setPrototypeOf","_inherits","subClass","superClass","_getPrototypeOf","_isNativeReflectConstruct","Reflect","construct","Proxy","_typeof","_assertThisInitialized","ReferenceError","_possibleConstructorReturn","_createSuper","Derived","hasNativeReflectConstruct","Super","__decorate","decorators","decorate","_defineProperty","_toConsumableArray","_arrayWithoutHoles","_iterableToArray","_nonIterableSpread","arr2","reflectionIsSupported","defineMetadata","getOwnMetadataKeys","copyReflectionMetadata","forwardMetadata","propertyKey","metaKeys","metaKey","getOwnMetadata","fakeArray","hasProto","createDecorator","__decorators__","isPrimitive","collectDataFromConstructor","vm","Component","originalInit","_init","$options","plainData","$internalHooks","componentFactory","_componentTag","mixins","computed","superProto","Extended","forwardStaticMembers","shouldIgnore","caller","Original","extendedDescriptor","superDescriptor","registerHooks","reflectMetadataIsSupported","getMetadata","applyMetadata","Prop","componentOptions","k","Ref","refKey","$refs","SPEED","innerRingLayer","innerPrizes","rotateAngle","speed","slowDown","checkedIndex","running","slowDownTurns","dotAngle","dotCount","borderWidth","dotRadius","dotColors","shadowBlur","shadowColor","fanneAngle","count","startAngle","endAngle","icon","fanneColors","sceneFunc","textBaseline","fillStyle","textY","iconHeight","iconWidth","outerRing","btnSize","innerRing","btnSceneFunc","cursor","onLuckDraw","prizes","onerror","turnsNum","$emit","handleInnerRingAnimation","$nextTick","outerRingLayer","drawOutRing","handleInnerPrizes","drawInnerRing","drawBtn","required","default","normalizeComponent","scriptExports","functionalTemplate","injectStyles","scopeId","moduleIdentifier","shadowMode","hook","_compiled","functional","_scopeId","$vnode","ssrContext","__VUE_SSR_CONTEXT__","_registeredComponents","_ssrRegister","$root","shadowRoot","_injectStyles","originalRender","existing","beforeCreate","install","Vue","HAS_SHADOW","SHADOW_RGBA","patternImage","linearGradient","radialGradient","_clearHasShadowCache","_clearGetShadowRGBACache","_clearFillPatternCache","_clearLinearGradientCache","_clearRadialGradientCache","getSceneFunc","getHitFunc","hitFunc","hasShadow","_hasShadow","shadowEnabled","shadowOpacity","shadowOffsetX","shadowOffsetY","__getFillPattern","pattern","fillPatternRepeat","__getLinearGradient","fillLinearGradientStartPoint","fillLinearGradientEndPoint","__getRadialGradient","fillRadialGradientStartPoint","fillRadialGradientEndPoint","fillRadialGradientStartRadius","fillRadialGradientEndRadius","_getShadowRGBA","rgba","hasFill","strokeEnabled","strokeLinearGradientColorStops","_useBufferCanvas","perfectDrawEnabled","setStrokeHitEnabled","getStrokeHitEnabled","getSelfRect","applyStroke","fillAndStrokeWidth","fillAndStrokeHeight","applyShadow","preWidth","preHeight","blurRadius","roundingOffset","bufferContext","drawFunc","shadowForStrokeEnabled","log","drawHitFromCache","alphaThreshold","hitImageData","hitData","rgbColorKey","alpha","hitWidth","hitHeight","dashArray","getDashArray","setDashArray","getDrawFunc","setDrawFunc","drawHitFunc","getDrawHitFunc","setDrawHitFunc","CSSRuleList","CSSStyleDeclaration","CSSValueList","ClientRectList","DOMRectList","DOMStringList","DOMTokenList","DataTransferItemList","FileList","HTMLAllCollection","HTMLCollection","HTMLFormElement","HTMLSelectElement","MediaList","MimeTypeArray","NamedNodeMap","NodeList","PaintRequestList","Plugin","PluginArray","SVGLengthList","SVGNumberList","SVGPathSegList","SVGPointList","SVGStringList","SVGTransformList","SourceBufferList","StyleSheetList","TextTrackCueList","TextTrackList","TouchList"],"mappings":"CAAA,SAA2CA,EAAMC,GAC1B,kBAAZC,SAA0C,kBAAXC,OACxCA,OAAOD,QAAUD,EAAQG,QAAQ,QACR,oBAAXC,QAAyBA,OAAOC,IAC9CD,OAAO,GAAIJ,GACe,kBAAZC,QACdA,QAAQ,YAAcD,EAAQG,QAAQ,QAEtCJ,EAAK,YAAcC,EAAQD,EAAK,SARlC,CASoB,qBAATO,KAAuBA,KAAOC,MAAO,SAASC,GACzD,O,YCTE,IAAIC,EAAmB,GAGvB,SAASC,EAAoBC,GAG5B,GAAGF,EAAiBE,GACnB,OAAOF,EAAiBE,GAAUV,QAGnC,IAAIC,EAASO,EAAiBE,GAAY,CACzCC,EAAGD,EACHE,GAAG,EACHZ,QAAS,IAUV,OANAa,EAAQH,GAAUI,KAAKb,EAAOD,QAASC,EAAQA,EAAOD,QAASS,GAG/DR,EAAOW,GAAI,EAGJX,EAAOD,QA0Df,OArDAS,EAAoBM,EAAIF,EAGxBJ,EAAoBO,EAAIR,EAGxBC,EAAoBQ,EAAI,SAASjB,EAASkB,EAAMC,GAC3CV,EAAoBW,EAAEpB,EAASkB,IAClCG,OAAOC,eAAetB,EAASkB,EAAM,CAAEK,YAAY,EAAMC,IAAKL,KAKhEV,EAAoBgB,EAAI,SAASzB,GACX,qBAAX0B,QAA0BA,OAAOC,aAC1CN,OAAOC,eAAetB,EAAS0B,OAAOC,YAAa,CAAEC,MAAO,WAE7DP,OAAOC,eAAetB,EAAS,aAAc,CAAE4B,OAAO,KAQvDnB,EAAoBoB,EAAI,SAASD,EAAOE,GAEvC,GADU,EAAPA,IAAUF,EAAQnB,EAAoBmB,IAC/B,EAAPE,EAAU,OAAOF,EACpB,GAAW,EAAPE,GAA8B,kBAAVF,GAAsBA,GAASA,EAAMG,WAAY,OAAOH,EAChF,IAAII,EAAKX,OAAOY,OAAO,MAGvB,GAFAxB,EAAoBgB,EAAEO,GACtBX,OAAOC,eAAeU,EAAI,UAAW,CAAET,YAAY,EAAMK,MAAOA,IACtD,EAAPE,GAA4B,iBAATF,EAAmB,IAAI,IAAIM,KAAON,EAAOnB,EAAoBQ,EAAEe,EAAIE,EAAK,SAASA,GAAO,OAAON,EAAMM,IAAQC,KAAK,KAAMD,IAC9I,OAAOF,GAIRvB,EAAoB2B,EAAI,SAASnC,GAChC,IAAIkB,EAASlB,GAAUA,EAAO8B,WAC7B,WAAwB,OAAO9B,EAAO,YACtC,WAA8B,OAAOA,GAEtC,OADAQ,EAAoBQ,EAAEE,EAAQ,IAAKA,GAC5BA,GAIRV,EAAoBW,EAAI,SAASiB,EAAQC,GAAY,OAAOjB,OAAOkB,UAAUC,eAAe1B,KAAKuB,EAAQC,IAGzG7B,EAAoBgC,EAAI,GAIjBhC,EAAoBA,EAAoBiC,EAAI,Q,yBClFrD,IAAIC,EAAkB,EAAQ,QAE1BC,EAAgBD,EAAgB,eAChCE,EAAO,GAEXA,EAAKD,GAAiB,IAEtB3C,EAAOD,QAA2B,eAAjB8C,OAAOD,I,uBCPxB,IAAIE,EAAY,EAAQ,QAGxB9C,EAAOD,QAAU,SAAUgD,EAAIC,EAAMC,GAEnC,GADAH,EAAUC,QACGG,IAATF,EAAoB,OAAOD,EAC/B,OAAQE,GACN,KAAK,EAAG,OAAO,WACb,OAAOF,EAAGlC,KAAKmC,IAEjB,KAAK,EAAG,OAAO,SAAUG,GACvB,OAAOJ,EAAGlC,KAAKmC,EAAMG,IAEvB,KAAK,EAAG,OAAO,SAAUA,EAAGC,GAC1B,OAAOL,EAAGlC,KAAKmC,EAAMG,EAAGC,IAE1B,KAAK,EAAG,OAAO,SAAUD,EAAGC,EAAGrC,GAC7B,OAAOgC,EAAGlC,KAAKmC,EAAMG,EAAGC,EAAGrC,IAG/B,OAAO,WACL,OAAOgC,EAAGM,MAAML,EAAMM,c,uBCrB1B,IAAIC,EAAc,EAAQ,QACtBC,EAA6B,EAAQ,QACrCC,EAA2B,EAAQ,QACnCC,EAAkB,EAAQ,QAC1BC,EAAc,EAAQ,QACtBC,EAAM,EAAQ,QACdC,EAAiB,EAAQ,QAEzBC,EAAiC1C,OAAO2C,yBAI5ChE,EAAQiE,EAAIT,EAAcO,EAAiC,SAAkCG,EAAGC,GAG9F,GAFAD,EAAIP,EAAgBO,GACpBC,EAAIP,EAAYO,GAAG,GACfL,EAAgB,IAClB,OAAOC,EAA+BG,EAAGC,GACzC,MAAOC,IACT,GAAIP,EAAIK,EAAGC,GAAI,OAAOT,GAA0BD,EAA2BQ,EAAEnD,KAAKoD,EAAGC,GAAID,EAAEC,M,oCCjB7F9C,OAAOC,eAAetB,EAAS,aAAc,CAAE4B,OAAO,IACtD,IAAIyC,EAAS,EAAQ,QACjBC,EAAc,EAAQ,QACtBC,EAAS,EAAQ,QACjBC,EAAW,EAAQ,QACnBC,EAAY,CACZC,KAAM,EACNC,SAAU,EACVC,OAAQ,EACRC,SAAU,EACVC,KAAM,GACPC,EAAS,EAAGC,EAAU,EAAGC,EAAY,EAAGC,EAAY,EAAGC,EAAa,CAAC,OAAQ,SAAU,eACtFC,EAAe,WACf,SAASA,EAAYC,EAAMC,EAAUC,EAAMC,EAAOC,EAAQd,EAAUG,GAChExE,KAAK+E,KAAOA,EACZ/E,KAAKgF,SAAWA,EAChBhF,KAAKkF,MAAQA,EACblF,KAAKoF,KAAOF,EACZlF,KAAKqE,SAAWA,EAChBrE,KAAKqF,QAAU,EACfrF,KAAKsF,QAAU,EACftF,KAAKwE,KAAOA,EACZxE,KAAKuF,MAAQ,EACbvF,KAAKwF,UAAY,EACjBxF,KAAKyF,WAAa,EAClBzF,KAAK0F,QAAU,EACf1F,KAAKiF,KAAOA,EACZjF,KAAKqF,QAAUF,EAASnF,KAAKkF,MAC7BlF,KAAK2F,QAgGT,OA9FAb,EAAY7C,UAAU2D,KAAO,SAAUC,GACnC,IAAIC,EAAU9F,KAAK6F,GACfC,GACAA,KAGRhB,EAAY7C,UAAU8D,QAAU,SAAUxE,GAClCA,EAAIvB,KAAKqE,SACLrE,KAAKwE,MACLxE,KAAKuF,MAAQvF,KAAKqE,SAClBrE,KAAKgG,WAGLhG,KAAKmF,SAGJ5D,EAAI,EACLvB,KAAKwE,MACLxE,KAAKuF,MAAQ,EACbvF,KAAKiG,QAGLjG,KAAKkG,SAITlG,KAAKuF,MAAQhE,EACbvB,KAAKmG,WAGbrB,EAAY7C,UAAUmE,QAAU,WAC5B,OAAOpG,KAAKuF,OAEhBT,EAAY7C,UAAUoE,YAAc,SAAUlE,GAC1CnC,KAAKsF,QAAUtF,KAAKoF,KACpBpF,KAAKgF,SAAS7C,GACdnC,KAAKoF,KAAOjD,GAEhB2C,EAAY7C,UAAUqE,YAAc,SAAU/E,GAI1C,YAHUsB,IAANtB,IACAA,EAAIvB,KAAKuF,OAENvF,KAAKiF,KAAK1D,EAAGvB,KAAKkF,MAAOlF,KAAKqF,QAASrF,KAAKqE,WAEvDS,EAAY7C,UAAUgE,KAAO,WACzBjG,KAAKuG,MAAQ7B,EACb1E,KAAKyF,WAAazF,KAAKwG,WAAaxG,KAAKuF,MACzCvF,KAAKyG,eACLzG,KAAK4F,KAAK,WAEdd,EAAY7C,UAAU+D,QAAU,WAC5BhG,KAAKuG,MAAQ5B,EACb3E,KAAKuF,MAAQvF,KAAKqE,SAAWrE,KAAKuF,MAClCvF,KAAKyF,WAAazF,KAAKwG,WAAaxG,KAAKuF,MACzCvF,KAAKyG,eACLzG,KAAK4F,KAAK,cAEdd,EAAY7C,UAAUyE,KAAO,SAAUnF,GACnCvB,KAAK2F,QACL3F,KAAKuF,MAAQhE,EACbvB,KAAKmG,SACLnG,KAAK4F,KAAK,WAEdd,EAAY7C,UAAUiE,MAAQ,WAC1BlG,KAAK2F,QACL3F,KAAKuF,MAAQ,EACbvF,KAAKmG,SACLnG,KAAK4F,KAAK,YAEdd,EAAY7C,UAAUkD,OAAS,WAC3BnF,KAAK2F,QACL3F,KAAKuF,MAAQvF,KAAKqE,SAClBrE,KAAKmG,SACLnG,KAAK4F,KAAK,aAEdd,EAAY7C,UAAUkE,OAAS,WAC3BnG,KAAKqG,YAAYrG,KAAKsG,YAAYtG,KAAKuF,SAE3CT,EAAY7C,UAAUwE,aAAe,WACjC,IAAIlF,EAAIvB,KAAKwG,WAAaxG,KAAKyF,WAC3BzF,KAAKuG,QAAU7B,EACf1E,KAAK+F,QAAQxE,GAERvB,KAAKuG,QAAU5B,GACpB3E,KAAK+F,QAAQ/F,KAAKqE,SAAW9C,IAGrCuD,EAAY7C,UAAU0D,MAAQ,WAC1B3F,KAAKuG,MAAQ9B,EACbzE,KAAK4F,KAAK,YAEdd,EAAY7C,UAAUuE,SAAW,WAC7B,OAAO,IAAIG,MAAOP,WAEftB,EAhHO,GAkHd8B,EAAS,WACT,SAASA,EAAMC,GACX,IAAwDxC,EAAkFzC,EAAtIe,EAAO3C,KAAMoE,EAAOyC,EAAOzC,KAAM0C,EAAS1C,EAAK2C,IAAezC,EAASuC,EAAOvC,QAAU5E,EAAQsH,QAAQC,OAAQzC,IAASqC,EAAOrC,KAEhIH,EAD2B,qBAApBwC,EAAOxC,SACH,GAEc,IAApBwC,EAAOxC,SACD,KAGAwC,EAAOxC,SAEtBrE,KAAKoE,KAAOA,EACZpE,KAAK+G,IAAMnC,IACX,IAAIsC,EAAS9C,EAAK+C,aACb/C,aAAgBF,EAASkD,MAAM,SAAWhD,EAAKiD,YAAc,MAoBlE,IAAKzF,KAnBAsF,GACDnD,EAAOuD,KAAKxD,MAAM,2FAEtB9D,KAAKuH,KAAO,IAAIvD,EAAYwD,WAAU,WAClC7E,EAAK8E,MAAMhB,iBACZS,GACHlH,KAAKyH,MAAQ,IAAI3C,EAAYlD,GAAK,SAAUvB,GACxCsC,EAAK+E,WAAWrH,KACjBiE,EAAQ,EAAG,EAAc,IAAXD,EAAiBG,GAClCxE,KAAK2H,gBACAf,EAAMgB,MAAMd,KACbF,EAAMgB,MAAMd,GAAU,IAErBF,EAAMgB,MAAMd,GAAQ9G,KAAK+G,OAC1BH,EAAMgB,MAAMd,GAAQ9G,KAAK+G,KAAO,IAE/BH,EAAMiB,OAAOf,KACdF,EAAMiB,OAAOf,GAAU,IAEfD,OACehE,IAAnBsB,EAAUvC,IACV5B,KAAK8H,SAASlG,EAAKiF,EAAOjF,IAGlC5B,KAAKkG,QACLlG,KAAKuE,SAAWsC,EAAOtC,SACvBvE,KAAK+H,QAAUlB,EAAOkB,QA0L1B,OAxLAnB,EAAM3E,UAAU6F,SAAW,SAAUlG,EAAKoG,GACtC,IAAyCC,EAAOC,EAAMC,EAASrG,EAAGsG,EAAKC,EAASC,EAAWC,EAAvFnE,EAAOpE,KAAKoE,KAAM0C,EAAS1C,EAAK2C,IAMpC,GALAoB,EAAUvB,EAAMiB,OAAOf,GAAQlF,GAC3BuG,UACOvB,EAAMgB,MAAMd,GAAQqB,GAASvG,GAExCqG,EAAQ7D,EAAKoE,QAAQ5G,GACjBmC,EAAOuD,KAAKmB,SAAST,GAarB,GAZAE,EAAO,GACPE,EAAMM,KAAKC,IAAIX,EAAIpF,OAAQqF,EAAMrF,QACrB,WAARhB,GAAoBoG,EAAIpF,SAAWqF,EAAMrF,SACrCoF,EAAIpF,OAASqF,EAAMrF,QACnB0F,EAAYL,EACZA,EAAQlE,EAAOuD,KAAKsB,sBAAsBX,EAAOD,EAAK5D,EAAKyE,YAG3DR,EAAUL,EACVA,EAAMjE,EAAOuD,KAAKsB,sBAAsBZ,EAAKC,EAAO7D,EAAKyE,YAGrC,IAAxBjH,EAAIkH,QAAQ,QACZ,IAAKhH,EAAI,EAAGA,EAAIsG,EAAKtG,IACjB,GAAIA,EAAI,IAAM,EACVoG,EAAKa,KAAKf,EAAIlG,GAAKmG,EAAMnG,QAExB,CACD,IAAIkH,EAAYjF,EAAOuD,KAAK2B,YAAYhB,EAAMnG,IAC9CyG,EAAUxE,EAAOuD,KAAK2B,YAAYjB,EAAIlG,IACtCmG,EAAMnG,GAAKkH,EACXd,EAAKa,KAAK,CACN5H,EAAGoH,EAAQpH,EAAI6H,EAAU7H,EACzB+H,EAAGX,EAAQW,EAAIF,EAAUE,EACzBnG,EAAGwF,EAAQxF,EAAIiG,EAAUjG,EACzBD,EAAGyF,EAAQzF,EAAIkG,EAAUlG,SAMrC,IAAKhB,EAAI,EAAGA,EAAIsG,EAAKtG,IACjBoG,EAAKa,KAAKf,EAAIlG,GAAKmG,EAAMnG,SAIC,IAA7B+C,EAAWiE,QAAQlH,IACxBqG,EAAQlE,EAAOuD,KAAK2B,YAAYhB,GAChCM,EAAUxE,EAAOuD,KAAK2B,YAAYjB,GAClCE,EAAO,CACH/G,EAAGoH,EAAQpH,EAAI8G,EAAM9G,EACrB+H,EAAGX,EAAQW,EAAIjB,EAAMiB,EACrBnG,EAAGwF,EAAQxF,EAAIkF,EAAMlF,EACrBD,EAAGyF,EAAQzF,EAAImF,EAAMnF,IAIzBoF,EAAOF,EAAMC,EAEjBrB,EAAMgB,MAAMd,GAAQ9G,KAAK+G,KAAKnF,GAAO,CACjCqG,MAAOA,EACPC,KAAMA,EACNF,IAAKA,EACLK,QAASA,EACTC,UAAWA,GAEf1B,EAAMiB,OAAOf,GAAQlF,GAAO5B,KAAK+G,KAErCH,EAAM3E,UAAUyF,WAAa,SAAUrH,GACnC,IAA+DuB,EAAKuH,EAAMlB,EAAOC,EAAMkB,EAAQtH,EAAGsG,EAAKJ,EAAnG5D,EAAOpE,KAAKoE,KAAMwD,EAAQhB,EAAMgB,MAAMxD,EAAK2C,KAAK/G,KAAK+G,KACzD,IAAKnF,KAAOgG,EAAO,CAKf,GAJAuB,EAAOvB,EAAMhG,GACbqG,EAAQkB,EAAKlB,MACbC,EAAOiB,EAAKjB,KACZF,EAAMmB,EAAKnB,IACPjE,EAAOuD,KAAKmB,SAASR,GAGrB,GAFAmB,EAAS,GACThB,EAAMM,KAAKC,IAAIV,EAAMrF,OAAQoF,EAAIpF,QACL,IAAxBhB,EAAIkH,QAAQ,QACZ,IAAKhH,EAAI,EAAGA,EAAIsG,EAAKtG,IACbA,EAAI,IAAM,EACVsH,EAAOL,MAAMd,EAAMnG,IAAM,GAAKoG,EAAKpG,GAAKzB,GAGxC+I,EAAOL,KAAK,QACRL,KAAKW,MAAMpB,EAAMnG,GAAGX,EAAI+G,EAAKpG,GAAGX,EAAId,GACpC,IACAqI,KAAKW,MAAMpB,EAAMnG,GAAGoH,EAAIhB,EAAKpG,GAAGoH,EAAI7I,GACpC,IACAqI,KAAKW,MAAMpB,EAAMnG,GAAGiB,EAAImF,EAAKpG,GAAGiB,EAAI1C,GACpC,KACC4H,EAAMnG,GAAGgB,EAAIoF,EAAKpG,GAAGgB,EAAIzC,GAC1B,UAKZ,IAAKyB,EAAI,EAAGA,EAAIsG,EAAKtG,IACjBsH,EAAOL,MAAMd,EAAMnG,IAAM,GAAKoG,EAAKpG,GAAKzB,QAKhD+I,GADkC,IAA7BvE,EAAWiE,QAAQlH,GAEpB,QACI8G,KAAKW,MAAMpB,EAAM9G,EAAI+G,EAAK/G,EAAId,GAC9B,IACAqI,KAAKW,MAAMpB,EAAMiB,EAAIhB,EAAKgB,EAAI7I,GAC9B,IACAqI,KAAKW,MAAMpB,EAAMlF,EAAImF,EAAKnF,EAAI1C,GAC9B,KACC4H,EAAMnF,EAAIoF,EAAKpF,EAAIzC,GACpB,IAGC4H,EAAQC,EAAO7H,EAE5B+D,EAAKkF,QAAQ1H,EAAKwH,KAG1BxC,EAAM3E,UAAU0F,cAAgB,WAC5B,IAAI4B,EAAQvJ,KACZA,KAAKyH,MAAM+B,OAAS,WAChBD,EAAMhC,KAAKU,SAEfjI,KAAKyH,MAAMgC,UAAY,WACnBF,EAAMhC,KAAKU,SAEfjI,KAAKyH,MAAMiC,QAAU,WACjBH,EAAMhC,KAAKoC,QAEf3J,KAAKyH,MAAMlD,SAAW,WAClB,IAAIH,EAAOmF,EAAMnF,KACbwD,EAAQhB,EAAMgB,MAAMxD,EAAK2C,KAAKwC,EAAMxC,KACpCa,EAAMgC,QAAUhC,EAAMgC,OAAOvB,SAC7BjE,EAAKkF,QAAQ,SAAU1B,EAAMgC,OAAOvB,SAEpCkB,EAAMhF,UACNgF,EAAMhF,SAAS/D,KAAK+I,IAG5BvJ,KAAKyH,MAAMM,QAAU,WACjB,IAAI3D,EAAOmF,EAAMnF,KACbwD,EAAQhB,EAAMgB,MAAMxD,EAAK2C,KAAKwC,EAAMxC,KACpCa,EAAMgC,QAAUhC,EAAMgC,OAAOtB,WAC7BlE,EAAKwF,OAAOhC,EAAMgC,OAAOtB,WAEzBiB,EAAMxB,SACNwB,EAAMxB,YAIlBnB,EAAM3E,UAAUgE,KAAO,WAEnB,OADAjG,KAAKyH,MAAMxB,OACJjG,MAEX4G,EAAM3E,UAAU+D,QAAU,WAEtB,OADAhG,KAAKyH,MAAMzB,UACJhG,MAEX4G,EAAM3E,UAAUiE,MAAQ,WAEpB,OADAlG,KAAKyH,MAAMvB,QACJlG,MAEX4G,EAAM3E,UAAUyE,KAAO,SAAUnF,GAE7B,OADAvB,KAAKyH,MAAMf,KAAS,IAAJnF,GACTvB,MAEX4G,EAAM3E,UAAU0D,MAAQ,WAEpB,OADA3F,KAAKyH,MAAM9B,QACJ3F,MAEX4G,EAAM3E,UAAUkD,OAAS,WAErB,OADAnF,KAAKyH,MAAMtC,SACJnF,MAEX4G,EAAM3E,UAAU4H,QAAU,WACtB,IAA6EjI,EAAzEkF,EAAS9G,KAAKoE,KAAK2C,IAAK+C,EAAS9J,KAAK+G,IAAKa,EAAQhB,EAAMiB,OAAOf,GAEpE,IAAKlF,KADL5B,KAAK2F,QACOiC,SACDhB,EAAMiB,OAAOf,GAAQlF,UAEzBgF,EAAMgB,MAAMd,GAAQgD,IAE/BlD,EAAMgB,MAAQ,GACdhB,EAAMiB,OAAS,GACRjB,EApOC,GAsOZlH,EAAQkH,MAAQA,EAChB3C,EAAO8F,KAAK9H,UAAU+H,GAAK,SAAUC,GACjC,IAAI1F,EAAW0F,EAAO1F,SACtB0F,EAAO7F,KAAOpE,KACdiK,EAAO1F,SAAW,WACdvE,KAAK6J,UACDtF,GACAA,KAGR,IAAIkD,EAAQ,IAAIb,EAAMqD,GACtBxC,EAAMxB,QAEVvG,EAAQsH,QAAU,CACdkD,WAAY,SAAU3I,EAAGwB,EAAGrC,EAAGC,GAC3B,IAAIyB,EAAI,QACR,OAAO1B,GAAKa,GAAKZ,GAAKY,IAAMa,EAAI,GAAKb,EAAIa,GAAKW,GAElDoH,YAAa,SAAU5I,EAAGwB,EAAGrC,EAAGC,GAC5B,IAAIyB,EAAI,QACR,OAAO1B,IAAMa,EAAIA,EAAIZ,EAAI,GAAKY,IAAMa,EAAI,GAAKb,EAAIa,GAAK,GAAKW,GAE/DqH,cAAe,SAAU7I,EAAGwB,EAAGrC,EAAGC,GAC9B,IAAIyB,EAAI,QACR,OAAKb,GAAKZ,EAAI,GAAK,EACPD,EAAI,GAAMa,EAAIA,IAAqB,GAAda,GAAK,QAAcb,EAAIa,IAAMW,EAEtDrC,EAAI,IAAOa,GAAK,GAAKA,IAAqB,GAAda,GAAK,QAAcb,EAAIa,GAAK,GAAKW,GAEzEsH,cAAe,SAAU9I,EAAGwB,EAAGrC,EAAGC,EAAGmC,EAAGX,GACpC,IAAIC,EAAI,EACR,OAAU,IAANb,EACOwB,EAEM,KAAZxB,GAAKZ,GACCoC,EAAIrC,GAEVyB,IACDA,EAAQ,GAAJxB,IAEHmC,GAAKA,EAAI4F,KAAK4B,IAAI5J,IACnBoC,EAAIpC,EACJ0B,EAAID,EAAI,GAGRC,EAAKD,GAAK,EAAIuG,KAAK6B,IAAO7B,KAAK8B,KAAK9J,EAAIoC,IAElCA,EACN4F,KAAK+B,IAAI,EAAG,IAAMlJ,GAAK,IACvBmH,KAAKgC,KAAMnJ,EAAIZ,EAAIyB,IAAM,EAAIsG,KAAK6B,IAAOpI,GAAMY,IAEvD4H,eAAgB,SAAUpJ,EAAGwB,EAAGrC,EAAGC,EAAGmC,EAAGX,GACrC,IAAIC,EAAI,EACR,OAAU,IAANb,EACOwB,EAEM,KAAZxB,GAAKZ,GACCoC,EAAIrC,GAEVyB,IACDA,EAAQ,GAAJxB,IAEHmC,GAAKA,EAAI4F,KAAK4B,IAAI5J,IACnBoC,EAAIpC,EACJ0B,EAAID,EAAI,GAGRC,EAAKD,GAAK,EAAIuG,KAAK6B,IAAO7B,KAAK8B,KAAK9J,EAAIoC,GAEpCA,EAAI4F,KAAK+B,IAAI,GAAI,GAAKlJ,GAAKmH,KAAKgC,KAAMnJ,EAAIZ,EAAIyB,IAAM,EAAIsG,KAAK6B,IAAOpI,GACxEzB,EACAqC,IAER6H,iBAAkB,SAAUrJ,EAAGwB,EAAGrC,EAAGC,EAAGmC,EAAGX,GACvC,IAAIC,EAAI,EACR,OAAU,IAANb,EACOwB,EAEU,KAAhBxB,GAAKZ,EAAI,GACHoC,EAAIrC,GAEVyB,IACDA,EAAIxB,GAAK,GAAM,OAEdmC,GAAKA,EAAI4F,KAAK4B,IAAI5J,IACnBoC,EAAIpC,EACJ0B,EAAID,EAAI,GAGRC,EAAKD,GAAK,EAAIuG,KAAK6B,IAAO7B,KAAK8B,KAAK9J,EAAIoC,GAExCvB,EAAI,EAECuB,EACG4F,KAAK+B,IAAI,EAAG,IAAMlJ,GAAK,IACvBmH,KAAKgC,KAAMnJ,EAAIZ,EAAIyB,IAAM,EAAIsG,KAAK6B,IAAOpI,IAHxC,GAILY,EAEAD,EACJ4F,KAAK+B,IAAI,GAAI,IAAMlJ,GAAK,IACxBmH,KAAKgC,KAAMnJ,EAAIZ,EAAIyB,IAAM,EAAIsG,KAAK6B,IAAOpI,GACzC,GACAzB,EACAqC,IAER8H,cAAe,SAAUtJ,EAAGwB,EAAGrC,EAAGC,GAC9B,OAAKY,GAAKZ,GAAK,EAAI,KACRD,GAAK,OAASa,EAAIA,GAAKwB,EAEzBxB,EAAI,EAAI,KACNb,GAAK,QAAUa,GAAK,IAAM,MAAQA,EAAI,KAAQwB,EAEhDxB,EAAI,IAAM,KACRb,GAAK,QAAUa,GAAK,KAAO,MAAQA,EAAI,OAAUwB,EAGjDrC,GAAK,QAAUa,GAAK,MAAQ,MAAQA,EAAI,SAAYwB,GAGnE+H,aAAc,SAAUvJ,EAAGwB,EAAGrC,EAAGC,GAC7B,OAAOD,EAAIhB,EAAQsH,QAAQ6D,cAAclK,EAAIY,EAAG,EAAGb,EAAGC,GAAKoC,GAE/DgI,gBAAiB,SAAUxJ,EAAGwB,EAAGrC,EAAGC,GAChC,OAAIY,EAAIZ,EAAI,EAC8C,GAA/CjB,EAAQsH,QAAQ8D,aAAiB,EAAJvJ,EAAO,EAAGb,EAAGC,GAAWoC,EAGD,GAApDrD,EAAQsH,QAAQ6D,cAAkB,EAAJtJ,EAAQZ,EAAG,EAAGD,EAAGC,GAAe,GAAJD,EAAUqC,GAGnFiI,OAAQ,SAAUzJ,EAAGwB,EAAGrC,EAAGC,GACvB,OAAOD,GAAKa,GAAKZ,GAAKY,EAAIwB,GAE9BkI,QAAS,SAAU1J,EAAGwB,EAAGrC,EAAGC,GACxB,OAAQD,GAAKa,GAAKZ,IAAMY,EAAI,GAAKwB,GAErCmI,UAAW,SAAU3J,EAAGwB,EAAGrC,EAAGC,GAC1B,OAAKY,GAAKZ,EAAI,GAAK,EACPD,EAAI,EAAKa,EAAIA,EAAIwB,GAEpBrC,EAAI,KAAQa,GAAKA,EAAI,GAAK,GAAKwB,GAE5CoI,aAAc,SAAU5J,EAAGwB,EAAGrC,EAAGC,GAC7B,OAAOD,GAAKa,GAAKZ,GAAKY,EAAIA,EAAIA,EAAIA,EAAIwB,GAE1CqI,cAAe,SAAU7J,EAAGwB,EAAGrC,EAAGC,GAC9B,OAAOD,IAAMa,EAAIA,EAAIZ,EAAI,GAAKY,EAAIA,EAAIA,EAAIA,EAAI,GAAKwB,GAEvDsI,gBAAiB,SAAU9J,EAAGwB,EAAGrC,EAAGC,GAChC,OAAKY,GAAKZ,EAAI,GAAK,EACPD,EAAI,EAAKa,EAAIA,EAAIA,EAAIA,EAAIA,EAAIwB,EAEjCrC,EAAI,IAAOa,GAAK,GAAKA,EAAIA,EAAIA,EAAIA,EAAI,GAAKwB,GAEtDkE,OAAQ,SAAU1F,EAAGwB,EAAGrC,EAAGC,GACvB,OAAQD,EAAIa,EAAKZ,EAAIoC,K,uBChgB7B,IAAIG,EAAc,EAAQ,QACtBoI,EAAQ,EAAQ,QAChBC,EAAgB,EAAQ,QAG5B5L,EAAOD,SAAWwD,IAAgBoI,GAAM,WACtC,OAEQ,GAFDvK,OAAOC,eAAeuK,EAAc,OAAQ,IAAK,CACtDrK,IAAK,WAAc,OAAO,KACzB4B,M,oCCPL,IAAI0I,EAAaxL,MAAQA,KAAKwL,WAAc,WACxC,IAAIC,EAAgB,SAAU9K,EAAGoC,GAI7B,OAHA0I,EAAgB1K,OAAO2K,gBAClB,CAAEC,UAAW,cAAgBC,OAAS,SAAUjL,EAAGoC,GAAKpC,EAAEgL,UAAY5I,IACvE,SAAUpC,EAAGoC,GAAK,IAAK,IAAIZ,KAAKY,EAAOA,EAAEb,eAAeC,KAAIxB,EAAEwB,GAAKY,EAAEZ,KAClEsJ,EAAc9K,EAAGoC,IAE5B,OAAO,SAAUpC,EAAGoC,GAEhB,SAAS8I,IAAO7L,KAAK8L,YAAcnL,EADnC8K,EAAc9K,EAAGoC,GAEjBpC,EAAEsB,UAAkB,OAANc,EAAahC,OAAOY,OAAOoB,IAAM8I,EAAG5J,UAAYc,EAAEd,UAAW,IAAI4J,IAV3C,GAa5C9K,OAAOC,eAAetB,EAAS,aAAc,CAAE4B,OAAO,IACtD,IAAIyC,EAAS,EAAQ,QACjBgI,EAAc,EAAQ,QACtBC,EAAY,EAAQ,QACpBC,EAAc,EAAQ,QACtBC,EAAW,EAAQ,QACnBC,EAAU,EAAQ,QAClBC,EAAe,EAAQ,QACvBlI,EAAW,EAAQ,QACnBmI,EAAO,IAAKC,EAAc,aAAcC,EAAO,OAAQC,EAAuB,CAC9E,CAAEC,EAAG,EAAGC,EAAG,GACX,CAAED,GAAI,EAAGC,GAAI,GACb,CAAED,EAAG,EAAGC,GAAI,GACZ,CAAED,EAAG,EAAGC,EAAG,GACX,CAAED,GAAI,EAAGC,EAAG,IACbC,EAA2BH,EAAqB5J,OAC/CgK,EAAS,SAAUC,GAEnB,SAASD,IACL,IAAIrD,EAAmB,OAAXsD,GAAmBA,EAAO7J,MAAMhD,KAAMiD,YAAcjD,KAIhE,OAHAuJ,EAAMuD,UAAY,IAAIZ,EAASa,UAAU,CACrCC,WAAY,IAETzD,EA2HX,OAjIAiC,EAAUoB,EAAOC,GAQjBD,EAAM3K,UAAUgL,QAAU,SAAUC,GAChC,IAAIC,EAAQD,EAAGC,MAAOC,EAASF,EAAGE,OAGlC,OAFAP,EAAO5K,UAAUgL,QAAQzM,KAAKR,KAAM,CAAEmN,MAAOA,EAAOC,OAAQA,IAC5DpN,KAAK8M,UAAUG,QAAQE,EAAOC,GACvBpN,MAEX4M,EAAM3K,UAAUoL,aAAe,SAAUC,GACrC,IAAIC,EAAOD,EAAME,UACJ,UAATD,GAA6B,UAATA,GACpBxJ,EAAOuD,KAAKmG,MAAM,mDAG1Bb,EAAM3K,UAAUyL,gBAAkB,SAAUC,EAAKC,GAC7C,IAAIC,EAAKxN,EAAGyN,EAAoBC,EAChC,IAAK/N,KAAKgO,oBAAsBhO,KAAKiO,YACjC,OAAO,KAEX,IAAIC,EAAuB,EACvBC,GAAiB,EACrB,MAAO,EAAM,CACT,IAAK9N,EAAI,EAAGA,EAAIsM,EAA0BtM,IAAK,CAO3C,GANAyN,EAAqBtB,EAAqBnM,GAC1CwN,EAAM7N,KAAKoO,iBAAiB,CACxB3B,EAAGkB,EAAIlB,EAAIqB,EAAmBrB,EAAIyB,EAClCxB,EAAGiB,EAAIjB,EAAIoB,EAAmBpB,EAAIwB,IAEtCH,EAAQF,EAAIE,MACRA,GAASH,EACT,OAAOG,EAAMM,aAAaT,GAAU,GAEnC,GAAIG,EACL,OAAOA,EAGX,GADAI,IAAmBN,EAAIS,aAClBT,EAAIS,YACL,MAGR,IAAIH,EAIA,OAAO,KAHPD,GAAwB,IAOpCtB,EAAM3K,UAAUmM,iBAAmB,SAAUT,GACzC,IACyHY,EAAUR,EAD/HS,EAAQxO,KAAK8M,UAAUE,WACvB7K,EAAInC,KAAK8M,UAAU2B,QAAQC,aAAahG,KAAKW,MAAMsE,EAAIlB,EAAI+B,GAAQ9F,KAAKW,MAAMsE,EAAIjB,EAAI8B,GAAQ,EAAG,GAAGG,KAAMC,EAAKzM,EAAE,GACrH,OAAW,MAAPyM,GACAL,EAAWxK,EAAOuD,KAAKuH,UAAU1M,EAAE,GAAIA,EAAE,GAAIA,EAAE,IAC/C4L,EAAQ5B,EAAQ2C,OAAOzC,EAAOkC,GAC1BR,EACO,CACHA,MAAOA,GAGR,CACHO,aAAa,IAGZM,EAAK,EACH,CACHN,aAAa,GAGd,IAEX1B,EAAM3K,UAAU8M,UAAY,SAAUC,EAAKC,GACvC,IAAIC,EAAQlP,KAAKmH,WAAYgI,EAASH,GAAQE,GAASA,EAAME,YAW7D,OAVApP,KAAKqP,MAAM/C,EAAa,CACpBlI,KAAMpE,OAENA,KAAKsP,mBACLH,EAAOI,aAAaC,QAExBzD,EAAY0D,UAAUxN,UAAU8M,UAAUvO,KAAKR,KAAMmP,EAAQF,GAC7DjP,KAAKqP,MAAM9C,EAAM,CACbnI,KAAMpE,OAEHA,MAEX4M,EAAM3K,UAAUyN,QAAU,SAAUV,EAAKC,GACrC,IAAIC,EAAQlP,KAAKmH,WAAYgI,EAASH,GAAQE,GAASA,EAAMpC,UAQ7D,OAPIoC,GAASA,EAAMI,mBACfJ,EACKS,eACAJ,aACAC,QAETzD,EAAY0D,UAAUxN,UAAUyN,QAAQlP,KAAKR,KAAMmP,EAAQF,GACpDjP,MAEX4M,EAAM3K,UAAUuN,MAAQ,SAAUI,GAK9B,OAJA3D,EAAY4D,UAAU5N,UAAUuN,MAAMhP,KAAKR,KAAM4P,GACjD5P,KAAK2P,eACAJ,aACAC,MAAMI,GACJ5P,MAEX4M,EAAM3K,UAAU6N,eAAiB,WAE7B,OADA9P,KAAKgO,iBAAgB,GACdhO,MAEX4M,EAAM3K,UAAU8N,gBAAkB,WAE9B,OADA/P,KAAKgO,iBAAgB,GACdhO,MAEX4M,EAAM3K,UAAU+N,gBAAkB,WAC9B,GAAKhQ,KAAKiQ,OAAV,CAGA,IAAIA,EAASjQ,KAAKiQ,OACdC,IAAUlQ,KAAK8M,UAAUqD,QAAQC,WACjCF,EACAD,EAAOI,QAAQC,YAAYtQ,KAAK8M,UAAUqD,SAG1CF,EAAOI,QAAQE,YAAYvQ,KAAK8M,UAAUqD,WAG3CvD,EAlIC,CAmIVX,EAAY4D,WACdnQ,EAAQkN,MAAQA,EAChBA,EAAM3K,UAAUuO,SAAW,QAC3BtM,EAASuM,cAAc7D,GACvBZ,EAAU0E,QAAQC,gBAAgB/D,EAAO,mBAAmB,EAAMR,EAAawE,uBAC/E7M,EAAO8M,WAAWC,WAAWlE,I,qBCtK7BjN,EAAOD,QAAU,SAAUqR,EAAIC,EAAapQ,GAC1C,KAAMmQ,aAAcC,GAClB,MAAMC,UAAU,cAAgBrQ,EAAOA,EAAO,IAAM,IAAM,cAC1D,OAAOmQ,I,uBCHX,IAAIG,EAAa,EAAQ,QAEzBvR,EAAOD,QAAUwR,EAAW,WAAY,oB,qBCFxCvR,EAAOD,QAAU,SAAUqR,GACzB,GAAiB,mBAANA,EACT,MAAME,UAAUzO,OAAOuO,GAAM,sBAC7B,OAAOA,I,uBCHX,IAAI1O,EAAkB,EAAQ,QAE1B8O,EAAW9O,EAAgB,YAC3B+O,GAAe,EAEnB,IACE,IAAIC,EAAS,EACTC,EAAqB,CACvBC,KAAM,WACJ,MAAO,CAAEC,OAAQH,MAEnB,OAAU,WACRD,GAAe,IAGnBE,EAAmBH,GAAY,WAC7B,OAAOnR,MAGT4L,MAAM6F,KAAKH,GAAoB,WAAc,MAAM,KACnD,MAAOxN,IAETnE,EAAOD,QAAU,SAAUgS,EAAMC,GAC/B,IAAKA,IAAiBP,EAAc,OAAO,EAC3C,IAAIQ,GAAoB,EACxB,IACE,IAAI7P,EAAS,GACbA,EAAOoP,GAAY,WACjB,MAAO,CACLI,KAAM,WACJ,MAAO,CAAEC,KAAMI,GAAoB,MAIzCF,EAAK3P,GACL,MAAO+B,IACT,OAAO8N,I,uBCpCT,IAAIC,EAAY,EAAQ,QAExBlS,EAAOD,QAAU,mCAAmC6C,KAAKsP,I,qBCAzDlS,EAAOD,QAAU,SAAUqR,GACzB,QAAUlO,GAANkO,EAAiB,MAAME,UAAU,wBAA0BF,GAC/D,OAAOA,I,uBCJT,IAAIzF,EAAQ,EAAQ,QAChBjJ,EAAkB,EAAQ,QAC1ByP,EAAa,EAAQ,QAErBC,EAAU1P,EAAgB,WAE9B1C,EAAOD,QAAU,SAAUsS,GAIzB,OAAOF,GAAc,KAAOxG,GAAM,WAChC,IAAI2G,EAAQ,GACRnG,EAAcmG,EAAMnG,YAAc,GAItC,OAHAA,EAAYiG,GAAW,WACrB,MAAO,CAAEG,IAAK,IAE2B,IAApCD,EAAMD,GAAaG,SAASD,S,oCCfvC,IAAI1G,EAAaxL,MAAQA,KAAKwL,WAAc,WACxC,IAAIC,EAAgB,SAAU9K,EAAGoC,GAI7B,OAHA0I,EAAgB1K,OAAO2K,gBAClB,CAAEC,UAAW,cAAgBC,OAAS,SAAUjL,EAAGoC,GAAKpC,EAAEgL,UAAY5I,IACvE,SAAUpC,EAAGoC,GAAK,IAAK,IAAIZ,KAAKY,EAAOA,EAAEb,eAAeC,KAAIxB,EAAEwB,GAAKY,EAAEZ,KAClEsJ,EAAc9K,EAAGoC,IAE5B,OAAO,SAAUpC,EAAGoC,GAEhB,SAAS8I,IAAO7L,KAAK8L,YAAcnL,EADnC8K,EAAc9K,EAAGoC,GAEjBpC,EAAEsB,UAAkB,OAANc,EAAahC,OAAOY,OAAOoB,IAAM8I,EAAG5J,UAAYc,EAAEd,UAAW,IAAI4J,IAV3C,GAa5C9K,OAAOC,eAAetB,EAAS,aAAc,CAAE4B,OAAO,IACtD,IAAIyC,EAAS,EAAQ,QACjBiI,EAAY,EAAQ,QACpBG,EAAU,EAAQ,QAClBC,EAAe,EAAQ,QACvBlI,EAAW,EAAQ,QACnBkO,EAAU,SAAUvF,GAEpB,SAASuF,IACL,OAAkB,OAAXvF,GAAmBA,EAAO7J,MAAMhD,KAAMiD,YAAcjD,KAwB/D,OA1BAwL,EAAU4G,EAAQvF,GAIlBuF,EAAOnQ,UAAUoQ,WAAa,SAAU5D,GACpCA,EAAQ6D,YACR7D,EAAQ8D,IAAI,EAAG,EAAGvS,KAAKwS,SAAU,EAAa,EAAV9J,KAAK6B,IAAQ,GACjDkE,EAAQgE,YACRhE,EAAQiE,gBAAgB1S,OAE5BoS,EAAOnQ,UAAU0Q,SAAW,WACxB,OAAuB,EAAhB3S,KAAKwS,UAEhBJ,EAAOnQ,UAAU2Q,UAAY,WACzB,OAAuB,EAAhB5S,KAAKwS,UAEhBJ,EAAOnQ,UAAU4Q,SAAW,SAAU1F,GAC9BnN,KAAKwS,WAAarF,EAAQ,GAC1BnN,KAAKwS,OAAOrF,EAAQ,IAG5BiF,EAAOnQ,UAAU6Q,UAAY,SAAU1F,GAC/BpN,KAAKwS,WAAapF,EAAS,GAC3BpN,KAAKwS,OAAOpF,EAAS,IAGtBgF,EA3BE,CA4BXjG,EAAQ4G,OACVrT,EAAQ0S,OAASA,EACjBA,EAAOnQ,UAAU+Q,WAAY,EAC7BZ,EAAOnQ,UAAUgR,UAAY,SAC7Bb,EAAOnQ,UAAUiR,oBAAsB,CAAC,UACxChP,EAASuM,cAAc2B,GACvBpG,EAAU0E,QAAQC,gBAAgByB,EAAQ,SAAU,EAAGhG,EAAa+G,sBACpEpP,EAAO8M,WAAWC,WAAWsB,I,qBCvD7B,IAAIgB,EAAW,EAAQ,QACnBC,EAAwB,EAAQ,QAChCC,EAAW,EAAQ,QACnBzR,EAAO,EAAQ,QACf0R,EAAoB,EAAQ,QAC5BC,EAA+B,EAAQ,QAEvCC,EAAS,SAAUC,EAASC,GAC9B3T,KAAK0T,QAAUA,EACf1T,KAAK2T,OAASA,GAGZC,EAAUjU,EAAOD,QAAU,SAAUmU,EAAUnR,EAAIC,EAAMmR,EAAYC,GACvE,IACIC,EAAUC,EAAQC,EAAOtR,EAAQ+Q,EAAQpC,EAAM4C,EAD/CC,EAAgBvS,EAAKa,EAAIC,EAAMmR,EAAa,EAAI,GAGpD,GAAIC,EACFC,EAAWH,MACN,CAEL,GADAI,EAASV,EAAkBM,GACN,mBAAVI,EAAsB,MAAMhD,UAAU,0BAEjD,GAAIoC,EAAsBY,GAAS,CACjC,IAAKC,EAAQ,EAAGtR,EAAS0Q,EAASO,EAASjR,QAASA,EAASsR,EAAOA,IAIlE,GAHAP,EAASG,EACLM,EAAchB,EAASe,EAAON,EAASK,IAAQ,GAAIC,EAAK,IACxDC,EAAcP,EAASK,IACvBP,GAAUA,aAAkBF,EAAQ,OAAOE,EAC/C,OAAO,IAAIF,GAAO,GAEtBO,EAAWC,EAAOzT,KAAKqT,GAGzBtC,EAAOyC,EAASzC,KAChB,QAAS4C,EAAO5C,EAAK/Q,KAAKwT,IAAWxC,KAEnC,GADAmC,EAASH,EAA6BQ,EAAUI,EAAeD,EAAK7S,MAAOwS,GACtD,iBAAVH,GAAsBA,GAAUA,aAAkBF,EAAQ,OAAOE,EAC5E,OAAO,IAAIF,GAAO,IAGtBG,EAAQjK,KAAO,SAAUgK,GACvB,OAAO,IAAIF,GAAO,EAAME,K,uBCzC1B,IAAIU,EAAY,EAAQ,QAEpB1L,EAAMD,KAAKC,IACX2L,EAAM5L,KAAK4L,IAKf3U,EAAOD,QAAU,SAAUwU,EAAOtR,GAChC,IAAI2R,EAAUF,EAAUH,GACxB,OAAOK,EAAU,EAAI5L,EAAI4L,EAAU3R,EAAQ,GAAK0R,EAAIC,EAAS3R,K,uBCV/D,IAAI4R,EAAS,EAAQ,QACjB9Q,EAA2B,EAAQ,QAAmDC,EACtF8Q,EAA8B,EAAQ,QACtCC,EAAW,EAAQ,QACnBC,EAAY,EAAQ,QACpBC,EAA4B,EAAQ,QACpCC,EAAW,EAAQ,QAgBvBlV,EAAOD,QAAU,SAAUoV,EAASC,GAClC,IAGIC,EAAQC,EAAQrT,EAAKsT,EAAgBC,EAAgBC,EAHrDC,EAASP,EAAQG,OACjBK,EAASR,EAAQN,OACjBe,EAAST,EAAQU,KASrB,GANEP,EADEK,EACOd,EACAe,EACAf,EAAOa,IAAWV,EAAUU,EAAQ,KAEnCb,EAAOa,IAAW,IAAIpT,UAE9BgT,EAAQ,IAAKrT,KAAOmT,EAAQ,CAQ9B,GAPAI,EAAiBJ,EAAOnT,GACpBkT,EAAQW,aACVL,EAAa1R,EAAyBuR,EAAQrT,GAC9CsT,EAAiBE,GAAcA,EAAW9T,OACrC4T,EAAiBD,EAAOrT,GAC/BoT,EAASH,EAASS,EAAS1T,EAAMyT,GAAUE,EAAS,IAAM,KAAO3T,EAAKkT,EAAQY,SAEzEV,QAA6BnS,IAAnBqS,EAA8B,CAC3C,UAAWC,WAA0BD,EAAgB,SACrDN,EAA0BO,EAAgBD,IAGxCJ,EAAQa,MAAST,GAAkBA,EAAeS,OACpDlB,EAA4BU,EAAgB,QAAQ,GAGtDT,EAASO,EAAQrT,EAAKuT,EAAgBL,M,uBCnD1C,IAAIc,EAAqB,EAAQ,QAC7BC,EAAc,EAAQ,QAEtBC,EAAaD,EAAYE,OAAO,SAAU,aAI9CrW,EAAQiE,EAAI5C,OAAOiV,qBAAuB,SAA6BpS,GACrE,OAAOgS,EAAmBhS,EAAGkS,K,kCCP/B,IAAI5E,EAAa,EAAQ,QACrB+E,EAAuB,EAAQ,QAC/B5T,EAAkB,EAAQ,QAC1Ba,EAAc,EAAQ,QAEtB6O,EAAU1P,EAAgB,WAE9B1C,EAAOD,QAAU,SAAUwW,GACzB,IAAIlF,EAAcE,EAAWgF,GACzBlV,EAAiBiV,EAAqBtS,EAEtCT,GAAe8N,IAAgBA,EAAYe,IAC7C/Q,EAAegQ,EAAae,EAAS,CACnCoE,cAAc,EACdjV,IAAK,WAAc,OAAOlB,U,uBCfhC,IAiBIoW,EAAOC,EAASC,EAjBhB9B,EAAS,EAAQ,QACjBlJ,EAAQ,EAAQ,QAChBiL,EAAU,EAAQ,QAClB1U,EAAO,EAAQ,QACf2U,EAAO,EAAQ,QACfjL,EAAgB,EAAQ,QACxBkL,EAAS,EAAQ,QAEjBC,EAAWlC,EAAOkC,SAClBC,EAAMnC,EAAOoC,aACbpH,EAAQgF,EAAOqC,eACfC,EAAUtC,EAAOsC,QACjBC,EAAiBvC,EAAOuC,eACxBC,EAAWxC,EAAOwC,SAClBC,EAAU,EACVC,EAAQ,GACRC,EAAqB,qBAGrBC,EAAM,SAAUC,GAElB,GAAIH,EAAMhV,eAAemV,GAAK,CAC5B,IAAI3U,EAAKwU,EAAMG,UACRH,EAAMG,GACb3U,MAIA4U,EAAS,SAAUD,GACrB,OAAO,WACLD,EAAIC,KAIJE,EAAW,SAAUC,GACvBJ,EAAII,EAAM7I,OAGR8I,EAAO,SAAUJ,GAEnB7C,EAAOkD,YAAYL,EAAK,GAAIX,EAASiB,SAAW,KAAOjB,EAASkB,OAI7DjB,GAAQnH,IACXmH,EAAM,SAAsBjU,GAC1B,IAAImV,EAAO,GACPxX,EAAI,EACR,MAAO4C,UAAUL,OAASvC,EAAGwX,EAAK9O,KAAK9F,UAAU5C,MAMjD,OALA6W,IAAQD,GAAW,YAEH,mBAANvU,EAAmBA,EAAKoV,SAASpV,IAAKM,WAAMH,EAAWgV,IAEjEzB,EAAMa,GACCA,GAETzH,EAAQ,SAAwB6H,UACvBH,EAAMG,IAGS,WAApBd,EAAQO,GACVV,EAAQ,SAAUiB,GAChBP,EAAQiB,SAAST,EAAOD,KAGjBL,GAAYA,EAASgB,IAC9B5B,EAAQ,SAAUiB,GAChBL,EAASgB,IAAIV,EAAOD,KAIbN,IAAmBN,GAC5BJ,EAAU,IAAIU,EACdT,EAAOD,EAAQ4B,MACf5B,EAAQ6B,MAAMC,UAAYZ,EAC1BnB,EAAQvU,EAAKyU,EAAKoB,YAAapB,EAAM,KAIrC9B,EAAO4D,kBACe,mBAAfV,aACNlD,EAAO6D,eACP/M,EAAMmM,IACe,UAAtBf,EAASiB,SAMTvB,EADSe,KAAsB5L,EAAc,UACrC,SAAU8L,GAChBb,EAAKjG,YAAYhF,EAAc,WAAW4L,GAAsB,WAC9DX,EAAKlG,YAAYtQ,MACjBoX,EAAIC,KAKA,SAAUA,GAChBiB,WAAWhB,EAAOD,GAAK,KAbzBjB,EAAQqB,EACRjD,EAAO4D,iBAAiB,UAAWb,GAAU,KAiBjD5X,EAAOD,QAAU,CACfiX,IAAKA,EACLnH,MAAOA,I,uBCzGT,IAMI+I,EAAOC,EANPhE,EAAS,EAAQ,QACjB3C,EAAY,EAAQ,QAEpBiF,EAAUtC,EAAOsC,QACjB2B,EAAW3B,GAAWA,EAAQ2B,SAC9BC,EAAKD,GAAYA,EAASC,GAG1BA,GACFH,EAAQG,EAAGC,MAAM,KACjBH,EAAUD,EAAM,GAAKA,EAAM,IAClB1G,IACT0G,EAAQ1G,EAAU0G,MAAM,iBACnBA,GAASA,EAAM,IAAM,MACxBA,EAAQ1G,EAAU0G,MAAM,iBACpBA,IAAOC,EAAUD,EAAM,MAI/B5Y,EAAOD,QAAU8Y,IAAYA,G,uBCnB7B,IAAItH,EAAa,EAAQ,QAEzBvR,EAAOD,QAAUwR,EAAW,YAAa,cAAgB,I,uBCFzD,IAAIqF,EAAU,EAAQ,QAClBqC,EAAY,EAAQ,QACpBvW,EAAkB,EAAQ,QAE1B8O,EAAW9O,EAAgB,YAE/B1C,EAAOD,QAAU,SAAUqR,GACzB,QAAUlO,GAANkO,EAAiB,OAAOA,EAAGI,IAC1BJ,EAAG,eACH6H,EAAUrC,EAAQxF,M,uBCTzB,IAAI7N,EAAc,EAAQ,QACtB+S,EAAuB,EAAQ,QAC/B7C,EAAW,EAAQ,QACnByF,EAAa,EAAQ,QAIzBlZ,EAAOD,QAAUwD,EAAcnC,OAAO+X,iBAAmB,SAA0BlV,EAAGmV,GACpF3F,EAASxP,GACT,IAGIhC,EAHAoX,EAAOH,EAAWE,GAClBnW,EAASoW,EAAKpW,OACdsR,EAAQ,EAEZ,MAAOtR,EAASsR,EAAO+B,EAAqBtS,EAAEC,EAAGhC,EAAMoX,EAAK9E,KAAU6E,EAAWnX,IACjF,OAAOgC,I,uBCdT,IAAIqV,EAAW,EAAQ,QAEvBtZ,EAAOD,QAAU,SAAUqR,GACzB,IAAKkI,EAASlI,IAAc,OAAPA,EACnB,MAAME,UAAU,aAAezO,OAAOuO,GAAM,mBAC5C,OAAOA,I,oCCJX,IAAImI,EAAS,EAAQ,QAAiCA,OAClDC,EAAsB,EAAQ,QAC9BC,EAAiB,EAAQ,QAEzBC,EAAkB,kBAClBC,EAAmBH,EAAoBxC,IACvC4C,EAAmBJ,EAAoBK,UAAUH,GAIrDD,EAAe5W,OAAQ,UAAU,SAAUiX,GACzCH,EAAiBtZ,KAAM,CACrBuN,KAAM8L,EACNK,OAAQlX,OAAOiX,GACfvF,MAAO,OAIR,WACD,IAGIyF,EAHApT,EAAQgT,EAAiBvZ,MACzB0Z,EAASnT,EAAMmT,OACfxF,EAAQ3N,EAAM2N,MAElB,OAAIA,GAASwF,EAAO9W,OAAe,CAAEtB,WAAOuB,EAAW2O,MAAM,IAC7DmI,EAAQT,EAAOQ,EAAQxF,GACvB3N,EAAM2N,OAASyF,EAAM/W,OACd,CAAEtB,MAAOqY,EAAOnI,MAAM,Q,qBC3B/B7R,EAAOD,QAAU,I,uBCAjB,IAAI8U,EAAS,EAAQ,QAErB7U,EAAOD,QAAU8U,G,uBCFjB,IAAIlJ,EAAQ,EAAQ,QAChBiL,EAAU,EAAQ,QAElBoC,EAAQ,GAAGA,MAGfhZ,EAAOD,QAAU4L,GAAM,WAGrB,OAAQvK,OAAO,KAAK6Y,qBAAqB,MACtC,SAAU7I,GACb,MAAsB,UAAfwF,EAAQxF,GAAkB4H,EAAMnY,KAAKuQ,EAAI,IAAMhQ,OAAOgQ,IAC3DhQ,Q,uBCZJ,IAAIsB,EAAkB,EAAQ,QAC1BV,EAAS,EAAQ,QACjBsU,EAAuB,EAAQ,QAE/B4D,EAAcxX,EAAgB,eAC9ByX,EAAiBlO,MAAM3J,eAIQY,GAA/BiX,EAAeD,IACjB5D,EAAqBtS,EAAEmW,EAAgBD,EAAa,CAClD1D,cAAc,EACd7U,MAAOK,EAAO,QAKlBhC,EAAOD,QAAU,SAAUkC,GACzBkY,EAAeD,GAAajY,IAAO,I,uBClBrC,IAAI4S,EAAS,EAAQ,QAErB7U,EAAOD,QAAU,SAAUoD,EAAGC,GAC5B,IAAIgX,EAAUvF,EAAOuF,QACjBA,GAAWA,EAAQjW,QACA,IAArBb,UAAUL,OAAemX,EAAQjW,MAAMhB,GAAKiX,EAAQjW,MAAMhB,EAAGC,M,kCCJjEhC,OAAOC,eAAetB,EAAS,aAAc,CAAE4B,OAAO,IACtD,IAAI4C,EAAW,EAAQ,QACnBH,EAAS,EAAQ,QACrB,SAASiW,EAAaC,GAClB,OAAIlW,EAAOuD,KAAK4S,UAAUD,GACf,IAAMA,EAAM,IAEqB,oBAAxClZ,OAAOkB,UAAUkY,SAAS3Z,KAAKyZ,IAG/BlW,EAAOuD,KAAK8S,WAAWH,GAFhBA,EAKJlZ,OAAOkB,UAAUkY,SAAS3Z,KAAKyZ,GAE1C,SAASI,EAAaJ,GAClB,OAAIA,EAAM,IACC,IAEFA,EAAM,EACJ,EAEJvR,KAAKW,MAAM4Q,GAGtB,SAASK,EAAeL,GACpB,OAAIA,EAAM,EACC,EAEFA,EAAM,KACJ,KAEJA,EAGX,SAAS9G,IACL,GAAIjP,EAASkD,MAAMmT,aACf,OAAO,SAAUN,EAAK9Q,GAOlB,OANKpF,EAAOuD,KAAKkT,UAAUP,IACvBlW,EAAOuD,KAAKmT,KAAKT,EAAaC,GAC1B,8BACA9Q,EACA,8CAED8Q,GAKnB,SAASS,IACL,GAAIxW,EAASkD,MAAMmT,aACf,OAAO,SAAUN,EAAK9Q,GAClB,IAAIwR,EAAW5W,EAAOuD,KAAKkT,UAAUP,GACjCW,EAAiB,SAARX,EAOb,OANMU,GAAYC,GACd7W,EAAOuD,KAAKmT,KAAKT,EAAaC,GAC1B,8BACA9Q,EACA,wDAED8Q,GAKnB,SAASY,IACL,GAAI3W,EAASkD,MAAMmT,aACf,OAAO,SAAUN,EAAK9Q,GAOlB,OANKpF,EAAOuD,KAAK4S,UAAUD,IACvBlW,EAAOuD,KAAKmT,KAAKT,EAAaC,GAC1B,8BACA9Q,EACA,8CAED8Q,GAKnB,SAASa,IACL,GAAI5W,EAASkD,MAAMmT,aACf,OAAO,SAAUN,EAAK9Q,GAOlB,OANKpF,EAAOuD,KAAKyT,YAAYd,IACzBlW,EAAOuD,KAAKmT,KAAKT,EAAaC,GAC1B,8BACA9Q,EACA,gDAED8Q,GAKnB,SAASe,IACL,GAAI9W,EAASkD,MAAMmT,aACf,OAAO,SAAUN,EAAK9Q,GAkBlB,OAjBKpF,EAAOuD,KAAKmB,SAASwR,GAOtBA,EAAIgB,SAAQ,SAAUC,GACbnX,EAAOuD,KAAKkT,UAAUU,IACvBnX,EAAOuD,KAAKmT,KAAK,IACbtR,EACA,uCACA+R,EACA,iDAZZnX,EAAOuD,KAAKmT,KAAKT,EAAaC,GAC1B,8BACA9Q,EACA,wDAaD8Q,GAKnB,SAASrJ,IACL,GAAI1M,EAASkD,MAAMmT,aACf,OAAO,SAAUN,EAAK9Q,GAClB,IAAIgS,GAAiB,IAARlB,IAAwB,IAARA,EAO7B,OANKkB,GACDpX,EAAOuD,KAAKmT,KAAKT,EAAaC,GAC1B,8BACA9Q,EACA,+CAED8Q,GAKnB,SAASmB,EAAsBC,GAC3B,GAAInX,EAASkD,MAAMmT,aACf,OAAO,SAAUN,EAAK9Q,GAQlB,OAPKpF,EAAOuD,KAAK2R,SAASgB,IACtBlW,EAAOuD,KAAKmT,KAAKT,EAAaC,GAC1B,8BACA9Q,EACA,8DACAkS,GAEDpB,GAvHnBva,EAAQ2a,aAAeA,EAUvB3a,EAAQ4a,eAAiBA,EAczB5a,EAAQyT,mBAAqBA,EAgB7BzT,EAAQgb,yBAA2BA,EAcnChb,EAAQmb,mBAAqBA,EAc7Bnb,EAAQob,qBAAuBA,EAyB/Bpb,EAAQsb,wBAA0BA,EAelCtb,EAAQkR,oBAAsBA,EAe9BlR,EAAQ0b,sBAAwBA,G,qBCpJhC,IAAIhI,EAAW,EAAQ,QACnB3Q,EAAY,EAAQ,QACpBJ,EAAkB,EAAQ,QAE1B0P,EAAU1P,EAAgB,WAI9B1C,EAAOD,QAAU,SAAUkE,EAAG0X,GAC5B,IACIC,EADAC,EAAIpI,EAASxP,GAAGkI,YAEpB,YAAajJ,IAAN2Y,QAAiD3Y,IAA7B0Y,EAAInI,EAASoI,GAAGzJ,IAAyBuJ,EAAqB7Y,EAAU8Y,K,qBCXrG,IAAIjQ,EAAQ,EAAQ,QAEpB3L,EAAOD,UAAYqB,OAAO0a,wBAA0BnQ,GAAM,WAGxD,OAAQ9I,OAAOpB,c,kCCJjBL,OAAOC,eAAetB,EAAS,aAAc,CAAE4B,OAAO,IACtD,IAAIyC,EAAS,EAAQ,QACjBiI,EAAY,EAAQ,QACpBE,EAAW,EAAQ,QACnBhI,EAAW,EAAQ,QACnBwX,EAAgB,EAAQ,QACxBtP,EAAe,EAAQ,QAC3B1M,EAAQic,IAAM,GACdjc,EAAQkc,MAAQ,GAChB,IAAIC,EAAS,SAAUzX,EAAMiT,GACpBA,IAGL3X,EAAQic,IAAItE,GAAMjT,IAEtB1E,EAAQoc,UAAY,SAAUzE,EAAIjT,GACzBiT,GAGD3X,EAAQic,IAAItE,KAAQjT,UAGjB1E,EAAQic,IAAItE,IAEvB3X,EAAQqc,SAAW,SAAU3X,EAAMxD,GAC3BA,IACKlB,EAAQkc,MAAMhb,KACflB,EAAQkc,MAAMhb,GAAQ,IAE1BlB,EAAQkc,MAAMhb,GAAMmI,KAAK3E,KAGjC1E,EAAQsc,YAAc,SAAUpb,EAAMmG,GAClC,GAAKnG,EAAL,CAGA,IAAIqb,EAAQvc,EAAQkc,MAAMhb,GAC1B,GAAKqb,EAAL,CAGA,IAAK,IAAIna,EAAI,EAAGA,EAAIma,EAAMrZ,OAAQd,IAAK,CACnC,IAAIoa,EAAKD,EAAMna,GACXoa,EAAGnV,MAAQA,GACXkV,EAAME,OAAOra,EAAG,GAGH,IAAjBma,EAAMrZ,eACClD,EAAQkc,MAAMhb,MAG7B,IAAIwb,EAAmB,kBAAmBC,EAAqB,oBAAqBC,EAAiB,gBAAiBC,EAAS,SAAUC,EAAS,SAAUC,EAAW,WAAYC,EAAQ,QAASC,EAAY,YAAaC,EAAa,aAAcC,EAAa,aAAcC,EAAO,OAAQC,EAAM,MAAOC,EAAQ,QAASC,EAAQ,IAAKC,EAAQ,QAASC,EAAY,YAAaC,EAAc,QAASC,EAAU,UAAWC,EAAuB,CACtb,gBACA,gBACA,qBACA,qBACA,oBACA,oBACA,uBACA,sBACA,sBACA,iCACFC,KAAKN,GACHO,GAD8B,CAAC,qBAAsB,sBAAsBD,KAAKN,GAChE,IAAIlZ,EAAO8M,YAC3BjM,EAAY,EACZmF,EAAQ,WACR,SAASA,EAAKlD,GACV,IAAI0C,EAAQvJ,KACZA,KAAK+G,IAAMnC,IACX5E,KAAKyd,eAAiB,GACtBzd,KAAK4H,MAAQ,GACb5H,KAAKkU,MAAQ,EACblU,KAAKiQ,OAAS,KACdjQ,KAAK0d,OAAS,IAAIC,IAClB3d,KAAK4d,SAAW,KAChB5d,KAAK6d,0BAA2B,EAChC7d,KAAK8d,0BAA2B,EAChC9d,KAAK+d,iBAAkB,EACvB/d,KAAKge,eAAgB,EACrBhe,KAAKie,SAAWT,EAChBxd,KAAKke,aAAe,KACpBle,KAAKme,SAAStX,GACd7G,KAAKoe,GAAGd,GAAsB,WACtB/T,EAAMsU,yBACNtU,EAAMuU,0BAA2B,GAGrCvU,EAAM8U,YAAYlB,GAClB5T,EAAM+U,6BAA6BjC,OAEvCrc,KAAKoe,GAAG,uBAAuB,WAC3B7U,EAAM+U,6BAA6BjB,MAEvCrd,KAAKoe,GAAG,yBAAyB,WAC7B7U,EAAM+U,6BAA6B3B,MAEvC3c,KAAKoe,GAAG,uBAAuB,WAC3B7U,EAAM+U,6BAA6BlC,MAysC3C,OAtsCArS,EAAK9H,UAAUsc,YAAc,WACzB,OAAO,GAEXxU,EAAK9H,UAAUuc,YAAc,WACzB,OAAOhB,GAEXzT,EAAK9H,UAAUoc,YAAc,SAAUlV,GAC/BA,EACAnJ,KAAK0d,OAAOe,OAAOtV,GAGnBnJ,KAAK0d,OAAOlO,SAGpBzF,EAAK9H,UAAUyc,UAAY,SAAUvV,EAAMwV,GACvC,IAAIC,EAAQ5e,KAAK0d,OAAOxc,IAAIiI,GAK5B,YAJctG,IAAV+b,IACAA,EAAQD,EAAcne,KAAKR,MAC3BA,KAAK0d,OAAO/G,IAAIxN,EAAMyV,IAEnBA,GAEX7U,EAAK9H,UAAU4c,gBAAkB,WAC7B,OAAO7e,KAAK0d,OAAOxc,IAAIqb,IAE3BxS,EAAK9H,UAAUqc,6BAA+B,SAAUnV,EAAM2V,GAC1D9e,KAAKqe,YAAYlV,GACb2V,GAAc3V,IAASkT,GACvBrc,KAAK4F,KAAK,wBAEV5F,KAAK+e,YAGL/e,KAAKie,UACLje,KAAKie,SAASe,MAAK,SAAU5a,GACzBA,EAAKka,6BAA6BnV,GAAM,OAIpDY,EAAK9H,UAAUgd,WAAa,WAGxB,OAFAjf,KAAK0d,OAAOe,OAAOlC,GACnBvc,KAAKse,+BACEte,MAEX+J,EAAK9H,UAAU2c,MAAQ,SAAU/X,GAC7B,IAAIqY,EAAOrY,GAAU,GACjBsY,EAAO,QACItc,IAAXqc,EAAKzS,QACM5J,IAAXqc,EAAKxS,QACU7J,IAAfqc,EAAK/R,YACWtK,IAAhBqc,EAAK9R,SACL+R,EAAOnf,KAAKof,cAAc,CACtBC,eAAe,EACfC,WAAYtf,KAAKuf,eAGzB,IAAIpS,EAAQzE,KAAK8W,KAAKN,EAAK/R,OAASgS,EAAKhS,OAAQC,EAAS1E,KAAK8W,KAAKN,EAAK9R,QAAU+R,EAAK/R,QAASJ,EAAakS,EAAKlS,WAAYP,OAAe5J,IAAXqc,EAAKzS,EAAkB0S,EAAK1S,EAAIyS,EAAKzS,EAAGC,OAAe7J,IAAXqc,EAAKxS,EAAkByS,EAAKzS,EAAIwS,EAAKxS,EAAG+S,EAASP,EAAKO,QAAU,EAAGC,EAAaR,EAAKQ,aAAc,EAClR,GAAKvS,GAAUC,EAAf,CAIAD,GAAkB,EAATsS,EACTrS,GAAmB,EAATqS,EACVhT,GAAKgT,EACL/S,GAAK+S,EACL,IAAIE,EAAoB,IAAIzT,EAAS0T,YAAY,CAC7C5S,WAAYA,EACZG,MAAOA,EACPC,OAAQA,IACRyS,EAAqB,IAAI3T,EAAS0T,YAAY,CAC9C5S,WAAYA,EACZG,MAAO,EACPC,OAAQ,IACR0S,EAAkB,IAAI5T,EAASa,UAAU,CACzCC,WAAY,EACZG,MAAOA,EACPC,OAAQA,IACR2S,EAAeJ,EAAkBpQ,aAAcyQ,EAAaF,EAAgBvQ,aAqChF,OApCAuQ,EAAgBG,SAAU,EAC1BjgB,KAAK0d,OAAOe,OAAO,UACnBze,KAAK+d,iBAAkB,GACY,IAA/BmB,EAAKgB,wBACLP,EAAkBpQ,aAAa4Q,SAASD,uBAAwB,EAChEL,EAAmBtQ,aAAa4Q,SAASD,uBAAwB,GAErEH,EAAaK,OACbJ,EAAWI,OACXL,EAAaM,WAAW5T,GAAIC,GAC5BsT,EAAWK,WAAW5T,GAAIC,GAC1B1M,KAAKge,eAAgB,EACrBhe,KAAKse,6BAA6BlC,GAClCpc,KAAKse,6BAA6BhC,GAClCtc,KAAK+O,UAAU4Q,EAAmB3f,MAAM,GACxCA,KAAK0P,QAAQoQ,EAAiB9f,MAAM,GACpCA,KAAKge,eAAgB,EACrB+B,EAAaO,UACbN,EAAWM,UACPZ,IACAK,EAAaK,OACbL,EAAazN,YACbyN,EAAaZ,KAAK,EAAG,EAAGhS,EAAOC,GAC/B2S,EAAatN,YACbsN,EAAazW,QAAQ,cAAe,OACpCyW,EAAazW,QAAQ,YAAa,GAClCyW,EAAaQ,SACbR,EAAaO,WAEjBtgB,KAAK0d,OAAO/G,IAAI4F,EAAQ,CACpBiE,MAAOb,EACPc,OAAQZ,EACRa,IAAKZ,EACLrT,EAAGA,EACHC,EAAGA,IAEA1M,KAxDH+D,EAAOuD,KAAKxD,MAAM,sFA0D1BiG,EAAK9H,UAAU8c,SAAW,WACtB,OAAO/e,KAAK0d,OAAOna,IAAI,WAE3BwG,EAAK9H,UAAUmd,cAAgB,SAAUvY,GACrC,MAAM,IAAI8Z,MAAM,yCAEpB5W,EAAK9H,UAAU2e,iBAAmB,SAAUzB,EAAMlQ,GAC9C,IAMI4R,EAAMC,EAAMC,EAAMC,EANlBpX,EAAS,CACT,CAAE6C,EAAG0S,EAAK1S,EAAGC,EAAGyS,EAAKzS,GACrB,CAAED,EAAG0S,EAAK1S,EAAI0S,EAAKhS,MAAOT,EAAGyS,EAAKzS,GAClC,CAAED,EAAG0S,EAAK1S,EAAI0S,EAAKhS,MAAOT,EAAGyS,EAAKzS,EAAIyS,EAAK/R,QAC3C,CAAEX,EAAG0S,EAAK1S,EAAGC,EAAGyS,EAAKzS,EAAIyS,EAAK/R,SAG9B6T,EAAQjhB,KAAKkhB,qBAAqBjS,GAYtC,OAXArF,EAAOqR,SAAQ,SAAUtB,GACrB,IAAIwH,EAAcF,EAAMtH,MAAMA,QACjB9W,IAATge,IACAA,EAAOE,EAAOI,EAAY1U,EAC1BqU,EAAOE,EAAOG,EAAYzU,GAE9BmU,EAAOnY,KAAK4L,IAAIuM,EAAMM,EAAY1U,GAClCqU,EAAOpY,KAAK4L,IAAIwM,EAAMK,EAAYzU,GAClCqU,EAAOrY,KAAKC,IAAIoY,EAAMI,EAAY1U,GAClCuU,EAAOtY,KAAKC,IAAIqY,EAAMG,EAAYzU,MAE/B,CACHD,EAAGoU,EACHnU,EAAGoU,EACH3T,MAAO4T,EAAOF,EACdzT,OAAQ4T,EAAOF,IAGvB/W,EAAK9H,UAAUmf,uBAAyB,SAAU3S,GAC9CA,EAAQ2R,OACR3R,EAAQ4S,cAAcrhB,MACtByO,EAAQ6S,+BAA+BthB,MACvC,IAAIuhB,EAAcvhB,KAAK6e,kBACvBpQ,EAAQ4R,UAAUkB,EAAY9U,EAAG8U,EAAY7U,GAC7C,IAAI8U,EAAcxhB,KAAKyhB,wBACnBjT,EAAQgT,EAAYxU,WACxByB,EAAQiT,UAAUF,EAAYrR,QAAS,EAAG,EAAGqR,EAAYrU,MAAQqB,EAAOgT,EAAYpU,OAASoB,GAC7FC,EAAQ6R,WAEZvW,EAAK9H,UAAU0f,qBAAuB,SAAUlT,GAC5C,IAAI8S,EAAcvhB,KAAK6e,kBAAmB/R,EAAYyU,EAAYb,IAClEjS,EAAQ2R,OACR3R,EAAQ4R,UAAUkB,EAAY9U,EAAG8U,EAAY7U,GAC7C+B,EAAQiT,UAAU5U,EAAUqD,QAAS,EAAG,GACxC1B,EAAQ6R,WAEZvW,EAAK9H,UAAUwf,sBAAwB,WACnC,IAAsLrZ,EAAKwZ,EAAW9f,EAAG2e,EAArMoB,EAAU7hB,KAAK6hB,UAAWC,EAAe9hB,KAAK6e,kBAAmBkD,EAAcD,EAAatB,MAAOwB,EAAeF,EAAarB,OAAQwB,EAAgBD,EAAazS,aACxK,GAAIsS,EAAS,CACT,IAAK7hB,KAAK+d,gBAAiB,CACvB,IAAIvP,EAAQuT,EAAY/U,WACxBgV,EAAa/U,QAAQ8U,EAAY5U,MAAQ4U,EAAY/U,WAAY+U,EAAY3U,OAAS2U,EAAY/U,YAClG,IAKI,IAJA5E,EAAMyZ,EAAQjf,OACdqf,EAAczS,QACdyS,EAAcP,UAAUK,EAAY5R,QAAS,EAAG,EAAG4R,EAAYpP,WAAanE,EAAOuT,EAAYnP,YAAcpE,GAC7GoT,EAAYK,EAAcvT,aAAa,EAAG,EAAGsT,EAAarP,WAAYqP,EAAapP,aAC9E9Q,EAAI,EAAGA,EAAIsG,EAAKtG,IACjB2e,EAASoB,EAAQ/f,GACK,oBAAX2e,GAMXA,EAAOjgB,KAAKR,KAAM4hB,GAClBK,EAAcC,aAAaN,EAAW,EAAG,IANrC7d,EAAOuD,KAAKxD,MAAM,qDACP2c,EACP,0CAOhB,MAAO0B,GACHpe,EAAOuD,KAAKxD,MAAM,2BACdqe,EAAEC,QACF,8EAERpiB,KAAK+d,iBAAkB,EAE3B,OAAOiE,EAEX,OAAOD,GAEXhY,EAAK9H,UAAUmc,GAAK,SAAUiE,EAAQvc,GAClC,GAAyB,IAArB7C,UAAUL,OACV,OAAO5C,KAAKsiB,UAAUtf,MAAMhD,KAAMiD,WAEtC,IAAuDnB,EAAG0V,EAAO+K,EAAOC,EAAW5hB,EAA/E6hB,EAASJ,EAAO1J,MAAMsE,GAAQ7U,EAAMqa,EAAO7f,OAC/C,IAAKd,EAAI,EAAGA,EAAIsG,EAAKtG,IACjB0V,EAAQiL,EAAO3gB,GACfygB,EAAQ/K,EAAMmB,MAAM,KACpB6J,EAAYD,EAAM,GAClB3hB,EAAO2hB,EAAM,IAAM,GACdviB,KAAKyd,eAAe+E,KACrBxiB,KAAKyd,eAAe+E,GAAa,IAErCxiB,KAAKyd,eAAe+E,GAAWzZ,KAAK,CAChCnI,KAAMA,EACNkF,QAASA,IAGjB,OAAO9F,MAEX+J,EAAK9H,UAAUygB,IAAM,SAAUL,EAAQM,GACnC,IAA+D7gB,EAAGP,EAAGiW,EAAO+K,EAAOC,EAAW5hB,EAA1F6hB,GAAUJ,GAAU,IAAI1J,MAAMsE,GAAQ7U,EAAMqa,EAAO7f,OACvD,IAAKyf,EACD,IAAK9gB,KAAKvB,KAAKyd,eACXzd,KAAK4iB,KAAKrhB,GAGlB,IAAKO,EAAI,EAAGA,EAAIsG,EAAKtG,IAKjB,GAJA0V,EAAQiL,EAAO3gB,GACfygB,EAAQ/K,EAAMmB,MAAM,KACpB6J,EAAYD,EAAM,GAClB3hB,EAAO2hB,EAAM,GACTC,EACIxiB,KAAKyd,eAAe+E,IACpBxiB,KAAK4iB,KAAKJ,EAAW5hB,EAAM+hB,QAI/B,IAAKphB,KAAKvB,KAAKyd,eACXzd,KAAK4iB,KAAKrhB,EAAGX,EAAM+hB,GAI/B,OAAO3iB,MAEX+J,EAAK9H,UAAU4gB,cAAgB,SAAUC,GACrC,IAAIX,EAAI,CACJlN,OAAQjV,KACRuN,KAAMuV,EAAIvV,KACVuV,IAAKA,GAGT,OADA9iB,KAAK4F,KAAKkd,EAAIvV,KAAM4U,GACbniB,MAEX+J,EAAK9H,UAAUmW,iBAAmB,SAAU7K,EAAMzH,GAI9C,OAHA9F,KAAKoe,GAAG7Q,GAAM,SAAUuV,GACpBhd,EAAQtF,KAAKR,KAAM8iB,EAAIA,QAEpB9iB,MAEX+J,EAAK9H,UAAU8gB,oBAAsB,SAAUxV,GAE3C,OADAvN,KAAK0iB,IAAInV,GACFvN,MAEX+J,EAAK9H,UAAUqgB,UAAY,SAAU9K,EAAO5J,EAAU9H,GAClD,IAAIkd,EAAWhjB,KACfA,KAAKoe,GAAG5G,GAAO,SAAUsL,GAErB,IADA,IAAIG,EAAUH,EAAI7N,OAAOiO,cAActV,GAAU,EAAMoV,GAC9C3iB,EAAI,EAAGA,EAAI4iB,EAAQrgB,OAAQvC,IAChCyiB,EAAM/e,EAAOuD,KAAK6b,YAAYL,GAC9BA,EAAIM,cAAgBH,EAAQ5iB,GAC5ByF,EAAQtF,KAAKyiB,EAAQ5iB,GAAIyiB,OAIrC/Y,EAAK9H,UAAUohB,OAAS,WAMpB,OALIrjB,KAAKsjB,cACLtjB,KAAKujB,WAET7H,EAAc8H,GAAGC,cAAchF,OAAOze,KAAK+G,KAC3C/G,KAAK0jB,UACE1jB,MAEX+J,EAAK9H,UAAU0hB,aAAe,WAC1B3jB,KAAKse,6BAA6BjC,GAClCrc,KAAKse,6BAA6BlC,GAClCpc,KAAKse,6BAA6BhC,GAClCtc,KAAKse,6BAA6BpB,GAClCld,KAAKse,6BAA6BjB,GAClCrd,KAAKse,6BAA6B3B,IAEtC5S,EAAK9H,UAAUyhB,QAAU,WACrB1jB,KAAK2jB,eACL,IAAI1T,EAASjQ,KAAKuf,YACdtP,GAAUA,EAAOgO,WACjBhO,EAAOgO,SAAS9B,OAAOnc,KAAKkU,MAAO,GACnCjE,EAAO2T,sBACP5jB,KAAKiQ,OAAS,OAGtBlG,EAAK9H,UAAU4H,QAAU,WACrBnK,EAAQoc,UAAU9b,KAAKqX,KAAMrX,MAE7B,IADA,IAAI4b,GAAS5b,KAAKY,QAAU,IAAI+X,MAAM,OAC7BtY,EAAI,EAAGA,EAAIub,EAAMhZ,OAAQvC,IAAK,CACnC,IAAIwjB,EAAUjI,EAAMvb,GACpBX,EAAQsc,YAAY6H,EAAS7jB,KAAK+G,KAGtC,OADA/G,KAAKqjB,SACErjB,MAEX+J,EAAK9H,UAAUuG,QAAU,SAAUW,GAC/B,IAAI2a,EAAS,MAAQ/f,EAAOuD,KAAKyc,YAAY5a,GAC7C,OAAIpF,EAAOuD,KAAKyT,YAAY/a,KAAK8jB,IACtB9jB,KAAK8jB,KAET9jB,KAAK4H,MAAMuB,IAEtBY,EAAK9H,UAAU+hB,aAAe,WAC1B,IAAI/T,EAASjQ,KAAKuf,YAAa0E,EAAY,IAAIlgB,EAAO8M,WACtD,MAAOZ,EACHgU,EAAUlb,KAAKkH,GACfA,EAASA,EAAOsP,YAEpB,OAAO0E,GAEXla,EAAK9H,UAAUiiB,SAAW,WACtB,OAAOlkB,KAAK4H,OAAS,IAEzBmC,EAAK9H,UAAUkc,SAAW,SAAUtX,GAChC,IAAIjF,EAAKkiB,EACT,IAAKjd,EACD,OAAO7G,KAEX,IAAK4B,KAAOiF,EACJjF,IAAQ6a,IAGZqH,EAAS/G,EAAMhZ,EAAOuD,KAAKyc,YAAYniB,GACnCmC,EAAOuD,KAAKyT,YAAY/a,KAAK8jB,IAC7B9jB,KAAK8jB,GAAQjd,EAAOjF,IAGpB5B,KAAKmkB,SAASviB,EAAKiF,EAAOjF,KAGlC,OAAO5B,MAEX+J,EAAK9H,UAAUmiB,YAAc,WACzB,OAAOpkB,KAAK0e,UAAU/B,EAAW3c,KAAKqkB,eAE1Cta,EAAK9H,UAAUoiB,aAAe,WAC1B,IAAIC,EAAYtkB,KAAKskB,YAAarU,EAASjQ,KAAKuf,YAChD,MAAkB,YAAd+E,GACIrU,GACOA,EAAOmU,cAOXE,GAGfva,EAAK9H,UAAUgM,UAAY,WACvB,OAAOjO,KAAK0e,UAAUrB,EAASrd,KAAKukB,aAExCxa,EAAK9H,UAAUsiB,WAAa,SAAUjF,GAClC,IAAIkF,EAAUxkB,KAAKwkB,UAAWvU,EAASjQ,KAAKuf,YAC5C,MAAgB,YAAZiF,GACIvU,GAAUA,IAAWqP,GACdrP,EAAOsU,WAAWjF,GAMxBA,GAAcA,IAAerP,EAC3BuU,GAAWvU,EAAOsU,WAAWjF,GAG7BkF,GAGfza,EAAK9H,UAAUwiB,cAAgB,WAC3B,IAAIvV,EAAQlP,KAAKmH,WACjB,OAAU+H,GAASlP,KAAKokB,eAAiBpkB,KAAKiO,aACzCiB,GACGA,EAAMlB,mBACNhO,KAAKokB,eACLpkB,KAAKiO,aAEjBlE,EAAK9H,UAAUyiB,KAAO,WAElB,OADA1kB,KAAKwkB,SAAQ,GACNxkB,MAEX+J,EAAK9H,UAAU0iB,KAAO,WAElB,OADA3kB,KAAKwkB,SAAQ,GACNxkB,MAEX+J,EAAK9H,UAAU2iB,UAAY,WACvB,OAAO5kB,KAAKkU,OAAS,GAEzBnK,EAAK9H,UAAU4iB,kBAAoB,WAC/B,IAAqD5I,EAAO7T,EAAKtG,EAAGwL,EAAhEwX,EAAQ9kB,KAAK+kB,WAAYpiB,EAAO3C,KAAMkU,EAAQ,EAClD,SAAS8Q,EAAY/G,GAGjB,IAFAhC,EAAQ,GACR7T,EAAM6V,EAASrb,OACVd,EAAI,EAAGA,EAAIsG,EAAKtG,IACjBwL,EAAQ2Q,EAASnc,GACjBoS,IACI5G,EAAMkD,WAAawM,IACnBf,EAAQA,EAAMlG,OAAOzI,EAAMkR,cAAcyG,YAEzC3X,EAAMvG,MAAQpE,EAAKoE,MACnBjF,EAAIsG,GAGR6T,EAAMrZ,OAAS,GAAKqZ,EAAM,GAAG8I,YAAcD,GAC3CE,EAAY/I,GAMpB,OAHItZ,EAAK6N,WAAa4M,GAClB4H,EAAYriB,EAAKuiB,WAAW1G,eAEzBtK,GAEXnK,EAAK9H,UAAU8iB,SAAW,WACtB,IAAID,EAAQ,EAAG7U,EAASjQ,KAAKiQ,OAC7B,MAAOA,EACH6U,IACA7U,EAASA,EAAOA,OAEpB,OAAO6U,GAEX/a,EAAK9H,UAAUkjB,uBAAyB,SAAUlgB,GAC9CjF,KAAK6d,0BAA2B,EAChC5Y,IACAjF,KAAK6d,0BAA2B,EAC5B7d,KAAK8d,2BACL9d,KAAKqe,YAAYlB,GACjBnd,KAAKse,6BAA6BjC,GAAoB,IAE1Drc,KAAK8d,0BAA2B,GAEpC/T,EAAK9H,UAAUoE,YAAc,SAAUsH,GACnC,IAAIpE,EAAQvJ,KAKZ,OAJAA,KAAKmlB,wBAAuB,WACxB5b,EAAMkD,EAAEkB,EAAIlB,GACZlD,EAAMmD,EAAEiB,EAAIjB,MAET1M,MAEX+J,EAAK9H,UAAUqE,YAAc,WACzB,MAAO,CACHmG,EAAGzM,KAAKyM,IACRC,EAAG1M,KAAK0M,MAGhB3C,EAAK9H,UAAUmjB,oBAAsB,SAAUnW,GAC3C,IAAIoW,GAAmB,EACnBpV,EAASjQ,KAAKiQ,OAClB,MAAOA,EAAQ,CACX,GAAIA,EAAO8O,WAAY,CACnBsG,GAAmB,EACnB,MAEJpV,EAASA,EAAOA,OAEhBoV,IAAqBpW,IACrBA,GAAM,GAEV,IAAIqW,EAAiBtlB,KAAKkhB,qBAAqBjS,GAAKsW,YAAaC,EAAoB,IAAIzhB,EAAO0hB,UAAahG,EAASzf,KAAKyf,SAG3H,OAFA+F,EAAkB/kB,EAAI6kB,EAAeI,QACrCF,EAAkBnF,UAAUZ,EAAOhT,EAAGgT,EAAO/S,GACtC8Y,EAAkBG,kBAE7B5b,EAAK9H,UAAU2jB,oBAAsB,SAAUjY,GAC3C,IAAwCoD,EAApC8U,EAAY7lB,KAAK8lB,kBAerB,OAdA9lB,KAAK4H,MAAM6E,EAAIoZ,EAAUpZ,EACzBzM,KAAK4H,MAAM8E,EAAImZ,EAAUnZ,SAClBmZ,EAAUpZ,SACVoZ,EAAUnZ,EACjB1M,KAAKqe,YAAYlB,GACjBpM,EAAK/Q,KAAK+lB,wBACVhV,EAAGiV,SACHjV,EAAGsP,UAAU1S,EAAIlB,EAAGkB,EAAIjB,GACxBiB,EAAM,CACFlB,EAAGzM,KAAK4H,MAAM6E,EAAIsE,EAAG4U,iBAAiBlZ,EACtCC,EAAG1M,KAAK4H,MAAM8E,EAAIqE,EAAG4U,iBAAiBjZ,GAE1C1M,KAAKimB,cAAcJ,GACnB7lB,KAAKqG,YAAY,CAAEoG,EAAGkB,EAAIlB,EAAGC,EAAGiB,EAAIjB,IAC7B1M,MAEX+J,EAAK9H,UAAUgkB,cAAgB,SAAUhF,GACrC,IAAIrf,EACJ,IAAKA,KAAOqf,EACRjhB,KAAK4H,MAAMhG,GAAOqf,EAAMrf,IAGhCmI,EAAK9H,UAAU6jB,gBAAkB,WAC7B,IAAI7E,EAAQ,CACRxU,EAAGzM,KAAKyM,IACRC,EAAG1M,KAAK0M,IACRwZ,SAAUlmB,KAAKkmB,WACfC,OAAQnmB,KAAKmmB,SACbC,OAAQpmB,KAAKomB,SACbC,QAASrmB,KAAKqmB,UACdC,QAAStmB,KAAKsmB,UACdC,MAAOvmB,KAAKumB,QACZC,MAAOxmB,KAAKwmB,SAWhB,OATAxmB,KAAK4H,MAAM6E,EAAI,EACfzM,KAAK4H,MAAM8E,EAAI,EACf1M,KAAK4H,MAAMse,SAAW,EACtBlmB,KAAK4H,MAAMue,OAAS,EACpBnmB,KAAK4H,MAAMwe,OAAS,EACpBpmB,KAAK4H,MAAMye,QAAU,EACrBrmB,KAAK4H,MAAM0e,QAAU,EACrBtmB,KAAK4H,MAAM2e,MAAQ,EACnBvmB,KAAK4H,MAAM4e,MAAQ,EACZvF,GAEXlX,EAAK9H,UAAUwkB,KAAO,SAAUC,GAC5B,IAAIC,EAAUD,EAAOja,EAAGma,EAAUF,EAAOha,EAAGD,EAAIzM,KAAKyM,IAAKC,EAAI1M,KAAK0M,IAQnE,YAPgB7J,IAAZ8jB,IACAla,GAAKka,QAEO9jB,IAAZ+jB,IACAla,GAAKka,GAET5mB,KAAKqG,YAAY,CAAEoG,EAAGA,EAAGC,EAAGA,IACrB1M,MAEX+J,EAAK9H,UAAU4kB,qBAAuB,SAAU5hB,EAAMgK,GAClD,IAA4C7G,EAAKtG,EAA7CglB,EAAS,GAAI7W,EAASjQ,KAAKuf,YAC/B,GAAItQ,GAAOA,EAAIlI,MAAQ/G,KAAK+G,IACxB9B,EAAKjF,UADT,CAIA8mB,EAAOC,QAAQ/mB,MACf,MAAOiQ,KAAYhB,GAAOgB,EAAOlJ,MAAQkI,EAAIlI,KACzC+f,EAAOC,QAAQ9W,GACfA,EAASA,EAAOA,OAGpB,IADA7H,EAAM0e,EAAOlkB,OACRd,EAAI,EAAGA,EAAIsG,EAAKtG,IACjBmD,EAAK6hB,EAAOhlB,MAGpBiI,EAAK9H,UAAU+kB,OAAS,SAAUC,GAE9B,OADAjnB,KAAKkmB,SAASlmB,KAAKkmB,WAAae,GACzBjnB,MAEX+J,EAAK9H,UAAUilB,UAAY,WACvB,IAAKlnB,KAAKiQ,OAEN,OADAlM,EAAOuD,KAAKmT,KAAK,uDACV,EAEX,IAAIvG,EAAQlU,KAAKkU,MAIjB,OAHAlU,KAAKiQ,OAAOgO,SAAS9B,OAAOjI,EAAO,GACnClU,KAAKiQ,OAAOgO,SAASlV,KAAK/I,MAC1BA,KAAKiQ,OAAO2T,uBACL,GAEX7Z,EAAK9H,UAAUklB,OAAS,WACpB,IAAKnnB,KAAKiQ,OAEN,OADAlM,EAAOuD,KAAKmT,KAAK,oDACV,EAEX,IAAIvG,EAAQlU,KAAKkU,MAAO9L,EAAMpI,KAAKiQ,OAAOuO,cAAc5b,OACxD,OAAIsR,EAAQ9L,EAAM,IACdpI,KAAKiQ,OAAOgO,SAAS9B,OAAOjI,EAAO,GACnClU,KAAKiQ,OAAOgO,SAAS9B,OAAOjI,EAAQ,EAAG,EAAGlU,MAC1CA,KAAKiQ,OAAO2T,uBACL,IAIf7Z,EAAK9H,UAAUmlB,SAAW,WACtB,IAAKpnB,KAAKiQ,OAEN,OADAlM,EAAOuD,KAAKmT,KAAK,sDACV,EAEX,IAAIvG,EAAQlU,KAAKkU,MACjB,OAAIA,EAAQ,IACRlU,KAAKiQ,OAAOgO,SAAS9B,OAAOjI,EAAO,GACnClU,KAAKiQ,OAAOgO,SAAS9B,OAAOjI,EAAQ,EAAG,EAAGlU,MAC1CA,KAAKiQ,OAAO2T,uBACL,IAIf7Z,EAAK9H,UAAUolB,aAAe,WAC1B,IAAKrnB,KAAKiQ,OAEN,OADAlM,EAAOuD,KAAKmT,KAAK,0DACV,EAEX,IAAIvG,EAAQlU,KAAKkU,MACjB,OAAIA,EAAQ,IACRlU,KAAKiQ,OAAOgO,SAAS9B,OAAOjI,EAAO,GACnClU,KAAKiQ,OAAOgO,SAAS8I,QAAQ/mB,MAC7BA,KAAKiQ,OAAO2T,uBACL,IAIf7Z,EAAK9H,UAAUqlB,UAAY,SAAUC,GACjC,IAAKvnB,KAAKiQ,OAEN,OADAlM,EAAOuD,KAAKmT,KAAK,oDACVza,MAEPunB,EAAS,GAAKA,GAAUvnB,KAAKiQ,OAAOgO,SAASrb,SAC7CmB,EAAOuD,KAAKmT,KAAK,oBACb8M,EACA,gHACCvnB,KAAKiQ,OAAOgO,SAASrb,OAAS,GAC/B,KAER,IAAIsR,EAAQlU,KAAKkU,MAIjB,OAHAlU,KAAKiQ,OAAOgO,SAAS9B,OAAOjI,EAAO,GACnClU,KAAKiQ,OAAOgO,SAAS9B,OAAOoL,EAAQ,EAAGvnB,MACvCA,KAAKiQ,OAAO2T,sBACL5jB,MAEX+J,EAAK9H,UAAUulB,mBAAqB,WAChC,OAAOxnB,KAAK0e,UAAUtC,EAAkBpc,KAAKynB,sBAEjD1d,EAAK9H,UAAUwlB,oBAAsB,WACjC,IAAIC,EAAa1nB,KAAK2nB,UAClB1X,EAASjQ,KAAKuf,YAIlB,OAHItP,IAAWA,EAAO+N,gBAClB0J,GAAczX,EAAOuX,sBAElBE,GAEX3d,EAAK9H,UAAU2lB,OAAS,SAAUC,GAK9B,OAJI7nB,KAAKuf,cAAgBsI,IACrB7nB,KAAK0jB,UACLmE,EAAaC,IAAI9nB,OAEdA,MAEX+J,EAAK9H,UAAU8lB,SAAW,WACtB,IAAuCnmB,EAAKqY,EAAKpZ,EAAQmnB,EAAcC,EAAnEpa,EAAM,GAAIjG,EAAQ5H,KAAKkkB,WAE3B,IAAKtiB,KADLiM,EAAIjG,MAAQ,GACAA,EACRqS,EAAMrS,EAAMhG,GACZqmB,EACIlkB,EAAOuD,KAAK2R,SAASgB,KAASlW,EAAOuD,KAAK4gB,eAAejO,KAASlW,EAAOuD,KAAKmB,SAASwR,GACvFgO,IAGJpnB,EAA8B,oBAAdb,KAAK4B,IAAuB5B,KAAK4B,UAC1CgG,EAAMhG,GACbomB,EAAennB,EAASA,EAAOL,KAAKR,MAAQ,KAC5C4H,EAAMhG,GAAOqY,EACT+N,IAAiB/N,IACjBpM,EAAIjG,MAAMhG,GAAOqY,IAIzB,OADApM,EAAIoF,UAAYjT,KAAKmoB,eACdpkB,EAAOuD,KAAK8gB,oBAAoBva,IAE3C9D,EAAK9H,UAAUomB,OAAS,WACpB,OAAOC,KAAKC,UAAUvoB,KAAK+nB,aAE/Bhe,EAAK9H,UAAUsd,UAAY,WACvB,OAAOvf,KAAKiQ,QAEhBlG,EAAK9H,UAAUihB,cAAgB,SAAUtV,EAAU4a,EAAaxF,GAC5D,IAAIyF,EAAM,GACND,GAAexoB,KAAK0oB,SAAS9a,IAC7B6a,EAAI1f,KAAK/I,MAEb,IAAI2oB,EAAW3oB,KAAKiQ,OACpB,MAAO0Y,EAAU,CACb,GAAIA,IAAa3F,EACb,OAAOyF,EAEPE,EAASD,SAAS9a,IAClB6a,EAAI1f,KAAK4f,GAEbA,EAAWA,EAAS1Y,OAExB,OAAOwY,GAEX1e,EAAK9H,UAAU2mB,aAAe,SAAUxkB,GACpC,OAAO,GAEX2F,EAAK9H,UAAUoM,aAAe,SAAUT,EAAU4a,EAAaxF,GAC3D,OAAOhjB,KAAKkjB,cAActV,EAAU4a,EAAaxF,GAAU,IAE/DjZ,EAAK9H,UAAUymB,SAAW,SAAU9a,GAChC,IAAKA,EACD,OAAO,EAEX,GAAwB,oBAAbA,EACP,OAAOA,EAAS5N,MAEpB,IAAmF8B,EAAG+mB,EAAlFC,EAAclb,EAASmb,QAAQ,KAAM,IAAIpQ,MAAM,KAAMvQ,EAAM0gB,EAAYlmB,OAC3E,IAAKd,EAAI,EAAGA,EAAIsG,EAAKtG,IASjB,GARA+mB,EAAMC,EAAYhnB,GACbiC,EAAOuD,KAAK0hB,gBAAgBH,KAC7B9kB,EAAOuD,KAAKmT,KAAK,aACboO,EACA,2EACJ9kB,EAAOuD,KAAKmT,KAAK,gHACjB1W,EAAOuD,KAAKmT,KAAK,6BAEC,MAAlBoO,EAAI3P,OAAO,IACX,GAAIlZ,KAAKqX,OAASwR,EAAInD,MAAM,GACxB,OAAO,OAGV,GAAsB,MAAlBmD,EAAI3P,OAAO,IAChB,GAAIlZ,KAAKipB,QAAQJ,EAAInD,MAAM,IACvB,OAAO,OAGV,GAAI1lB,KAAKiT,YAAc4V,GAAO7oB,KAAKwQ,WAAaqY,EACjD,OAAO,EAGf,OAAO,GAEX9e,EAAK9H,UAAUkF,SAAW,WACtB,IAAI8I,EAASjQ,KAAKuf,YAClB,OAAOtP,EAASA,EAAO9I,WAAa,MAExC4C,EAAK9H,UAAUijB,SAAW,WACtB,OAAOllB,KAAK0e,UAAUxB,EAAOld,KAAKkpB,YAEtCnf,EAAK9H,UAAUinB,UAAY,WACvB,IAAIjZ,EAASjQ,KAAKuf,YAClB,OAAItP,EACOA,EAAOiV,gBAGd,GAGRnb,EAAK9H,UAAU2D,KAAO,SAAUujB,EAAWrG,EAAKsG,GAS5C,YARY,IAARtG,IAAkBA,EAAM,IAC5BA,EAAI7N,OAAS6N,EAAI7N,QAAUjV,KACvBopB,EACAppB,KAAKqpB,eAAeF,EAAWrG,GAG/B9iB,KAAKqP,MAAM8Z,EAAWrG,GAEnB9iB,MAEX+J,EAAK9H,UAAUif,qBAAuB,SAAUjS,GAC5C,OAAIA,EACOjP,KAAK+lB,sBAAsB9W,GAG3BjP,KAAK0e,UAAUrC,EAAoBrc,KAAK+lB,wBAGvDhc,EAAK9H,UAAU8jB,sBAAwB,SAAU9W,GAC7C,IAAIqa,EACJ,GAAIra,EAWA,OAVAqa,EAAK,IAAIvlB,EAAO0hB,UAChBzlB,KAAK6mB,sBAAqB,SAAUziB,GAChC,IAAImlB,EAAoBnlB,EAAKmlB,oBACH,QAAtBA,EACAD,EAAGE,SAASplB,EAAKqlB,gBAEU,aAAtBF,GACLD,EAAGjJ,UAAUjc,EAAKqI,IAAMrI,EAAKiiB,UAAWjiB,EAAKsI,IAAMtI,EAAKkiB,aAE7DrX,GACIqa,EAIHA,EADAtpB,KAAKiQ,OACAjQ,KAAKiQ,OAAOiR,uBAAuBwI,OAGnC,IAAI3lB,EAAO0hB,UAEpB,IAAI8D,EAAoBvpB,KAAKupB,oBAO7B,MAN0B,QAAtBA,EACAD,EAAGE,SAASxpB,KAAKypB,gBAEU,aAAtBF,GACLD,EAAGjJ,UAAUrgB,KAAKyM,IAAMzM,KAAKqmB,UAAWrmB,KAAK0M,IAAM1M,KAAKsmB,WAErDgD,GAGfvf,EAAK9H,UAAU0nB,iBAAmB,SAAU1a,GACxC,IAAIgB,EAASjQ,KACb,MAAOiQ,EACCA,EAAO+N,gBACP/O,EAAMgB,GAEVA,EAASA,EAAOsP,YAEpB,IAAIqK,EAAY5pB,KAAKkhB,qBAAqBjS,GACtCrH,EAAQgiB,EAAUC,YACtB,MAAO,CACHpd,EAAG7E,EAAMue,OACTzZ,EAAG9E,EAAMwe,SAGjBrc,EAAK9H,UAAU6nB,oBAAsB,WACjC,OAAO9pB,KAAKkhB,uBAAuB2I,YAAY3D,UAEnDnc,EAAK9H,UAAUwnB,aAAe,WAC1B,OAAOzpB,KAAK0e,UAAUvB,EAAWnd,KAAK+pB,gBAE1ChgB,EAAK9H,UAAU8nB,cAAgB,WAC3B,IAAItpB,EAAI,IAAIsD,EAAO0hB,UAAahZ,EAAIzM,KAAKyM,IAAKC,EAAI1M,KAAK0M,IAAKwZ,EAAWhiB,EAASkD,MAAM4iB,SAAShqB,KAAKkmB,YAAaC,EAASnmB,KAAKmmB,SAAUC,EAASpmB,KAAKomB,SAAUG,EAAQvmB,KAAKumB,QAASC,EAAQxmB,KAAKwmB,QAASH,EAAUrmB,KAAKqmB,UAAWC,EAAUtmB,KAAKsmB,UAgBtP,OAfU,IAAN7Z,GAAiB,IAANC,GACXjM,EAAE4f,UAAU5T,EAAGC,GAEF,IAAbwZ,GACAzlB,EAAEumB,OAAOd,GAEC,IAAVK,GAAyB,IAAVC,GACf/lB,EAAEwpB,KAAK1D,EAAOC,GAEH,IAAXL,GAA2B,IAAXC,GAChB3lB,EAAEypB,MAAM/D,EAAQC,GAEJ,IAAZC,GAA6B,IAAZC,GACjB7lB,EAAE4f,WAAW,EAAIgG,GAAU,EAAIC,GAE5B7lB,GAEXsJ,EAAK9H,UAAUkoB,MAAQ,SAAUtc,GAC7B,IAAiDjM,EAAKwoB,EAAchiB,EAAKtG,EAAGyV,EAAxE3P,EAAQ7D,EAAOuD,KAAK6b,YAAYnjB,KAAK4H,OACzC,IAAKhG,KAAOiM,EACRjG,EAAMhG,GAAOiM,EAAIjM,GAErB,IAAIwC,EAAO,IAAIpE,KAAK8L,YAAYlE,GAChC,IAAKhG,KAAO5B,KAAKyd,eAGb,IAFA2M,EAAepqB,KAAKyd,eAAe7b,GACnCwG,EAAMgiB,EAAaxnB,OACdd,EAAI,EAAGA,EAAIsG,EAAKtG,IACjByV,EAAW6S,EAAatoB,GACpByV,EAAS3W,KAAKkI,QAAQ4T,GAAS,IAC1BtY,EAAKqZ,eAAe7b,KACrBwC,EAAKqZ,eAAe7b,GAAO,IAE/BwC,EAAKqZ,eAAe7b,GAAKmH,KAAKwO,IAI1C,OAAOnT,GAEX2F,EAAK9H,UAAUooB,eAAiB,SAAUxjB,GACtCA,EAASA,GAAU,GACnB,IAAIyjB,EAAMtqB,KAAKof,gBACXmL,EAAQvqB,KAAKklB,WAAYzY,OAAiB5J,IAAbgE,EAAO4F,EAAkB5F,EAAO4F,EAAI6d,EAAI7d,EAAGC,OAAiB7J,IAAbgE,EAAO6F,EAAkB7F,EAAO6F,EAAI4d,EAAI5d,EAAGM,EAAanG,EAAOmG,YAAc,EAAGmC,EAAS,IAAIjD,EAAS0T,YAAY,CAC9LzS,MAAOtG,EAAOsG,OAASmd,EAAInd,QAAUod,EAAQA,EAAMpd,QAAU,GAC7DC,OAAQvG,EAAOuG,QAAUkd,EAAIld,SAAWmd,EAAQA,EAAMnd,SAAW,GACjEJ,WAAYA,IACZyB,EAAUU,EAAOI,aAOrB,OANAd,EAAQ2R,QACJ3T,GAAKC,IACL+B,EAAQ4R,WAAW,EAAI5T,GAAI,EAAIC,GAEnC1M,KAAK+O,UAAUI,GACfV,EAAQ6R,UACDnR,GAEXpF,EAAK9H,UAAUuoB,SAAW,SAAU3jB,GAChC,OAAO7G,KAAKqqB,eAAexjB,GAAQsJ,SAEvCpG,EAAK9H,UAAUwoB,UAAY,SAAU5jB,GACjCA,EAASA,GAAU,GACnB,IAAI6jB,EAAW7jB,EAAO6jB,UAAY,KAAMC,EAAU9jB,EAAO8jB,SAAW,KAChEC,EAAM5qB,KAAKqqB,eAAexjB,GAAQ4jB,UAAUC,EAAUC,GAI1D,OAHI9jB,EAAO8b,UACP9b,EAAO8b,SAASiI,GAEbA,GAEX7gB,EAAK9H,UAAU4oB,QAAU,SAAUhkB,GAC/B,IAAKA,IAAWA,EAAO8b,SACnB,KAAM,uDAEV,IAAIA,EAAW9b,EAAO8b,gBACf9b,EAAO8b,SACd5e,EAAOuD,KAAKwjB,YAAY9qB,KAAKyqB,UAAU5jB,IAAS,SAAUkkB,GACtDpI,EAASoI,OAGjBhhB,EAAK9H,UAAUgL,QAAU,SAAU+d,GAG/B,OAFAhrB,KAAKmN,MAAM6d,EAAK7d,OAChBnN,KAAKoN,OAAO4d,EAAK5d,QACVpN,MAEX+J,EAAK9H,UAAUgpB,QAAU,WACrB,MAAO,CACH9d,MAAOnN,KAAKmN,QACZC,OAAQpN,KAAKoN,WAGrBrD,EAAK9H,UAAUkmB,aAAe,WAC1B,OAAOnoB,KAAKiT,WAAajT,KAAKwQ,UAElCzG,EAAK9H,UAAUuL,QAAU,WACrB,OAAOxN,KAAKwQ,UAEhBzG,EAAK9H,UAAUipB,gBAAkB,WAC7B,YAAgCroB,IAA5B7C,KAAK4H,MAAMujB,aACJnrB,KAAK4H,MAAMujB,aAEbnrB,KAAKiQ,OACHjQ,KAAKiQ,OAAOib,kBAGZhnB,EAASkD,MAAM+jB,cAG9BphB,EAAK9H,UAAU2gB,KAAO,SAAUrV,EAAM3M,EAAM+hB,GACxC,IAA8CtiB,EAAG+qB,EAAStlB,EAAtDulB,EAAerrB,KAAKyd,eAAelQ,GACvC,IAAKlN,EAAI,EAAGA,EAAIgrB,EAAazoB,OAAQvC,IAGjC,GAFA+qB,EAAUC,EAAahrB,GAAGO,KAC1BkF,EAAUulB,EAAahrB,GAAGyF,SACT,UAAZslB,GAAgC,UAATxqB,MACtBA,GAAQwqB,IAAYxqB,MACpB+hB,GAAYA,IAAa7c,GAAU,CAErC,GADAulB,EAAalP,OAAO9b,EAAG,GACK,IAAxBgrB,EAAazoB,OAAc,QACpB5C,KAAKyd,eAAelQ,GAC3B,MAEJlN,MAIZ0J,EAAK9H,UAAUqpB,iBAAmB,SAAUniB,EAAMoiB,EAAQniB,GACtDpJ,KAAKqP,MAAMlG,EAAOqT,EAAQ,CACtB+O,OAAQA,EACRniB,OAAQA,KAGhBW,EAAK9H,UAAUupB,MAAQ,SAAUnU,GAC7B,IAAIoU,EAAQzrB,KAAKqX,KAIjB,OAHA3X,EAAQoc,UAAU2P,EAAOzrB,MACzB6b,EAAO7b,KAAMqX,GACbrX,KAAKmkB,SAAS,KAAM9M,GACbrX,MAEX+J,EAAK9H,UAAUypB,QAAU,SAAU9qB,GAC/B,IAEIijB,EAASxjB,EAFTsrB,GAAY3rB,KAAKY,QAAU,IAAI+X,MAAM,OACrCiT,GAAYhrB,GAAQ,IAAI+X,MAAM,OAElC,IAAKtY,EAAI,EAAGA,EAAIsrB,EAAS/oB,OAAQvC,IAC7BwjB,EAAU8H,EAAStrB,IACgB,IAA/BurB,EAAS9iB,QAAQ+a,IAAmBA,GACpCnkB,EAAQsc,YAAY6H,EAAS7jB,KAAK+G,KAG1C,IAAK1G,EAAI,EAAGA,EAAIurB,EAAShpB,OAAQvC,IAC7BwjB,EAAU+H,EAASvrB,IACgB,IAA/BsrB,EAAS7iB,QAAQ+a,IAAmBA,GACpCnkB,EAAQqc,SAAS/b,KAAM6jB,GAI/B,OADA7jB,KAAKmkB,SAASrH,EAAMlc,GACbZ,MAEX+J,EAAK9H,UAAU4pB,QAAU,SAAUjrB,GAC/B,IAAKZ,KAAKipB,QAAQroB,GAAO,CACrB,IAAIkrB,EAAU9rB,KAAKY,OACfmrB,EAAUD,EAAUA,EAAU,IAAMlrB,EAAOA,EAC/CZ,KAAK0rB,QAAQK,GAEjB,OAAO/rB,MAEX+J,EAAK9H,UAAUgnB,QAAU,SAAUroB,GAC/B,IAAKA,EACD,OAAO,EAEX,IAAIorB,EAAWhsB,KAAKY,OACpB,IAAKorB,EACD,OAAO,EAEX,IAAIpQ,GAASoQ,GAAY,IAAIrT,MAAM,OACnC,OAAgC,IAAzBiD,EAAM9S,QAAQlI,IAEzBmJ,EAAK9H,UAAUgqB,WAAa,SAAUrrB,GAClC,IAAIgb,GAAS5b,KAAKY,QAAU,IAAI+X,MAAM,OAClCzE,EAAQ0H,EAAM9S,QAAQlI,GAK1B,OAJe,IAAXsT,IACA0H,EAAMO,OAAOjI,EAAO,GACpBlU,KAAK0rB,QAAQ9P,EAAM2B,KAAK,OAErBvd,MAEX+J,EAAK9H,UAAUqH,QAAU,SAAUH,EAAM8Q,GACrC,IAAIhV,EAAOjF,KAAK+c,EAAMhZ,EAAOuD,KAAKyc,YAAY5a,IAO9C,OANIpF,EAAOuD,KAAKyT,YAAY9V,GACxBA,EAAKzE,KAAKR,KAAMia,GAGhBja,KAAKmkB,SAAShb,EAAM8Q,GAEjBja,MAEX+J,EAAK9H,UAAUkiB,SAAW,SAAUviB,EAAKqY,GACrC,IAAIsR,EAASvrB,KAAK4H,MAAMhG,IACpB2pB,IAAWtR,GAAQlW,EAAOuD,KAAK2R,SAASgB,WAGhCpX,IAARoX,GAA6B,OAARA,SACdja,KAAK4H,MAAMhG,GAGlB5B,KAAK4H,MAAMhG,GAAOqY,EAEtBja,KAAKsrB,iBAAiB1pB,EAAK2pB,EAAQtR,KAEvClQ,EAAK9H,UAAUiqB,kBAAoB,SAAUtqB,EAAKuqB,EAAWlS,GACzD,IAAIsR,OACQ1oB,IAARoX,IACAsR,EAASvrB,KAAK4H,MAAMhG,GACf2pB,IACDvrB,KAAK4H,MAAMhG,GAAO5B,KAAKwI,QAAQ5G,IAEnC5B,KAAK4H,MAAMhG,GAAKuqB,GAAalS,EAC7Bja,KAAKsrB,iBAAiB1pB,EAAK2pB,EAAQtR,KAG3ClQ,EAAK9H,UAAUonB,eAAiB,SAAUF,EAAWrG,EAAKsJ,GAClDtJ,GAAO9iB,KAAKwQ,WAAawM,IACzB8F,EAAI7N,OAASjV,MAEjB,IAAIqsB,GAAclD,IAAcvM,GAAcuM,IAActM,KACtDuP,IACGpsB,OAASosB,GACLpsB,KAAK4oB,cAAgB5oB,KAAK4oB,aAAawD,KACzB,UAAlBpsB,KAAKwQ,WAAyB4b,GACvC,IAAKC,EAAY,CACbrsB,KAAKqP,MAAM8Z,EAAWrG,GACtB,IAAIwJ,GAAcnD,IAAcvM,GAAcuM,IAActM,IACxDuP,GACAA,EAAaxD,cACbwD,EAAaxD,aAAa5oB,QACzBosB,EAAaxD,aAAa5oB,KAAKiQ,SAC9B6S,IAAQA,EAAIyJ,eAAkBzJ,IAChC9iB,KAAKiQ,QACLjQ,KAAKiQ,OAAOmU,gBACXkI,IACGF,GAAgBA,EAAanc,OAC7BjQ,KAAKqpB,eAAe7oB,KAAKR,KAAKiQ,OAAQkZ,EAAWrG,EAAKsJ,GAGtDpsB,KAAKqpB,eAAe7oB,KAAKR,KAAKiQ,OAAQkZ,EAAWrG,MAKjE/Y,EAAK9H,UAAUoN,MAAQ,SAAU8Z,EAAWrG,GACxC,IAA6CziB,EAAzCoiB,EAASziB,KAAKyd,eAAe0L,GACjC,GAAI1G,EAIA,IAHAK,EAAMA,GAAO,GACbA,EAAIM,cAAgBpjB,KACpB8iB,EAAIvV,KAAO4b,EACN9oB,EAAI,EAAGA,EAAIoiB,EAAO7f,OAAQvC,IAC3BoiB,EAAOpiB,GAAGyF,QAAQtF,KAAKR,KAAM8iB,IAIzC/Y,EAAK9H,UAAUuqB,KAAO,WAGlB,OAFAxsB,KAAK+O,YACL/O,KAAK0P,UACE1P,MAEX+J,EAAK9H,UAAUwqB,mBAAqB,SAAU3J,GAC1C,IAAI4J,EAAY5J,EAAMA,EAAI4J,eAAY7pB,EAClC0nB,EAAQvqB,KAAKklB,WACbyH,EAAK3sB,KAAKolB,sBACVzX,EAAM4c,EAAMqC,gBAAgBF,IAC5BnC,EAAMsC,yBAAyB,IAC/BF,EACJjR,EAAc8H,GAAGC,cAAc9M,IAAI3W,KAAK+G,IAAK,CACzC3C,KAAMpE,KACN8sB,gBAAiBnf,EACjB8R,OAAQ,CACJhT,EAAGkB,EAAIlB,EAAIkgB,EAAGlgB,EACdC,EAAGiB,EAAIjB,EAAIigB,EAAGjgB,GAElBqgB,WAAY,QACZL,UAAWA,KAGnB3iB,EAAK9H,UAAU+qB,UAAY,SAAUlK,GAC5BpH,EAAc8H,GAAGC,cAAclgB,IAAIvD,KAAK+G,MACzC/G,KAAKysB,mBAAmB3J,GAE5B,IAAImK,EAAOvR,EAAc8H,GAAGC,cAAcviB,IAAIlB,KAAK+G,KACnDkmB,EAAKF,WAAa,WAClB/sB,KAAK4F,KAAK,YAAa,CACnB2H,KAAM,YACN0H,OAAQjV,KACR8iB,IAAKA,GAAOA,EAAIA,MACjB,IAEP/Y,EAAK9H,UAAUirB,iBAAmB,SAAUpK,EAAKmK,GAC7C,IAAItf,EAAM3N,KAAKklB,WAAW0H,gBAAgBK,EAAKP,WAC/C,GAAK/e,EAAL,CAGA,IAAIwf,EAAa,CACb1gB,EAAGkB,EAAIlB,EAAIwgB,EAAKxN,OAAOhT,EACvBC,EAAGiB,EAAIjB,EAAIugB,EAAKxN,OAAO/S,GAEvB0gB,EAAMptB,KAAKqtB,gBACf,QAAYxqB,IAARuqB,EAAmB,CACnB,IAAIE,EAAUF,EAAI5sB,KAAKR,KAAMmtB,EAAYrK,GACpCwK,EAIDH,EAAaG,EAHbvpB,EAAOuD,KAAKmT,KAAK,kIAMpBza,KAAK4d,UACN5d,KAAK4d,SAASnR,IAAM0gB,EAAW1gB,GAC/BzM,KAAK4d,SAASlR,IAAMygB,EAAWzgB,IAC/B1M,KAAK4lB,oBAAoBuH,GACrBntB,KAAKmH,WACLnH,KAAKmH,WAAWomB,YAEXvtB,KAAKklB,YACVllB,KAAKklB,WAAWqI,aAGxBvtB,KAAK4d,SAAWuP,IAEpBpjB,EAAK9H,UAAUshB,SAAW,SAAUT,GAChC,IAAImK,EAAOvR,EAAc8H,GAAGC,cAAcviB,IAAIlB,KAAK+G,KAC/CkmB,IACAA,EAAKF,WAAa,WAEtBrR,EAAc8H,GAAGgK,eAAe1K,GAChCpH,EAAc8H,GAAGiK,cAAc3K,IAEnC/Y,EAAK9H,UAAUyrB,aAAe,SAAUC,GACpC3tB,KAAKmkB,SAAS,YAAawJ,GAC3B3tB,KAAK4tB,eAET7jB,EAAK9H,UAAUqhB,WAAa,WACxB,IAAI2J,EAAOvR,EAAc8H,GAAGC,cAAcviB,IAAIlB,KAAK+G,KACnD,QAAOkmB,GAA2B,aAApBA,EAAKF,YAEvBhjB,EAAK9H,UAAU4rB,YAAc,WACzB7tB,KAAK8tB,eACL9tB,KAAKoe,GAAG,oCAAoC,SAAU0E,GAClD,IAAIvZ,EAAQvJ,KACR+tB,OAA0ClrB,IAAtBigB,EAAIA,IAAI,UAC5BkL,GAAWD,GAAqB7pB,EAASkD,MAAM6mB,YAAYnlB,QAAQga,EAAIA,IAAI,YAAc,EAC7F,GAAKkL,IAGDhuB,KAAKsjB,aAAT,CAGA,IAAI4K,GAAmB,EACvBxS,EAAc8H,GAAGC,cAAcxI,SAAQ,SAAUgS,GACzC1jB,EAAMqf,aAAaqE,EAAK7oB,QACxB8pB,GAAmB,MAGtBA,GACDluB,KAAKysB,mBAAmB3J,QAIpC/Y,EAAK9H,UAAU2rB,YAAc,WACzB,GAAI5tB,KAAK4H,MAAM+lB,UACX3tB,KAAK6tB,kBAEJ,CACD7tB,KAAK8tB,eACL,IAAIvD,EAAQvqB,KAAKklB,WACbqF,GAAS7O,EAAc8H,GAAGC,cAAclgB,IAAIvD,KAAK+G,MACjD/G,KAAKujB,aAIjBxZ,EAAK9H,UAAU6rB,aAAe,WAC1B9tB,KAAK0iB,IAAI,mBACT1iB,KAAK0iB,IAAI,qBAEb3Y,EAAKpI,OAAS,SAAUgN,EAAMwf,GAI1B,OAHIpqB,EAAOuD,KAAK4S,UAAUvL,KACtBA,EAAO2Z,KAAK8F,MAAMzf,IAEf3O,KAAKquB,YAAY1f,EAAMwf,IAElCpkB,EAAKskB,YAAc,SAAUxgB,EAAKsgB,GAC9B,IAAgFjS,EAAI9T,EAAKtG,EAArFmR,EAAYlJ,EAAK9H,UAAUkmB,aAAa3nB,KAAKqN,GAAMoQ,EAAWpQ,EAAIoQ,SAClEkQ,IACAtgB,EAAIjG,MAAMumB,UAAYA,GAErBjqB,EAASoqB,gBAAgBrb,KAC1BlP,EAAOuD,KAAKmT,KAAK,wCACbxH,EACA,2BACJA,EAAY,SAEhB,IAAIsb,EAAQrqB,EAASoqB,gBAAgBrb,GAErC,GADAiJ,EAAK,IAAIqS,EAAM1gB,EAAIjG,OACfqW,EAEA,IADA7V,EAAM6V,EAASrb,OACVd,EAAI,EAAGA,EAAIsG,EAAKtG,IACjBoa,EAAG4L,IAAI/d,EAAKskB,YAAYpQ,EAASnc,KAGzC,OAAOoa,GAEJnS,EAzuCA,GA2uCXrK,EAAQqK,KAAOA,EACfA,EAAK9H,UAAUuO,SAAW,OAC1BzG,EAAK9H,UAAUiR,oBAAsB,GACrClH,EAAU0E,QAAQC,gBAAgB5G,EAAM,UACxCiC,EAAU0E,QAAQC,gBAAgB5G,EAAM,oBACxCiC,EAAU0E,QAAQC,gBAAgB5G,EAAM,YACxCiC,EAAU0E,QAAQC,gBAAgB5G,EAAM,IAAK,EAAGqC,EAAa+G,sBAC7DnH,EAAU0E,QAAQC,gBAAgB5G,EAAM,IAAK,EAAGqC,EAAa+G,sBAC7DnH,EAAU0E,QAAQC,gBAAgB5G,EAAM,2BAA4B,cAAeqC,EAAayO,sBAChG7O,EAAU0E,QAAQC,gBAAgB5G,EAAM,UAAW,EAAGqC,EAAa+G,sBACnEnH,EAAU0E,QAAQC,gBAAgB5G,EAAM,OAAQ,GAAIqC,EAAayO,sBACjE7O,EAAU0E,QAAQC,gBAAgB5G,EAAM,KAAM,GAAIqC,EAAayO,sBAC/D7O,EAAU0E,QAAQC,gBAAgB5G,EAAM,WAAY,EAAGqC,EAAa+G,sBACpEnH,EAAU0E,QAAQ8d,0BAA0BzkB,EAAM,QAAS,CAAC,IAAK,MACjEiC,EAAU0E,QAAQC,gBAAgB5G,EAAM,SAAU,EAAGqC,EAAa+G,sBAClEnH,EAAU0E,QAAQC,gBAAgB5G,EAAM,SAAU,EAAGqC,EAAa+G,sBAClEnH,EAAU0E,QAAQ8d,0BAA0BzkB,EAAM,OAAQ,CAAC,IAAK,MAChEiC,EAAU0E,QAAQC,gBAAgB5G,EAAM,QAAS,EAAGqC,EAAa+G,sBACjEnH,EAAU0E,QAAQC,gBAAgB5G,EAAM,QAAS,EAAGqC,EAAa+G,sBACjEnH,EAAU0E,QAAQ8d,0BAA0BzkB,EAAM,SAAU,CAAC,IAAK,MAClEiC,EAAU0E,QAAQC,gBAAgB5G,EAAM,UAAW,EAAGqC,EAAa+G,sBACnEnH,EAAU0E,QAAQC,gBAAgB5G,EAAM,UAAW,EAAGqC,EAAa+G,sBACnEnH,EAAU0E,QAAQC,gBAAgB5G,EAAM,eAAgB,KAAMqC,EAAa+G,sBAC3EnH,EAAU0E,QAAQC,gBAAgB5G,EAAM,QAAS,EAAGqC,EAAa+G,sBACjEnH,EAAU0E,QAAQC,gBAAgB5G,EAAM,SAAU,EAAGqC,EAAa+G,sBAClEnH,EAAU0E,QAAQC,gBAAgB5G,EAAM,YAAa,WAAW,SAAUkQ,GACtE,IAAIwU,GAAkB,IAARxU,IAAwB,IAARA,GAAyB,YAARA,EAK/C,OAJKwU,GACD1qB,EAAOuD,KAAKmT,KAAKR,EACb,+FAEDA,KAEXjO,EAAU0E,QAAQC,gBAAgB5G,EAAM,kBAAkB,EAAMqC,EAAawE,uBAC7E5E,EAAU0E,QAAQC,gBAAgB5G,EAAM,UAAW,MAAM,SAAUkQ,GAE/D,OADAja,KAAK+d,iBAAkB,EAChB9D,KAEXjO,EAAU0E,QAAQC,gBAAgB5G,EAAM,UAAW,WAAW,SAAUkQ,GACpE,IAAIwU,GAAkB,IAARxU,IAAwB,IAARA,GAAyB,YAARA,EAK/C,OAJKwU,GACD1qB,EAAOuD,KAAKmT,KAAKR,EACb,6FAEDA,KAEXjO,EAAU0E,QAAQC,gBAAgB5G,EAAM,oBAAqB,MAAOqC,EAAayO,sBACjF7O,EAAU0E,QAAQC,gBAAgB5G,EAAM,QACxCiC,EAAU0E,QAAQC,gBAAgB5G,EAAM,iBACxCiC,EAAU0E,QAAQC,gBAAgB5G,EAAM,aAAa,EAAOqC,EAAawE,uBACzE5E,EAAU0E,QAAQge,WAAW3kB,EAAM,CAC/B4kB,UAAW,SACXC,eAAgB,cAChBC,eAAgB,gBAEpB9qB,EAAO8M,WAAWC,WAAW/G,I,uBCn2C7B,IAAI1G,EAAkB,EAAQ,QAC1BiQ,EAAW,EAAQ,QACnBwb,EAAkB,EAAQ,QAG1BC,EAAe,SAAUC,GAC3B,OAAO,SAAUC,EAAOC,EAAIC,GAC1B,IAGI7tB,EAHAsC,EAAIP,EAAgB4rB,GACpBrsB,EAAS0Q,EAAS1P,EAAEhB,QACpBsR,EAAQ4a,EAAgBK,EAAWvsB,GAIvC,GAAIosB,GAAeE,GAAMA,GAAI,MAAOtsB,EAASsR,EAG3C,GAFA5S,EAAQsC,EAAEsQ,KAEN5S,GAASA,EAAO,OAAO,OAEtB,KAAMsB,EAASsR,EAAOA,IAC3B,IAAK8a,GAAe9a,KAAStQ,IAAMA,EAAEsQ,KAAWgb,EAAI,OAAOF,GAAe9a,GAAS,EACnF,OAAQ8a,IAAgB,IAI9BrvB,EAAOD,QAAU,CAGf0vB,SAAUL,GAAa,GAGvBjmB,QAASimB,GAAa,K,uBC9BxB,IAAI1a,EAAY,EAAQ,QAEpBC,EAAM5L,KAAK4L,IAIf3U,EAAOD,QAAU,SAAU2vB,GACzB,OAAOA,EAAW,EAAI/a,EAAID,EAAUgb,GAAW,kBAAoB,I,mBCPrE,IAAIntB,EAAiB,GAAGA,eAExBvC,EAAOD,QAAU,SAAUqR,EAAInP,GAC7B,OAAOM,EAAe1B,KAAKuQ,EAAInP,K,kCCFjC,IAAI4J,EAAaxL,MAAQA,KAAKwL,WAAc,WACxC,IAAIC,EAAgB,SAAU9K,EAAGoC,GAI7B,OAHA0I,EAAgB1K,OAAO2K,gBAClB,CAAEC,UAAW,cAAgBC,OAAS,SAAUjL,EAAGoC,GAAKpC,EAAEgL,UAAY5I,IACvE,SAAUpC,EAAGoC,GAAK,IAAK,IAAIZ,KAAKY,EAAOA,EAAEb,eAAeC,KAAIxB,EAAEwB,GAAKY,EAAEZ,KAClEsJ,EAAc9K,EAAGoC,IAE5B,OAAO,SAAUpC,EAAGoC,GAEhB,SAAS8I,IAAO7L,KAAK8L,YAAcnL,EADnC8K,EAAc9K,EAAGoC,GAEjBpC,EAAEsB,UAAkB,OAANc,EAAahC,OAAOY,OAAOoB,IAAM8I,EAAG5J,UAAYc,EAAEd,UAAW,IAAI4J,IAV3C,GAa5C9K,OAAOC,eAAetB,EAAS,aAAc,CAAE4B,OAAO,IACtD,IAsBIguB,EAtBAvrB,EAAS,EAAQ,QACjBiI,EAAY,EAAQ,QACpBG,EAAU,EAAQ,QAClBjI,EAAW,EAAQ,QACnBkI,EAAe,EAAQ,QACvBmjB,EAAW,EAAQ,QACnBC,EAAO,OAAQC,EAAS,SAAUC,EAAU,UAAWC,EAAe,eAAgBC,EAAa,KAAMC,EAAO,IAAKC,EAAO,OAAQC,EAAO,OAAQC,EAAa,OAAQC,EAAM,MAAOC,EAAS,SAAUC,EAAS,SAAUC,EAAS,SAAUC,EAAW,MAAOpT,EAAQ,IAAKqT,EAAQ,QAASC,EAAO,OAAQC,EAAO,OAAQC,EAAO,OAAQC,EAAW,IAAKC,EAAmB,CAC9W,aACA,WACA,YACA,cACA,UACA,QACA,gBACA,aACA,OACA,QACA,SACA,OACA,WACA,iBACDC,EAAoBD,EAAiB/tB,OAExC,SAASiuB,IACL,OAAIvB,IAGJA,EAAevrB,EAAOuD,KAAKwpB,sBAAsBvhB,WAAWqgB,GACrDN,GAEX,SAASyB,EAAUtiB,GACfA,EAAQuiB,SAAShxB,KAAKixB,aAAcjxB,KAAKkxB,cAAelxB,KAAKmxB,eAEjE,SAASC,EAAY3iB,GACjBA,EAAQ4iB,WAAWrxB,KAAKixB,aAAcjxB,KAAKkxB,cAAelxB,KAAKmxB,eAEnE,SAASG,EAAiBzqB,GAOtB,OANAA,EAASA,GAAU,GACdA,EAAO0qB,8BACP1qB,EAAO2qB,8BACP3qB,EAAO4qB,mBACR5qB,EAAO6qB,KAAO7qB,EAAO6qB,MAAQ,SAE1B7qB,EAEKrE,OAAOP,UAAU0vB,UAAjC,IAIIC,EAAQ,SAAU/kB,GAElB,SAAS+kB,EAAK/qB,GACV,IAAI0C,EAAQsD,EAAOrM,KAAKR,KAAMsxB,EAAiBzqB,KAAY7G,KAC3DuJ,EAAM2nB,cAAgB,EACtB3nB,EAAM4nB,cAAgB,EACtB,IAAK,IAAIrvB,EAAI,EAAGA,EAAI8uB,EAAmB9uB,IACnCyH,EAAM6U,GAAGuS,EAAiB7uB,GAAK6tB,EAAcpmB,EAAMsoB,cAGvD,OADAtoB,EAAMsoB,eACCtoB,EAmPX,OA5PAiC,EAAUomB,EAAM/kB,GAWhB+kB,EAAK3vB,UAAUoQ,WAAa,SAAU5D,GAClC,IAAqe3M,EAAjegwB,EAAU9xB,KAAK8xB,UAAWC,EAAW/xB,KAAK+xB,WAAYC,EAAehyB,KAAKiyB,aAAeF,EAAUG,EAAUlyB,KAAKkyB,QAASC,EAAaD,EAAQtvB,OAAQwvB,EAAgBpyB,KAAKoyB,gBAAiBC,EAAS,EAAGC,EAAQtyB,KAAKsyB,QAASC,EAAavyB,KAAK2S,WAAY6f,EAAgBxyB,KAAKwyB,gBAAiBd,EAAO1xB,KAAK0xB,OAAQe,EAAiBzyB,KAAKyyB,iBAAkBC,GAA2D,IAAzCD,EAAe3pB,QAAQ,aAAqB6pB,GAAgE,IAA5CF,EAAe3pB,QAAQ,gBACzc8pB,EAAa,EAEbC,GADAD,EAAaZ,EAAe,EACX,GACjBc,EAAiB,EAWrB,IAVArkB,EAAQnF,QAAQ,OAAQtJ,KAAK+yB,mBAC7BtkB,EAAQnF,QAAQ,eAAgB6mB,GAChC1hB,EAAQnF,QAAQ,YAAawmB,GACzBsC,IAAkBjC,EAClBkC,GAAUryB,KAAK4S,YAAcuf,EAAaH,EAAyB,EAAVF,GAAe,EAEnEM,IAAkBlC,IACvBmC,EAASryB,KAAK4S,YAAcuf,EAAaH,EAAyB,EAAVF,GAE5DrjB,EAAQ4R,UAAUyR,EAASO,EAASP,GAC/BhwB,EAAI,EAAGA,EAAIqwB,EAAYrwB,IAAK,CACzB+wB,EAAiB,EACjBC,EAAiB,EADrB,IAE2FE,EAAcC,EAASC,EAA9GrlB,EAAMqkB,EAAQpwB,GAAIqxB,EAAOtlB,EAAIslB,KAAMhmB,EAAQU,EAAIV,MAAOimB,EAAWtxB,IAAMqwB,EAAa,EAwCxF,GAvCA1jB,EAAQ2R,OACJkS,IAAUhC,EACVuC,GAAkBN,EAAaplB,EAAkB,EAAV2kB,EAElCQ,IAAU7C,IACfoD,IAAmBN,EAAaplB,EAAkB,EAAV2kB,GAAe,GAEvDY,IACAjkB,EAAQ2R,OACR3R,EAAQ6D,YACR7D,EAAQmZ,OAAOiL,EAAgBD,EAAaE,EAAiBpqB,KAAKW,MAAM0oB,EAAW,IACnFiB,EAAeG,EAAKxa,MAAM,KAAK/V,OAAS,EACxCqwB,EAA2B,IAAjBD,EACVE,EACIZ,IAAU5C,GAAW0D,IAAaH,EAC5BV,EAAuB,EAAVT,EACb3kB,EACVsB,EAAQ4kB,OAAOR,EAAiBnqB,KAAKW,MAAM6pB,GAAYN,EAAaE,EAAiBpqB,KAAKW,MAAM0oB,EAAW,IAC3GtjB,EAAQykB,UAAYnB,EAAW,GAC/BtjB,EAAQ6kB,YAAc5B,EACtBjjB,EAAQ8R,SACR9R,EAAQ6R,WAERqS,IACAlkB,EAAQ2R,OACR3R,EAAQ6D,YACR7D,EAAQmZ,OAAOiL,EAAgBD,EAAaE,GAC5CE,EAAeG,EAAKxa,MAAM,KAAK/V,OAAS,EACxCqwB,EAA2B,IAAjBD,EACVE,EACIZ,IAAU5C,GAAW0D,IAAaH,EAC5BV,EAAuB,EAAVT,EACb3kB,EACVsB,EAAQ4kB,OAAOR,EAAiBnqB,KAAKW,MAAM6pB,GAAYN,EAAaE,GACpErkB,EAAQykB,UAAYnB,EAAW,GAC/BtjB,EAAQ6kB,YAAc5B,EACtBjjB,EAAQ8R,SACR9R,EAAQ6R,WAEU,IAAlBkS,GAAuBF,IAAU5C,EAAS,CAC1CsD,EAAeG,EAAKxa,MAAM,KAAK/V,OAAS,EACxC,IAAK,IAAI2wB,EAAK,EAAGA,EAAKJ,EAAKvwB,OAAQ2wB,IAAM,CACrC,IAAIC,EAASL,EAAKI,GACH,MAAXC,GAAkB1xB,IAAMqwB,EAAa,GAAKG,IAAU5C,IACpDmD,GAAkBnqB,KAAK+qB,OAAOlB,EAAuB,EAAVT,EAAc3kB,GAAS6lB,IAEtEhzB,KAAKkxB,cAAgB2B,EACrB7yB,KAAKmxB,cAAgByB,EAAaE,EAClC9yB,KAAKixB,aAAeuC,EACpB/kB,EAAQiE,gBAAgB1S,MACxB6yB,GACInqB,KAAKW,MAAMrJ,KAAK0zB,YAAYF,GAAQrmB,OAASqlB,QAIrDxyB,KAAKkxB,cAAgB2B,EACrB7yB,KAAKmxB,cAAgByB,EAAaE,EAClC9yB,KAAKixB,aAAekC,EACpB1kB,EAAQiE,gBAAgB1S,MAE5ByO,EAAQ6R,UACJ6R,EAAa,IACbS,GAAcZ,KAI1BJ,EAAK3vB,UAAU0xB,SAAW,SAAUllB,GAChC,IAAItB,EAAQnN,KAAK2S,WAAYvF,EAASpN,KAAK4S,YAC3CnE,EAAQ6D,YACR7D,EAAQ0Q,KAAK,EAAG,EAAGhS,EAAOC,GAC1BqB,EAAQgE,YACRhE,EAAQiE,gBAAgB1S,OAE5B4xB,EAAK3vB,UAAU2xB,QAAU,SAAUT,GAC/B,IAAIttB,EAAM9B,EAAOuD,KAAK4S,UAAUiZ,GAC1BA,EACS,OAATA,QAA0BtwB,IAATswB,EACb,GACAA,EAAO,GAEjB,OADAnzB,KAAKmkB,SAAS4L,EAAMlqB,GACb7F,MAEX4xB,EAAK3vB,UAAU0Q,SAAW,WACtB,IAAIiI,EAAS5a,KAAK4H,MAAMuF,QAAUqiB,QAA6B3sB,IAArB7C,KAAK4H,MAAMuF,MACrD,OAAOyN,EAAS5a,KAAK6zB,eAAkC,EAAjB7zB,KAAK8xB,UAAgB9xB,KAAK4H,MAAMuF,OAE1EykB,EAAK3vB,UAAU2Q,UAAY,WACvB,IAAIgI,EAAS5a,KAAK4H,MAAMwF,SAAWoiB,QAA8B3sB,IAAtB7C,KAAK4H,MAAMwF,OACtD,OAAOwN,EACD5a,KAAK+xB,WAAa/xB,KAAKkyB,QAAQtvB,OAAS5C,KAAKiyB,aAC1B,EAAjBjyB,KAAK8xB,UACP9xB,KAAK4H,MAAMwF,QAErBwkB,EAAK3vB,UAAU4xB,aAAe,WAC1B,OAAO7zB,KAAK8zB,WAEhBlC,EAAK3vB,UAAU8xB,cAAgB,WAE3B,OADAhwB,EAAOuD,KAAKmT,KAAK,6HACVza,KAAKg0B,YAEhBpC,EAAK3vB,UAAUyxB,YAAc,SAAUP,GACnC,IAA8Dc,EAA1D9T,EAAW0Q,IAAmBkB,EAAW/xB,KAAK+xB,WAKlD,OAJA5R,EAASC,OACTD,EAAS+T,KAAOl0B,KAAK+yB,kBACrBkB,EAAU9T,EAASgU,YAAYhB,GAC/BhT,EAASG,UACF,CACHnT,MAAO8mB,EAAQ9mB,MACfC,OAAQ2kB,IAGhBH,EAAK3vB,UAAU8wB,gBAAkB,WAC7B,OAAI7uB,EAASkD,MAAMgtB,GAAGC,KACVr0B,KAAKs0B,YACTrX,EACAjd,KAAK+xB,WACL1B,EACArwB,KAAKu0B,aAELv0B,KAAKs0B,YACTrX,EACAjd,KAAKw0B,cACLvX,EACAjd,KAAK+xB,WACL1B,EACArwB,KAAKu0B,cAEb3C,EAAK3vB,UAAUwyB,aAAe,SAAUC,GAChC10B,KAAKsyB,UAAY5C,IACjBgF,EAAOA,EAAKC,QAEhB,IAAIxnB,EAAQnN,KAAK40B,cAAcF,GAC/B,OAAO10B,KAAKkyB,QAAQnpB,KAAK,CAAEoqB,KAAMuB,EAAMvnB,MAAOA,KAElDykB,EAAK3vB,UAAU2yB,cAAgB,SAAUzB,GACrC,IAAIX,EAAgBxyB,KAAKwyB,gBACrB5vB,EAASuwB,EAAKvwB,OAClB,OAAQiuB,IAAkBsD,YAAYhB,GAAMhmB,OACvCvK,EAAS4vB,GAAiB5vB,EAAS,GAAK,IAEjDgvB,EAAK3vB,UAAU4vB,aAAe,WAC1B,IAAIgD,EAAQ70B,KAAKmzB,OAAOxa,MAAM,MAAOoZ,GAAY/xB,KAAK+xB,WAAY+B,EAAY,EAAG9B,EAAehyB,KAAKiyB,aAAeF,EAAU5kB,EAAQnN,KAAK4H,MAAMuF,MAAOC,EAASpN,KAAK4H,MAAMwF,OAAQ0nB,EAAa3nB,IAAUqiB,QAAkB3sB,IAAVsK,EAAqB4nB,EAAc3nB,IAAWoiB,QAAmB3sB,IAAXuK,EAAsB0kB,EAAU9xB,KAAK8xB,UAAWkD,EAAW7nB,EAAkB,EAAV2kB,EAAamD,EAAc7nB,EAAmB,EAAV0kB,EAAaoD,EAAkB,EAAGC,EAAOn1B,KAAKm1B,OAAQC,EAAaD,IAAS1E,EAAM4E,EAAaF,IAAS3E,GAAQ4E,EAAYE,EAAoBt1B,KAAKu1B,aAAeH,EACphBp1B,KAAKkyB,QAAU,GACfrB,IAAkBqD,KAAOl0B,KAAK+yB,kBAE9B,IADA,IAAIyC,EAAkBF,EAAoBt1B,KAAK40B,cAAclE,GAAY,EAChErwB,EAAI,EAAGsI,EAAMksB,EAAMjyB,OAAQvC,EAAIsI,IAAOtI,EAAG,CAC9C,IAAIq0B,EAAOG,EAAMx0B,GACb6yB,EAAYlzB,KAAK40B,cAAcF,GACnC,GAAII,GAAc5B,EAAY8B,EAC1B,MAAON,EAAK9xB,OAAS,EAAG,CACpB,IAAI6yB,EAAM,EAAGC,EAAOhB,EAAK9xB,OAAQ2V,EAAQ,GAAIod,EAAa,EAC1D,MAAOF,EAAMC,EAAM,CACf,IAAIE,EAAOH,EAAMC,IAAU,EAAGG,EAASnB,EAAKhP,MAAM,EAAGkQ,EAAM,GAAIE,EAAc91B,KAAK40B,cAAciB,GAAUL,EACtGM,GAAed,GACfS,EAAMG,EAAM,EACZrd,EAAQsd,GAAUP,EAAoB5E,EAAW,IACjDiF,EAAaG,GAGbJ,EAAOE,EAGf,IAAIrd,EAwCA,MAvCA,GAAI8c,EAAY,CACZ,IAAIU,EACAC,EAAWtB,EAAKnc,EAAM3V,QACtBqzB,EAAoBD,IAAa/Y,GAAS+Y,IAAanG,EAEvDkG,EADAE,GAAqBN,GAAcX,EACvBzc,EAAM3V,OAId8F,KAAKC,IAAI4P,EAAM2d,YAAYjZ,GAAQ1E,EAAM2d,YAAYrG,IACjD,EAERkG,EAAY,IACZN,EAAMM,EACNxd,EAAQA,EAAMmN,MAAM,EAAG+P,GACvBE,EAAa31B,KAAK40B,cAAcrc,IAOxC,GAJAA,EAAQA,EAAMoZ,YACd3xB,KAAKy0B,aAAalc,GAClBub,EAAYprB,KAAKC,IAAImrB,EAAW6B,GAChCT,GAAmBlD,GACdoD,GACAL,GAAeG,EAAkBlD,EAAeiD,EACjD,MAIJ,GAFAP,EAAOA,EAAKhP,MAAM+P,GAClBf,EAAOA,EAAKyB,WACRzB,EAAK9xB,OAAS,IACdswB,EAAYlzB,KAAK40B,cAAcF,GAC3BxB,GAAa8B,GAAU,CACvBh1B,KAAKy0B,aAAaC,GAClBQ,GAAmBlD,EACnB8B,EAAYprB,KAAKC,IAAImrB,EAAWZ,GAChC,YAUhBlzB,KAAKy0B,aAAaC,GAClBQ,GAAmBlD,EACnB8B,EAAYprB,KAAKC,IAAImrB,EAAWZ,GAEpC,GAAI6B,GAAeG,EAAkBlD,EAAeiD,EAChD,MAGRj1B,KAAKg0B,WAAajC,EAClB/xB,KAAK8zB,UAAYA,GAErBlC,EAAK3vB,UAAUm0B,sBAAwB,WACnC,OAAO,GAEJxE,EA7PA,CA8PTzlB,EAAQ4G,OACVrT,EAAQkyB,KAAOA,EACfA,EAAK3vB,UAAU8uB,UAAYA,EAC3Ba,EAAK3vB,UAAUmvB,YAAcA,EAC7BQ,EAAK3vB,UAAUgR,UAAY+c,EAC3B4B,EAAK3vB,UAAUiR,oBAAsB,CACjC,OACA,WACA,UACA,OACA,cAEJqc,EAAS9e,cAAcmhB,GACvB5lB,EAAU0E,QAAQ2lB,gBAAgBzE,EAAM,QAASxlB,EAAasO,4BAC9D1O,EAAU0E,QAAQ2lB,gBAAgBzE,EAAM,SAAUxlB,EAAasO,4BAC/D1O,EAAU0E,QAAQC,gBAAgBihB,EAAM,aAAc,SACtD5lB,EAAU0E,QAAQC,gBAAgBihB,EAAM,WAAY,GAAIxlB,EAAa+G,sBACrEnH,EAAU0E,QAAQC,gBAAgBihB,EAAM,YAAaxB,GACrDpkB,EAAU0E,QAAQC,gBAAgBihB,EAAM,cAAexB,GACvDpkB,EAAU0E,QAAQC,gBAAgBihB,EAAM,UAAW,EAAGxlB,EAAa+G,sBACnEnH,EAAU0E,QAAQC,gBAAgBihB,EAAM,QAAS9B,GACjD9jB,EAAU0E,QAAQC,gBAAgBihB,EAAM,gBAAiB3B,GACzDjkB,EAAU0E,QAAQC,gBAAgBihB,EAAM,aAAc,EAAGxlB,EAAa+G,sBACtEnH,EAAU0E,QAAQC,gBAAgBihB,EAAM,OAAQrB,GAChDvkB,EAAU0E,QAAQC,gBAAgBihB,EAAM,YAAY,GACpD5lB,EAAU0E,QAAQC,gBAAgBihB,EAAM,gBAAiB,EAAGxlB,EAAa+G,sBACzEnH,EAAU0E,QAAQC,gBAAgBihB,EAAM,OAAQ,GAAIxlB,EAAayO,sBACjE7O,EAAU0E,QAAQC,gBAAgBihB,EAAM,iBAAkB,IAC1D7tB,EAAO8M,WAAWC,WAAW8gB,I,qBC1V7B,IAAI0E,EAAU,EAAQ,QAClBC,EAAQ,EAAQ,SAEnB52B,EAAOD,QAAU,SAAUkC,EAAKN,GAC/B,OAAOi1B,EAAM30B,KAAS20B,EAAM30B,QAAiBiB,IAAVvB,EAAsBA,EAAQ,MAChE,WAAY,IAAIyH,KAAK,CACtByP,QAAS,QACThX,KAAM80B,EAAU,OAAS,SACzBE,UAAW,0C,uBCRb,IAAItlB,EAAa,EAAQ,QACrBulB,EAA4B,EAAQ,QACpCC,EAA8B,EAAQ,QACtCtjB,EAAW,EAAQ,QAGvBzT,EAAOD,QAAUwR,EAAW,UAAW,YAAc,SAAiBH,GACpE,IAAIiI,EAAOyd,EAA0B9yB,EAAEyP,EAASrC,IAC5C0K,EAAwBib,EAA4B/yB,EACxD,OAAO8X,EAAwBzC,EAAKjD,OAAO0F,EAAsB1K,IAAOiI,I,mBCP1ErZ,EAAOD,QAAU,iD,uBCFjB,IAAIi3B,EAAyB,EAAQ,QACjCC,EAAc,EAAQ,QAEtBC,EAAa,IAAMD,EAAc,IACjCE,EAAQC,OAAO,IAAMF,EAAaA,EAAa,KAC/CG,EAAQD,OAAOF,EAAaA,EAAa,MAGzC9H,EAAe,SAAUkI,GAC3B,OAAO,SAAUhI,GACf,IAAIvV,EAASlX,OAAOm0B,EAAuB1H,IAG3C,OAFW,EAAPgI,IAAUvd,EAASA,EAAOqP,QAAQ+N,EAAO,KAClC,EAAPG,IAAUvd,EAASA,EAAOqP,QAAQiO,EAAO,KACtCtd,IAIX/Z,EAAOD,QAAU,CAGfuI,MAAO8mB,EAAa,GAGpB/mB,IAAK+mB,EAAa,GAGlB4F,KAAM5F,EAAa,K,qBC1BrBpvB,EAAOD,QAAU,SAAUw3B,EAAQ51B,GACjC,MAAO,CACLL,aAAuB,EAATi2B,GACd/gB,eAAyB,EAAT+gB,GAChBC,WAAqB,EAATD,GACZ51B,MAAOA,K,qBCLX,IAAI+S,EAAY,EAAQ,QACpBsiB,EAAyB,EAAQ,QAGjC5H,EAAe,SAAUqI,GAC3B,OAAO,SAAUnI,EAAOthB,GACtB,IAGI0pB,EAAOC,EAHP/b,EAAI/Y,OAAOm0B,EAAuB1H,IAClCsI,EAAWljB,EAAU1G,GACrBqd,EAAOzP,EAAE3Y,OAEb,OAAI20B,EAAW,GAAKA,GAAYvM,EAAaoM,EAAoB,QAAKv0B,GACtEw0B,EAAQ9b,EAAEic,WAAWD,GACdF,EAAQ,OAAUA,EAAQ,OAAUE,EAAW,IAAMvM,IACtDsM,EAAS/b,EAAEic,WAAWD,EAAW,IAAM,OAAUD,EAAS,MAC1DF,EAAoB7b,EAAErC,OAAOqe,GAAYF,EACzCD,EAAoB7b,EAAEmK,MAAM6R,EAAUA,EAAW,GAA+BD,EAAS,OAAlCD,EAAQ,OAAU,IAA0B,SAI7G13B,EAAOD,QAAU,CAGf+3B,OAAQ1I,GAAa,GAGrB7V,OAAQ6V,GAAa,K,uBCzBvB,IAAI9V,EAAW,EAAQ,QACnBye,EAAU,EAAQ,QAClBr1B,EAAkB,EAAQ,QAE1B0P,EAAU1P,EAAgB,WAI9B1C,EAAOD,QAAU,SAAUi4B,EAAe/0B,GACxC,IAAI4Y,EASF,OAREkc,EAAQC,KACVnc,EAAImc,EAAc7rB,YAEF,mBAAL0P,GAAoBA,IAAM5P,QAAS8rB,EAAQlc,EAAEvZ,WAC/CgX,EAASuC,KAChBA,EAAIA,EAAEzJ,GACI,OAANyJ,IAAYA,OAAI3Y,IAH+C2Y,OAAI3Y,GAKlE,SAAWA,IAAN2Y,EAAkB5P,MAAQ4P,GAAc,IAAX5Y,EAAe,EAAIA,K,uBClBhE,IASI+T,EAAKzV,EAAKqC,EATVq0B,EAAkB,EAAQ,QAC1BpjB,EAAS,EAAQ,QACjByE,EAAW,EAAQ,QACnBxE,EAA8B,EAAQ,QACtCojB,EAAY,EAAQ,QACpBC,EAAY,EAAQ,QACpBhiB,EAAa,EAAQ,QAErBiiB,EAAUvjB,EAAOujB,QAGjBC,EAAU,SAAUjnB,GACtB,OAAOxN,EAAIwN,GAAM7P,EAAI6P,GAAM4F,EAAI5F,EAAI,KAGjCyI,EAAY,SAAUyd,GACxB,OAAO,SAAUlmB,GACf,IAAIxK,EACJ,IAAK0S,EAASlI,KAAQxK,EAAQrF,EAAI6P,IAAKxD,OAAS0pB,EAC9C,MAAMhmB,UAAU,0BAA4BgmB,EAAO,aACnD,OAAO1wB,IAIb,GAAIqxB,EAAiB,CACnB,IAAIrB,EAAQ,IAAIwB,EACZE,EAAQ1B,EAAMr1B,IACdg3B,EAAQ3B,EAAMhzB,IACd40B,EAAQ5B,EAAM5f,IAClBA,EAAM,SAAU5F,EAAIqnB,GAElB,OADAD,EAAM33B,KAAK+1B,EAAOxlB,EAAIqnB,GACfA,GAETl3B,EAAM,SAAU6P,GACd,OAAOknB,EAAMz3B,KAAK+1B,EAAOxlB,IAAO,IAElCxN,EAAM,SAAUwN,GACd,OAAOmnB,EAAM13B,KAAK+1B,EAAOxlB,QAEtB,CACL,IAAIsnB,EAAQP,EAAU,SACtBhiB,EAAWuiB,IAAS,EACpB1hB,EAAM,SAAU5F,EAAIqnB,GAElB,OADA3jB,EAA4B1D,EAAIsnB,EAAOD,GAChCA,GAETl3B,EAAM,SAAU6P,GACd,OAAO8mB,EAAU9mB,EAAIsnB,GAAStnB,EAAGsnB,GAAS,IAE5C90B,EAAM,SAAUwN,GACd,OAAO8mB,EAAU9mB,EAAIsnB,IAIzB14B,EAAOD,QAAU,CACfiX,IAAKA,EACLzV,IAAKA,EACLqC,IAAKA,EACLy0B,QAASA,EACTxe,UAAWA,I,uBC3Db,IAAIhF,EAAS,EAAQ,QACjBC,EAA8B,EAAQ,QACtClR,EAAM,EAAQ,QACdoR,EAAY,EAAQ,QACpB2jB,EAAgB,EAAQ,QACxBnf,EAAsB,EAAQ,QAE9BI,EAAmBJ,EAAoBjY,IACvCq3B,EAAuBpf,EAAoB6e,QAC3CQ,EAAWh2B,OAAOA,QAAQmW,MAAM,WAEnChZ,EAAOD,QAAU,SAAUkE,EAAGhC,EAAKN,EAAOwT,GACzC,IAAI2jB,IAAS3jB,KAAYA,EAAQ2jB,OAC7BC,IAAS5jB,KAAYA,EAAQ7T,WAC7BwU,IAAcX,KAAYA,EAAQW,YAClB,mBAATnU,IACS,iBAAPM,GAAoB2B,EAAIjC,EAAO,SAASmT,EAA4BnT,EAAO,OAAQM,GAC9F22B,EAAqBj3B,GAAOyT,OAASyjB,EAASjb,KAAmB,iBAAP3b,EAAkBA,EAAM,KAEhFgC,IAAM4Q,GAIEikB,GAEAhjB,GAAe7R,EAAEhC,KAC3B82B,GAAS,UAFF90B,EAAEhC,GAIP82B,EAAQ90B,EAAEhC,GAAON,EAChBmT,EAA4B7Q,EAAGhC,EAAKN,IATnCo3B,EAAQ90B,EAAEhC,GAAON,EAChBqT,EAAU/S,EAAKN,KAUrBwW,SAAS7V,UAAW,YAAY,WACjC,MAAsB,mBAARjC,MAAsBuZ,EAAiBvZ,MAAM+U,QAAUujB,EAAct4B,U,qBChCrF,IAAIiZ,EAAW,EAAQ,QACnBvN,EAAiB,EAAQ,QAG7B/L,EAAOD,QAAU,SAAUuvB,EAAO0J,EAAOC,GACvC,IAAIC,EAAWC,EAUf,OAPEptB,GAE0C,mBAAlCmtB,EAAYF,EAAM7sB,cAC1B+sB,IAAcD,GACd3f,EAAS6f,EAAqBD,EAAU52B,YACxC62B,IAAuBF,EAAQ32B,WAC/ByJ,EAAeujB,EAAO6J,GACjB7J,I,mBCfTvvB,EAAQiE,EAAI5C,OAAO0a,uB,mBCCnB9b,EAAOD,QAAU,CACf,cACA,iBACA,gBACA,uBACA,iBACA,WACA,Y,uBCRF,IAAIi3B,EAAyB,EAAQ,QAIrCh3B,EAAOD,QAAU,SAAU2vB,GACzB,OAAOtuB,OAAO41B,EAAuBtH,M,uBCLvC,IAmDI0J,EAnDA3lB,EAAW,EAAQ,QACnB0F,EAAmB,EAAQ,QAC3BjD,EAAc,EAAQ,QACtBC,EAAa,EAAQ,QACrBU,EAAO,EAAQ,QACfwiB,EAAwB,EAAQ,QAChClB,EAAY,EAAQ,QAEpBmB,EAAK,IACLC,EAAK,IACLC,EAAY,YACZC,EAAS,SACTC,EAAWvB,EAAU,YAErBwB,EAAmB,aAEnBC,EAAY,SAAUlpB,GACxB,OAAO6oB,EAAKE,EAASH,EAAK5oB,EAAU6oB,EAAK,IAAME,EAASH,GAItDO,EAA4B,SAAUT,GACxCA,EAAgBU,MAAMF,EAAU,KAChCR,EAAgBW,QAChB,IAAIC,EAAOZ,EAAgBa,aAAa74B,OAExC,OADAg4B,EAAkB,KACXY,GAILE,EAA2B,WAE7B,IAEIC,EAFAC,EAASf,EAAsB,UAC/BgB,EAAK,OAASZ,EAAS,IAU3B,OARAW,EAAOE,MAAMC,QAAU,OACvB1jB,EAAKjG,YAAYwpB,GAEjBA,EAAOI,IAAM33B,OAAOw3B,GACpBF,EAAiBC,EAAOK,cAAcC,SACtCP,EAAeQ,OACfR,EAAeL,MAAMF,EAAU,sBAC/BO,EAAeJ,QACRI,EAAeS,GASpBC,EAAkB,WACpB,IAEEzB,EAAkBsB,SAASI,QAAU,IAAIC,cAAc,YACvD,MAAO52B,IACT02B,EAAkBzB,EAAkBS,EAA0BT,GAAmBc,IACjF,IAAIj3B,EAASiT,EAAYjT,OACzB,MAAOA,WAAiB43B,EAAgBrB,GAAWtjB,EAAYjT,IAC/D,OAAO43B,KAGT1kB,EAAWujB,IAAY,EAIvB15B,EAAOD,QAAUqB,OAAOY,QAAU,SAAgBiC,EAAGmV,GACnD,IAAIpF,EAQJ,OAPU,OAAN/P,GACF01B,EAAiBH,GAAa/lB,EAASxP,GACvC+P,EAAS,IAAI2lB,EACbA,EAAiBH,GAAa,KAE9BxlB,EAAO0lB,GAAYz1B,GACd+P,EAAS6mB,SACM33B,IAAfkW,EAA2BpF,EAASmF,EAAiBnF,EAAQoF,K,oCC3EtEhY,OAAOC,eAAetB,EAAS,aAAc,CAAE4B,OAAO,IACtD,IAAI4C,EAAW,EAAQ,QACnBy2B,EAAW,IAAIhd,IACfid,OAAoE/3B,IAA3CqB,EAASkD,MAAMyzB,QAAQ,gBACpD,SAASC,EAAiBpO,GACtB,OAAOiO,EAASz5B,IAAIwrB,GAGxB,SAASqO,EAAYjY,GACjB,MAAO,CACHA,IAAKA,EACL4J,UAAW5J,EAAI4J,WAIvB,SAASsO,EAAkBtO,EAAW3e,GAClC,OAAO4sB,EAASz5B,IAAIwrB,KAAe3e,EAGvC,SAASktB,EAAkBvO,EAAW3e,GAClCmtB,EAAexO,GACf,IAAInC,EAAQxc,EAAMmX,WACbqF,IAELoQ,EAAShkB,IAAI+V,EAAW3e,GACpB6sB,GACA7sB,EAAMsB,MAAM,oBAAqB0rB,EAAY,IAAII,aAAa,wBAItE,SAASD,EAAexO,EAAWzX,GAC/B,IAAIlH,EAAQ4sB,EAASz5B,IAAIwrB,GACzB,GAAK3e,EAAL,CAEA,IAAIwc,EAAQxc,EAAMmX,WACdqF,GAASA,EAAMla,QAEnBsqB,EAASlc,OAAOiO,GACZkO,GACA7sB,EAAMsB,MAAM,qBAAsB0rB,EAAY,IAAII,aAAa,yBAhCvEz7B,EAAQo7B,iBAAmBA,EAO3Bp7B,EAAQq7B,YAAcA,EAItBr7B,EAAQs7B,kBAAoBA,EAW5Bt7B,EAAQu7B,kBAAoBA,EAa5Bv7B,EAAQw7B,eAAiBA,G,oCC1CzB,IAAIE,EAAI,EAAQ,QACZC,EAA4B,EAAQ,QACpCC,EAAiB,EAAQ,QACzB5vB,EAAiB,EAAQ,QACzB6vB,EAAiB,EAAQ,QACzB9mB,EAA8B,EAAQ,QACtCC,EAAW,EAAQ,QACnBrS,EAAkB,EAAQ,QAC1Bi0B,EAAU,EAAQ,QAClB1d,EAAY,EAAQ,QACpB4iB,EAAgB,EAAQ,QAExBC,EAAoBD,EAAcC,kBAClCC,EAAyBF,EAAcE,uBACvCvqB,EAAW9O,EAAgB,YAC3Bs5B,EAAO,OACPC,EAAS,SACTC,EAAU,UAEVC,EAAa,WAAc,OAAO97B,MAEtCL,EAAOD,QAAU,SAAUq8B,EAAUjf,EAAMkf,EAAqBzqB,EAAM0qB,EAASC,EAAQlnB,GACrFqmB,EAA0BW,EAAqBlf,EAAMvL,GAErD,IAkBI4qB,EAA0BC,EAASC,EAlBnCC,EAAqB,SAAUC,GACjC,GAAIA,IAASN,GAAWO,EAAiB,OAAOA,EAChD,IAAKd,GAA0Ba,KAAQE,EAAmB,OAAOA,EAAkBF,GACnF,OAAQA,GACN,KAAKZ,EAAM,OAAO,WAAkB,OAAO,IAAIK,EAAoBh8B,KAAMu8B,IACzE,KAAKX,EAAQ,OAAO,WAAoB,OAAO,IAAII,EAAoBh8B,KAAMu8B,IAC7E,KAAKV,EAAS,OAAO,WAAqB,OAAO,IAAIG,EAAoBh8B,KAAMu8B,IAC/E,OAAO,WAAc,OAAO,IAAIP,EAAoBh8B,QAGpDsC,EAAgBwa,EAAO,YACvB4f,GAAwB,EACxBD,EAAoBV,EAAS95B,UAC7B06B,EAAiBF,EAAkBtrB,IAClCsrB,EAAkB,eAClBR,GAAWQ,EAAkBR,GAC9BO,GAAmBd,GAA0BiB,GAAkBL,EAAmBL,GAClFW,EAA4B,SAAR9f,GAAkB2f,EAAkBI,SAA4BF,EAiCxF,GA7BIC,IACFT,EAA2Bb,EAAesB,EAAkBp8B,KAAK,IAAIu7B,IACjEN,IAAsB16B,OAAOkB,WAAak6B,EAAyB5qB,OAChE+kB,GAAWgF,EAAea,KAA8BV,IACvD/vB,EACFA,EAAeywB,EAA0BV,GACa,mBAAtCU,EAAyBhrB,IACzCsD,EAA4B0nB,EAA0BhrB,EAAU2qB,IAIpEP,EAAeY,EAA0B75B,GAAe,GAAM,GAC1Dg0B,IAAS1d,EAAUtW,GAAiBw5B,KAKxCG,GAAWL,GAAUe,GAAkBA,EAAe/7B,OAASg7B,IACjEc,GAAwB,EACxBF,EAAkB,WAAoB,OAAOG,EAAen8B,KAAKR,QAI7Ds2B,IAAWthB,GAAWynB,EAAkBtrB,KAAcqrB,GAC1D/nB,EAA4BgoB,EAAmBtrB,EAAUqrB,GAE3D5jB,EAAUkE,GAAQ0f,EAGdP,EAMF,GALAG,EAAU,CACRU,OAAQR,EAAmBV,GAC3B5iB,KAAMkjB,EAASM,EAAkBF,EAAmBX,GACpDkB,QAASP,EAAmBT,IAE1B7mB,EAAQ,IAAKqnB,KAAOD,GAClBV,GAA0BgB,KAA2BL,KAAOI,KAC9D/nB,EAAS+nB,EAAmBJ,EAAKD,EAAQC,SAEtCjB,EAAE,CAAEnmB,OAAQ6H,EAAMigB,OAAO,EAAMrnB,OAAQgmB,GAA0BgB,GAAyBN,GAGnG,OAAOA,I,uBCxFT,IAAI5nB,EAAS,EAAQ,QACjB8jB,EAAgB,EAAQ,QAExBP,EAAUvjB,EAAOujB,QAErBp4B,EAAOD,QAA6B,oBAAZq4B,GAA0B,cAAcx1B,KAAK+1B,EAAcP,K,uBCLnF,IAAI9e,EAAW,EAAQ,QAEvBtZ,EAAOD,QAAU,SAAUqR,GACzB,IAAKkI,EAASlI,GACZ,MAAME,UAAUzO,OAAOuO,GAAM,qBAC7B,OAAOA,I,uBCLX,IAAIzF,EAAQ,EAAQ,QAGpB3L,EAAOD,SAAW4L,GAAM,WACtB,OAA8E,GAAvEvK,OAAOC,eAAe,GAAI,EAAG,CAAEE,IAAK,WAAc,OAAO,KAAQ,O,qBCJ1EvB,EAAOD,QAAU,SAAUqR,GACzB,MAAqB,kBAAPA,EAAyB,OAAPA,EAA4B,oBAAPA,I,qBCDvD,WAMC,SAAUvR,EAAMC,GAEb,EAAO,GAAI,EAAF,EAAS,kEAFtB,CAQkB,qBAATM,MAAuBA,MAAa,WAC3C,SAASi9B,IACP,MAAM5nB,EAAarU,OAAO2C,yBAAyB22B,SAAU,iBAE7D,IAAKjlB,GAAc,kBAAmBilB,UAAYA,SAAS4C,cACzD,OAAO5C,SAAS4C,cAIlB,GAAI7nB,GAAcA,EAAWlU,MAAQ87B,GAAoB3C,SAAS4C,cAChE,OAAO5C,SAAS4C,cAKlB,IACE,MAAM,IAAItc,MAEZ,MAAOuc,GAEL,IAMEC,EACAC,EACAC,EAREC,EAAgB,kCAClBC,EAAgB,6BAChBC,EAAeF,EAAc5rB,KAAKwrB,EAAIO,QAAUF,EAAc7rB,KAAKwrB,EAAIO,OACvEC,EAAkBF,GAAgBA,EAAa,KAAO,EACtD9I,EAAQ8I,GAAgBA,EAAa,KAAO,EAC5CG,EAAkBtD,SAAS3jB,SAASknB,KAAK7U,QAAQsR,SAAS3jB,SAASmnB,KAAM,IAIzEC,EAAUzD,SAAS0D,qBAAqB,UAEtCL,IAAmBC,IACrBR,EAAa9C,SAAS2D,gBAAgBC,UACtCb,EAA2B,IAAIrG,OAAO,sBAAwBrC,EAAO,GAAK,iDAAkD,KAC5H2I,EAAqBF,EAAWpU,QAAQqU,EAA0B,MAAMzI,QAG1E,IAAK,IAAIt0B,EAAI,EAAGA,EAAIy9B,EAAQl7B,OAAQvC,IAAK,CAEvC,GAA8B,gBAA1By9B,EAAQz9B,GAAG69B,WACb,OAAOJ,EAAQz9B,GAIjB,GAAIy9B,EAAQz9B,GAAG85B,MAAQuD,EACrB,OAAOI,EAAQz9B,GAIjB,GACEq9B,IAAmBC,GACnBG,EAAQz9B,GAAG89B,WACXL,EAAQz9B,GAAG89B,UAAUxJ,SAAW0I,EAEhC,OAAOS,EAAQz9B,GAKnB,OAAO,MAIX,OAAO28B,M,qBC7ET,IAAIzG,EAAQ,EAAQ,QAEhB6H,EAAmBtmB,SAASqC,SAGE,mBAAvBoc,EAAM+B,gBACf/B,EAAM+B,cAAgB,SAAUvnB,GAC9B,OAAOqtB,EAAiB59B,KAAKuQ,KAIjCpR,EAAOD,QAAU62B,EAAM+B,e,qBCXvB34B,EAAOD,QAAUO,G,qBCAjB,IAAIoX,EAAK,EACLgnB,EAAU31B,KAAK41B,SAEnB3+B,EAAOD,QAAU,SAAUkC,GACzB,MAAO,UAAYY,YAAeK,IAARjB,EAAoB,GAAKA,GAAO,QAAUyV,EAAKgnB,GAASlkB,SAAS,M,qBCJ7F,IAAIjX,EAAc,EAAQ,QACtB+S,EAAuB,EAAQ,QAC/B7S,EAA2B,EAAQ,QAEvCzD,EAAOD,QAAUwD,EAAc,SAAUnB,EAAQH,EAAKN,GACpD,OAAO2U,EAAqBtS,EAAE5B,EAAQH,EAAKwB,EAAyB,EAAG9B,KACrE,SAAUS,EAAQH,EAAKN,GAEzB,OADAS,EAAOH,GAAON,EACPS,I,uBCRT,IAAIuJ,EAAQ,EAAQ,QAEhBizB,EAAc,kBAEd1pB,EAAW,SAAU2pB,EAASC,GAChC,IAAIn9B,EAAQqN,EAAK+vB,EAAUF,IAC3B,OAAOl9B,GAASq9B,GACZr9B,GAASs9B,IACW,mBAAbH,EAA0BnzB,EAAMmzB,KACrCA,IAGJC,EAAY7pB,EAAS6pB,UAAY,SAAUhlB,GAC7C,OAAOlX,OAAOkX,GAAQqP,QAAQwV,EAAa,KAAKM,eAG9ClwB,EAAOkG,EAASlG,KAAO,GACvBiwB,EAAS/pB,EAAS+pB,OAAS,IAC3BD,EAAW9pB,EAAS8pB,SAAW,IAEnCh/B,EAAOD,QAAUmV,G,uBCbjB,IAAIiqB,EAAW,SAAUp/B,GACvB,aAEA,IAEImD,EAFAk8B,EAAKh+B,OAAOkB,UACZ+8B,EAASD,EAAG78B,eAEZ+8B,EAA4B,oBAAX79B,OAAwBA,OAAS,GAClD89B,EAAiBD,EAAQjrB,UAAY,aACrCmrB,EAAsBF,EAAQG,eAAiB,kBAC/CC,EAAoBJ,EAAQ59B,aAAe,gBAE/C,SAAS8zB,EAAKmK,EAASC,EAASx/B,EAAMy/B,GAEpC,IAAIC,EAAiBF,GAAWA,EAAQt9B,qBAAqBy9B,EAAYH,EAAUG,EAC/EC,EAAY5+B,OAAOY,OAAO89B,EAAex9B,WACzCwM,EAAU,IAAImxB,EAAQJ,GAAe,IAMzC,OAFAG,EAAUE,QAAUC,EAAiBR,EAASv/B,EAAM0O,GAE7CkxB,EAcT,SAASI,EAASr9B,EAAImL,EAAKmyB,GACzB,IACE,MAAO,CAAEzyB,KAAM,SAAUyyB,IAAKt9B,EAAGlC,KAAKqN,EAAKmyB,IAC3C,MAAO9C,GACP,MAAO,CAAE3vB,KAAM,QAASyyB,IAAK9C,IAhBjCx9B,EAAQy1B,KAAOA,EAoBf,IAAI8K,EAAyB,iBACzBC,EAAyB,iBACzBC,EAAoB,YACpBC,EAAoB,YAIpBC,EAAmB,GAMvB,SAASX,KACT,SAASY,KACT,SAASC,KAIT,IAAI9E,EAAoB,GACxBA,EAAkByD,GAAkB,WAClC,OAAOl/B,MAGT,IAAIwgC,EAAWz/B,OAAOu6B,eAClBmF,EAA0BD,GAAYA,EAASA,EAAS1D,EAAO,MAC/D2D,GACAA,IAA4B1B,GAC5BC,EAAOx+B,KAAKigC,EAAyBvB,KAGvCzD,EAAoBgF,GAGtB,IAAIC,EAAKH,EAA2Bt+B,UAClCy9B,EAAUz9B,UAAYlB,OAAOY,OAAO85B,GAQtC,SAASkF,EAAsB1+B,GAC7B,CAAC,OAAQ,QAAS,UAAUgZ,SAAQ,SAAS6I,GAC3C7hB,EAAU6hB,GAAU,SAASkc,GAC3B,OAAOhgC,KAAK6/B,QAAQ/b,EAAQkc,OAoClC,SAASY,EAAcjB,EAAWkB,GAChC,SAASC,EAAOhd,EAAQkc,EAAKe,EAASC,GACpC,IAAIC,EAASlB,EAASJ,EAAU7b,GAAS6b,EAAWK,GACpD,GAAoB,UAAhBiB,EAAO1zB,KAEJ,CACL,IAAIoG,EAASstB,EAAOjB,IAChB1+B,EAAQqS,EAAOrS,MACnB,OAAIA,GACiB,kBAAVA,GACP09B,EAAOx+B,KAAKc,EAAO,WACdu/B,EAAYE,QAAQz/B,EAAM4/B,SAASC,MAAK,SAAS7/B,GACtDw/B,EAAO,OAAQx/B,EAAOy/B,EAASC,MAC9B,SAAS9D,GACV4D,EAAO,QAAS5D,EAAK6D,EAASC,MAI3BH,EAAYE,QAAQz/B,GAAO6/B,MAAK,SAASC,GAI9CztB,EAAOrS,MAAQ8/B,EACfL,EAAQptB,MACP,SAAS7P,GAGV,OAAOg9B,EAAO,QAASh9B,EAAOi9B,EAASC,MAvBzCA,EAAOC,EAAOjB,KA4BlB,IAAIqB,EAEJ,SAASC,EAAQxd,EAAQkc,GACvB,SAASuB,IACP,OAAO,IAAIV,GAAY,SAASE,EAASC,GACvCF,EAAOhd,EAAQkc,EAAKe,EAASC,MAIjC,OAAOK,EAaLA,EAAkBA,EAAgBF,KAChCI,EAGAA,GACEA,IAKRvhC,KAAK6/B,QAAUyB,EA2BjB,SAASxB,EAAiBR,EAASv/B,EAAM0O,GACvC,IAAIlI,EAAQ05B,EAEZ,OAAO,SAAgBnc,EAAQkc,GAC7B,GAAIz5B,IAAU45B,EACZ,MAAM,IAAIxf,MAAM,gCAGlB,GAAIpa,IAAU65B,EAAmB,CAC/B,GAAe,UAAXtc,EACF,MAAMkc,EAKR,OAAOwB,IAGT/yB,EAAQqV,OAASA,EACjBrV,EAAQuxB,IAAMA,EAEd,MAAO,EAAM,CACX,IAAIyB,EAAWhzB,EAAQgzB,SACvB,GAAIA,EAAU,CACZ,IAAIC,EAAiBC,EAAoBF,EAAUhzB,GACnD,GAAIizB,EAAgB,CAClB,GAAIA,IAAmBrB,EAAkB,SACzC,OAAOqB,GAIX,GAAuB,SAAnBjzB,EAAQqV,OAGVrV,EAAQmzB,KAAOnzB,EAAQozB,MAAQpzB,EAAQuxB,SAElC,GAAuB,UAAnBvxB,EAAQqV,OAAoB,CACrC,GAAIvd,IAAU05B,EAEZ,MADA15B,EAAQ65B,EACF3xB,EAAQuxB,IAGhBvxB,EAAQqzB,kBAAkBrzB,EAAQuxB,SAEN,WAAnBvxB,EAAQqV,QACjBrV,EAAQszB,OAAO,SAAUtzB,EAAQuxB,KAGnCz5B,EAAQ45B,EAER,IAAIc,EAASlB,EAAST,EAASv/B,EAAM0O,GACrC,GAAoB,WAAhBwyB,EAAO1zB,KAAmB,CAO5B,GAJAhH,EAAQkI,EAAQ+C,KACZ4uB,EACAF,EAEAe,EAAOjB,MAAQK,EACjB,SAGF,MAAO,CACL/+B,MAAO2/B,EAAOjB,IACdxuB,KAAM/C,EAAQ+C,MAGS,UAAhByvB,EAAO1zB,OAChBhH,EAAQ65B,EAGR3xB,EAAQqV,OAAS,QACjBrV,EAAQuxB,IAAMiB,EAAOjB,OAU7B,SAAS2B,EAAoBF,EAAUhzB,GACrC,IAAIqV,EAAS2d,EAASztB,SAASvF,EAAQqV,QACvC,GAAIA,IAAWjhB,EAAW,CAKxB,GAFA4L,EAAQgzB,SAAW,KAEI,UAAnBhzB,EAAQqV,OAAoB,CAE9B,GAAI2d,EAASztB,SAAS,YAGpBvF,EAAQqV,OAAS,SACjBrV,EAAQuxB,IAAMn9B,EACd8+B,EAAoBF,EAAUhzB,GAEP,UAAnBA,EAAQqV,QAGV,OAAOuc,EAIX5xB,EAAQqV,OAAS,QACjBrV,EAAQuxB,IAAM,IAAI/uB,UAChB,kDAGJ,OAAOovB,EAGT,IAAIY,EAASlB,EAASjc,EAAQ2d,EAASztB,SAAUvF,EAAQuxB,KAEzD,GAAoB,UAAhBiB,EAAO1zB,KAIT,OAHAkB,EAAQqV,OAAS,QACjBrV,EAAQuxB,IAAMiB,EAAOjB,IACrBvxB,EAAQgzB,SAAW,KACZpB,EAGT,IAAI2B,EAAOf,EAAOjB,IAElB,OAAMgC,EAOFA,EAAKxwB,MAGP/C,EAAQgzB,EAASQ,YAAcD,EAAK1gC,MAGpCmN,EAAQ8C,KAAOkwB,EAASS,QAQD,WAAnBzzB,EAAQqV,SACVrV,EAAQqV,OAAS,OACjBrV,EAAQuxB,IAAMn9B,GAUlB4L,EAAQgzB,SAAW,KACZpB,GANE2B,GA3BPvzB,EAAQqV,OAAS,QACjBrV,EAAQuxB,IAAM,IAAI/uB,UAAU,oCAC5BxC,EAAQgzB,SAAW,KACZpB,GAoDX,SAAS8B,EAAaC,GACpB,IAAIC,EAAQ,CAAEC,OAAQF,EAAK,IAEvB,KAAKA,IACPC,EAAME,SAAWH,EAAK,IAGpB,KAAKA,IACPC,EAAMG,WAAaJ,EAAK,GACxBC,EAAMI,SAAWL,EAAK,IAGxBpiC,KAAK0iC,WAAW35B,KAAKs5B,GAGvB,SAASM,EAAcN,GACrB,IAAIpB,EAASoB,EAAMO,YAAc,GACjC3B,EAAO1zB,KAAO,gBACP0zB,EAAOjB,IACdqC,EAAMO,WAAa3B,EAGrB,SAASrB,EAAQJ,GAIfx/B,KAAK0iC,WAAa,CAAC,CAAEJ,OAAQ,SAC7B9C,EAAYvkB,QAAQknB,EAAcniC,MAClCA,KAAKkG,OAAM,GA8Bb,SAAS42B,EAAOjpB,GACd,GAAIA,EAAU,CACZ,IAAIgvB,EAAiBhvB,EAASqrB,GAC9B,GAAI2D,EACF,OAAOA,EAAeriC,KAAKqT,GAG7B,GAA6B,oBAAlBA,EAAStC,KAClB,OAAOsC,EAGT,IAAKivB,MAAMjvB,EAASjR,QAAS,CAC3B,IAAIvC,GAAK,EAAGkR,EAAO,SAASA,IAC1B,QAASlR,EAAIwT,EAASjR,OACpB,GAAIo8B,EAAOx+B,KAAKqT,EAAUxT,GAGxB,OAFAkR,EAAKjQ,MAAQuS,EAASxT,GACtBkR,EAAKC,MAAO,EACLD,EAOX,OAHAA,EAAKjQ,MAAQuB,EACb0O,EAAKC,MAAO,EAELD,GAGT,OAAOA,EAAKA,KAAOA,GAKvB,MAAO,CAAEA,KAAMiwB,GAIjB,SAASA,IACP,MAAO,CAAElgC,MAAOuB,EAAW2O,MAAM,GA+MnC,OA3mBA8uB,EAAkBr+B,UAAYy+B,EAAG50B,YAAcy0B,EAC/CA,EAA2Bz0B,YAAcw0B,EACzCC,EAA2BlB,GACzBiB,EAAkByC,YAAc,oBAYlCrjC,EAAQsjC,oBAAsB,SAASC,GACrC,IAAIC,EAAyB,oBAAXD,GAAyBA,EAAOn3B,YAClD,QAAOo3B,IACHA,IAAS5C,GAG2B,uBAAnC4C,EAAKH,aAAeG,EAAKtiC,QAIhClB,EAAQyjC,KAAO,SAASF,GAUtB,OATIliC,OAAO2K,eACT3K,OAAO2K,eAAeu3B,EAAQ1C,IAE9B0C,EAAOt3B,UAAY40B,EACblB,KAAqB4D,IACzBA,EAAO5D,GAAqB,sBAGhC4D,EAAOhhC,UAAYlB,OAAOY,OAAO++B,GAC1BuC,GAOTvjC,EAAQ0jC,MAAQ,SAASpD,GACvB,MAAO,CAAEkB,QAASlB,IAsEpBW,EAAsBC,EAAc3+B,WACpC2+B,EAAc3+B,UAAUk9B,GAAuB,WAC7C,OAAOn/B,MAETN,EAAQkhC,cAAgBA,EAKxBlhC,EAAQ2jC,MAAQ,SAAS/D,EAASC,EAASx/B,EAAMy/B,EAAaqB,QACxC,IAAhBA,IAAwBA,EAAcyC,SAE1C,IAAIC,EAAO,IAAI3C,EACbzL,EAAKmK,EAASC,EAASx/B,EAAMy/B,GAC7BqB,GAGF,OAAOnhC,EAAQsjC,oBAAoBzD,GAC/BgE,EACAA,EAAKhyB,OAAO4vB,MAAK,SAASxtB,GACxB,OAAOA,EAAOnC,KAAOmC,EAAOrS,MAAQiiC,EAAKhyB,WAuKjDovB,EAAsBD,GAEtBA,EAAGrB,GAAqB,YAOxBqB,EAAGxB,GAAkB,WACnB,OAAOl/B,MAGT0gC,EAAGvmB,SAAW,WACZ,MAAO,sBAkCTza,EAAQsZ,KAAO,SAASjX,GACtB,IAAIiX,EAAO,GACX,IAAK,IAAIpX,KAAOG,EACdiX,EAAKjQ,KAAKnH,GAMZ,OAJAoX,EAAKhT,UAIE,SAASuL,IACd,MAAOyH,EAAKpW,OAAQ,CAClB,IAAIhB,EAAMoX,EAAKwqB,MACf,GAAI5hC,KAAOG,EAGT,OAFAwP,EAAKjQ,MAAQM,EACb2P,EAAKC,MAAO,EACLD,EAQX,OADAA,EAAKC,MAAO,EACLD,IAsCX7R,EAAQo9B,OAASA,EAMjB8C,EAAQ39B,UAAY,CAClB6J,YAAa8zB,EAEb15B,MAAO,SAASu9B,GAcd,GAbAzjC,KAAK0jC,KAAO,EACZ1jC,KAAKuR,KAAO,EAGZvR,KAAK4hC,KAAO5hC,KAAK6hC,MAAQh/B,EACzB7C,KAAKwR,MAAO,EACZxR,KAAKyhC,SAAW,KAEhBzhC,KAAK8jB,OAAS,OACd9jB,KAAKggC,IAAMn9B,EAEX7C,KAAK0iC,WAAWznB,QAAQ0nB,IAEnBc,EACH,IAAK,IAAI7iC,KAAQZ,KAEQ,MAAnBY,EAAKsY,OAAO,IACZ8lB,EAAOx+B,KAAKR,KAAMY,KACjBkiC,OAAOliC,EAAK8kB,MAAM,MACrB1lB,KAAKY,GAAQiC,IAMrB8G,KAAM,WACJ3J,KAAKwR,MAAO,EAEZ,IAAImyB,EAAY3jC,KAAK0iC,WAAW,GAC5BkB,EAAaD,EAAUf,WAC3B,GAAwB,UAApBgB,EAAWr2B,KACb,MAAMq2B,EAAW5D,IAGnB,OAAOhgC,KAAK6jC,MAGd/B,kBAAmB,SAASgC,GAC1B,GAAI9jC,KAAKwR,KACP,MAAMsyB,EAGR,IAAIr1B,EAAUzO,KACd,SAAS+jC,EAAOC,EAAKC,GAYnB,OAXAhD,EAAO1zB,KAAO,QACd0zB,EAAOjB,IAAM8D,EACbr1B,EAAQ8C,KAAOyyB,EAEXC,IAGFx1B,EAAQqV,OAAS,OACjBrV,EAAQuxB,IAAMn9B,KAGNohC,EAGZ,IAAK,IAAI5jC,EAAIL,KAAK0iC,WAAW9/B,OAAS,EAAGvC,GAAK,IAAKA,EAAG,CACpD,IAAIgiC,EAAQriC,KAAK0iC,WAAWriC,GACxB4gC,EAASoB,EAAMO,WAEnB,GAAqB,SAAjBP,EAAMC,OAIR,OAAOyB,EAAO,OAGhB,GAAI1B,EAAMC,QAAUtiC,KAAK0jC,KAAM,CAC7B,IAAIQ,EAAWlF,EAAOx+B,KAAK6hC,EAAO,YAC9B8B,EAAanF,EAAOx+B,KAAK6hC,EAAO,cAEpC,GAAI6B,GAAYC,EAAY,CAC1B,GAAInkC,KAAK0jC,KAAOrB,EAAME,SACpB,OAAOwB,EAAO1B,EAAME,UAAU,GACzB,GAAIviC,KAAK0jC,KAAOrB,EAAMG,WAC3B,OAAOuB,EAAO1B,EAAMG,iBAGjB,GAAI0B,GACT,GAAIlkC,KAAK0jC,KAAOrB,EAAME,SACpB,OAAOwB,EAAO1B,EAAME,UAAU,OAG3B,KAAI4B,EAMT,MAAM,IAAIxjB,MAAM,0CALhB,GAAI3gB,KAAK0jC,KAAOrB,EAAMG,WACpB,OAAOuB,EAAO1B,EAAMG,gBAU9BT,OAAQ,SAASx0B,EAAMyyB,GACrB,IAAK,IAAI3/B,EAAIL,KAAK0iC,WAAW9/B,OAAS,EAAGvC,GAAK,IAAKA,EAAG,CACpD,IAAIgiC,EAAQriC,KAAK0iC,WAAWriC,GAC5B,GAAIgiC,EAAMC,QAAUtiC,KAAK0jC,MACrB1E,EAAOx+B,KAAK6hC,EAAO,eACnBriC,KAAK0jC,KAAOrB,EAAMG,WAAY,CAChC,IAAI4B,EAAe/B,EACnB,OAIA+B,IACU,UAAT72B,GACS,aAATA,IACD62B,EAAa9B,QAAUtC,GACvBA,GAAOoE,EAAa5B,aAGtB4B,EAAe,MAGjB,IAAInD,EAASmD,EAAeA,EAAaxB,WAAa,GAItD,OAHA3B,EAAO1zB,KAAOA,EACd0zB,EAAOjB,IAAMA,EAEToE,GACFpkC,KAAK8jB,OAAS,OACd9jB,KAAKuR,KAAO6yB,EAAa5B,WAClBnC,GAGFrgC,KAAKqkC,SAASpD,IAGvBoD,SAAU,SAASpD,EAAQwB,GACzB,GAAoB,UAAhBxB,EAAO1zB,KACT,MAAM0zB,EAAOjB,IAcf,MAXoB,UAAhBiB,EAAO1zB,MACS,aAAhB0zB,EAAO1zB,KACTvN,KAAKuR,KAAO0vB,EAAOjB,IACM,WAAhBiB,EAAO1zB,MAChBvN,KAAK6jC,KAAO7jC,KAAKggC,IAAMiB,EAAOjB,IAC9BhgC,KAAK8jB,OAAS,SACd9jB,KAAKuR,KAAO,OACa,WAAhB0vB,EAAO1zB,MAAqBk1B,IACrCziC,KAAKuR,KAAOkxB,GAGPpC,GAGTl7B,OAAQ,SAASq9B,GACf,IAAK,IAAIniC,EAAIL,KAAK0iC,WAAW9/B,OAAS,EAAGvC,GAAK,IAAKA,EAAG,CACpD,IAAIgiC,EAAQriC,KAAK0iC,WAAWriC,GAC5B,GAAIgiC,EAAMG,aAAeA,EAGvB,OAFAxiC,KAAKqkC,SAAShC,EAAMO,WAAYP,EAAMI,UACtCE,EAAcN,GACPhC,IAKb,MAAS,SAASiC,GAChB,IAAK,IAAIjiC,EAAIL,KAAK0iC,WAAW9/B,OAAS,EAAGvC,GAAK,IAAKA,EAAG,CACpD,IAAIgiC,EAAQriC,KAAK0iC,WAAWriC,GAC5B,GAAIgiC,EAAMC,SAAWA,EAAQ,CAC3B,IAAIrB,EAASoB,EAAMO,WACnB,GAAoB,UAAhB3B,EAAO1zB,KAAkB,CAC3B,IAAI+2B,EAASrD,EAAOjB,IACpB2C,EAAcN,GAEhB,OAAOiC,GAMX,MAAM,IAAI3jB,MAAM,0BAGlB4jB,cAAe,SAAS1wB,EAAUouB,EAAYC,GAa5C,OAZAliC,KAAKyhC,SAAW,CACdztB,SAAU8oB,EAAOjpB,GACjBouB,WAAYA,EACZC,QAASA,GAGS,SAAhBliC,KAAK8jB,SAGP9jB,KAAKggC,IAAMn9B,GAGNw9B,IAQJ3gC,EA1rBK,CAisBiBC,EAAOD,SAGtC,IACE8kC,mBAAqB1F,EACrB,MAAO2F,GAUP3sB,SAAS,IAAK,yBAAdA,CAAwCgnB,K,uBCvtB1C,IAAI1rB,EAAW,EAAQ,QAGvBzT,EAAOD,QAAU,SAAUsU,EAAUtR,EAAIpB,EAAOu6B,GAC9C,IACE,OAAOA,EAAUn5B,EAAG0Q,EAAS9R,GAAO,GAAIA,EAAM,IAAMoB,EAAGpB,GAEvD,MAAOwC,GACP,IAAI4gC,EAAe1wB,EAAS,UAE5B,WADqBnR,IAAjB6hC,GAA4BtxB,EAASsxB,EAAalkC,KAAKwT,IACrDlQ,K,uBCVV,IAAIZ,EAAc,EAAQ,QACtBM,EAAiB,EAAQ,QACzB4P,EAAW,EAAQ,QACnB9P,EAAc,EAAQ,QAEtBqhC,EAAuB5jC,OAAOC,eAIlCtB,EAAQiE,EAAIT,EAAcyhC,EAAuB,SAAwB/gC,EAAGC,EAAG+gC,GAI7E,GAHAxxB,EAASxP,GACTC,EAAIP,EAAYO,GAAG,GACnBuP,EAASwxB,GACLphC,EAAgB,IAClB,OAAOmhC,EAAqB/gC,EAAGC,EAAG+gC,GAClC,MAAO9gC,IACT,GAAI,QAAS8gC,GAAc,QAASA,EAAY,MAAM3zB,UAAU,2BAEhE,MADI,UAAW2zB,IAAYhhC,EAAEC,GAAK+gC,EAAWtjC,OACtCsC,I,oCCjBT7C,OAAOC,eAAetB,EAAS,aAAc,CAAE4B,OAAO,IACtD,IAAI4C,EAAW,EAAQ,QACnB2M,EAAc,WACd,SAASA,KAyBT,OAvBAA,EAAWg0B,aAAe,SAAUC,GAChC,IAAqDhjC,EAAjDijC,EAAa,IAAIl0B,EAAczI,EAAM08B,EAAIliC,OAC7C,IAAKd,EAAI,EAAGA,EAAIsG,EAAKtG,IACjBijC,EAAWh8B,KAAK+7B,EAAIhjC,IAExB,OAAOijC,GAEXl0B,EAAWm0B,WAAa,SAAUC,GAC9Bp0B,EAAW5O,UAAUgjC,GAAc,WAC/B,IAAuB5kC,EAAnB+H,EAAMpI,KAAK4C,OACXiV,EAAO,GAAG6N,MAAMllB,KAAKyC,WACzB,IAAK5C,EAAI,EAAGA,EAAI+H,EAAK/H,IACjBL,KAAKK,GAAG4kC,GAAYjiC,MAAMhD,KAAKK,GAAIwX,GAEvC,OAAO7X,OAGf6Q,EAAWC,WAAa,SAAUhF,GAC9B,IAAIo5B,EAAOp5B,EAAY7J,UACvB,IAAK,IAAIgjC,KAAcC,EACnBr0B,EAAWm0B,WAAWC,IAGvBp0B,EA1BM,GA4BjBnR,EAAQmR,WAAaA,EACrBA,EAAW5O,UAAY,GACvB4O,EAAW5O,UAAU+c,KAAO,SAAU/Z,GAClC,IAAK,IAAInD,EAAI,EAAGA,EAAI9B,KAAK4C,OAAQd,IAC7BmD,EAAKjF,KAAK8B,GAAIA,IAGtB+O,EAAW5O,UAAUgjB,QAAU,WAC3B,IAAiCnjB,EAA7BgjC,EAAM,GAAI18B,EAAMpI,KAAK4C,OACzB,IAAKd,EAAI,EAAGA,EAAIsG,EAAKtG,IACjBgjC,EAAI/7B,KAAK/I,KAAK8B,IAElB,OAAOgjC,GAEX,IAAIrf,EAAa,WACb,SAASA,EAAUhlB,QACL,IAANA,IAAgBA,EAAI,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,IACxCT,KAAKS,EAAKA,GAAKA,EAAEilB,SAAY,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAmIjD,OAjIAD,EAAUxjB,UAAUynB,KAAO,WACvB,OAAO,IAAIjE,EAAUzlB,KAAKS,IAE9BglB,EAAUxjB,UAAU0X,MAAQ,SAAUA,GAClC,IAAIlZ,EAAIT,KAAKS,EACb,MAAO,CACHgM,EAAGhM,EAAE,GAAKkZ,EAAMlN,EAAIhM,EAAE,GAAKkZ,EAAMjN,EAAIjM,EAAE,GACvCiM,EAAGjM,EAAE,GAAKkZ,EAAMlN,EAAIhM,EAAE,GAAKkZ,EAAMjN,EAAIjM,EAAE,KAG/CglB,EAAUxjB,UAAUoe,UAAY,SAAU5T,EAAGC,GAGzC,OAFA1M,KAAKS,EAAE,IAAMT,KAAKS,EAAE,GAAKgM,EAAIzM,KAAKS,EAAE,GAAKiM,EACzC1M,KAAKS,EAAE,IAAMT,KAAKS,EAAE,GAAKgM,EAAIzM,KAAKS,EAAE,GAAKiM,EAClC1M,MAEXylB,EAAUxjB,UAAUioB,MAAQ,SAAUib,EAAIC,GAKtC,OAJAplC,KAAKS,EAAE,IAAM0kC,EACbnlC,KAAKS,EAAE,IAAM0kC,EACbnlC,KAAKS,EAAE,IAAM2kC,EACbplC,KAAKS,EAAE,IAAM2kC,EACNplC,MAEXylB,EAAUxjB,UAAU+kB,OAAS,SAAUqe,GACnC,IAAI3kC,EAAIgI,KAAK48B,IAAID,GACbjjC,EAAIsG,KAAKgC,IAAI26B,GACbE,EAAMvlC,KAAKS,EAAE,GAAKC,EAAIV,KAAKS,EAAE,GAAK2B,EAClCojC,EAAMxlC,KAAKS,EAAE,GAAKC,EAAIV,KAAKS,EAAE,GAAK2B,EAClCqjC,EAAMzlC,KAAKS,EAAE,IAAM2B,EAAIpC,KAAKS,EAAE,GAAKC,EACnCglC,EAAM1lC,KAAKS,EAAE,IAAM2B,EAAIpC,KAAKS,EAAE,GAAKC,EAKvC,OAJAV,KAAKS,EAAE,GAAK8kC,EACZvlC,KAAKS,EAAE,GAAK+kC,EACZxlC,KAAKS,EAAE,GAAKglC,EACZzlC,KAAKS,EAAE,GAAKilC,EACL1lC,MAEXylB,EAAUxjB,UAAU0jB,eAAiB,WACjC,MAAO,CACHlZ,EAAGzM,KAAKS,EAAE,GACViM,EAAG1M,KAAKS,EAAE,KAGlBglB,EAAUxjB,UAAUgoB,KAAO,SAAUkb,EAAIC,GACrC,IAAIG,EAAMvlC,KAAKS,EAAE,GAAKT,KAAKS,EAAE,GAAK2kC,EAC9BI,EAAMxlC,KAAKS,EAAE,GAAKT,KAAKS,EAAE,GAAK2kC,EAC9BK,EAAMzlC,KAAKS,EAAE,GAAKT,KAAKS,EAAE,GAAK0kC,EAC9BO,EAAM1lC,KAAKS,EAAE,GAAKT,KAAKS,EAAE,GAAK0kC,EAKlC,OAJAnlC,KAAKS,EAAE,GAAK8kC,EACZvlC,KAAKS,EAAE,GAAK+kC,EACZxlC,KAAKS,EAAE,GAAKglC,EACZzlC,KAAKS,EAAE,GAAKilC,EACL1lC,MAEXylB,EAAUxjB,UAAUunB,SAAW,SAAUmc,GACrC,IAAIJ,EAAMvlC,KAAKS,EAAE,GAAKklC,EAAOllC,EAAE,GAAKT,KAAKS,EAAE,GAAKklC,EAAOllC,EAAE,GACrD+kC,EAAMxlC,KAAKS,EAAE,GAAKklC,EAAOllC,EAAE,GAAKT,KAAKS,EAAE,GAAKklC,EAAOllC,EAAE,GACrDglC,EAAMzlC,KAAKS,EAAE,GAAKklC,EAAOllC,EAAE,GAAKT,KAAKS,EAAE,GAAKklC,EAAOllC,EAAE,GACrDilC,EAAM1lC,KAAKS,EAAE,GAAKklC,EAAOllC,EAAE,GAAKT,KAAKS,EAAE,GAAKklC,EAAOllC,EAAE,GACrDmlC,EAAK5lC,KAAKS,EAAE,GAAKklC,EAAOllC,EAAE,GAAKT,KAAKS,EAAE,GAAKklC,EAAOllC,EAAE,GAAKT,KAAKS,EAAE,GAChEolC,EAAK7lC,KAAKS,EAAE,GAAKklC,EAAOllC,EAAE,GAAKT,KAAKS,EAAE,GAAKklC,EAAOllC,EAAE,GAAKT,KAAKS,EAAE,GAOpE,OANAT,KAAKS,EAAE,GAAK8kC,EACZvlC,KAAKS,EAAE,GAAK+kC,EACZxlC,KAAKS,EAAE,GAAKglC,EACZzlC,KAAKS,EAAE,GAAKilC,EACZ1lC,KAAKS,EAAE,GAAKmlC,EACZ5lC,KAAKS,EAAE,GAAKolC,EACL7lC,MAEXylB,EAAUxjB,UAAU+jB,OAAS,WACzB,IAAIrlB,EAAI,GAAKX,KAAKS,EAAE,GAAKT,KAAKS,EAAE,GAAKT,KAAKS,EAAE,GAAKT,KAAKS,EAAE,IACpDqlC,EAAK9lC,KAAKS,EAAE,GAAKE,EACjBolC,GAAM/lC,KAAKS,EAAE,GAAKE,EAClBqlC,GAAMhmC,KAAKS,EAAE,GAAKE,EAClBslC,EAAKjmC,KAAKS,EAAE,GAAKE,EACjBulC,EAAKvlC,GAAKX,KAAKS,EAAE,GAAKT,KAAKS,EAAE,GAAKT,KAAKS,EAAE,GAAKT,KAAKS,EAAE,IACrD0lC,EAAKxlC,GAAKX,KAAKS,EAAE,GAAKT,KAAKS,EAAE,GAAKT,KAAKS,EAAE,GAAKT,KAAKS,EAAE,IAOzD,OANAT,KAAKS,EAAE,GAAKqlC,EACZ9lC,KAAKS,EAAE,GAAKslC,EACZ/lC,KAAKS,EAAE,GAAKulC,EACZhmC,KAAKS,EAAE,GAAKwlC,EACZjmC,KAAKS,EAAE,GAAKylC,EACZlmC,KAAKS,EAAE,GAAK0lC,EACLnmC,MAEXylB,EAAUxjB,UAAUsjB,UAAY,WAC5B,OAAOvlB,KAAKS,GAEhBglB,EAAUxjB,UAAU2jB,oBAAsB,SAAUnZ,EAAGC,GACnD,IAAIo5B,EAAK9lC,KAAKS,EAAE,GAAIslC,EAAK/lC,KAAKS,EAAE,GAAIulC,EAAKhmC,KAAKS,EAAE,GAAIwlC,EAAKjmC,KAAKS,EAAE,GAAIylC,EAAKlmC,KAAKS,EAAE,GAAI0lC,EAAKnmC,KAAKS,EAAE,GAAI2lC,GAAMN,GAAMp5B,EAAIy5B,GAAMJ,GAAMt5B,EAAIy5B,KAAQJ,EAAKG,EAAKF,EAAKC,GAAKK,GAAM55B,EAAIy5B,EAAKF,EAAKI,GAAMN,EAC1L,OAAO9lC,KAAKqgB,UAAUgmB,EAAID,IAE9B3gB,EAAUxjB,UAAU4nB,UAAY,WAC5B,IAAI/mB,EAAI9C,KAAKS,EAAE,GACXsC,EAAI/C,KAAKS,EAAE,GACXC,EAAIV,KAAKS,EAAE,GACXE,EAAIX,KAAKS,EAAE,GACX0hB,EAAIniB,KAAKS,EAAE,GACXkD,EAAI3D,KAAKS,EAAE,GACX6lC,EAAQxjC,EAAInC,EAAIoC,EAAIrC,EACpBiT,EAAS,CACTlH,EAAG0V,EACHzV,EAAG/I,EACHuiB,SAAU,EACVC,OAAQ,EACRC,OAAQ,EACRG,MAAO,EACPC,MAAO,GAEX,GAAS,GAAL1jB,GAAe,GAALC,EAAQ,CAClB,IAAI5B,EAAIuH,KAAK69B,KAAKzjC,EAAIA,EAAIC,EAAIA,GAC9B4Q,EAAOuS,SAAWnjB,EAAI,EAAI2F,KAAK89B,KAAK1jC,EAAI3B,IAAMuH,KAAK89B,KAAK1jC,EAAI3B,GAC5DwS,EAAOwS,OAAShlB,EAChBwS,EAAOyS,OAASkgB,EAAQnlC,EACxBwS,EAAO4S,OAASzjB,EAAIpC,EAAIqC,EAAIpC,GAAK2lC,EACjC3yB,EAAO6S,MAAQ,OAEd,GAAS,GAAL9lB,GAAe,GAALC,EAAQ,CACvB,IAAIyB,EAAIsG,KAAK69B,KAAK7lC,EAAIA,EAAIC,EAAIA,GAC9BgT,EAAOuS,SACHxd,KAAK6B,GAAK,GAAK5J,EAAI,EAAI+H,KAAK89B,MAAM9lC,EAAI0B,IAAMsG,KAAK89B,KAAK9lC,EAAI0B,IAC9DuR,EAAOwS,OAASmgB,EAAQlkC,EACxBuR,EAAOyS,OAAShkB,EAChBuR,EAAO4S,MAAQ,EACf5S,EAAO6S,OAAS1jB,EAAIpC,EAAIqC,EAAIpC,GAAK2lC,EAKrC,OADA3yB,EAAOuS,SAAWxmB,EAAQ4H,KAAKm/B,aAAa9yB,EAAOuS,UAC5CvS,GAEJ8R,EAtIK,GAwIhB/lB,EAAQ+lB,UAAYA,EACpB,IAAIihB,EAAe,iBAAkBC,EAAgB,kBAAmBC,EAAgB,kBAAmBC,EAAiB,mBAAoBC,EAAiBp+B,KAAK6B,GAAK,IAAKw8B,EAAiB,IAAMr+B,KAAK6B,GAAI8B,EAAO,IAAK26B,EAAe,GAAIC,EAAO,IAAKC,EAAgB,kBAAmBC,EAAc,gBAAiBC,EAAY,OAAQC,EAAS,CACtVC,UAAW,CAAC,IAAK,IAAK,KACtBC,aAAc,CAAC,IAAK,IAAK,KACzBC,KAAM,CAAC,EAAG,IAAK,KACfC,WAAY,CAAC,IAAK,IAAK,KACvBC,MAAO,CAAC,IAAK,IAAK,KAClBC,MAAO,CAAC,IAAK,IAAK,KAClBC,OAAQ,CAAC,IAAK,IAAK,KACnBC,MAAO,CAAC,EAAG,EAAG,GACdC,eAAgB,CAAC,IAAK,IAAK,KAC3BC,KAAM,CAAC,EAAG,EAAG,KACbC,WAAY,CAAC,IAAK,GAAI,KACtBC,MAAO,CAAC,IAAK,GAAI,IACjBC,UAAW,CAAC,IAAK,IAAK,KACtBC,UAAW,CAAC,GAAI,IAAK,KACrBC,WAAY,CAAC,IAAK,IAAK,GACvBC,UAAW,CAAC,IAAK,IAAK,IACtBC,MAAO,CAAC,IAAK,IAAK,IAClBC,eAAgB,CAAC,IAAK,IAAK,KAC3BC,SAAU,CAAC,IAAK,IAAK,KACrBC,QAAS,CAAC,IAAK,GAAI,IACnBC,KAAM,CAAC,EAAG,IAAK,KACfC,SAAU,CAAC,EAAG,EAAG,KACjBC,SAAU,CAAC,EAAG,IAAK,KACnBC,cAAe,CAAC,IAAK,IAAK,IAC1BC,SAAU,CAAC,IAAK,IAAK,KACrBC,UAAW,CAAC,EAAG,IAAK,GACpBC,SAAU,CAAC,IAAK,IAAK,KACrBC,UAAW,CAAC,IAAK,IAAK,KACtBC,YAAa,CAAC,IAAK,EAAG,KACtBC,eAAgB,CAAC,GAAI,IAAK,IAC1BC,WAAY,CAAC,IAAK,IAAK,GACvBC,WAAY,CAAC,IAAK,GAAI,KACtBC,QAAS,CAAC,IAAK,EAAG,GAClBC,WAAY,CAAC,IAAK,IAAK,KACvBC,aAAc,CAAC,IAAK,IAAK,KACzBC,cAAe,CAAC,GAAI,GAAI,KACxBC,cAAe,CAAC,GAAI,GAAI,IACxBC,cAAe,CAAC,GAAI,GAAI,IACxBC,cAAe,CAAC,EAAG,IAAK,KACxBC,WAAY,CAAC,IAAK,EAAG,KACrBC,SAAU,CAAC,IAAK,GAAI,KACpBC,YAAa,CAAC,EAAG,IAAK,KACtBC,QAAS,CAAC,IAAK,IAAK,KACpBC,QAAS,CAAC,IAAK,IAAK,KACpBC,WAAY,CAAC,GAAI,IAAK,KACtBC,UAAW,CAAC,IAAK,GAAI,IACrBC,YAAa,CAAC,IAAK,IAAK,KACxBC,YAAa,CAAC,GAAI,IAAK,IACvBC,QAAS,CAAC,IAAK,EAAG,KAClBC,UAAW,CAAC,IAAK,IAAK,KACtBC,WAAY,CAAC,IAAK,IAAK,KACvBC,KAAM,CAAC,IAAK,IAAK,GACjBC,UAAW,CAAC,IAAK,IAAK,IACtBC,KAAM,CAAC,IAAK,IAAK,KACjBC,MAAO,CAAC,EAAG,IAAK,GAChBC,YAAa,CAAC,IAAK,IAAK,IACxBC,KAAM,CAAC,IAAK,IAAK,KACjBC,SAAU,CAAC,IAAK,IAAK,KACrBC,QAAS,CAAC,IAAK,IAAK,KACpBC,UAAW,CAAC,IAAK,GAAI,IACrBC,OAAQ,CAAC,GAAI,EAAG,KAChBC,MAAO,CAAC,IAAK,IAAK,KAClBC,MAAO,CAAC,IAAK,IAAK,KAClBC,SAAU,CAAC,IAAK,IAAK,KACrBC,cAAe,CAAC,IAAK,IAAK,KAC1BC,UAAW,CAAC,IAAK,IAAK,GACtBC,aAAc,CAAC,IAAK,IAAK,KACzBC,UAAW,CAAC,IAAK,IAAK,KACtBC,WAAY,CAAC,IAAK,IAAK,KACvBC,UAAW,CAAC,IAAK,IAAK,KACtBC,qBAAsB,CAAC,IAAK,IAAK,KACjCC,UAAW,CAAC,IAAK,IAAK,KACtBC,WAAY,CAAC,IAAK,IAAK,KACvBC,UAAW,CAAC,IAAK,IAAK,KACtBC,UAAW,CAAC,IAAK,IAAK,KACtBC,YAAa,CAAC,IAAK,IAAK,KACxBC,cAAe,CAAC,GAAI,IAAK,KACzBC,aAAc,CAAC,IAAK,IAAK,KACzBC,eAAgB,CAAC,IAAK,IAAK,KAC3BC,eAAgB,CAAC,IAAK,IAAK,KAC3BC,eAAgB,CAAC,IAAK,IAAK,KAC3BC,YAAa,CAAC,IAAK,IAAK,KACxBC,KAAM,CAAC,EAAG,IAAK,GACfC,UAAW,CAAC,GAAI,IAAK,IACrBC,MAAO,CAAC,IAAK,IAAK,KAClBC,QAAS,CAAC,IAAK,EAAG,KAClBC,OAAQ,CAAC,IAAK,EAAG,GACjBC,iBAAkB,CAAC,IAAK,IAAK,KAC7BC,WAAY,CAAC,EAAG,EAAG,KACnBC,aAAc,CAAC,IAAK,GAAI,KACxBC,aAAc,CAAC,IAAK,IAAK,KACzBC,eAAgB,CAAC,GAAI,IAAK,KAC1BC,gBAAiB,CAAC,IAAK,IAAK,KAC5BC,kBAAmB,CAAC,EAAG,IAAK,KAC5BC,gBAAiB,CAAC,GAAI,IAAK,KAC3BC,gBAAiB,CAAC,IAAK,GAAI,KAC3BC,aAAc,CAAC,GAAI,GAAI,KACvBC,UAAW,CAAC,IAAK,IAAK,KACtBC,UAAW,CAAC,IAAK,IAAK,KACtBC,SAAU,CAAC,IAAK,IAAK,KACrBC,YAAa,CAAC,IAAK,IAAK,KACxBC,KAAM,CAAC,EAAG,EAAG,KACbC,QAAS,CAAC,IAAK,IAAK,KACpBC,MAAO,CAAC,IAAK,IAAK,GAClBC,UAAW,CAAC,IAAK,IAAK,IACtBC,OAAQ,CAAC,IAAK,IAAK,GACnBC,UAAW,CAAC,IAAK,GAAI,GACrBC,OAAQ,CAAC,IAAK,IAAK,KACnBC,cAAe,CAAC,IAAK,IAAK,KAC1BC,UAAW,CAAC,IAAK,IAAK,KACtBC,cAAe,CAAC,IAAK,IAAK,KAC1BC,cAAe,CAAC,IAAK,IAAK,KAC1BC,WAAY,CAAC,IAAK,IAAK,KACvBC,UAAW,CAAC,IAAK,IAAK,KACtBC,KAAM,CAAC,IAAK,IAAK,IACjBC,KAAM,CAAC,IAAK,IAAK,KACjBC,KAAM,CAAC,IAAK,IAAK,KACjBC,WAAY,CAAC,IAAK,IAAK,KACvBC,OAAQ,CAAC,IAAK,EAAG,KACjBC,cAAe,CAAC,IAAK,GAAI,KACzBC,IAAK,CAAC,IAAK,EAAG,GACdC,UAAW,CAAC,IAAK,IAAK,KACtBC,UAAW,CAAC,GAAI,IAAK,KACrBC,YAAa,CAAC,IAAK,GAAI,IACvBC,OAAQ,CAAC,IAAK,IAAK,KACnBC,WAAY,CAAC,IAAK,IAAK,IACvBC,SAAU,CAAC,GAAI,IAAK,IACpBC,SAAU,CAAC,IAAK,IAAK,KACrBC,OAAQ,CAAC,IAAK,GAAI,IAClBC,OAAQ,CAAC,IAAK,IAAK,KACnBC,QAAS,CAAC,IAAK,IAAK,KACpBC,UAAW,CAAC,IAAK,GAAI,KACrBC,UAAW,CAAC,IAAK,IAAK,KACtBC,UAAW,CAAC,IAAK,IAAK,KACtBC,KAAM,CAAC,IAAK,IAAK,KACjBC,YAAa,CAAC,EAAG,IAAK,KACtBC,UAAW,CAAC,GAAI,IAAK,KACrBC,IAAK,CAAC,IAAK,IAAK,KAChBC,KAAM,CAAC,EAAG,IAAK,KACfC,QAAS,CAAC,IAAK,IAAK,KACpBC,YAAa,CAAC,IAAK,IAAK,IAAK,GAC7BC,OAAQ,CAAC,IAAK,GAAI,IAClBC,UAAW,CAAC,GAAI,IAAK,KACrBC,OAAQ,CAAC,IAAK,IAAK,KACnBC,MAAO,CAAC,IAAK,IAAK,KAClBC,MAAO,CAAC,IAAK,IAAK,KAClBC,WAAY,CAAC,IAAK,IAAK,KACvBC,OAAQ,CAAC,IAAK,IAAK,GACnBC,YAAa,CAAC,IAAK,IAAK,IACzBC,EAAY,uCAAwCC,EAAY,GACnElxC,EAAQ4H,KAAO,CACXupC,WAAY,SAAUhjC,GAClB,SAAUA,GAAuB,GAAhBA,EAAI2C,WAEzBuK,YAAa,SAAUlN,GACnB,SAAUA,GAAOA,EAAI/B,aAAe+B,EAAIrN,MAAQqN,EAAI7K,QAExDklB,eAAgB,SAAUra,GACtB,QAASA,GAAOA,EAAI/B,cAAgB/K,QAExC0H,SAAU,SAAUoF,GAChB,OAAO9M,OAAOkB,UAAUkY,SAAS3Z,KAAKqN,KAAS64B,GAEnDlsB,UAAW,SAAU3M,GACjB,OAAQ9M,OAAOkB,UAAUkY,SAAS3Z,KAAKqN,KAAS84B,IAC3C7D,MAAMj1B,IACPijC,SAASjjC,IAEjBqM,UAAW,SAAUrM,GACjB,OAAO9M,OAAOkB,UAAUkY,SAAS3Z,KAAKqN,KAAS+4B,GAEnDxsB,WAAY,SAAUvM,GAClB,OAAO9M,OAAOkB,UAAUkY,SAAS3Z,KAAKqN,KAASg5B,GAEnD5tB,SAAU,SAAUgB,GAChB,OAAOA,aAAelZ,QAE1BioB,gBAAiB,SAAUpb,GACvB,GAAwB,kBAAbA,EACP,OAAO,EAEX,IAAImjC,EAAYnjC,EAAS,GACzB,MAAsB,MAAdmjC,GACU,MAAdA,GACAA,IAAcA,EAAUC,eAEhCC,MAAO,SAAUC,GACb,OAAe,IAAXA,EACO,EAEPA,EAAS,EACF,GAGC,GAGhBC,iBAAkB,SAAUxuB,GACxBiuB,EAAU7nC,KAAK4Z,GACU,IAArBiuB,EAAUhuC,QACVwuC,uBAAsB,WAClB,IAAIl6B,EAAQ05B,EACZA,EAAY,GACZ15B,EAAM+D,SAAQ,SAAUo2B,GACpBA,WAKhBvgB,oBAAqB,WACjB,IAAI3hB,EAASkrB,SAAS9uB,cAAc,UACpC,IACI4D,EAAO8qB,MAAQ9qB,EAAO8qB,OAAS,GAEnC,MAAO9X,IACP,OAAOhT,GAEXmiC,mBAAoB,WAChB,OAAOjX,SAAS9uB,cAAc,QAElCgmC,cAAe,SAAUriB,GACrB,MAAQA,EAAKA,EAAG9e,WACZ,GAAI8e,GAAMmL,SACN,OAAO,EAGf,OAAO,GAEXmX,eAAgB,SAAU1M,GACtB,IAAwDhjC,EAAGmY,EAAvDw3B,EAAS,GAAIrpC,EAAM08B,EAAIliC,OAAQ8uC,EAAOhyC,EAAQ4H,KAClD,IAAKxF,EAAI,EAAGA,EAAIsG,EAAKtG,IACjBmY,EAAM6qB,EAAIhjC,GACN4vC,EAAKl3B,UAAUP,GACfA,EAAMvR,KAAKW,MAAY,IAAN4Q,GAAc,IAEzBy3B,EAAKx3B,UAAUD,KACrBA,EAAMA,EAAIE,YAEds3B,EAAO1oC,KAAKkR,GAEhB,OAAOw3B,GAEX3mB,YAAa,SAAUF,EAAKjI,GACxB,IAAIgvB,EAAW,IAAIztC,EAAS0tC,KAAKC,MACjCF,EAASG,OAAS,WACdnvB,EAASgvB,IAEbA,EAASxX,IAAMvP,GAEnB/b,UAAW,SAAU1N,EAAG+H,EAAGnG,GACvB,QAAS,GAAK,KAAO5B,GAAK,KAAO+H,GAAK,GAAKnG,GAAGoX,SAAS,IAAIuL,MAAM,IAErEqsB,UAAW,SAAUC,GACjBA,EAAMA,EAAIjpB,QAAQ1c,EAAM26B,GACxB,IAAIiL,EAASC,SAASF,EAAK,IAC3B,MAAO,CACH7wC,EAAI8wC,GAAU,GAAM,IACpB/oC,EAAI+oC,GAAU,EAAK,IACnBlvC,EAAY,IAATkvC,IAGXE,eAAgB,WACZ,IAAIC,GAA8B,SAAhB1pC,KAAK41B,UAAwB,GAAGnkB,SAAS,IAC3D,MAAOi4B,EAAUxvC,OAAS,EACtBwvC,EAAYnL,EAAOmL,EAEvB,OAAO/lC,EAAO+lC,GAElBlxC,IAAK,SAAU+Y,EAAKo4B,GAChB,YAAYxvC,IAARoX,EACOo4B,EAGAp4B,GAGfq4B,OAAQ,SAAUC,GACd,IAAIC,EACJ,OAAID,KAASlL,GACTmL,EAAMnL,EAAOkL,GACN,CACHpxC,EAAGqxC,EAAI,GACPtpC,EAAGspC,EAAI,GACPzvC,EAAGyvC,EAAI,KAGND,EAAM,KAAOlmC,EACXrM,KAAK+xC,UAAUQ,EAAME,UAAU,IAEjCF,EAAM1c,OAAO,EAAG,KAAOuR,GAC5BoL,EAAM7B,EAAUj/B,KAAK6gC,EAAMxpB,QAAQ,KAAM,KAClC,CACH5nB,EAAG+wC,SAASM,EAAI,GAAI,IACpBtpC,EAAGgpC,SAASM,EAAI,GAAI,IACpBzvC,EAAGmvC,SAASM,EAAI,GAAI,MAIjB,CACHrxC,EAAG,EACH+H,EAAG,EACHnG,EAAG,IAIfkG,YAAa,SAAUpD,GAEnB,OADAA,EAAMA,GAAO,QACLnG,EAAQ4H,KAAKorC,iBAAiB7sC,IAClCnG,EAAQ4H,KAAKqrC,iBAAiB9sC,IAC9BnG,EAAQ4H,KAAKsrC,iBAAiB/sC,IAC9BnG,EAAQ4H,KAAKurC,gBAAgBhtC,IAC7BnG,EAAQ4H,KAAKwrC,iBAAiBjtC,IAC9BnG,EAAQ4H,KAAKyrC,gBAAgBltC,IAErC6sC,iBAAkB,SAAU7sC,GACxB,IAAInF,EAAI2mC,EAAOxhC,EAAIg5B,eACnB,OAAKn+B,EAGE,CACHS,EAAGT,EAAE,GACLwI,EAAGxI,EAAE,GACLqC,EAAGrC,EAAE,GACLoC,EAAG,GANI,MASf+vC,gBAAiB,SAAUhtC,GACvB,GAA4B,IAAxBA,EAAIiD,QAAQ,QAAe,CAC3BjD,EAAMA,EAAI0S,MAAM,kBAAkB,GAClC,IAAIgK,EAAQ1c,EAAI8S,MAAM,SAASq6B,IAAIC,QACnC,MAAO,CACH9xC,EAAGohB,EAAM,GACTrZ,EAAGqZ,EAAM,GACTxf,EAAGwf,EAAM,GACTzf,EAAG,KAIfgwC,iBAAkB,SAAUjtC,GACxB,GAA6B,IAAzBA,EAAIiD,QAAQ,SAAgB,CAC5BjD,EAAMA,EAAI0S,MAAM,mBAAmB,GACnC,IAAIgK,EAAQ1c,EAAI8S,MAAM,SAASq6B,IAAIC,QACnC,MAAO,CACH9xC,EAAGohB,EAAM,GACTrZ,EAAGqZ,EAAM,GACTxf,EAAGwf,EAAM,GACTzf,EAAGyf,EAAM,MAIrBqwB,iBAAkB,SAAU/sC,GACxB,GAAe,MAAXA,EAAI,IAA6B,IAAfA,EAAIjD,OACtB,MAAO,CACHzB,EAAG+wC,SAASrsC,EAAI6f,MAAM,EAAG,GAAI,IAC7Bxc,EAAGgpC,SAASrsC,EAAI6f,MAAM,EAAG,GAAI,IAC7B3iB,EAAGmvC,SAASrsC,EAAI6f,MAAM,EAAG,GAAI,IAC7B5iB,EAAG,IAIf6vC,iBAAkB,SAAU9sC,GACxB,GAAe,MAAXA,EAAI,IAA6B,IAAfA,EAAIjD,OACtB,MAAO,CACHzB,EAAG+wC,SAASrsC,EAAI,GAAKA,EAAI,GAAI,IAC7BqD,EAAGgpC,SAASrsC,EAAI,GAAKA,EAAI,GAAI,IAC7B9C,EAAGmvC,SAASrsC,EAAI,GAAKA,EAAI,GAAI,IAC7B/C,EAAG,IAIfiwC,gBAAiB,SAAUltC,GACvB,GAAI,0CAA0CtD,KAAKsD,GAAM,CACrD,IAAIqH,EAAK,0CAA0CwE,KAAK7L,GAAiBqtC,GAAPhmC,EAAG,GAAUA,EAAGwY,MAAM,IACpFytB,EAAIF,OAAOC,EAAI,IAAM,IACrB9wC,EAAI6wC,OAAOC,EAAI,IAAM,IACrB5yC,EAAI2yC,OAAOC,EAAI,IAAM,IACrBE,OAAK,EACLC,OAAK,EACLp5B,OAAM,EACV,GAAU,IAAN7X,EAEA,OADA6X,EAAU,IAAJ3Z,EACC,CACHa,EAAGuH,KAAKW,MAAM4Q,GACd/Q,EAAGR,KAAKW,MAAM4Q,GACdlX,EAAG2F,KAAKW,MAAM4Q,GACdnX,EAAG,GAIPswC,EADA9yC,EAAI,GACCA,GAAK,EAAI8B,GAGT9B,EAAI8B,EAAI9B,EAAI8B,EAIrB,IAFA,IAAIkxC,EAAK,EAAIhzC,EAAI8yC,EACbZ,EAAM,CAAC,EAAG,EAAG,GACRnyC,EAAI,EAAGA,EAAI,EAAGA,IACnBgzC,EAAKF,EAAK,EAAI,IAAO9yC,EAAI,GACrBgzC,EAAK,GACLA,IAEAA,EAAK,GACLA,IAGAp5B,EADA,EAAIo5B,EAAK,EACHC,EAAiB,GAAXF,EAAKE,GAAUD,EAEtB,EAAIA,EAAK,EACRD,EAED,EAAIC,EAAK,EACRC,GAAMF,EAAKE,IAAO,EAAI,EAAID,GAAM,EAGhCC,EAEVd,EAAInyC,GAAW,IAAN4Z,EAEb,MAAO,CACH9Y,EAAGuH,KAAKW,MAAMmpC,EAAI,IAClBtpC,EAAGR,KAAKW,MAAMmpC,EAAI,IAClBzvC,EAAG2F,KAAKW,MAAMmpC,EAAI,IAClB1vC,EAAG,KAIfywC,iBAAkB,SAAUC,EAAIC,GAC5B,QAASA,EAAGhnC,EAAI+mC,EAAG/mC,EAAI+mC,EAAGrmC,OACtBsmC,EAAGhnC,EAAIgnC,EAAGtmC,MAAQqmC,EAAG/mC,GACrBgnC,EAAG/mC,EAAI8mC,EAAG9mC,EAAI8mC,EAAGpmC,QACjBqmC,EAAG/mC,EAAI+mC,EAAGrmC,OAASomC,EAAG9mC,IAE9ByW,YAAa,SAAUtV,GACnB,IAAI6lC,EAAS,GACb,IAAK,IAAI9xC,KAAOiM,EACR7N,KAAKkoB,eAAera,EAAIjM,IACxB8xC,EAAO9xC,GAAO5B,KAAKmjB,YAAYtV,EAAIjM,IAE9B5B,KAAKyI,SAASoF,EAAIjM,IACvB8xC,EAAO9xC,GAAO5B,KAAK2zC,WAAW9lC,EAAIjM,IAGlC8xC,EAAO9xC,GAAOiM,EAAIjM,GAG1B,OAAO8xC,GAEXC,WAAY,SAAU7O,GAClB,OAAOA,EAAIpf,MAAM,IAErBkuB,UAAW,SAAUC,GACjB,OAAOA,EAAM/M,GAEjBgN,UAAW,SAAUzO,GACjB,OAAOA,EAAM0B,GAEjBN,aAAc,SAAUsN,GACpB,OAAO7vC,EAASkD,MAAM4sC,SAAWt0C,EAAQ4H,KAAKwsC,UAAUC,GAAWA,GAEvEhwB,YAAa,SAAUle,GACnB,OAAOA,EAAIqT,OAAO,GAAG83B,cAAgBnrC,EAAI6f,MAAM,IAEnDjY,MAAO,SAAU5H,GACb,MAAM,IAAI8a,MAAMwmB,EAActhC,IAElC/B,MAAO,SAAU+B,GACbkU,QAAQjW,MAAMqjC,EAActhC,IAEhC4U,KAAM,SAAU5U,GACP3B,EAASkD,MAAM6sC,cAGpBl6B,QAAQU,KAAKysB,EAAgBrhC,IAEjCquC,OAAQ,SAAU5mC,EAAO2C,GACrB,SAASkkC,IACLn0C,KAAK8L,YAAcwB,EAEvB6mC,EAAKlyC,UAAYgO,EAAOhO,UACxB,IAAImyC,EAAW9mC,EAAMrL,UAErB,IAAK,IAAIL,KADT0L,EAAMrL,UAAY,IAAIkyC,EACNC,EACRA,EAASlyC,eAAeN,KACxB0L,EAAMrL,UAAUL,GAAOwyC,EAASxyC,IAGxC0L,EAAM+mC,UAAYpkC,EAAOhO,UACzBqL,EAAMgnC,MAAQrkC,GAElBskC,kBAAmB,SAAUC,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,EAAItzC,GACjD,IAAIuzC,EAAMpsC,KAAK69B,KAAK79B,KAAK+B,IAAIiqC,EAAKF,EAAI,GAAK9rC,KAAK+B,IAAIkqC,EAAKF,EAAI,IAAKM,EAAMrsC,KAAK69B,KAAK79B,KAAK+B,IAAImqC,EAAKF,EAAI,GAAKhsC,KAAK+B,IAAIoqC,EAAKF,EAAI,IAAKK,EAAMzzC,EAAIuzC,GAAQA,EAAMC,GAAME,EAAM1zC,EAAIwzC,GAAQD,EAAMC,GAAMG,EAAMR,EAAKM,GAAMJ,EAAKJ,GAAKW,EAAMR,EAAKK,GAAMH,EAAKJ,GAAKW,EAAMV,EAAKO,GAAML,EAAKJ,GAAKa,EAAMV,EAAKM,GAAMJ,EAAKJ,GACnS,MAAO,CAACS,EAAKC,EAAKC,EAAKC,IAE3BC,cAAe,SAAUnzC,EAAGozC,GACxB,IAAoCzzC,EAAG0zC,EAAnCptC,EAAMjG,EAAES,OAAQ6yC,EAAY,GAChC,IAAK3zC,EAAI,EAAGA,EAAIsG,EAAM,EAAGtG,GAAK,EAC1B0zC,EAAK91C,EAAQ4H,KAAKitC,kBAAkBpyC,EAAEL,EAAI,GAAIK,EAAEL,EAAI,GAAIK,EAAEL,GAAIK,EAAEL,EAAI,GAAIK,EAAEL,EAAI,GAAIK,EAAEL,EAAI,GAAIyzC,GAC5FE,EAAU1sC,KAAKysC,EAAG,IAClBC,EAAU1sC,KAAKysC,EAAG,IAClBC,EAAU1sC,KAAK5G,EAAEL,IACjB2zC,EAAU1sC,KAAK5G,EAAEL,EAAI,IACrB2zC,EAAU1sC,KAAKysC,EAAG,IAClBC,EAAU1sC,KAAKysC,EAAG,IAEtB,OAAOC,GAEXz2B,KAAM,SAAUnR,EAAK5I,GACjB,IAAK,IAAIrD,KAAOiM,EACZ5I,EAAKrD,EAAKiM,EAAIjM,KAGtB8zC,SAAU,SAAUz7B,EAAK07B,EAAMC,GAC3B,OAAOD,GAAQ17B,GAAOA,EAAM27B,GAEhCC,wBAAyB,SAAUnB,EAAIC,EAAIC,EAAIC,EAAIiB,EAAIC,GACnD,IAAItpC,EAAGC,EAAGspC,EACNC,GAAOvB,EAAKE,IAAOF,EAAKE,IAAOD,EAAKE,IAAOF,EAAKE,GACpD,GAAW,GAAPoB,EACAxpC,EAAIioC,EACJhoC,EAAIioC,EACJqB,GAAQF,EAAKlB,IAAOkB,EAAKlB,IAAOmB,EAAKlB,IAAOkB,EAAKlB,OAEhD,CACD,IAAIqB,IAAMJ,EAAKpB,IAAOE,EAAKF,IAAOqB,EAAKpB,IAAOE,EAAKF,IAAOsB,EACtDC,EAAI,GACJzpC,EAAIioC,EACJhoC,EAAIioC,EACJqB,GAAQtB,EAAKoB,IAAOpB,EAAKoB,IAAOnB,EAAKoB,IAAOpB,EAAKoB,IAE5CG,EAAI,GACTzpC,EAAImoC,EACJloC,EAAImoC,EACJmB,GAAQpB,EAAKkB,IAAOlB,EAAKkB,IAAOjB,EAAKkB,IAAOlB,EAAKkB,KAGjDtpC,EAAIioC,EAAKwB,GAAKtB,EAAKF,GACnBhoC,EAAIioC,EAAKuB,GAAKrB,EAAKF,GACnBqB,GAAQvpC,EAAIqpC,IAAOrpC,EAAIqpC,IAAOppC,EAAIqpC,IAAOrpC,EAAIqpC,IAGrD,MAAO,CAACtpC,EAAGC,EAAGspC,IAElBG,qBAAsB,SAAUC,EAAI1hB,EAAM2hB,GACtC,IAAIC,EAAK52C,EAAQ4H,KAAK6b,YAAYizB,GAC9BJ,EAAO/C,OAAOsD,UAclB,OAbA7hB,EAAKzZ,SAAQ,SAAUu7B,EAAIn2C,GACvB,GAAKg2C,GAAYh2C,IAAMq0B,EAAK9xB,OAAS,EAArC,CAGA,IAAI6zC,EAAK/hB,GAAMr0B,EAAI,GAAKq0B,EAAK9xB,QACzB8zC,EAAOh3C,EAAQ4H,KAAKuuC,wBAAwBW,EAAG/pC,EAAG+pC,EAAG9pC,EAAG+pC,EAAGhqC,EAAGgqC,EAAG/pC,EAAG0pC,EAAG3pC,EAAG2pC,EAAG1pC,GAC7EiqC,EAAKD,EAAK,GAAIE,EAAKF,EAAK,GAAIG,EAAQH,EAAK,GACzCG,EAAQb,IACRM,EAAG7pC,EAAIkqC,EACPL,EAAG5pC,EAAIkqC,EACPZ,EAAOa,OAGRP,GAEX1tC,sBAAuB,SAAUkuC,EAAYC,EAAUV,GACnD,IAAIv0C,EAAGmG,EAAQ,GAAID,EAAM,GACzB,GAAI8uC,EAAWl0C,OAASm0C,EAASn0C,OAAQ,CACrC,IAAI+2B,EAAOod,EACXA,EAAWD,EACXA,EAAand,EAEjB,IAAK73B,EAAI,EAAGA,EAAIg1C,EAAWl0C,OAAQd,GAAK,EACpCmG,EAAMc,KAAK,CACP0D,EAAGqqC,EAAWh1C,GACd4K,EAAGoqC,EAAWh1C,EAAI,KAG1B,IAAKA,EAAI,EAAGA,EAAIi1C,EAASn0C,OAAQd,GAAK,EAClCkG,EAAIe,KAAK,CACL0D,EAAGsqC,EAASj1C,GACZ4K,EAAGqqC,EAASj1C,EAAI,KAGxB,IAAIk1C,EAAW,GAMf,OALAhvC,EAAIiT,SAAQ,SAAUtB,GAClB,IAAIs9B,EAAKv3C,EAAQ4H,KAAK6uC,qBAAqBx8B,EAAO1R,EAAOouC,GACzDW,EAASjuC,KAAKkuC,EAAGxqC,GACjBuqC,EAASjuC,KAAKkuC,EAAGvqC,MAEdsqC,GAEX5uB,oBAAqB,SAAUva,GAC3B,IAAIqpC,EAEJ,IAAK,IAAIt1C,KADTiM,EAAIspC,mCAAoC,EACxBtpC,EACZ,GAAMA,EAAI3L,eAAeN,IAAQiM,EAAIjM,IAA2B,iBAAZiM,EAAIjM,GAIxD,GADAs1C,EAAOn2C,OAAO2C,yBAAyBmK,EAAKjM,GACxCiM,EAAIjM,GAAKu1C,mCACTz3C,EAAQ4H,KAAKupC,WAAWhjC,EAAIjM,IAAO,CACnC,IAAIs1C,EAAK/gC,aAIL,OAAO,YAHAtI,EAAIjM,QAMd,GAAmD,OAA/ClC,EAAQ4H,KAAK8gB,oBAAoBva,EAAIjM,IAAgB,CAC1D,IAAIs1C,EAAK/gC,aAIL,OAAO,YAHAtI,EAAIjM,GAQvB,cADOiM,EAAIspC,kCACJtpC,GAEXupC,QAAS,SAAUniC,EAAQF,GACvB,IAAK,IAAInT,KAAOmT,EACZE,EAAOrT,GAAOmT,EAAOnT,GAEzB,OAAOqT,GAEXoiC,mBAAoB,SAAUv0B,GAC1B,OAAKA,EAAIw0B,QAIEx0B,EAAIy0B,eAAe,GAAGC,WAHtB,O,oCCtyBnB,IAAI/b,EAAoB,EAAQ,QAA+BA,kBAC3D95B,EAAS,EAAQ,QACjByB,EAA2B,EAAQ,QACnCm4B,EAAiB,EAAQ,QACzB3iB,EAAY,EAAQ,QAEpBkjB,EAAa,WAAc,OAAO97B,MAEtCL,EAAOD,QAAU,SAAUs8B,EAAqBlf,EAAMvL,GACpD,IAAIjP,EAAgBwa,EAAO,YAI3B,OAHAkf,EAAoB/5B,UAAYN,EAAO85B,EAAmB,CAAElqB,KAAMnO,EAAyB,EAAGmO,KAC9FgqB,EAAeS,EAAqB15B,GAAe,GAAO,GAC1DsW,EAAUtW,GAAiBw5B,EACpBE,I,mBCdT,IAAIxc,EAAO9W,KAAK8W,KACZiU,EAAQ/qB,KAAK+qB,MAIjB9zB,EAAOD,QAAU,SAAU2vB,GACzB,OAAOyT,MAAMzT,GAAYA,GAAY,GAAKA,EAAW,EAAIoE,EAAQjU,GAAM6P,K,kCCLzE,IAAInsB,EAAc,EAAQ,QACtBsR,EAAS,EAAQ,QACjBK,EAAW,EAAQ,QACnBH,EAAW,EAAQ,QACnBnR,EAAM,EAAQ,QACdgT,EAAU,EAAQ,QAClBkhC,EAAoB,EAAQ,QAC5Bn0C,EAAc,EAAQ,QACtBgI,EAAQ,EAAQ,QAChB3J,EAAS,EAAQ,QACjBqU,EAAsB,EAAQ,QAA8CrS,EAC5ED,EAA2B,EAAQ,QAAmDC,EACtF3C,EAAiB,EAAQ,QAAuC2C,EAChEgxB,EAAO,EAAQ,QAA4BA,KAE3C+iB,EAAS,SACTC,EAAenjC,EAAOkjC,GACtBE,EAAkBD,EAAa11C,UAG/B41C,EAAiBthC,EAAQ5U,EAAOi2C,KAAqBF,EAIrDI,EAAW,SAAUzoB,GACvB,IACIgI,EAAO0gB,EAAOC,EAAOC,EAASC,EAAQt1C,EAAQsR,EAAOikC,EADrDpnC,EAAKzN,EAAY+rB,GAAU,GAE/B,GAAiB,iBAANte,GAAkBA,EAAGnO,OAAS,EAGvC,GAFAmO,EAAK4jB,EAAK5jB,GACVsmB,EAAQtmB,EAAGymB,WAAW,GACR,KAAVH,GAA0B,KAAVA,GAElB,GADA0gB,EAAQhnC,EAAGymB,WAAW,GACR,KAAVugB,GAA0B,MAAVA,EAAe,OAAOK,SACrC,GAAc,KAAV/gB,EAAc,CACvB,OAAQtmB,EAAGymB,WAAW,IACpB,KAAK,GAAI,KAAK,GAAIwgB,EAAQ,EAAGC,EAAU,GAAI,MAC3C,KAAK,GAAI,KAAK,IAAKD,EAAQ,EAAGC,EAAU,GAAI,MAC5C,QAAS,OAAQlnC,EAInB,IAFAmnC,EAASnnC,EAAG2U,MAAM,GAClB9iB,EAASs1C,EAAOt1C,OACXsR,EAAQ,EAAGA,EAAQtR,EAAQsR,IAI9B,GAHAikC,EAAOD,EAAO1gB,WAAWtjB,GAGrBikC,EAAO,IAAMA,EAAOF,EAAS,OAAOG,IACxC,OAAOlG,SAASgG,EAAQF,GAE5B,OAAQjnC,GAKZ,GAAI8D,EAAS6iC,GAASC,EAAa,UAAYA,EAAa,QAAUA,EAAa,SAAU,CAS3F,IARA,IAcqB/1C,EAdjBy2C,EAAgB,SAAgB/2C,GAClC,IAAIyP,EAAK9N,UAAUL,OAAS,EAAI,EAAItB,EAChCq3B,EAAQ34B,KACZ,OAAO24B,aAAiB0f,IAElBR,EAAiBvsC,GAAM,WAAcssC,EAAgBU,QAAQ93C,KAAKm4B,MAAapiB,EAAQoiB,IAAU+e,GACjGD,EAAkB,IAAIE,EAAaG,EAAS/mC,IAAM4nB,EAAO0f,GAAiBP,EAAS/mC,IAElFiI,EAAO9V,EAAc8S,EAAoB2hC,GAAgB,6KAMhEh/B,MAAM,KAAM4/B,EAAI,EAAQv/B,EAAKpW,OAAS21C,EAAGA,IACrCh1C,EAAIo0C,EAAc/1C,EAAMoX,EAAKu/B,MAAQh1C,EAAI80C,EAAez2C,IAC1DZ,EAAeq3C,EAAez2C,EAAK8B,EAAyBi0C,EAAc/1C,IAG9Ey2C,EAAcp2C,UAAY21C,EAC1BA,EAAgB9rC,YAAcusC,EAC9B3jC,EAASF,EAAQkjC,EAAQW,K,qBC5E3B,IAAIn1C,EAAc,EAAQ,QACtBoI,EAAQ,EAAQ,QAChB/H,EAAM,EAAQ,QAEdvC,EAAiBD,OAAOC,eACxB4d,EAAQ,GAER45B,EAAU,SAAUznC,GAAM,MAAMA,GAEpCpR,EAAOD,QAAU,SAAUsS,EAAa8C,GACtC,GAAIvR,EAAIqb,EAAO5M,GAAc,OAAO4M,EAAM5M,GACrC8C,IAASA,EAAU,IACxB,IAAIgP,EAAS,GAAG9R,GACZymC,IAAYl1C,EAAIuR,EAAS,cAAeA,EAAQ2jC,UAChDC,EAAYn1C,EAAIuR,EAAS,GAAKA,EAAQ,GAAK0jC,EAC3CG,EAAYp1C,EAAIuR,EAAS,GAAKA,EAAQ,QAAKjS,EAE/C,OAAO+b,EAAM5M,KAAiB8R,IAAWxY,GAAM,WAC7C,GAAImtC,IAAcv1C,EAAa,OAAO,EACtC,IAAIU,EAAI,CAAEhB,QAAS,GAEf61C,EAAWz3C,EAAe4C,EAAG,EAAG,CAAE3C,YAAY,EAAMC,IAAKs3C,IACxD50C,EAAE,GAAK,EAEZkgB,EAAOtjB,KAAKoD,EAAG80C,EAAWC,Q,kCCvB9B,IAaIld,EAAmBmd,EAAmCC,EAbtDvd,EAAiB,EAAQ,QACzB7mB,EAA8B,EAAQ,QACtClR,EAAM,EAAQ,QACdlB,EAAkB,EAAQ,QAC1Bi0B,EAAU,EAAQ,QAElBnlB,EAAW9O,EAAgB,YAC3Bq5B,GAAyB,EAEzBI,EAAa,WAAc,OAAO97B,MAMlC,GAAGgZ,OACL6/B,EAAgB,GAAG7/B,OAEb,SAAU6/B,GAEdD,EAAoCtd,EAAeA,EAAeud,IAC9DD,IAAsC73C,OAAOkB,YAAWw5B,EAAoBmd,IAHlDld,GAAyB,QAOlC74B,GAArB44B,IAAgCA,EAAoB,IAGnDnF,GAAY/yB,EAAIk4B,EAAmBtqB,IACtCsD,EAA4BgnB,EAAmBtqB,EAAU2qB,GAG3Dn8B,EAAOD,QAAU,CACf+7B,kBAAmBA,EACnBC,uBAAwBA,I,kCClC1B,IAAIod,EAAwB,EAAQ,QAChCviC,EAAU,EAAQ,QAItB5W,EAAOD,QAAUo5C,EAAwB,GAAG3+B,SAAW,WACrD,MAAO,WAAa5D,EAAQvW,MAAQ,M,qBCPtC,IAcI+4C,EAAOC,EAAMC,EAAMC,EAAQC,EAAQ/0C,EAAMg1C,EAASjY,EAdlD3sB,EAAS,EAAQ,QACjB9Q,EAA2B,EAAQ,QAAmDC,EACtF4S,EAAU,EAAQ,QAClB8iC,EAAY,EAAQ,QAAqB1iC,IACzCF,EAAS,EAAQ,QAEjB6iC,EAAmB9kC,EAAO8kC,kBAAoB9kC,EAAO+kC,uBACrDziC,EAAUtC,EAAOsC,QACjBwsB,EAAU9uB,EAAO8uB,QACjBkW,EAA8B,WAApBjjC,EAAQO,GAElB2iC,EAA2B/1C,EAAyB8Q,EAAQ,kBAC5DklC,EAAiBD,GAA4BA,EAAyBn4C,MAKrEo4C,IACHX,EAAQ,WACN,IAAI9oC,EAAQvN,EACR82C,IAAYvpC,EAAS6G,EAAQ2jB,SAASxqB,EAAO0pC,OACjD,MAAOX,EAAM,CACXt2C,EAAKs2C,EAAKt2C,GACVs2C,EAAOA,EAAKznC,KACZ,IACE7O,IACA,MAAOoB,GAGP,MAFIk1C,EAAME,IACLD,OAAOp2C,EACNiB,GAERm1C,OAAOp2C,EACLoN,GAAQA,EAAO2pC,SAIjBJ,EACFN,EAAS,WACPpiC,EAAQiB,SAASghC,IAGVO,IAAqB7iC,GAC9B0iC,GAAS,EACT/0C,EAAOi2B,SAASwf,eAAe,IAC/B,IAAIP,EAAiBP,GAAOe,QAAQ11C,EAAM,CAAE21C,eAAe,IAC3Db,EAAS,WACP90C,EAAKuK,KAAOwqC,GAAUA,IAGf7V,GAAWA,EAAQvC,SAE5BqY,EAAU9V,EAAQvC,aAAQl+B,GAC1Bs+B,EAAOiY,EAAQjY,KACf+X,EAAS,WACP/X,EAAK3gC,KAAK44C,EAASL,KASrBG,EAAS,WAEPG,EAAU74C,KAAKgU,EAAQukC,KAK7Bp5C,EAAOD,QAAUg6C,GAAkB,SAAUh3C,GAC3C,IAAIs3C,EAAO,CAAEt3C,GAAIA,EAAI6O,UAAM1O,GACvBo2C,IAAMA,EAAK1nC,KAAOyoC,GACjBhB,IACHA,EAAOgB,EACPd,KACAD,EAAOe,I,qBC5EX,IAAIxlC,EAAS,EAAQ,QACjBylC,EAAS,EAAQ,QACjB12C,EAAM,EAAQ,QACd22C,EAAM,EAAQ,QACdC,EAAgB,EAAQ,QACxBC,EAAoB,EAAQ,QAE5BC,EAAwBJ,EAAO,OAC/B74C,EAASoT,EAAOpT,OAChBk5C,EAAwBF,EAAoBh5C,EAASA,GAAUA,EAAOm5C,eAAiBL,EAE3Fv6C,EAAOD,QAAU,SAAUkB,GAIvB,OAHG2C,EAAI82C,EAAuBz5C,KAC1Bu5C,GAAiB52C,EAAInC,EAAQR,GAAOy5C,EAAsBz5C,GAAQQ,EAAOR,GACxEy5C,EAAsBz5C,GAAQ05C,EAAsB,UAAY15C,IAC9Dy5C,EAAsBz5C,K,qBCfjC,IAAIiB,EAAO,EAAQ,QACf24C,EAAgB,EAAQ,QACxBzyB,EAAW,EAAQ,QACnBzU,EAAW,EAAQ,QACnBmnC,EAAqB,EAAQ,QAE7B1xC,EAAO,GAAGA,KAGVgmB,EAAe,SAAUkI,GAC3B,IAAIyjB,EAAiB,GAARzjB,EACT0jB,EAAoB,GAAR1jB,EACZ2jB,EAAkB,GAAR3jB,EACV4jB,EAAmB,GAAR5jB,EACX6jB,EAAwB,GAAR7jB,EAChB8jB,EAAmB,GAAR9jB,GAAa6jB,EAC5B,OAAO,SAAU7rB,EAAO+rB,EAAYr4C,EAAMs4C,GASxC,IARA,IAOI35C,EAAOqS,EAPP/P,EAAImkB,EAASkH,GACblvB,EAAOy6C,EAAc52C,GACrBwQ,EAAgBvS,EAAKm5C,EAAYr4C,EAAM,GACvCC,EAAS0Q,EAASvT,EAAK6C,QACvBsR,EAAQ,EACRvS,EAASs5C,GAAkBR,EAC3BxlC,EAASylC,EAAS/4C,EAAOstB,EAAOrsB,GAAU+3C,EAAYh5C,EAAOstB,EAAO,QAAKpsB,EAEvED,EAASsR,EAAOA,IAAS,IAAI6mC,GAAY7mC,KAASnU,KACtDuB,EAAQvB,EAAKmU,GACbP,EAASS,EAAc9S,EAAO4S,EAAOtQ,GACjCqzB,GACF,GAAIyjB,EAAQzlC,EAAOf,GAASP,OACvB,GAAIA,EAAQ,OAAQsjB,GACvB,KAAK,EAAG,OAAO,EACf,KAAK,EAAG,OAAO31B,EACf,KAAK,EAAG,OAAO4S,EACf,KAAK,EAAGnL,EAAKvI,KAAKyU,EAAQ3T,QACrB,GAAIu5C,EAAU,OAAO,EAGhC,OAAOC,GAAiB,EAAIF,GAAWC,EAAWA,EAAW5lC,IAIjEtV,EAAOD,QAAU,CAGfub,QAAS8T,EAAa,GAGtBikB,IAAKjkB,EAAa,GAGlBtO,OAAQsO,EAAa,GAGrBmsB,KAAMnsB,EAAa,GAGnBosB,MAAOpsB,EAAa,GAGpBqsB,KAAMrsB,EAAa,GAGnBssB,UAAWtsB,EAAa,K,qBC/D1B,IAAI9V,EAAW,EAAQ,QAMvBtZ,EAAOD,QAAU,SAAU47C,EAAOC,GAChC,IAAKtiC,EAASqiC,GAAQ,OAAOA,EAC7B,IAAI54C,EAAIuX,EACR,GAAIshC,GAAoD,mBAAxB74C,EAAK44C,EAAMnhC,YAA4BlB,EAASgB,EAAMvX,EAAGlC,KAAK86C,IAAS,OAAOrhC,EAC9G,GAAmC,mBAAvBvX,EAAK44C,EAAMhD,WAA2Br/B,EAASgB,EAAMvX,EAAGlC,KAAK86C,IAAS,OAAOrhC,EACzF,IAAKshC,GAAoD,mBAAxB74C,EAAK44C,EAAMnhC,YAA4BlB,EAASgB,EAAMvX,EAAGlC,KAAK86C,IAAS,OAAOrhC,EAC/G,MAAMhJ,UAAU,6C,mBCZlBtR,EAAOD,SAAU,G,kCCCjB,IAAI8L,EAAaxL,MAAQA,KAAKwL,WAAc,WACxC,IAAIC,EAAgB,SAAU9K,EAAGoC,GAI7B,OAHA0I,EAAgB1K,OAAO2K,gBAClB,CAAEC,UAAW,cAAgBC,OAAS,SAAUjL,EAAGoC,GAAKpC,EAAEgL,UAAY5I,IACvE,SAAUpC,EAAGoC,GAAK,IAAK,IAAIZ,KAAKY,EAAOA,EAAEb,eAAeC,KAAIxB,EAAEwB,GAAKY,EAAEZ,KAClEsJ,EAAc9K,EAAGoC,IAE5B,OAAO,SAAUpC,EAAGoC,GAEhB,SAAS8I,IAAO7L,KAAK8L,YAAcnL,EADnC8K,EAAc9K,EAAGoC,GAEjBpC,EAAEsB,UAAkB,OAANc,EAAahC,OAAOY,OAAOoB,IAAM8I,EAAG5J,UAAYc,EAAEd,UAAW,IAAI4J,IAV3C,GAa5C9K,OAAOC,eAAetB,EAAS,aAAc,CAAE4B,OAAO,IACtD,IAAIyC,EAAS,EAAQ,QACjBG,EAAW,EAAQ,QACnBs3C,EAAQ,IAAKC,EAAa,IAAKC,EAAc,IAAKC,EAAqB,KAAMC,EAAsB,KAAMC,EAAY,IAAKC,EAAe,KAAMC,EAAS,IAAKC,EAAkB,CAC/K,MACA,QACA,YACA,gBACA,YACA,OACA,YACA,uBACA,gBACA,uBACA,YACA,UACA,OACA,WACA,eACA,kBACA,SACA,SACA,eACA,mBACA,OACA,UACA,SACA,OACA,QACA,cACA,eACA,SACA,aACA,YACA,aAEAC,EAAqB,CACrB,YACA,cACA,cACA,aACA,gBACA,gBACA,UACA,iBACA,WACA,YACA,aACA,OACA,YACA,eACA,cACA,2BACA,yBAEAC,EAAc,IACdtc,EAAW,WACX,SAASA,EAAQzwB,GACbnP,KAAKmP,OAASA,EACdnP,KAAKmgB,SAAWhR,EAAOgB,QAAQZ,WAAW,MACtCrL,EAASkD,MAAM+0C,cACfn8C,KAAKo8C,SAAW,GAChBp8C,KAAKq8C,gBA4Qb,OAzQAzc,EAAQ39B,UAAUq6C,UAAY,SAAUvuC,GAChCA,EAAMwuC,eACNv8C,KAAKw8C,MAAMzuC,IAGnB6xB,EAAQ39B,UAAUu6C,MAAQ,SAAUzuC,KAEpC6xB,EAAQ39B,UAAUw6C,YAAc,SAAU1uC,GAClCA,EAAM2uC,aACN18C,KAAK28C,QAAQ5uC,IAGrB6xB,EAAQ39B,UAAU06C,QAAU,SAAU5uC,KAEtC6xB,EAAQ39B,UAAUyQ,gBAAkB,SAAU3E,GAC1C/N,KAAKs8C,UAAUvuC,GACf/N,KAAKy8C,YAAY1uC,IAErB6xB,EAAQ39B,UAAU26C,SAAW,SAAUC,GACnC,IAA+D/6C,EAAGg7C,EAAOh5B,EAAQjM,EAA7EukC,EAAWp8C,KAAKo8C,SAAUh0C,EAAMg0C,EAASx5C,OAAQiD,EAAM,GAC3D,IAAK/D,EAAI,EAAGA,EAAIsG,EAAKtG,IACjBg7C,EAAQV,EAASt6C,GACjBgiB,EAASg5B,EAAMh5B,OACXA,GACAjM,EAAOilC,EAAMjlC,KACbhS,GAAOie,EACH+4B,EACAh3C,GAAOi2C,EAGH/3C,EAAOuD,KAAKmB,SAASoP,EAAK,IAC1BhS,GAAO81C,EAAqB9jC,EAAK0F,KAAKi+B,GAASI,EAG/C/1C,GAAO41C,EAAa5jC,EAAK0F,KAAKi+B,GAASE,IAK/C71C,GAAOi3C,EAAM96C,SACR66C,IACDh3C,GAAOk2C,EAASe,EAAM7iC,MAG9BpU,GAAOg2C,EAEX,OAAOh2C,GAEX+5B,EAAQ39B,UAAU86C,WAAa,WAC3B/8C,KAAKo8C,SAAW,IAEpBxc,EAAQ39B,UAAU+6C,OAAS,SAAUn3C,GACjC,IAA8BuC,EAA1Bg0C,EAAWp8C,KAAKo8C,SACpBA,EAASrzC,KAAKlD,GACduC,EAAMg0C,EAASx5C,OACXwF,GAAO8zC,GACPE,EAASa,SAGjBrd,EAAQ39B,UAAUiE,MAAQ,WACtB,IAAI8G,EAAahN,KAAKoP,YAAY8tC,gBAClCl9C,KAAKm9C,aAAa,EAAInwC,EAAY,EAAG,EAAG,EAAIA,EAAY,EAAG,IAE/D4yB,EAAQ39B,UAAUmN,UAAY,WAC1B,OAAOpP,KAAKmP,QAEhBywB,EAAQ39B,UAAUuN,MAAQ,SAAUI,GAChC,IAAIT,EAASnP,KAAKoP,YACdQ,EACA5P,KAAKo9C,UAAUxtC,EAAOnD,GAAK,EAAGmD,EAAOlD,GAAK,EAAGkD,EAAOzC,OAAS,EAAGyC,EAAOxC,QAAU,GAGjFpN,KAAKo9C,UAAU,EAAG,EAAGjuC,EAAOwD,WAAaxD,EAAOnC,WAAYmC,EAAOyD,YAAczD,EAAOnC,aAGhG4yB,EAAQ39B,UAAUo7C,cAAgB,SAAUtvC,GACxC,IAAIuvC,EAAUvvC,EAAMwvC,aAChBD,GACAt9C,KAAKsJ,QAAQ,UAAWg0C,IAGhC1d,EAAQ39B,UAAUof,cAAgB,SAAUtT,GACxC,IAAI2Z,EAAa3Z,EAAMyZ,qBACJ,IAAfE,GACA1nB,KAAKsJ,QAAQ,cAAeoe,IAGpCkY,EAAQ39B,UAAUu7C,eAAiB,SAAUzvC,GACzC,IAAI0vC,EAAW1vC,EAAM2vC,cACjBD,GACAz9C,KAAKsJ,QAAQ,WAAYm0C,IAGjC7d,EAAQ39B,UAAUqH,QAAU,SAAUH,EAAM8Q,GACxCja,KAAKmgB,SAAShX,GAAQ8Q,GAE1B2lB,EAAQ39B,UAAUsQ,IAAM,SAAUorC,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,GAClDh+C,KAAKmgB,SAAS5N,IAAIorC,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,IAE1Cpe,EAAQ39B,UAAUg8C,MAAQ,SAAUN,EAAIC,EAAIC,EAAIC,EAAIC,GAChD/9C,KAAKmgB,SAAS89B,MAAMN,EAAIC,EAAIC,EAAIC,EAAIC,IAExCne,EAAQ39B,UAAUqQ,UAAY,WAC1BtS,KAAKmgB,SAAS7N,aAElBstB,EAAQ39B,UAAUi8C,cAAgB,SAAUP,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,GAC5Dh+C,KAAKmgB,SAAS+9B,cAAcP,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,IAEpDpe,EAAQ39B,UAAUm7C,UAAY,SAAUO,EAAIC,EAAIC,EAAIC,GAChD99C,KAAKmgB,SAASi9B,UAAUO,EAAIC,EAAIC,EAAIC,IAExCle,EAAQ39B,UAAUk8C,KAAO,WACrBn+C,KAAKmgB,SAASg+B,QAElBve,EAAQ39B,UAAUwQ,UAAY,WAC1BzS,KAAKmgB,SAAS1N,aAElBmtB,EAAQ39B,UAAUm8C,gBAAkB,SAAUT,EAAIC,GAC9C,IAAI96C,EAAIG,UACR,OAAiB,IAAbH,EAAEF,OACK5C,KAAKmgB,SAASi+B,gBAAgBT,EAAIC,GAEvB,IAAb96C,EAAEF,OACA5C,KAAKmgB,SAASi+B,gBAAgBT,QADpC,GAIT/d,EAAQ39B,UAAUo8C,qBAAuB,SAAUV,EAAIC,EAAIC,EAAIC,GAC3D,OAAO99C,KAAKmgB,SAASk+B,qBAAqBV,EAAIC,EAAIC,EAAIC,IAE1Dle,EAAQ39B,UAAUq8C,cAAgB,SAAUX,EAAIC,GAC5C,OAAO59C,KAAKmgB,SAASm+B,cAAcX,EAAIC,IAE3Che,EAAQ39B,UAAUs8C,qBAAuB,SAAUZ,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,GACnE,OAAOh+C,KAAKmgB,SAASo+B,qBAAqBZ,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,IAElEpe,EAAQ39B,UAAUyf,UAAY,SAAUi8B,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,EAAIQ,EAAIC,EAAIC,GACpE,IAAI57C,EAAIG,UAAWkd,EAAWngB,KAAKmgB,SAClB,IAAbrd,EAAEF,OACFud,EAASuB,UAAUi8B,EAAIC,EAAIC,GAET,IAAb/6C,EAAEF,OACPud,EAASuB,UAAUi8B,EAAIC,EAAIC,EAAIC,EAAIC,GAEjB,IAAbj7C,EAAEF,QACPud,EAASuB,UAAUi8B,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,EAAIQ,EAAIC,EAAIC,IAG3D9e,EAAQ39B,UAAU08C,QAAU,SAAUhB,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,EAAIQ,EAAIC,GAC9Dz+C,KAAKmgB,SAASw+B,QAAQhB,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,EAAIQ,EAAIC,IAEtD7e,EAAQ39B,UAAU28C,cAAgB,SAAUnyC,EAAGC,GAC3C,OAAO1M,KAAKmgB,SAASy+B,cAAcnyC,EAAGC,IAE1CkzB,EAAQ39B,UAAUyvB,KAAO,WACrB1xB,KAAKmgB,SAASuR,QAElBkO,EAAQ39B,UAAU48C,SAAW,SAAUpyC,EAAGC,EAAGS,EAAOC,GAChDpN,KAAKmgB,SAAS0+B,SAASpyC,EAAGC,EAAGS,EAAOC,IAExCwyB,EAAQ39B,UAAU68C,WAAa,SAAUryC,EAAGC,EAAGS,EAAOC,GAClDpN,KAAKmgB,SAAS2+B,WAAWryC,EAAGC,EAAGS,EAAOC,IAE1CwyB,EAAQ39B,UAAU+uB,SAAW,SAAU2sB,EAAIC,EAAIC,GAC3C79C,KAAKmgB,SAAS6Q,SAAS2sB,EAAIC,EAAIC,IAEnCje,EAAQ39B,UAAUkyB,YAAc,SAAUhB,GACtC,OAAOnzB,KAAKmgB,SAASgU,YAAYhB,IAErCyM,EAAQ39B,UAAUyM,aAAe,SAAUivC,EAAIC,EAAIC,EAAIC,GACnD,OAAO99C,KAAKmgB,SAASzR,aAAaivC,EAAIC,EAAIC,EAAIC,IAElDle,EAAQ39B,UAAUoxB,OAAS,SAAUsqB,EAAIC,GACrC59C,KAAKmgB,SAASkT,OAAOsqB,EAAIC,IAE7Bhe,EAAQ39B,UAAU2lB,OAAS,SAAU+1B,EAAIC,GACrC59C,KAAKmgB,SAASyH,OAAO+1B,EAAIC,IAE7Bhe,EAAQ39B,UAAUkd,KAAO,SAAUw+B,EAAIC,EAAIC,EAAIC,GAC3C99C,KAAKmgB,SAAShB,KAAKw+B,EAAIC,EAAIC,EAAIC,IAEnCle,EAAQ39B,UAAUigB,aAAe,SAAUy7B,EAAIC,EAAIC,GAC/C79C,KAAKmgB,SAAS+B,aAAay7B,EAAIC,EAAIC,IAEvCje,EAAQ39B,UAAU88C,iBAAmB,SAAUpB,EAAIC,EAAIC,EAAIC,GACvD99C,KAAKmgB,SAAS4+B,iBAAiBpB,EAAIC,EAAIC,EAAIC,IAE/Cle,EAAQ39B,UAAUqe,QAAU,WACxBtgB,KAAKmgB,SAASG,WAElBsf,EAAQ39B,UAAU+kB,OAAS,SAAU22B,GACjC39C,KAAKmgB,SAAS6G,OAAO22B,IAEzB/d,EAAQ39B,UAAUme,KAAO,WACrBpgB,KAAKmgB,SAASC,QAElBwf,EAAQ39B,UAAUioB,MAAQ,SAAUyzB,EAAIC,GACpC59C,KAAKmgB,SAAS+J,MAAMyzB,EAAIC,IAE5Bhe,EAAQ39B,UAAU+8C,YAAc,SAAUrB,GAClC39C,KAAKmgB,SAAS6+B,YACdh/C,KAAKmgB,SAAS6+B,YAAYrB,GAErB,YAAa39C,KAAKmgB,SACvBngB,KAAKmgB,SAAS,WAAaw9B,EAEtB,mBAAoB39C,KAAKmgB,WAC9BngB,KAAKmgB,SAAS,kBAAoBw9B,IAG1C/d,EAAQ39B,UAAUg9C,YAAc,WAC5B,OAAOj/C,KAAKmgB,SAAS8+B,eAEzBrf,EAAQ39B,UAAUk7C,aAAe,SAAUQ,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,GAC3Dh+C,KAAKmgB,SAASg9B,aAAaQ,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,IAEnDpe,EAAQ39B,UAAUse,OAAS,WACvBvgB,KAAKmgB,SAASI,UAElBqf,EAAQ39B,UAAUovB,WAAa,SAAUssB,EAAIC,EAAIC,EAAIC,GACjD99C,KAAKmgB,SAASkR,WAAWssB,EAAIC,EAAIC,EAAIC,IAEzCle,EAAQ39B,UAAU2nB,UAAY,SAAU+zB,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,GACxDh+C,KAAKmgB,SAASyJ,UAAU+zB,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,IAEhDpe,EAAQ39B,UAAUoe,UAAY,SAAUs9B,EAAIC,GACxC59C,KAAKmgB,SAASE,UAAUs9B,EAAIC,IAEhChe,EAAQ39B,UAAUo6C,aAAe,WAC7B,IAAuHv6C,EAAG+V,EAAtHlV,EAAO3C,KAAMoI,EAAM4zC,EAAgBp5C,OAAQ4uC,EAAiBztC,EAAOuD,KAAKkqC,eAAgB0N,EAAal/C,KAAKsJ,QAC1GrE,EAAO,SAAUggC,GACjB,IAAmCka,EAA/BC,EAAaz8C,EAAKsiC,GACtBtiC,EAAKsiC,GAAc,WAOf,OANAptB,EAAO25B,EAAe5lC,MAAM3J,UAAUyjB,MAAMllB,KAAKyC,UAAW,IAC5Dk8C,EAAMC,EAAWp8C,MAAML,EAAMM,WAC7BN,EAAKq6C,OAAO,CACRl5B,OAAQmhB,EACRptB,KAAMA,IAEHsnC,IAGf,IAAKr9C,EAAI,EAAGA,EAAIsG,EAAKtG,IACjBmD,EAAK+2C,EAAgBl6C,IAEzBa,EAAK2G,QAAU,WACX41C,EAAWl8C,MAAML,EAAMM,WACvB,IAAI8B,EAAO9B,UAAU,GACjBgX,EAAMhX,UAAU,GACP,kBAAT8B,GACS,kBAATA,GACS,eAATA,IACAkV,GAAYja,KAAKmP,OAAO+tC,iBAE5Bv6C,EAAKq6C,OAAO,CACRh7C,SAAU+C,EACVkV,IAAKA,MAIjB2lB,EAAQ39B,UAAUqf,+BAAiC,SAAUld,GACzD,IAAIi7C,EAA2Bj7C,EAAKk7C,8BACH,gBAA7BD,GACAr/C,KAAKsJ,QAAQ,2BAA4B+1C,IAG1Czf,EAlRG,GAoRdlgC,EAAQkgC,QAAUA,EAClBqc,EAAmBhhC,SAAQ,SAAUlW,GACjChE,OAAOC,eAAe4+B,EAAQ39B,UAAW8C,EAAM,CAC3C7D,IAAK,WACD,OAAOlB,KAAKmgB,SAASpb,IAEzB4R,IAAK,SAAUsD,GACXja,KAAKmgB,SAASpb,GAAQkV,QAIlC,IAAIslC,EAAgB,SAAU1yC,GAE1B,SAAS0yC,IACL,OAAkB,OAAX1yC,GAAmBA,EAAO7J,MAAMhD,KAAMiD,YAAcjD,KAyH/D,OA3HAwL,EAAU+zC,EAAc1yC,GAIxB0yC,EAAat9C,UAAUu9C,WAAa,SAAUzxC,GAC1C,IAAI2jB,EAAO3jB,EAAM2jB,OACjB1xB,KAAKsJ,QAAQ,YAAaooB,GAC1B3jB,EAAMgjB,UAAU/wB,OAEpBu/C,EAAat9C,UAAUw9C,aAAe,SAAU1xC,GAC5C,IAAI2xC,EAAe3xC,EAAM4xC,kBAAmBC,EAAe7xC,EAAM8xC,kBAAmBC,EAAsB57C,EAASkD,MAAM4iB,SAASjc,EAAMgyC,0BAA2BC,EAAqBjyC,EAAMkyC,wBAAyBC,EAAqBnyC,EAAMoyC,wBAAyBC,EAAoBryC,EAAMsyC,uBAAwBC,EAAoBvyC,EAAMwyC,wBACnVb,GAAgBE,IAChB5/C,KAAKqgB,UAAUq/B,GAAgB,EAAGE,GAAgB,GAElDE,GACA9/C,KAAKgnB,OAAO84B,IAEZM,GAAqBE,IACrBtgD,KAAKkqB,MAAMk2B,EAAmBE,IAE9BN,GAAsBE,IACtBlgD,KAAKqgB,WAAW,EAAI2/B,GAAqB,EAAIE,GAEjDlgD,KAAKsJ,QAAQ,YAAayE,EAAMyyC,mBAChCzyC,EAAMgjB,UAAU/wB,OAEpBu/C,EAAat9C,UAAUw+C,oBAAsB,SAAU1yC,GACnD,IAAI2yC,EAAM3yC,EAAM4yC,qBACZD,IACA1gD,KAAKsJ,QAAQ,YAAao3C,GAC1B3yC,EAAMgjB,UAAU/wB,QAGxBu/C,EAAat9C,UAAU2+C,oBAAsB,SAAU7yC,GACnD,IAAI2yC,EAAM3yC,EAAM8yC,qBACZH,IACA1gD,KAAKsJ,QAAQ,YAAao3C,GAC1B3yC,EAAMgjB,UAAU/wB,QAGxBu/C,EAAat9C,UAAUu6C,MAAQ,SAAUzuC,GACrC,IAAI+yC,EAAW/yC,EAAM2jB,OAAQqvB,EAAehzC,EAAMizC,kBAClD,GAAIF,GAA6B,UAAjBC,EACZ/gD,KAAKw/C,WAAWzxC,OADpB,CAIA,IAAIkzC,EAAalzC,EAAMmzC,sBACvB,GAAID,GAA+B,YAAjBF,EACd/gD,KAAKy/C,aAAa1xC,OADtB,CAIA,IAAIozC,EAAoBpzC,EAAMqzC,kCAC9B,GAAID,GAAsC,oBAAjBJ,EACrB/gD,KAAKygD,oBAAoB1yC,OAD7B,CAIA,IAAIszC,EAAoBtzC,EAAMuzC,kCAC1BD,GAAsC,oBAAjBN,EACrB/gD,KAAK4gD,oBAAoB7yC,GAGzB+yC,EACA9gD,KAAKw/C,WAAWzxC,GAEXkzC,EACLjhD,KAAKy/C,aAAa1xC,GAEbozC,EACLnhD,KAAKygD,oBAAoB1yC,GAEpBszC,GACLrhD,KAAK4gD,oBAAoB7yC,OAGjCwxC,EAAat9C,UAAUs/C,sBAAwB,SAAUxzC,GACrD,IAAI9F,EAAQ8F,EAAMyzC,oCAAqCx5C,EAAM+F,EAAM0zC,kCAAmCC,EAAa3zC,EAAM4zC,oCAAqCjB,EAAM1gD,KAAKq+C,qBAAqBp2C,EAAMwE,EAAGxE,EAAMyE,EAAG1E,EAAIyE,EAAGzE,EAAI0E,GAC3N,GAAIg1C,EAAY,CACZ,IAAK,IAAI5/C,EAAI,EAAGA,EAAI4/C,EAAW9+C,OAAQd,GAAK,EACxC4+C,EAAIkB,aAAaF,EAAW5/C,GAAI4/C,EAAW5/C,EAAI,IAEnD9B,KAAKsJ,QAAQ,cAAeo3C,KAGpCnB,EAAat9C,UAAU06C,QAAU,SAAU5uC,GACvC,IAAI8zC,EAAO9zC,EAAM8zC,OAAQC,EAAqB/zC,EAAMqoB,wBACpD,GAAIroB,EAAM2uC,YAAa,CACnB,IAAKoF,EAAoB,CACrB9hD,KAAKogB,OACL,IAAIpT,EAAahN,KAAKoP,YAAY8tC,gBAClCl9C,KAAKm9C,aAAanwC,EAAY,EAAG,EAAGA,EAAY,EAAG,GAEvDhN,KAAKq9C,cAActvC,GACf8zC,GAAQ9zC,EAAMg0C,gBACd/hD,KAAKg/C,YAAY6C,GACjB7hD,KAAKsJ,QAAQ,iBAAkByE,EAAMi0C,eAEzChiD,KAAKsJ,QAAQ,YAAayE,EAAMk0C,eAC3Bl0C,EAAMm0C,6BACPliD,KAAKsJ,QAAQ,cAAe,iBAEhC,IAAI63C,EAAoBpzC,EAAM4zC,oCAC1BR,EACAnhD,KAAKuhD,sBAAsBxzC,GAG3B/N,KAAKsJ,QAAQ,cAAeyE,EAAMwS,UAEtCxS,EAAMqjB,YAAYpxB,MACb8hD,GACD9hD,KAAKsgB,YAIjBi/B,EAAat9C,UAAUkgD,aAAe,SAAUp0C,GAC5C,IAAI2jC,EAAO3tC,EAAOuD,KAAMirC,EAAQb,EAAKxwC,IAAI6M,EAAMq0C,gBAAiB,SAAUC,EAAO3Q,EAAKxwC,IAAI6M,EAAMu0C,gBAAiB,GAAI7iC,EAASiyB,EAAKxwC,IAAI6M,EAAMw0C,kBAAmB,CAC5J91C,EAAG,EACHC,EAAG,IACHwd,EAAQnc,EAAM4b,mBAAoBnb,EAAQxO,KAAKmP,OAAO+tC,gBAAiB/2B,EAAS+D,EAAMzd,EAAI+B,EAAO4X,EAAS8D,EAAMxd,EAAI8B,EACxHxO,KAAKsJ,QAAQ,cAAeipC,GAC5BvyC,KAAKsJ,QAAQ,aAAc+4C,EAAO35C,KAAK4L,IAAI5L,KAAK4B,IAAI6b,GAASzd,KAAK4B,IAAI8b,KACtEpmB,KAAKsJ,QAAQ,gBAAiBmW,EAAOhT,EAAI0Z,GACzCnmB,KAAKsJ,QAAQ,gBAAiBmW,EAAO/S,EAAI0Z,IAEtCm5B,EA5HQ,CA6HjB3f,GACFlgC,EAAQ6/C,aAAeA,EACvB,IAAIiD,EAAc,SAAU31C,GAExB,SAAS21C,IACL,OAAkB,OAAX31C,GAAmBA,EAAO7J,MAAMhD,KAAMiD,YAAcjD,KAgC/D,OAlCAwL,EAAUg3C,EAAY31C,GAItB21C,EAAWvgD,UAAUu6C,MAAQ,SAAUzuC,GACnC/N,KAAKogB,OACLpgB,KAAKsJ,QAAQ,YAAayE,EAAMQ,UAChCR,EAAM00C,aAAaziD,MACnBA,KAAKsgB,WAETkiC,EAAWvgD,UAAUw6C,YAAc,SAAU1uC,GACrCA,EAAM20C,gBACN1iD,KAAK28C,QAAQ5uC,IAGrBy0C,EAAWvgD,UAAU06C,QAAU,SAAU5uC,GACrC,GAAIA,EAAM20C,eAAgB,CACtB,IAAIZ,EAAqB/zC,EAAMqoB,wBAC/B,IAAK0rB,EAAoB,CACrB9hD,KAAKogB,OACL,IAAIpT,EAAahN,KAAKoP,YAAY8tC,gBAClCl9C,KAAKm9C,aAAanwC,EAAY,EAAG,EAAGA,EAAY,EAAG,GAEvDhN,KAAKq9C,cAActvC,GACnB,IAAI40C,EAAiB50C,EAAM40C,iBACvBV,EAAiC,SAAnBU,EAA4B50C,EAAMk0C,cAAgBU,EACpE3iD,KAAKsJ,QAAQ,YAAa24C,GAC1BjiD,KAAKsJ,QAAQ,cAAeyE,EAAMQ,UAClCR,EAAM60C,eAAe5iD,MAChB8hD,GACD9hD,KAAKsgB,YAIVkiC,EAnCM,CAoCf5iB,GACFlgC,EAAQ8iD,WAAaA,G,mBCzgBrB,IAAIroC,EAAW,GAAGA,SAElBxa,EAAOD,QAAU,SAAUqR,GACzB,OAAOoJ,EAAS3Z,KAAKuQ,GAAI2U,MAAM,GAAI,K,qBCHrC,IAAIlR,EAAS,EAAQ,QACjBG,EAAY,EAAQ,QAEpBkuC,EAAS,qBACTtsB,EAAQ/hB,EAAOquC,IAAWluC,EAAUkuC,EAAQ,IAEhDljD,EAAOD,QAAU62B,G,mBCNjB,IAAIrtB,EAGJA,EAAI,WACH,OAAOlJ,KADJ,GAIJ,IAECkJ,EAAIA,GAAK,IAAI4O,SAAS,cAAb,GACR,MAAOqK,GAEc,kBAAX2gC,SAAqB55C,EAAI45C,QAOrCnjD,EAAOD,QAAUwJ,G,qBCnBjB,IAAI3F,EAAM,EAAQ,QACdF,EAAkB,EAAQ,QAC1ByF,EAAU,EAAQ,QAA+BA,QACjDgN,EAAa,EAAQ,QAEzBnW,EAAOD,QAAU,SAAUqC,EAAQ6Z,GACjC,IAGIha,EAHAgC,EAAIP,EAAgBtB,GACpB1B,EAAI,EACJsT,EAAS,GAEb,IAAK/R,KAAOgC,GAAIL,EAAIuS,EAAYlU,IAAQ2B,EAAIK,EAAGhC,IAAQ+R,EAAO5K,KAAKnH,GAEnE,MAAOga,EAAMhZ,OAASvC,EAAOkD,EAAIK,EAAGhC,EAAMga,EAAMvb,SAC7CyI,EAAQ6K,EAAQ/R,IAAQ+R,EAAO5K,KAAKnH,IAEvC,OAAO+R,I,qBCfT,IAAIa,EAAS,EAAQ,QACjByE,EAAW,EAAQ,QAEnBohB,EAAW7lB,EAAO6lB,SAElB0oB,EAAS9pC,EAASohB,IAAaphB,EAASohB,EAAS9uB,eAErD5L,EAAOD,QAAU,SAAUqR,GACzB,OAAOgyC,EAAS1oB,EAAS9uB,cAAcwF,GAAM,K,qBCR/C,IAAIqC,EAAW,EAAQ,QACnB6F,EAAW,EAAQ,QACnB+pC,EAAuB,EAAQ,QAEnCrjD,EAAOD,QAAU,SAAU8b,EAAG/O,GAE5B,GADA2G,EAASoI,GACLvC,EAASxM,IAAMA,EAAEX,cAAgB0P,EAAG,OAAO/O,EAC/C,IAAIw2C,EAAoBD,EAAqBr/C,EAAE6X,GAC3CulB,EAAUkiB,EAAkBliB,QAEhC,OADAA,EAAQt0B,GACDw2C,EAAkB7J,U,qBCV3B,IAAI5kC,EAAS,EAAQ,QACjBC,EAA8B,EAAQ,QAE1C9U,EAAOD,QAAU,SAAUkC,EAAKN,GAC9B,IACEmT,EAA4BD,EAAQ5S,EAAKN,GACzC,MAAOwC,GACP0Q,EAAO5S,GAAON,EACd,OAAOA,I,mBCRX3B,EAAOD,QAAU,I,mBCAjBC,EAAOD,QAAU,SAAUgS,GACzB,IACE,QAASA,IACT,MAAO5N,GACP,OAAO,K,qBCJX,IAAIo/C,EAAO,EAAQ,QACf1uC,EAAS,EAAQ,QAEjB/R,EAAY,SAAU0gD,GACxB,MAA0B,mBAAZA,EAAyBA,OAAWtgD,GAGpDlD,EAAOD,QAAU,SAAU0jD,EAAWt/B,GACpC,OAAO7gB,UAAUL,OAAS,EAAIH,EAAUygD,EAAKE,KAAe3gD,EAAU+R,EAAO4uC,IACzEF,EAAKE,IAAcF,EAAKE,GAAWt/B,IAAWtP,EAAO4uC,IAAc5uC,EAAO4uC,GAAWt/B,K,kCCR3F,IAAIu/B,EAA6B,GAAGzpC,qBAChClW,EAA2B3C,OAAO2C,yBAGlC4/C,EAAc5/C,IAA6B2/C,EAA2B7iD,KAAK,CAAE+iD,EAAG,GAAK,GAIzF7jD,EAAQiE,EAAI2/C,EAAc,SAA8BE,GACtD,IAAIpuC,EAAa1R,EAAyB1D,KAAMwjD,GAChD,QAASpuC,GAAcA,EAAWnU,YAChCoiD,G,qBCZJ,IAAIjwC,EAAW,EAAQ,QACnBqwC,EAAqB,EAAQ,QAMjC9jD,EAAOD,QAAUqB,OAAO2K,iBAAmB,aAAe,GAAK,WAC7D,IAEIg4C,EAFAC,GAAiB,EACjBphD,EAAO,GAEX,IACEmhD,EAAS3iD,OAAO2C,yBAAyB3C,OAAOkB,UAAW,aAAa0U,IACxE+sC,EAAOljD,KAAK+B,EAAM,IAClBohD,EAAiBphD,aAAgBqJ,MACjC,MAAO9H,IACT,OAAO,SAAwBF,EAAGm5B,GAKhC,OAJA3pB,EAASxP,GACT6/C,EAAmB1mB,GACf4mB,EAAgBD,EAAOljD,KAAKoD,EAAGm5B,GAC9Bn5B,EAAE+H,UAAYoxB,EACZn5B,GAdoD,QAgBzDf,I,qBCvBN,IAAIi2C,EAAwB,EAAQ,QAChCpkC,EAAW,EAAQ,QACnByF,EAAW,EAAQ,QAIlB2+B,GACHpkC,EAAS3T,OAAOkB,UAAW,WAAYkY,EAAU,CAAEse,QAAQ,K,qBCP7D,IAAIz3B,EAAiB,EAAQ,QAAuC2C,EAChEJ,EAAM,EAAQ,QACdlB,EAAkB,EAAQ,QAE1BC,EAAgBD,EAAgB,eAEpC1C,EAAOD,QAAU,SAAUqR,EAAI6yC,EAAKruC,GAC9BxE,IAAOxN,EAAIwN,EAAKwE,EAASxE,EAAKA,EAAG9O,UAAWK,IAC9CtB,EAAe+P,EAAIzO,EAAe,CAAE6T,cAAc,EAAM7U,MAAOsiD,M,kCCPnE,IAAIp4C,EAAaxL,MAAQA,KAAKwL,WAAc,WACxC,IAAIC,EAAgB,SAAU9K,EAAGoC,GAI7B,OAHA0I,EAAgB1K,OAAO2K,gBAClB,CAAEC,UAAW,cAAgBC,OAAS,SAAUjL,EAAGoC,GAAKpC,EAAEgL,UAAY5I,IACvE,SAAUpC,EAAGoC,GAAK,IAAK,IAAIZ,KAAKY,EAAOA,EAAEb,eAAeC,KAAIxB,EAAEwB,GAAKY,EAAEZ,KAClEsJ,EAAc9K,EAAGoC,IAE5B,OAAO,SAAUpC,EAAGoC,GAEhB,SAAS8I,IAAO7L,KAAK8L,YAAcnL,EADnC8K,EAAc9K,EAAGoC,GAEjBpC,EAAEsB,UAAkB,OAANc,EAAahC,OAAOY,OAAOoB,IAAM8I,EAAG5J,UAAYc,EAAEd,UAAW,IAAI4J,IAV3C,GAa5C9K,OAAOC,eAAetB,EAAS,aAAc,CAAE4B,OAAO,IACtD,IAAIyC,EAAS,EAAQ,QACjBgI,EAAc,EAAQ,QACtB9H,EAAS,EAAQ,QACjB+H,EAAY,EAAQ,QACpBE,EAAW,EAAQ,QACnB2D,EAAa,SAAUhD,GAEvB,SAASgD,EAAUhJ,GACf,IAAI0C,EAAQsD,EAAOrM,KAAKR,KAAM6G,IAAW7G,KAOzC,OANAuJ,EAAM4F,OAAS,IAAIjD,EAAS0T,YAC5BrW,EAAMs6C,iBAAkB,EACxBt6C,EAAM6U,GAAG,gBAAiB7U,EAAMu6C,kBAChCv6C,EAAMu6C,mBACNv6C,EAAM6U,GAAG,8BAA+B7U,EAAMw6C,mBAC9Cx6C,EAAMw6C,oBACCx6C,EAiKX,OA1KAiC,EAAUqE,EAAWhD,GAWrBgD,EAAU5N,UAAU+hD,gBAAkB,WAClC,IAAItjD,EAAIV,KAAKmP,OAAOgB,QACpB,OAAOzP,EAAEsjD,mBAEbn0C,EAAU5N,UAAUmN,UAAY,WAC5B,OAAOpP,KAAKmP,QAEhBU,EAAU5N,UAAU0N,aAAe,WAC/B,OAAO3P,KAAK8M,WAEhB+C,EAAU5N,UAAUsN,WAAa,WAC7B,OAAOvP,KAAKoP,YAAYG,cAE5BM,EAAU5N,UAAUuN,MAAQ,SAAUI,GAElC,OADA5P,KAAKuP,aAAaC,MAAMI,GACjB5P,MAEX6P,EAAU5N,UAAUqlB,UAAY,SAAUpT,GACtCrH,EAAO5K,UAAUqlB,UAAU9mB,KAAKR,KAAMkU,GACtC,IAAIqW,EAAQvqB,KAAKklB,WAUjB,OATIqF,IACAA,EAAMla,QAAQC,YAAYtQ,KAAKoP,YAAYe,SACvC+D,EAAQqW,EAAMtM,SAASrb,OAAS,EAChC2nB,EAAMla,QAAQ4zC,aAAajkD,KAAKoP,YAAYe,QAASoa,EAAMtM,SAAS/J,EAAQ,GAAG9E,YAAYe,SAG3Foa,EAAMla,QAAQE,YAAYvQ,KAAKoP,YAAYe,UAG5CnQ,MAEX6P,EAAU5N,UAAUilB,UAAY,WAC5BjjB,EAAO8F,KAAK9H,UAAUilB,UAAU1mB,KAAKR,MACrC,IAAIuqB,EAAQvqB,KAAKklB,WAKjB,OAJIqF,IACAA,EAAMla,QAAQC,YAAYtQ,KAAKoP,YAAYe,SAC3Coa,EAAMla,QAAQE,YAAYvQ,KAAKoP,YAAYe,WAExC,GAEXN,EAAU5N,UAAUklB,OAAS,WACzB,IAAI+8B,EAAQjgD,EAAO8F,KAAK9H,UAAUklB,OAAO3mB,KAAKR,MAC9C,IAAKkkD,EACD,OAAO,EAEX,IAAI35B,EAAQvqB,KAAKklB,WACjB,QAAKqF,IAGLA,EAAMla,QAAQC,YAAYtQ,KAAKoP,YAAYe,SACvCnQ,KAAKkU,MAAQqW,EAAMtM,SAASrb,OAAS,EACrC2nB,EAAMla,QAAQ4zC,aAAajkD,KAAKoP,YAAYe,QAASoa,EAAMtM,SAASje,KAAKkU,MAAQ,GAAG9E,YAAYe,SAGhGoa,EAAMla,QAAQE,YAAYvQ,KAAKoP,YAAYe,UAExC,IAEXN,EAAU5N,UAAUmlB,SAAW,WAC3B,GAAInjB,EAAO8F,KAAK9H,UAAUmlB,SAAS5mB,KAAKR,MAAO,CAC3C,IAAIuqB,EAAQvqB,KAAKklB,WACjB,GAAIqF,EAAO,CACP,IAAItM,EAAWsM,EAAMtM,SACrBsM,EAAMla,QAAQC,YAAYtQ,KAAKoP,YAAYe,SAC3Coa,EAAMla,QAAQ4zC,aAAajkD,KAAKoP,YAAYe,QAAS8N,EAASje,KAAKkU,MAAQ,GAAG9E,YAAYe,SAE9F,OAAO,EAEX,OAAO,GAEXN,EAAU5N,UAAUolB,aAAe,WAC/B,GAAIpjB,EAAO8F,KAAK9H,UAAUolB,aAAa7mB,KAAKR,MAAO,CAC/C,IAAIuqB,EAAQvqB,KAAKklB,WACjB,GAAIqF,EAAO,CACP,IAAItM,EAAWsM,EAAMtM,SACrBsM,EAAMla,QAAQC,YAAYtQ,KAAKoP,YAAYe,SAC3Coa,EAAMla,QAAQ4zC,aAAajkD,KAAKoP,YAAYe,QAAS8N,EAAS,GAAG7O,YAAYe,SAEjF,OAAO,EAEX,OAAO,GAEXN,EAAU5N,UAAUkF,SAAW,WAC3B,OAAOnH,MAEX6P,EAAU5N,UAAU+L,gBAAkB,WAClC,OAAO,GAEX6B,EAAU5N,UAAUohB,OAAS,WACzB,IAAIlT,EAAUnQ,KAAKoP,YAAYe,QAK/B,OAJAlM,EAAO8F,KAAK9H,UAAUohB,OAAO7iB,KAAKR,MAC9BmQ,GAAWA,EAAQC,YAAcrM,EAAOuD,KAAKiqC,cAAcphC,IAC3DA,EAAQC,WAAWE,YAAYH,GAE5BnQ,MAEX6P,EAAU5N,UAAUijB,SAAW,WAC3B,OAAOllB,KAAKiQ,QAEhBJ,EAAU5N,UAAUgL,QAAU,SAAUC,GACpC,IAAIC,EAAQD,EAAGC,MAAOC,EAASF,EAAGE,OAGlC,OAFApN,KAAKmP,OAAOlC,QAAQE,EAAOC,GAC3BpN,KAAK+jD,oBACE/jD,MAEX6P,EAAU5N,UAAUooB,eAAiB,SAAUxjB,GAM3C,OALAA,EAASA,GAAU,GACnBA,EAAOsG,MAAQtG,EAAOsG,OAASnN,KAAK2S,WACpC9L,EAAOuG,OAASvG,EAAOuG,QAAUpN,KAAK4S,YACtC/L,EAAO4F,OAAiB5J,IAAbgE,EAAO4F,EAAkB5F,EAAO4F,EAAIzM,KAAKyM,IACpD5F,EAAO6F,OAAiB7J,IAAbgE,EAAO6F,EAAkB7F,EAAO6F,EAAI1M,KAAK0M,IAC7CzI,EAAO8F,KAAK9H,UAAUooB,eAAe7pB,KAAKR,KAAM6G,IAE3DgJ,EAAU5N,UAAU6hD,iBAAmB,WACnC,IAAIt/B,EAAUxkB,KAAKwkB,UAEfxkB,KAAKmP,OAAOgB,QAAQ8pB,MAAMC,QAD1B1V,EACoC,QAGA,QAG5C3U,EAAU5N,UAAU8hD,kBAAoB,WACpC/jD,KAAKuP,aAAa4Q,SAASD,sBAAwBlgB,KAAKkgB,yBAE5DrQ,EAAU5N,UAAU0Q,SAAW,WAC3B,GAAI3S,KAAKiQ,OACL,OAAOjQ,KAAKiQ,OAAO9C,SAG3B0C,EAAU5N,UAAU4Q,SAAW,WAC3B9O,EAAOuD,KAAKmT,KAAK,8EAErB5K,EAAU5N,UAAU2Q,UAAY,WAC5B,GAAI5S,KAAKiQ,OACL,OAAOjQ,KAAKiQ,OAAO7C,UAG3ByC,EAAU5N,UAAU6Q,UAAY,WAC5B/O,EAAOuD,KAAKmT,KAAK,gFAErB5K,EAAU5N,UAAUyL,gBAAkB,SAAUC,EAAKC,GACjD,OAAO,MAEXiC,EAAU5N,UAAUsrB,UAAY,WAC5B,IAAIhkB,EAAQvJ,KAQZ,OAPKA,KAAK6jD,kBACN7jD,KAAK6jD,iBAAkB,EACvB9/C,EAAOuD,KAAK6pC,kBAAiB,WACzB5nC,EAAMijB,OACNjjB,EAAMs6C,iBAAkB,MAGzB7jD,MAEX6P,EAAU5N,UAAUkiD,gBAAkB,SAAUp2C,EAAOU,EAASQ,GAC5D,IAAIxO,EAAIsN,EAAMmT,qBAAqBjS,GAAKsW,YACxC9W,EAAQmb,UAAUnpB,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAIA,EAAE,KAE/CoP,EA3KK,CA4Kd9D,EAAY0D,WACd/P,EAAQmQ,UAAYA,EACpBA,EAAU5N,UAAUuO,SAAW,YAC/BxE,EAAU0E,QAAQC,gBAAgBd,EAAW,yBAAyB,GACtE7D,EAAU0E,QAAQC,gBAAgBd,EAAW,mBAAmB,GAChE9L,EAAO8M,WAAWC,WAAWjB,I,mCCrM7B,YACA9O,OAAOC,eAAetB,EAAS,aAAc,CAAE4B,OAAO,IACtD,IAAI8iD,EAAc17C,KAAK6B,GAAK,IAC5B,SAAS85C,IACL,MAA0B,qBAAXvB,SACmB,oBAA7B,GAAG3oC,SAAS3Z,KAAKsiD,SACe,oBAA7B,GAAG3oC,SAAS3Z,KAAKsiD,SAE7B,IAAIwB,EAAY,SAAUC,GACtB,IAAIC,EAAOD,EAAGz7C,QAAQ,SACtB,GAAI07C,EAAO,EACP,OAAOtS,SAASqS,EAAG9R,UAAU+R,EAAO,EAAGD,EAAGz7C,QAAQ,IAAK07C,IAAQ,IAEnE,IAAIC,EAAUF,EAAGz7C,QAAQ,YACzB,GAAI27C,EAAU,EAAG,CACb,IAAIC,EAAKH,EAAGz7C,QAAQ,OACpB,OAAOopC,SAASqS,EAAG9R,UAAUiS,EAAK,EAAGH,EAAGz7C,QAAQ,IAAK47C,IAAM,IAE/D,IAAIC,EAAOJ,EAAGz7C,QAAQ,SACtB,OAAI67C,EAAO,GACAzS,SAASqS,EAAG9R,UAAUkS,EAAO,EAAGJ,EAAGz7C,QAAQ,IAAK67C,IAAQ,KAIvEjlD,EAAQklD,SAAW,SAAU/yC,GACzB,IAAI0yC,EAAK1yC,EAAUgtB,cAAetmB,EAAQ,uBAAuB7G,KAAK6yC,IAClE,uBAAuB7yC,KAAK6yC,IAC5B,oCAAoC7yC,KAAK6yC,IACzC,kBAAkB7yC,KAAK6yC,IACtBA,EAAGz7C,QAAQ,cAAgB,GACxB,gCAAgC4I,KAAK6yC,IACzC,GAAIM,IAAWhzC,EAAU0G,MAAM,4DAA6DusC,IAAajzC,EAAU0G,MAAM,aAC7H,MAAO,CACHwsC,QAASxsC,EAAM,IAAM,GACrBC,QAASD,EAAM,IAAM,IACrB8b,KAAMiwB,EAAUC,GAChBM,OAAQA,EACRC,SAAUA,IAGlBplD,EAAQkyC,KAAyB,qBAAXp9B,EAChBA,EACkB,qBAAXsuC,OACHA,OAC6B,qBAAtBkC,kBACHjlD,KACA,GACdL,EAAQ0H,MAAQ,CACZyzB,QAASn7B,EAAQkyC,KACjBp5B,QAAS,QACTysC,UAAWZ,IACX9pC,aAAc,QAAQhY,KAAK,SAAU2iD,KAAW/qC,YAChDgrC,eAAgB,IAChBn7B,SAAU,SAAUo7B,GAChB,OAAO1lD,EAAQ0H,MAAM4sC,SAAWoR,EAAQhB,EAAcgB,GAE1DjJ,aAAa,EACbkJ,uBAAuB,EACvBC,kBAAkB,EAClBC,2BAA2B,EAC3BC,gBAAgB,EAChBC,kBAAkB,EAClBz4C,gBAAYnK,EACZsoB,aAAc,EACd6oB,UAAU,EACVC,cAAc,EACdhmB,YAAa,CAAC,EAAG,GACjB3K,WAAY,WACR,OAAO5jB,EAAQ0H,MAAM,MAAMkc,YAE/BoiC,YAAa,WACT,QAAShmD,EAAQ0H,MAAM,MAAMhD,MAEjCgwB,GAAI10B,EAAQklD,SAAUllD,EAAQkyC,KAAK+T,WAAajmD,EAAQkyC,KAAK+T,UAAU9zC,WAAc,IACrFwoB,SAAU36B,EAAQkyC,KAAKvX,SACvBurB,cAAe,SAAUx+C,GACrB1H,EAAQkyC,KAAKxqC,MAAQA,GAEzBw9C,SAAUllD,EAAQklD,UAEtBllD,EAAQ4uB,gBAAkB,GAC1B5uB,EAAQ+Q,cAAgB,SAAUo1C,GAC9BnmD,EAAQ4uB,gBAAgBu3B,EAAU5jD,UAAUkmB,gBAAkB09B,EAC9DnmD,EAAQ0H,MAAMy+C,EAAU5jD,UAAUkmB,gBAAkB09B,K,wDClFxD,IAAIzqB,EAAI,EAAQ,QACZ0qB,EAAO,EAAQ,QAAgC9S,IAC/C+S,EAA+B,EAAQ,QACvCC,EAA0B,EAAQ,QAElCC,EAAsBF,EAA6B,OAEnDG,EAAiBF,EAAwB,OAK7C5qB,EAAE,CAAEnmB,OAAQ,QAAS8nB,OAAO,EAAMrnB,QAASuwC,IAAwBC,GAAkB,CACnFlT,IAAK,SAAagI,GAChB,OAAO8K,EAAK9lD,KAAMg7C,EAAY/3C,UAAUL,OAAS,EAAIK,UAAU,QAAKJ,O,sBCfxE,8BACE,OAAOkO,GAAMA,EAAGrI,MAAQA,MAAQqI,GAIlCpR,EAAOD,QAELymD,EAA2B,iBAAdC,YAA0BA,aACvCD,EAAuB,iBAAVrD,QAAsBA,SACnCqD,EAAqB,iBAARpmD,MAAoBA,OACjComD,EAAuB,iBAAV3xC,GAAsBA,IAEnCsD,SAAS,cAATA,K,2CCZF,IAAItD,EAAS,EAAQ,QACjB6xC,EAAe,EAAQ,QACvBC,EAAuB,EAAQ,QAC/B7xC,EAA8B,EAAQ,QACtCpS,EAAkB,EAAQ,QAE1B8O,EAAW9O,EAAgB,YAC3BC,EAAgBD,EAAgB,eAChCkkD,EAAcD,EAAqBxpB,OAEvC,IAAK,IAAI0pB,KAAmBH,EAAc,CACxC,IAAIx1C,EAAa2D,EAAOgyC,GACpBC,EAAsB51C,GAAcA,EAAW5O,UACnD,GAAIwkD,EAAqB,CAEvB,GAAIA,EAAoBt1C,KAAco1C,EAAa,IACjD9xC,EAA4BgyC,EAAqBt1C,EAAUo1C,GAC3D,MAAOziD,GACP2iD,EAAoBt1C,GAAYo1C,EAKlC,GAHKE,EAAoBnkD,IACvBmS,EAA4BgyC,EAAqBnkD,EAAekkD,GAE9DH,EAAaG,GAAkB,IAAK,IAAIx0C,KAAes0C,EAEzD,GAAIG,EAAoBz0C,KAAiBs0C,EAAqBt0C,GAAc,IAC1EyC,EAA4BgyC,EAAqBz0C,EAAas0C,EAAqBt0C,IACnF,MAAOlO,GACP2iD,EAAoBz0C,GAAes0C,EAAqBt0C,O,qBC5BhE,IAAI4D,EAAqB,EAAQ,QAC7BC,EAAc,EAAQ,QAI1BlW,EAAOD,QAAUqB,OAAOiY,MAAQ,SAAcpV,GAC5C,OAAOgS,EAAmBhS,EAAGiS,K,kCCL/B9U,OAAOC,eAAetB,EAAS,aAAc,CAAE4B,OAAO,IACtD,IAAI4C,EAAW,EAAQ,QACnBH,EAAS,EAAQ,QACrBrE,EAAQ8jB,GAAK,CACT,iBACI,IAAIkjC,GAAO,EAMX,OALAhnD,EAAQ8jB,GAAGC,cAAcxI,SAAQ,SAAUgS,GACf,aAApBA,EAAKF,aACL25B,GAAO,MAGRA,GAEXC,aAAa,EACb,WACI,IAAIviD,EAIJ,OAHA1E,EAAQ8jB,GAAGC,cAAcxI,SAAQ,SAAUgS,GACvC7oB,EAAO6oB,EAAK7oB,QAETA,GAEXqf,cAAe,IAAI9F,IACnBipC,MAAO,SAAU9jC,GACbpjB,EAAQ8jB,GAAGC,cAAcxI,SAAQ,SAAUgS,EAAMrrB,GAC7C,IAAIwC,EAAO6oB,EAAK7oB,KACZmmB,EAAQnmB,EAAK8gB,WACjBqF,EAAMs8B,qBAAqB/jC,QACJjgB,IAAnBoqB,EAAKP,YACLO,EAAKP,UAAY3oB,EAAOuD,KAAK+vC,mBAAmBv0B,IAEpD,IAAInV,EAAM4c,EAAMsC,yBAAyBuuB,MAAK,SAAUztC,GAAO,OAAOA,EAAI0J,KAAO4V,EAAKP,aACtF,GAAK/e,EAAL,CAGA,GAAwB,aAApBsf,EAAKF,WAA2B,CAChC,IAAI5B,EAAe/mB,EAAK+mB,eACpB27B,EAAWp+C,KAAKC,IAAID,KAAK4B,IAAIqD,EAAIlB,EAAIwgB,EAAKH,gBAAgBrgB,GAAI/D,KAAK4B,IAAIqD,EAAIjB,EAAIugB,EAAKH,gBAAgBpgB,IACxG,GAAIo6C,EAAW37B,EACX,OAGJ,GADA/mB,EAAK4oB,UAAU,CAAElK,IAAKA,KACjB1e,EAAKkf,aACN,OAGRlf,EAAK8oB,iBAAiBpK,EAAKmK,GAC3B7oB,EAAKwB,KAAK,WAAY,CAClB2H,KAAM,WACN0H,OAAQ7Q,EACR0e,IAAKA,IACN,QAGX0K,eAAgB,SAAU1K,GACtBpjB,EAAQ8jB,GAAGC,cAAcxI,SAAQ,SAAUgS,EAAMrrB,GAC7C,IAAIwC,EAAO6oB,EAAK7oB,KACZmmB,EAAQnmB,EAAK8gB,WACbpC,GACAyH,EAAMs8B,qBAAqB/jC,GAE/B,IAAInV,EAAM4c,EAAMsC,yBAAyBuuB,MAAK,SAAUztC,GAAO,OAAOA,EAAI0J,KAAO4V,EAAKP,aACtF,GAAK/e,EAAL,CAGwB,aAApBsf,EAAKF,YAAiD,YAApBE,EAAKF,aACvCrtB,EAAQ8jB,GAAGmjC,aAAc,EACzBziD,EAASkD,MAAMo+C,gBAAiB,EAChCv4B,EAAKF,WAAa,WAEtB,IAAIg6B,EAAW95B,EAAK7oB,KAAK+C,YACpB8lB,EAAK7oB,gBAAgBF,EAASkD,MAAM,UAAY6lB,EAAK7oB,KACtD2iD,GACAA,EAASv6B,YAIrBiB,cAAe,SAAU3K,GACrBpjB,EAAQ8jB,GAAGC,cAAcxI,SAAQ,SAAUgS,EAAMrrB,GACrB,YAApBqrB,EAAKF,YACLE,EAAK7oB,KAAKwB,KAAK,UAAW,CACtB2H,KAAM,UACN0H,OAAQgY,EAAK7oB,KACb0e,IAAKA,IACN,GAEiB,aAApBmK,EAAKF,YACLrtB,EAAQ8jB,GAAGC,cAAchF,OAAO7c,QAK5CsC,EAASkD,MAAM69C,YACfnC,OAAO1qC,iBAAiB,UAAW1Y,EAAQ8jB,GAAGgK,gBAAgB,GAC9Ds1B,OAAO1qC,iBAAiB,WAAY1Y,EAAQ8jB,GAAGgK,gBAAgB,GAC/Ds1B,OAAO1qC,iBAAiB,YAAa1Y,EAAQ8jB,GAAGojC,OAChD9D,OAAO1qC,iBAAiB,YAAa1Y,EAAQ8jB,GAAGojC,OAChD9D,OAAO1qC,iBAAiB,UAAW1Y,EAAQ8jB,GAAGiK,eAAe,GAC7Dq1B,OAAO1qC,iBAAiB,WAAY1Y,EAAQ8jB,GAAGiK,eAAe,K,qBClGlE,IAAIlqB,EAAM,EAAQ,QACdwkB,EAAW,EAAQ,QACnB+P,EAAY,EAAQ,QACpBkvB,EAA2B,EAAQ,QAEnC3tB,EAAWvB,EAAU,YACrBmvB,EAAkBlmD,OAAOkB,UAI7BtC,EAAOD,QAAUsnD,EAA2BjmD,OAAOu6B,eAAiB,SAAU13B,GAE5E,OADAA,EAAImkB,EAASnkB,GACTL,EAAIK,EAAGy1B,GAAkBz1B,EAAEy1B,GACH,mBAAjBz1B,EAAEkI,aAA6BlI,aAAaA,EAAEkI,YAChDlI,EAAEkI,YAAY7J,UACd2B,aAAa7C,OAASkmD,EAAkB,O,qBCfnD,IAAI37C,EAAQ,EAAQ,QAEpB3L,EAAOD,SAAW4L,GAAM,WACtB,SAASivB,KAET,OADAA,EAAEt4B,UAAU6J,YAAc,KACnB/K,OAAOu6B,eAAe,IAAIf,KAASA,EAAEt4B,c,kCCJ9C,IAAIoB,EAAkB,EAAQ,QAC1B6jD,EAAmB,EAAQ,QAC3BtuC,EAAY,EAAQ,QACpBO,EAAsB,EAAQ,QAC9BC,EAAiB,EAAQ,QAEzB+tC,EAAiB,iBACjB7tC,EAAmBH,EAAoBxC,IACvC4C,EAAmBJ,EAAoBK,UAAU2tC,GAYrDxnD,EAAOD,QAAU0Z,EAAexN,MAAO,SAAS,SAAU6N,EAAU2tC,GAClE9tC,EAAiBtZ,KAAM,CACrBuN,KAAM45C,EACNlyC,OAAQ5R,EAAgBoW,GACxBvF,MAAO,EACPkzC,KAAMA,OAIP,WACD,IAAI7gD,EAAQgT,EAAiBvZ,MACzBiV,EAAS1O,EAAM0O,OACfmyC,EAAO7gD,EAAM6gD,KACblzC,EAAQ3N,EAAM2N,QAClB,OAAKe,GAAUf,GAASe,EAAOrS,QAC7B2D,EAAM0O,YAASpS,EACR,CAAEvB,WAAOuB,EAAW2O,MAAM,IAEvB,QAAR41C,EAAuB,CAAE9lD,MAAO4S,EAAO1C,MAAM,GACrC,UAAR41C,EAAyB,CAAE9lD,MAAO2T,EAAOf,GAAQ1C,MAAM,GACpD,CAAElQ,MAAO,CAAC4S,EAAOe,EAAOf,IAAS1C,MAAM,KAC7C,UAKHoH,EAAUyuC,UAAYzuC,EAAUhN,MAGhCs7C,EAAiB,QACjBA,EAAiB,UACjBA,EAAiB,Y,qBCpDjB,IAAIxyC,EAAW,EAAQ,QAEvB/U,EAAOD,QAAU,SAAUuV,EAAQklB,EAAKrlB,GACtC,IAAK,IAAIlT,KAAOu4B,EAAKzlB,EAASO,EAAQrT,EAAKu4B,EAAIv4B,GAAMkT,GACrD,OAAOG,I,mBCJTtV,EAAOD,QAAU,SAAUgS,GACzB,IACE,MAAO,CAAE5N,OAAO,EAAOxC,MAAOoQ,KAC9B,MAAO5N,GACP,MAAO,CAAEA,OAAO,EAAMxC,MAAOwC,M,kCCHjC,IAiDIwjD,EAAUC,EAAsBC,EAAgBC,EAjDhDrsB,EAAI,EAAQ,QACZ9E,EAAU,EAAQ,QAClB9hB,EAAS,EAAQ,QACjBtD,EAAa,EAAQ,QACrBw2C,EAAgB,EAAQ,QACxBhzC,EAAW,EAAQ,QACnBizC,EAAc,EAAQ,QACtBpsB,EAAiB,EAAQ,QACzBqsB,EAAa,EAAQ,QACrB3uC,EAAW,EAAQ,QACnBxW,EAAY,EAAQ,QACpBolD,EAAa,EAAQ,QACrBtxC,EAAU,EAAQ,QAClB+hB,EAAgB,EAAQ,QACxB1kB,EAAU,EAAQ,QAClBk0C,EAA8B,EAAQ,QACtCC,EAAqB,EAAQ,QAC7B/N,EAAO,EAAQ,QAAqBrjC,IACpCqxC,EAAY,EAAQ,QACpBC,EAAiB,EAAQ,QACzBC,EAAmB,EAAQ,QAC3BC,EAA6B,EAAQ,QACrCC,EAAU,EAAQ,QAClBjvC,EAAsB,EAAQ,QAC9BtE,EAAW,EAAQ,QACnBxS,EAAkB,EAAQ,QAC1ByP,EAAa,EAAQ,QAErBC,EAAU1P,EAAgB,WAC1BgmD,EAAU,UACV9uC,EAAmBJ,EAAoBjY,IACvCoY,EAAmBH,EAAoBxC,IACvC2xC,EAA0BnvC,EAAoBK,UAAU6uC,GACxDE,EAAqBb,EACrBz2C,EAAYuD,EAAOvD,UACnBopB,EAAW7lB,EAAO6lB,SAClBvjB,EAAUtC,EAAOsC,QACjB0xC,EAASt3C,EAAW,SACpB8xC,EAAuBmF,EAA2BxkD,EAClD8kD,EAA8BzF,EAC9BxJ,EAA8B,WAApBjjC,EAAQO,GAClB4xC,KAAoBruB,GAAYA,EAASU,aAAevmB,EAAOqO,eAC/D8lC,EAAsB,qBACtBC,EAAoB,mBACpBC,EAAU,EACVC,EAAY,EACZC,EAAW,EACXC,EAAU,EACVC,GAAY,EAGZj0C,GAASH,EAASwzC,GAAS,WAC7B,IAAIa,EAAyB5wB,EAAciwB,KAAwB/lD,OAAO+lD,GAC1E,IAAKW,EAAwB,CAI3B,GAAmB,KAAfp3C,EAAmB,OAAO,EAE9B,IAAK0nC,GAA2C,mBAAzB2P,sBAAqC,OAAO,EAGrE,GAAI7yB,IAAYiyB,EAAmBtmD,UAAU,WAAY,OAAO,EAIhE,GAAI6P,GAAc,IAAM,cAAcvP,KAAKgmD,GAAqB,OAAO,EAEvE,IAAInP,EAAUmP,EAAmBxnB,QAAQ,GACrCqoB,EAAc,SAAU13C,GAC1BA,GAAK,eAA6B,gBAEhC5F,EAAcstC,EAAQttC,YAAc,GAExC,OADAA,EAAYiG,GAAWq3C,IACdhQ,EAAQjY,MAAK,yBAAwCioB,MAG5DC,GAAsBr0C,KAAW8yC,GAA4B,SAAUj0C,GACzE00C,EAAmBe,IAAIz1C,GAAU,UAAS,kBAIxC01C,GAAa,SAAUx4C,GACzB,IAAIowB,EACJ,SAAOloB,EAASlI,IAAkC,mBAAnBowB,EAAOpwB,EAAGowB,QAAsBA,GAG7D+X,GAAS,SAAUE,EAAS7yC,EAAOijD,GACrC,IAAIjjD,EAAMkjD,SAAV,CACAljD,EAAMkjD,UAAW,EACjB,IAAIC,EAAQnjD,EAAMojD,UAClB3B,GAAU,WACR,IAAI1mD,EAAQiF,EAAMjF,MACdsoD,EAAKrjD,EAAMA,OAASuiD,EACpB50C,EAAQ,EAEZ,MAAOw1C,EAAM9mD,OAASsR,EAAO,CAC3B,IAKIP,EAAQwtB,EAAM0oB,EALdC,EAAWJ,EAAMx1C,KACjBpO,EAAU8jD,EAAKE,EAASF,GAAKE,EAASC,KACtChpB,EAAU+oB,EAAS/oB,QACnBC,EAAS8oB,EAAS9oB,OAClBvG,EAASqvB,EAASrvB,OAEtB,IACM30B,GACG8jD,IACCrjD,EAAMyjD,YAAcf,IAAWgB,GAAkB7Q,EAAS7yC,GAC9DA,EAAMyjD,UAAYhB,IAEJ,IAAZljD,EAAkB6N,EAASrS,GAEzBm5B,GAAQA,EAAOmf,QACnBjmC,EAAS7N,EAAQxE,GACbm5B,IACFA,EAAOkf,OACPkQ,GAAS,IAGTl2C,IAAWm2C,EAAS1Q,QACtBpY,EAAO/vB,EAAU,yBACRkwB,EAAOooB,GAAW51C,IAC3BwtB,EAAK3gC,KAAKmT,EAAQotB,EAASC,GACtBD,EAAQptB,IACVqtB,EAAO1/B,GACd,MAAOwC,GACH22B,IAAWovB,GAAQpvB,EAAOkf,OAC9B3Y,EAAOl9B,IAGXyC,EAAMojD,UAAY,GAClBpjD,EAAMkjD,UAAW,EACbD,IAAajjD,EAAMyjD,WAAWE,GAAY9Q,EAAS7yC,QAIvDsc,GAAgB,SAAUjiB,EAAMw4C,EAAS+Q,GAC3C,IAAI3yC,EAAO1R,EACP4iD,GACFlxC,EAAQ6iB,EAASU,YAAY,SAC7BvjB,EAAM4hC,QAAUA,EAChB5hC,EAAM2yC,OAASA,EACf3yC,EAAM4yC,UAAUxpD,GAAM,GAAO,GAC7B4T,EAAOqO,cAAcrL,IAChBA,EAAQ,CAAE4hC,QAASA,EAAS+Q,OAAQA,IACvCrkD,EAAU0O,EAAO,KAAO5T,IAAOkF,EAAQ0R,GAClC5W,IAAS+nD,GAAqBT,EAAiB,8BAA+BiC,IAGrFD,GAAc,SAAU9Q,EAAS7yC,GACnCyzC,EAAKx5C,KAAKgU,GAAQ,WAChB,IAEIb,EAFArS,EAAQiF,EAAMjF,MACd+oD,EAAeC,GAAY/jD,GAE/B,GAAI8jD,IACF12C,EAASy0C,GAAQ,WACX5O,EACF1iC,EAAQyzC,KAAK,qBAAsBjpD,EAAO83C,GACrCv2B,GAAc8lC,EAAqBvP,EAAS93C,MAGrDiF,EAAMyjD,UAAYxQ,GAAW8Q,GAAY/jD,GAAS0iD,GAAYD,EAC1Dr1C,EAAO7P,OAAO,MAAM6P,EAAOrS,UAKjCgpD,GAAc,SAAU/jD,GAC1B,OAAOA,EAAMyjD,YAAchB,IAAYziD,EAAM0J,QAG3Cg6C,GAAoB,SAAU7Q,EAAS7yC,GACzCyzC,EAAKx5C,KAAKgU,GAAQ,WACZglC,EACF1iC,EAAQyzC,KAAK,mBAAoBnR,GAC5Bv2B,GAAc+lC,EAAmBxP,EAAS7yC,EAAMjF,WAIvDO,GAAO,SAAUa,EAAI02C,EAAS7yC,EAAOikD,GACvC,OAAO,SAAUlpD,GACfoB,EAAG02C,EAAS7yC,EAAOjF,EAAOkpD,KAI1BC,GAAiB,SAAUrR,EAAS7yC,EAAOjF,EAAOkpD,GAChDjkD,EAAMiL,OACVjL,EAAMiL,MAAO,EACTg5C,IAAQjkD,EAAQikD,GACpBjkD,EAAMjF,MAAQA,EACdiF,EAAMA,MAAQwiD,EACd7P,GAAOE,EAAS7yC,GAAO,KAGrBmkD,GAAkB,SAAUtR,EAAS7yC,EAAOjF,EAAOkpD,GACrD,IAAIjkD,EAAMiL,KAAV,CACAjL,EAAMiL,MAAO,EACTg5C,IAAQjkD,EAAQikD,GACpB,IACE,GAAIpR,IAAY93C,EAAO,MAAM2P,EAAU,oCACvC,IAAIkwB,EAAOooB,GAAWjoD,GAClB6/B,EACF6mB,GAAU,WACR,IAAI2C,EAAU,CAAEn5C,MAAM,GACtB,IACE2vB,EAAK3gC,KAAKc,EACRO,GAAK6oD,GAAiBtR,EAASuR,EAASpkD,GACxC1E,GAAK4oD,GAAgBrR,EAASuR,EAASpkD,IAEzC,MAAOzC,GACP2mD,GAAerR,EAASuR,EAAS7mD,EAAOyC,QAI5CA,EAAMjF,MAAQA,EACdiF,EAAMA,MAAQuiD,EACd5P,GAAOE,EAAS7yC,GAAO,IAEzB,MAAOzC,GACP2mD,GAAerR,EAAS,CAAE5nC,MAAM,GAAS1N,EAAOyC,MAKhDyO,KAEFuzC,EAAqB,SAAiBqC,GACpC/C,EAAW7nD,KAAMuoD,EAAoBF,GACrC5lD,EAAUmoD,GACVtD,EAAS9mD,KAAKR,MACd,IAAIuG,EAAQgT,EAAiBvZ,MAC7B,IACE4qD,EAAS/oD,GAAK6oD,GAAiB1qD,KAAMuG,GAAQ1E,GAAK4oD,GAAgBzqD,KAAMuG,IACxE,MAAOzC,GACP2mD,GAAezqD,KAAMuG,EAAOzC,KAIhCwjD,EAAW,SAAiBsD,GAC1BtxC,EAAiBtZ,KAAM,CACrBuN,KAAM86C,EACN72C,MAAM,EACNi4C,UAAU,EACVx5C,QAAQ,EACR05C,UAAW,GACXK,WAAW,EACXzjD,MAAOsiD,EACPvnD,WAAOuB,KAGXykD,EAASrlD,UAAY0lD,EAAYY,EAAmBtmD,UAAW,CAG7Dk/B,KAAM,SAAc0pB,EAAaC,GAC/B,IAAIvkD,EAAQ+hD,EAAwBtoD,MAChC8pD,EAAW9G,EAAqB+E,EAAmB/nD,KAAMuoD,IAO7D,OANAuB,EAASF,GAA2B,mBAAfiB,GAA4BA,EACjDf,EAASC,KAA4B,mBAAde,GAA4BA,EACnDhB,EAASrvB,OAAS+e,EAAU1iC,EAAQ2jB,YAAS53B,EAC7C0D,EAAM0J,QAAS,EACf1J,EAAMojD,UAAU5gD,KAAK+gD,GACjBvjD,EAAMA,OAASsiD,GAAS3P,GAAOl5C,KAAMuG,GAAO,GACzCujD,EAAS1Q,SAIlB,MAAS,SAAU0R,GACjB,OAAO9qD,KAAKmhC,UAAKt+B,EAAWioD,MAGhCvD,EAAuB,WACrB,IAAInO,EAAU,IAAIkO,EACd/gD,EAAQgT,EAAiB6/B,GAC7Bp5C,KAAKo5C,QAAUA,EACfp5C,KAAK+gC,QAAUl/B,GAAK6oD,GAAiBtR,EAAS7yC,GAC9CvG,KAAKghC,OAASn/B,GAAK4oD,GAAgBrR,EAAS7yC,IAE9C4hD,EAA2BxkD,EAAIq/C,EAAuB,SAAUxnC,GAC9D,OAAOA,IAAM+sC,GAAsB/sC,IAAMgsC,EACrC,IAAID,EAAqB/rC,GACzBitC,EAA4BjtC,IAG7B8a,GAAmC,mBAAjBoxB,IACrBD,EAAaC,EAAczlD,UAAUk/B,KAGrCzsB,EAASgzC,EAAczlD,UAAW,QAAQ,SAAc4oD,EAAaC,GACnE,IAAInoD,EAAO3C,KACX,OAAO,IAAIuoD,GAAmB,SAAUxnB,EAASC,GAC/CymB,EAAWjnD,KAAKmC,EAAMo+B,EAASC,MAC9BG,KAAK0pB,EAAaC,KAEpB,CAAEryB,QAAQ,IAGQ,mBAAV+vB,GAAsBptB,EAAE,CAAE5mB,QAAQ,EAAMvT,YAAY,EAAMyU,QAAQ,GAAQ,CAEnFq1C,MAAO,SAAezP,GACpB,OAAO2M,EAAeM,EAAoBC,EAAOxlD,MAAMwR,EAAQvR,iBAMvEm4B,EAAE,CAAE5mB,QAAQ,EAAM2gB,MAAM,EAAMzf,OAAQV,IAAU,CAC9CsuB,QAASilB,IAGXhtB,EAAegtB,EAAoBF,GAAS,GAAO,GACnDT,EAAWS,GAEXb,EAAiBt2C,EAAWm3C,GAG5BjtB,EAAE,CAAEnmB,OAAQozC,EAAS7yC,MAAM,EAAME,OAAQV,IAAU,CAGjDgsB,OAAQ,SAAgB7/B,GACtB,IAAI6pD,EAAahI,EAAqBhjD,MAEtC,OADAgrD,EAAWhqB,OAAOxgC,UAAKqC,EAAW1B,GAC3B6pD,EAAW5R,WAItBhe,EAAE,CAAEnmB,OAAQozC,EAAS7yC,MAAM,EAAME,OAAQ4gB,GAAWthB,IAAU,CAG5D+rB,QAAS,SAAiBt0B,GACxB,OAAOw7C,EAAe3xB,GAAWt2B,OAASwnD,EAAiBe,EAAqBvoD,KAAMyM,MAI1F2uB,EAAE,CAAEnmB,OAAQozC,EAAS7yC,MAAM,EAAME,OAAQ2zC,IAAuB,CAG9DC,IAAK,SAAaz1C,GAChB,IAAI2H,EAAIxb,KACJgrD,EAAahI,EAAqBxnC,GAClCulB,EAAUiqB,EAAWjqB,QACrBC,EAASgqB,EAAWhqB,OACpBrtB,EAASy0C,GAAQ,WACnB,IAAI6C,EAAkBxoD,EAAU+Y,EAAEulB,SAC9BjE,EAAS,GACT7lB,EAAU,EACVi0C,EAAY,EAChBt3C,EAAQC,GAAU,SAAUulC,GAC1B,IAAIllC,EAAQ+C,IACRk0C,GAAgB,EACpBruB,EAAO/zB,UAAKlG,GACZqoD,IACAD,EAAgBzqD,KAAKgb,EAAG49B,GAASjY,MAAK,SAAU7/B,GAC1C6pD,IACJA,GAAgB,EAChBruB,EAAO5oB,GAAS5S,IACd4pD,GAAanqB,EAAQjE,MACtBkE,QAEHkqB,GAAanqB,EAAQjE,MAGzB,OADInpB,EAAO7P,OAAOk9B,EAAOrtB,EAAOrS,OACzB0pD,EAAW5R,SAIpBgS,KAAM,SAAcv3C,GAClB,IAAI2H,EAAIxb,KACJgrD,EAAahI,EAAqBxnC,GAClCwlB,EAASgqB,EAAWhqB,OACpBrtB,EAASy0C,GAAQ,WACnB,IAAI6C,EAAkBxoD,EAAU+Y,EAAEulB,SAClCntB,EAAQC,GAAU,SAAUulC,GAC1B6R,EAAgBzqD,KAAKgb,EAAG49B,GAASjY,KAAK6pB,EAAWjqB,QAASC,SAI9D,OADIrtB,EAAO7P,OAAOk9B,EAAOrtB,EAAOrS,OACzB0pD,EAAW5R,Y,qBCxXtB,IAAI71C,EAAM,EAAQ,QACd8nD,EAAU,EAAQ,QAClBC,EAAiC,EAAQ,QACzCr1C,EAAuB,EAAQ,QAEnCtW,EAAOD,QAAU,SAAUuV,EAAQF,GAIjC,IAHA,IAAIiE,EAAOqyC,EAAQt2C,GACf/T,EAAiBiV,EAAqBtS,EACtCD,EAA2B4nD,EAA+B3nD,EACrDtD,EAAI,EAAGA,EAAI2Y,EAAKpW,OAAQvC,IAAK,CACpC,IAAIuB,EAAMoX,EAAK3Y,GACVkD,EAAI0R,EAAQrT,IAAMZ,EAAeiU,EAAQrT,EAAK8B,EAAyBqR,EAAQnT,O,qBCXxF,IAAI2U,EAAU,EAAQ,QAItB5W,EAAOD,QAAUkM,MAAM8rB,SAAW,SAAiBsI,GACjD,MAAuB,SAAhBzpB,EAAQypB,K,qBCLjB,IAAI39B,EAAkB,EAAQ,QAC1BuW,EAAY,EAAQ,QAEpBzH,EAAW9O,EAAgB,YAC3ByX,EAAiBlO,MAAM3J,UAG3BtC,EAAOD,QAAU,SAAUqR,GACzB,YAAclO,IAAPkO,IAAqB6H,EAAUhN,QAAUmF,GAAM+I,EAAe3I,KAAcJ,K,kCCPrF,IAAIvF,EAAaxL,MAAQA,KAAKwL,WAAc,WACxC,IAAIC,EAAgB,SAAU9K,EAAGoC,GAI7B,OAHA0I,EAAgB1K,OAAO2K,gBAClB,CAAEC,UAAW,cAAgBC,OAAS,SAAUjL,EAAGoC,GAAKpC,EAAEgL,UAAY5I,IACvE,SAAUpC,EAAGoC,GAAK,IAAK,IAAIZ,KAAKY,EAAOA,EAAEb,eAAeC,KAAIxB,EAAEwB,GAAKY,EAAEZ,KAClEsJ,EAAc9K,EAAGoC,IAE5B,OAAO,SAAUpC,EAAGoC,GAEhB,SAAS8I,IAAO7L,KAAK8L,YAAcnL,EADnC8K,EAAc9K,EAAGoC,GAEjBpC,EAAEsB,UAAkB,OAANc,EAAahC,OAAOY,OAAOoB,IAAM8I,EAAG5J,UAAYc,EAAEd,UAAW,IAAI4J,IAV3C,GAa5C9K,OAAOC,eAAetB,EAAS,aAAc,CAAE4B,OAAO,IACtD,IAAIyC,EAAS,EAAQ,QACjBiI,EAAY,EAAQ,QACpB/H,EAAS,EAAQ,QACjByX,EAAgB,EAAQ,QACxBtP,EAAe,EAAQ,QACvBlI,EAAW,EAAQ,QACnBuL,EAAa,SAAU5C,GAEvB,SAAS4C,IACL,IAAIlG,EAAmB,OAAXsD,GAAmBA,EAAO7J,MAAMhD,KAAMiD,YAAcjD,KAEhE,OADAuJ,EAAM0U,SAAW,IAAIla,EAAO8M,WACrBtH,EAqTX,OAzTAiC,EAAUiE,EAAW5C,GAMrB4C,EAAUxN,UAAUuc,YAAc,SAAU+sC,GACxC,IAAKA,EACD,OAAOvrD,KAAKie,SAEhB,IAAIutC,EAAU,IAAIznD,EAAO8M,WAMzB,OALA7Q,KAAKie,SAASe,MAAK,SAAU1R,GACrBi+C,EAAWj+C,IACXk+C,EAAQziD,KAAKuE,MAGdk+C,GAEX/7C,EAAUxN,UAAUsc,YAAc,WAC9B,OAAOve,KAAKwe,cAAc5b,OAAS,GAEvC6M,EAAUxN,UAAUwpD,eAAiB,WAEjC,IADA,IAAIn+C,EACKjN,EAAI,EAAGA,EAAIL,KAAKie,SAASrb,OAAQvC,IACtCiN,EAAQtN,KAAKie,SAAS5d,GACtBiN,EAAM2C,OAAS,KACf3C,EAAM4G,MAAQ,EACd5G,EAAM+V,SAGV,OADArjB,KAAKie,SAAW,IAAIla,EAAO8M,WACpB7Q,MAEXyP,EAAUxN,UAAUypD,gBAAkB,WAElC,IADA,IAAIp+C,EACKjN,EAAI,EAAGA,EAAIL,KAAKie,SAASrb,OAAQvC,IACtCiN,EAAQtN,KAAKie,SAAS5d,GACtBiN,EAAM2C,OAAS,KACf3C,EAAM4G,MAAQ,EACd5G,EAAMzD,UAGV,OADA7J,KAAKie,SAAW,IAAIla,EAAO8M,WACpB7Q,MAEXyP,EAAUxN,UAAU6lB,IAAM,WAEtB,IADA,IAAI7J,EAAW,GACN0tC,EAAK,EAAGA,EAAK1oD,UAAUL,OAAQ+oD,IACpC1tC,EAAS0tC,GAAM1oD,UAAU0oD,GAE7B,GAAI1oD,UAAUL,OAAS,EAAG,CACtB,IAAK,IAAIvC,EAAI,EAAGA,EAAI4C,UAAUL,OAAQvC,IAClCL,KAAK8nB,IAAI7kB,UAAU5C,IAEvB,OAAOL,KAEX,IAAIsN,EAAQ2Q,EAAS,GACrB,GAAI3Q,EAAMiS,YAEN,OADAjS,EAAMsa,OAAO5nB,MACNA,KAEX,IAAI4rD,EAAY5rD,KAAKie,SASrB,OARAje,KAAKqN,aAAaC,GAClBA,EAAMqW,eACNrW,EAAM4G,MAAQ03C,EAAUhpD,OACxB0K,EAAM2C,OAASjQ,KACf4rD,EAAU7iD,KAAKuE,GACftN,KAAKqP,MAAM,MAAO,CACd/B,MAAOA,IAEJtN,MAEXyP,EAAUxN,UAAU4H,QAAU,WAK1B,OAJI7J,KAAKue,eACLve,KAAK0rD,kBAET7+C,EAAO5K,UAAU4H,QAAQrJ,KAAKR,MACvBA,MAEXyP,EAAUxN,UAAUm5C,KAAO,SAAUxtC,GACjC,OAAO5N,KAAK6rD,aAAaj+C,GAAU,IAEvC6B,EAAUxN,UAAUf,IAAM,SAAU0M,GAEhC,OADA7J,EAAOuD,KAAKmT,KAAK,gFACVza,KAAKo7C,KAAKxtC,IAErB6B,EAAUxN,UAAU6pD,QAAU,SAAUl+C,GACpC,IAAI+F,EAAS3T,KAAK6rD,aAAaj+C,GAAU,GACzC,OAAO+F,EAAO/Q,OAAS,EAAI+Q,EAAO,QAAK9Q,GAE3C4M,EAAUxN,UAAU4pD,aAAe,SAAUj+C,EAAUk+C,GACnD,IAAIra,EAAS,GAWb,OAVAzxC,KAAK+rD,cAAa,SAAU3nD,GACxB,IAAI4nD,EAAQ5nD,EAAKskB,SAAS9a,GAI1B,OAHIo+C,GACAva,EAAO1oC,KAAK3E,MAEZ4nD,IAASF,MAKV/nD,EAAO8M,WAAWg0B,aAAa4M,IAE1ChiC,EAAUxN,UAAU8pD,aAAe,SAAUrpD,GAEzC,IADA,IAAI2pB,GAAa,EACRhsB,EAAI,EAAGA,EAAIL,KAAKie,SAASrb,OAAQvC,IAAK,CAC3C,IAAIiN,EAAQtN,KAAKie,SAAS5d,GAE1B,GADAgsB,EAAa3pB,EAAG4K,GACZ+e,EACA,OAAO,EAEX,GAAK/e,EAAMiR,gBAGX8N,EAAa/e,EAAMy+C,aAAarpD,GAC5B2pB,GACA,OAAO,EAGf,OAAO,GAEX5c,EAAUxN,UAAU8lB,SAAW,WAC3B,IAAIla,EAAM5J,EAAO8F,KAAK9H,UAAU8lB,SAASvnB,KAAKR,MAC9C6N,EAAIoQ,SAAW,GAGf,IAFA,IAAIA,EAAWje,KAAKwe,cAChBpW,EAAM6V,EAASrb,OACVd,EAAI,EAAGA,EAAIsG,EAAKtG,IAAK,CAC1B,IAAIwL,EAAQ2Q,EAASnc,GACrB+L,EAAIoQ,SAASlV,KAAKuE,EAAMya,YAE5B,OAAOla,GAEX4B,EAAUxN,UAAU2mB,aAAe,SAAUxkB,GACzC,IAAI6L,EAAS7L,EAAKmb,YAClB,MAAOtP,EAAQ,CACX,GAAIA,EAAOlJ,MAAQ/G,KAAK+G,IACpB,OAAO,EAEXkJ,EAASA,EAAOsP,YAEpB,OAAO,GAEX9P,EAAUxN,UAAUkoB,MAAQ,SAAUtc,GAClC,IAAIzJ,EAAOH,EAAO8F,KAAK9H,UAAUkoB,MAAM3pB,KAAKR,KAAM6N,GAIlD,OAHA7N,KAAKwe,cAAcQ,MAAK,SAAU9C,GAC9B9X,EAAK0jB,IAAI5L,EAAGiO,YAET/lB,GAEXqL,EAAUxN,UAAUgqD,oBAAsB,SAAUt+C,GAChD,IAAIm3B,EAAM,GAMV,OALA9kC,KAAKo7C,KAAK,SAASp8B,MAAK,SAAUjR,GAC1BA,EAAME,aAAeF,EAAMm+C,WAAWv+C,IACtCm3B,EAAI/7B,KAAKgF,MAGV+2B,GAEXr1B,EAAUxN,UAAU2hB,oBAAsB,WACtC5jB,KAAKie,SAASe,MAAK,SAAU1R,EAAOxL,GAChCwL,EAAM4G,MAAQpS,MAGtB2N,EAAUxN,UAAU8M,UAAY,SAAUC,EAAKC,EAAKk9C,GAChD,IAAIj9C,EAAQlP,KAAKmH,WAAYgI,EAASH,GAAQE,GAASA,EAAME,YAAcX,EAAUU,GAAUA,EAAOI,aAAcuS,EAAe9hB,KAAK6e,kBAAmBc,EAAoBmC,GAAgBA,EAAatB,MAY5M,OAXIxgB,KAAKiO,aAAek+C,MACfA,GAAWxsC,GACZlR,EAAQ2R,OACRlR,EAAMi1C,gBAAgBnkD,KAAMyO,EAASQ,GACrCjP,KAAKohB,uBAAuB3S,GAC5BA,EAAQ6R,WAGRtgB,KAAKosD,cAAcj9C,EAAQ,YAAaF,GAAK,EAAOk9C,EAASA,IAG9DnsD,MAEXyP,EAAUxN,UAAUyN,QAAU,SAAUV,EAAKC,EAAKk9C,GAC9C,IAAIj9C,EAAQlP,KAAKmH,WAAYgI,EAASH,GAAQE,GAASA,EAAMpC,UAAY2B,EAAUU,GAAUA,EAAOI,aAAcuS,EAAe9hB,KAAK6e,kBAAmBiB,EAAkBgC,GAAgBA,EAAapB,IAYxM,OAXI1gB,KAAKykB,cAActV,IAAWg9C,MACzBA,GAAWrsC,GACZrR,EAAQ2R,OACRlR,EAAMi1C,gBAAgBnkD,KAAMyO,EAASQ,GACrCjP,KAAK2hB,qBAAqBlT,GAC1BA,EAAQ6R,WAGRtgB,KAAKosD,cAAcj9C,EAAQ,UAAWF,GAAK,EAAOk9C,EAASA,IAG5DnsD,MAEXyP,EAAUxN,UAAUmqD,cAAgB,SAAUj9C,EAAQk9C,EAAYp9C,EAAKk9C,EAASG,EAAYC,GACxF,IAAiNC,EAAOC,EAApNv9C,EAAQlP,KAAKmH,WAAYsH,EAAUU,GAAUA,EAAOI,aAAcm9C,EAAY1sD,KAAK0sD,YAAaC,EAAa3sD,KAAK2sD,aAAcC,EAAW5sD,KAAK4sD,WAAYC,EAAWH,GAAaC,GAAeC,EACvM,GAAIC,GAAW39C,EAAO,CAClBT,EAAQ2R,OACR,IAAIwJ,EAAY5pB,KAAKkhB,qBAAqBjS,GACtCxO,EAAImpB,EAAUrE,YAClB9W,EAAQmb,UAAUnpB,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAIA,EAAE,IAClDgO,EAAQ6D,YACJs6C,EACAA,EAASpsD,KAAKR,KAAMyO,EAASzO,OAG7BwsD,EAAQxsD,KAAKwsD,QACbC,EAAQzsD,KAAKysD,QACbh+C,EAAQ0Q,KAAKqtC,EAAOC,EAAOC,EAAWC,IAE1Cl+C,EAAQ0vC,OACR19C,EAAImpB,EACCF,OACA1D,SACAT,YACL9W,EAAQmb,UAAUnpB,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAIA,EAAE,IAEtD,IAAIqsD,EAAqD,gBAApC9sD,KAAKq/C,6BACrBkN,GACc,cAAfF,EACAS,GAAkB59C,IAClBT,EAAQ2R,OACR3R,EAAQ6S,+BAA+BthB,OAE3CA,KAAKie,SAASe,MAAK,SAAU1R,GACzBA,EAAM++C,GAAYl9C,EAAQF,EAAKk9C,EAASG,MAExCQ,GAAkB59C,GAClBT,EAAQ6R,UAERusC,GAAW39C,GACXT,EAAQ6R,WAGhB7Q,EAAUxN,UAAUwiB,cAAgB,SAAUtV,GAC1C,GAAIA,GAAUA,EAAO8Q,QACjB,OAAO,EAEX,IAAI/Q,EAAQlP,KAAKmH,WACb4lD,GAAiB,EACrBrxC,EAAc8H,GAAGC,cAAcxI,SAAQ,SAAUgS,GACrB,aAApBA,EAAKF,YAA6BE,EAAK7oB,KAAK+C,aAAe+H,IAC3D69C,GAAiB,MAGzB,IAAIC,GAAY9oD,EAASkD,MAAMk+C,kBAAoByH,EACnD,OAAO79C,GAASA,EAAMlB,mBAAqBhO,KAAKiO,cAAgB++C,GAEpEv9C,EAAUxN,UAAUmd,cAAgB,SAAUvY,GAC1CA,EAASA,GAAU,GACnB,IAEIga,EAAMC,EAAMC,EAAMC,EAFlB3B,EAAgBxY,EAAOwY,cACvBC,EAAazY,EAAOyY,WAEpB2tC,EAAW,CACXxgD,EAAGygD,IACHxgD,EAAGwgD,IACH//C,MAAO,EACPC,OAAQ,GAERzK,EAAO3C,KACXA,KAAKie,SAASe,MAAK,SAAU1R,GACzB,GAAKA,EAAMkX,UAAX,CAGA,IAAIrF,EAAO7R,EAAM8R,cAAc,CAC3BE,WAAY3c,EACZwqD,WAAYtmD,EAAOsmD,WACnBC,WAAYvmD,EAAOumD,aAEJ,IAAfjuC,EAAKhS,OAA+B,IAAhBgS,EAAK/R,cAGhBvK,IAATge,GACAA,EAAO1B,EAAK1S,EACZqU,EAAO3B,EAAKzS,EACZqU,EAAO5B,EAAK1S,EAAI0S,EAAKhS,MACrB6T,EAAO7B,EAAKzS,EAAIyS,EAAK/R,SAGrByT,EAAOnY,KAAK4L,IAAIuM,EAAM1B,EAAK1S,GAC3BqU,EAAOpY,KAAK4L,IAAIwM,EAAM3B,EAAKzS,GAC3BqU,EAAOrY,KAAKC,IAAIoY,EAAM5B,EAAK1S,EAAI0S,EAAKhS,OACpC6T,EAAOtY,KAAKC,IAAIqY,EAAM7B,EAAKzS,EAAIyS,EAAK/R,cAK5C,IAFA,IAAI0B,EAAS9O,KAAKo7C,KAAK,SACnBiS,GAAa,EACRhtD,EAAI,EAAGA,EAAIyO,EAAOlM,OAAQvC,IAAK,CACpC,IAAI0N,EAAQe,EAAOzO,GACnB,GAAI0N,EAAMwW,WAAWvkB,MAAO,CACxBqtD,GAAa,EACb,OAmBR,OAfIJ,EADAI,QAAuBxqD,IAATge,EACH,CACPpU,EAAGoU,EACHnU,EAAGoU,EACH3T,MAAO4T,EAAOF,EACdzT,OAAQ4T,EAAOF,GAIR,CACPrU,EAAG,EACHC,EAAG,EACHS,MAAO,EACPC,OAAQ,GAGXiS,EAGE4tC,EAFIjtD,KAAK4gB,iBAAiBqsC,EAAU3tC,IAIxC7P,EA1TK,CA2TdxL,EAAO8F,MACTrK,EAAQ+P,UAAYA,EACpBzD,EAAU0E,QAAQ8d,0BAA0B/e,EAAW,OAAQ,CAC3D,IACA,IACA,QACA,WAEJzD,EAAU0E,QAAQC,gBAAgBlB,EAAW,aAAS5M,EAAWuJ,EAAa+G,sBAC9EnH,EAAU0E,QAAQC,gBAAgBlB,EAAW,aAAS5M,EAAWuJ,EAAa+G,sBAC9EnH,EAAU0E,QAAQC,gBAAgBlB,EAAW,iBAAa5M,EAAWuJ,EAAa+G,sBAClFnH,EAAU0E,QAAQC,gBAAgBlB,EAAW,kBAAc5M,EAAWuJ,EAAa+G,sBACnFnH,EAAU0E,QAAQC,gBAAgBlB,EAAW,YAC7C1L,EAAO8M,WAAWC,WAAWrB,I,kCC5V7B,IAAIjE,EAAaxL,MAAQA,KAAKwL,WAAc,WACxC,IAAIC,EAAgB,SAAU9K,EAAGoC,GAI7B,OAHA0I,EAAgB1K,OAAO2K,gBAClB,CAAEC,UAAW,cAAgBC,OAAS,SAAUjL,EAAGoC,GAAKpC,EAAEgL,UAAY5I,IACvE,SAAUpC,EAAGoC,GAAK,IAAK,IAAIZ,KAAKY,EAAOA,EAAEb,eAAeC,KAAIxB,EAAEwB,GAAKY,EAAEZ,KAClEsJ,EAAc9K,EAAGoC,IAE5B,OAAO,SAAUpC,EAAGoC,GAEhB,SAAS8I,IAAO7L,KAAK8L,YAAcnL,EADnC8K,EAAc9K,EAAGoC,GAEjBpC,EAAEsB,UAAkB,OAANc,EAAahC,OAAOY,OAAOoB,IAAM8I,EAAG5J,UAAYc,EAAEd,UAAW,IAAI4J,IAV3C,GAa5C9K,OAAOC,eAAetB,EAAS,aAAc,CAAE4B,OAAO,IACtD,IAAIyC,EAAS,EAAQ,QACjBiI,EAAY,EAAQ,QACpBD,EAAc,EAAQ,QACtB7H,EAAW,EAAQ,QACnBgI,EAAW,EAAQ,QACnBwP,EAAgB,EAAQ,QACxB6T,EAAW,EAAQ,QACnB+9B,EAAgB,EAAQ,QACxBpwC,EAAQ,QAASqwC,EAAS,SAAUC,EAAK,KAAMC,EAAW,WAAY5wC,EAAa,aAAc6wC,EAAY,YAAa9wC,EAAa,aAAc+wC,EAAY,YAAaC,EAAY,YAAaC,EAAU,UAAWC,EAAc,cAAeC,EAAc,cAAeC,EAAY,YAAaC,EAAgB,gBAAiBC,EAAqB,qBAAsBC,EAAc,cAAeC,EAAQ,QAASC,EAAY,WAAYC,EAAa,aAAcC,EAAW,WAAYC,EAAM,MAAOC,EAAU,SAAUC,EAAY,YAAaC,EAAQ,QAASC,EAAmB,kBAAmBC,EAAoB,mBAAoBC,EAAoB,mBAAoBC,EAAoB,mBAAoBC,EAAkB,iBAAkBC,EAAsB,qBAAsBC,EAAgB,eAAgBC,EAAoB,kBAAmBC,EAAqB,oBAAqBC,EAAmB,kBAAmBC,EAAkB,gBAAiBC,EAAc,aAAcC,EAAoB,mBAAoJC,EAAgB,eAAgBC,EAAW,WAAYC,EAAgB,kBAAgCC,EAAa,IAAKC,EAAY,YAAaC,GAAoB,EAAG9oB,GAAe,GAAI+oB,GAAS,CAC/2CnzC,EACAgxC,EACAD,EACAE,EACAJ,EACAa,EACAI,EACAH,EACAb,EACAiB,EACAR,EACAJ,EACAD,EACAE,EACAC,EACAC,GACD8B,GAAeD,GAAOntD,OACzB,SAASqtD,GAASC,EAAKC,GACnBD,EAAI7/C,QAAQ+H,iBAAiB+3C,GAAW,SAAUrtC,GAC9CotC,EAAIN,EAAaO,GAAWrtC,MAC7B,GAEP,IAAIstC,GAAsB,uLAE1B,SAASC,GAAYzoD,GAKjB,YAJc,IAAVA,IAAoBA,EAAQ,KAC5BA,EAAMglD,UAAYhlD,EAAM8kD,WAAa9kD,EAAM+kD,aAC3C5oD,EAAOuD,KAAKmT,KAAK,0EAEd7S,EANXlI,EAAQ4wD,OAAS,GAQjB,IAAIC,GAAS,SAAU1jD,GAEnB,SAAS0jD,EAAM1pD,GACX,IAAI0C,EAAQsD,EAAOrM,KAAKR,KAAMqwD,GAAYxpD,KAAY7G,KAYtD,OAXAuJ,EAAMinD,kBAAoB,GAC1BjnD,EAAMsjB,yBAA2B,GACjCtjB,EAAMknD,YACNlnD,EAAMmnD,qBACNhxD,EAAQ4wD,OAAOvnD,KAAKQ,GACpBA,EAAM6U,GAAG,uCAAwC7U,EAAMonD,YACvDpnD,EAAM6U,GAAG,sBAAuB7U,EAAMu6C,kBACtCv6C,EAAM6U,GAAG,qEAAqE,WAC1EiyC,GAAY9mD,EAAM3B,UAEtB2B,EAAMu6C,mBACCv6C,EAqrBX,OAnsBAiC,EAAU+kD,EAAO1jD,GAgBjB0jD,EAAMtuD,UAAUoL,aAAe,SAAUC,GACrC,IAAIsjD,EAA8B,UAApBtjD,EAAME,UAChBqjD,EAAkC,cAApBvjD,EAAME,UACpBw+C,EAAQ4E,GAAWC,EAClB7E,GACDjoD,EAAOuD,KAAKmG,MAAM,0CAG1B8iD,EAAMtuD,UAAU6hD,iBAAmB,WAC/B,GAAK9jD,KAAKqQ,QAAV,CAGA,IAAI4pB,EAAQj6B,KAAKwkB,UAAY,GAAK,OAClCxkB,KAAKqQ,QAAQ4pB,MAAMC,QAAUD,IAEjCs2B,EAAMtuD,UAAU6uD,aAAe,SAAU3iC,GACrC,UAAWA,IAAco/B,EAAQ,CAC7B,GAA4B,MAAxBp/B,EAAUjV,OAAO,GAAY,CAC7B,IAAIjG,EAAYkb,EAAUzI,MAAM,GAChCyI,EAAYkM,SAAS02B,uBAAuB99C,GAAW,OAEtD,CACD,IAAIoE,EAEAA,EADwB,MAAxB8W,EAAUjV,OAAO,GACZiV,EAGAA,EAAUzI,MAAM,GAEzByI,EAAYkM,SAAS22B,eAAe35C,GAExC,IAAK8W,EACD,KAAM,8CAAgD9W,EAU9D,OAPArX,KAAKmkB,SAAS0rC,EAAW1hC,GACrBnuB,KAAKqQ,UACDrQ,KAAKqQ,QAAQ4gD,eACbjxD,KAAKqQ,QAAQ4gD,cAAc3gD,YAAYtQ,KAAKqQ,SAEhD8d,EAAU5d,YAAYvQ,KAAKqQ,UAExBrQ,MAEXuwD,EAAMtuD,UAAUwiB,cAAgB,WAC5B,OAAO,GAEX8rC,EAAMtuD,UAAUuN,MAAQ,WACpB,IAAiD1N,EAA7CoF,EAASlH,KAAKie,SAAU7V,EAAMlB,EAAOtE,OACzC,IAAKd,EAAI,EAAGA,EAAIsG,EAAKtG,IACjBoF,EAAOpF,GAAG0N,QAEd,OAAOxP,MAEXuwD,EAAMtuD,UAAUkoB,MAAQ,SAAUtc,GAK9B,OAJKA,IACDA,EAAM,IAEVA,EAAIsgB,UAAYkM,SAAS9uB,cAAc,OAChCQ,EAAY0D,UAAUxN,UAAUkoB,MAAM3pB,KAAKR,KAAM6N,IAE5D0iD,EAAMtuD,UAAU4H,QAAU,WACtBgD,EAAO5K,UAAU4H,QAAQrJ,KAAKR,MAC9B,IAAIqQ,EAAUrQ,KAAKqQ,QACfA,GAAWtM,EAAOuD,KAAKiqC,cAAclhC,IACrCrQ,KAAKmuB,YAAY7d,YAAYD,GAEjC,IAAI6D,EAAQxU,EAAQ4wD,OAAOxnD,QAAQ9I,MAInC,OAHIkU,GAAS,GACTxU,EAAQ4wD,OAAOn0C,OAAOjI,EAAO,GAE1BlU,MAEXuwD,EAAMtuD,UAAUivD,mBAAqB,WACjC,IAAIvjD,EAAM3N,KAAKwwD,kBAAkB,IAAMxwD,KAAK6sB,yBAAyB,GACrE,OAAKlf,EAIE,CACHlB,EAAGkB,EAAIlB,EACPC,EAAGiB,EAAIjB,IALP3I,EAAOuD,KAAKmT,KAAK21C,IACV,OAOfG,EAAMtuD,UAAU2qB,gBAAkB,SAAUvV,GACxC,OAAOrX,KAAKwwD,kBAAkBpV,MAAK,SAAUj5C,GAAK,OAAOA,EAAEkV,KAAOA,MAEtEk5C,EAAMtuD,UAAUkvD,qBAAuB,WACnC,OAAOnxD,KAAKwwD,mBAEhBD,EAAMtuD,UAAUijB,SAAW,WACvB,OAAOllB,MAEXuwD,EAAMtuD,UAAUmvD,WAAa,WACzB,OAAOpxD,KAAKqQ,SAEhBkgD,EAAMtuD,UAAUooB,eAAiB,SAAUxjB,GACvCA,EAASA,GAAU,GACnB,IAAI4F,EAAI5F,EAAO4F,GAAK,EAAGC,EAAI7F,EAAO6F,GAAK,EAAGyC,EAAS,IAAIjD,EAAS0T,YAAY,CACxEzS,MAAOtG,EAAOsG,OAASnN,KAAKmN,QAC5BC,OAAQvG,EAAOuG,QAAUpN,KAAKoN,SAC9BJ,WAAYnG,EAAOmG,YAAc,IACjCmT,EAAWhR,EAAOI,aAAa4Q,SAAUjZ,EAASlH,KAAKie,SAW3D,OAVIxR,GAAKC,IACLyT,EAASE,WAAW,EAAI5T,GAAI,EAAIC,GAEpCxF,EAAO8X,MAAK,SAAU9P,GAClB,GAAKA,EAAMjB,YAAX,CAGA,IAAIojD,EAAcniD,EAAMmb,eAAexjB,GACvCsZ,EAASuB,UAAU2vC,EAAYlhD,QAAS1D,EAAGC,EAAG2kD,EAAY1+C,WAAa0+C,EAAYnU,gBAAiBmU,EAAYz+C,YAAcy+C,EAAYnU,qBAEvI/tC,GAEXohD,EAAMtuD,UAAUyL,gBAAkB,SAAUC,EAAKC,GAC7C,IAAKD,EACD,OAAO,KAEX,IAAgE7L,EAAGiM,EAA/D7G,EAASlH,KAAKie,SAAU7V,EAAMlB,EAAOtE,OAAQoF,EAAMI,EAAM,EAC7D,IAAKtG,EAAIkG,EAAKlG,GAAK,EAAGA,IAElB,GADAiM,EAAQ7G,EAAOpF,GAAG4L,gBAAgBC,EAAKC,GACnCG,EACA,OAAOA,EAGf,OAAO,MAEXwiD,EAAMtuD,UAAU0uD,WAAa,WACzB,IAAIxjD,EAAQnN,KAAKmN,QACbC,EAASpN,KAAKoN,SACdpN,KAAKqQ,UACLrQ,KAAKqQ,QAAQ4pB,MAAM9sB,MAAQA,EAAQqgD,EACnCxtD,KAAKqQ,QAAQ4pB,MAAM7sB,OAASA,EAASogD,GAEzCxtD,KAAKsxD,aAAarkD,QAAQE,EAAOC,GACjCpN,KAAKuxD,gBAAgBtkD,QAAQE,EAAOC,GACpCpN,KAAKie,SAASe,MAAK,SAAU9P,GACzBA,EAAMjC,QAAQ,CAAEE,MAAOA,EAAOC,OAAQA,IACtC8B,EAAMsd,WAGd+jC,EAAMtuD,UAAU6lB,IAAM,SAAU5Y,GAC5B,GAAIjM,UAAUL,OAAS,EAAG,CACtB,IAAK,IAAIvC,EAAI,EAAGA,EAAI4C,UAAUL,OAAQvC,IAClCL,KAAK8nB,IAAI7kB,UAAU5C,IAEvB,OAAOL,KAEX6M,EAAO5K,UAAU6lB,IAAItnB,KAAKR,KAAMkP,GAChC,IAAItM,EAAS5C,KAAKie,SAASrb,OAW3B,OAVIA,EAASktD,IACT/rD,EAAOuD,KAAKmT,KAAK,iBACb7X,EACA,2KAERsM,EAAMjC,QAAQ,CAAEE,MAAOnN,KAAKmN,QAASC,OAAQpN,KAAKoN,WAClD8B,EAAMsd,OACFtoB,EAASkD,MAAM69C,WACfjlD,KAAKqQ,QAAQE,YAAYrB,EAAMC,OAAOgB,SAEnCnQ,MAEXuwD,EAAMtuD,UAAUsd,UAAY,WACxB,OAAO,MAEXgxC,EAAMtuD,UAAUkF,SAAW,WACvB,OAAO,MAEXopD,EAAMtuD,UAAU+4B,kBAAoB,SAAUtO,GAC1C,OAAO4gC,EAActyB,kBAAkBtO,EAAW1sB,OAEtDuwD,EAAMtuD,UAAUg5B,kBAAoB,SAAUvO,GAC1C4gC,EAAcryB,kBAAkBvO,EAAW1sB,OAE/CuwD,EAAMtuD,UAAUi5B,eAAiB,SAAUxO,GACvC4gC,EAAcpyB,eAAexO,EAAW1sB,OAE5CuwD,EAAMtuD,UAAUoF,UAAY,WACxB,OAAOrH,KAAKwe,eAEhB+xC,EAAMtuD,UAAUyuD,mBAAqB,WACjC,GAAKxsD,EAASkD,MAAM69C,UAGpB,IAAK,IAAInjD,EAAI,EAAGA,EAAIkuD,GAAcluD,IAC9BmuD,GAASjwD,KAAM+vD,GAAOjuD,KAG9ByuD,EAAMtuD,UAAUuvD,YAAc,SAAU1uC,GACpC9iB,KAAK6mD,qBAAqB/jC,GAC1B9iB,KAAKqP,MAAMuN,EAAY,CAAEkG,IAAKA,EAAK7N,OAAQjV,KAAMojB,cAAepjB,QAEpEuwD,EAAMtuD,UAAUwvD,WAAa,SAAU3uC,GACnC9iB,KAAK6mD,qBAAqB/jC,GAC1B9iB,KAAKqP,MAAMw/C,EAAmB,CAAE/rC,IAAKA,IACrC9iB,KAAKqP,MAAMq+C,EAAW,CAAE5qC,IAAKA,EAAK7N,OAAQjV,KAAMojB,cAAepjB,QAEnEuwD,EAAMtuD,UAAUyvD,UAAY,SAAU5uC,GAClC,IAAI5V,EACJlN,KAAK6mD,qBAAqB/jC,GAC1B,IAAI6uC,GAA2C,QAA3BzkD,EAAKlN,KAAK2xD,mBAAgC,IAAPzkD,OAAgB,EAASA,EAAGgY,YAAcllB,KAAK2xD,YAAc,KAChHC,GAAiBl2C,EAAc8H,GAAGF,YAAcpf,EAASkD,MAAMk+C,iBAC/DqM,GAAeC,GACfD,EAAYtoC,eAAeokC,EAAU,CAAE3qC,IAAKA,IAC5C6uC,EAAYtoC,eAAexM,EAAY,CAAEiG,IAAKA,IAC9C9iB,KAAKqP,MAAMwN,EAAY,CAAEiG,IAAKA,EAAK7N,OAAQjV,KAAMojB,cAAepjB,OAChEA,KAAK2xD,YAAc,MAEdC,IACL5xD,KAAKqP,MAAMwN,EAAY,CACnBiG,IAAKA,EACL7N,OAAQjV,KACRojB,cAAepjB,OAEnBA,KAAKqP,MAAMo+C,EAAU,CACjB3qC,IAAKA,EACL7N,OAAQjV,KACRojB,cAAepjB,QAGvBA,KAAK6xD,gBAAahvD,EAClB7C,KAAKwwD,kBAAoB,GACzBxwD,KAAKqP,MAAMu/C,EAAkB,CAAE9rC,IAAKA,KAExCytC,EAAMtuD,UAAU6vD,WAAa,SAAUhvC,GACnC,IAAI5V,EACJ,GAAIhJ,EAASkD,MAAMgtB,GAAG0wB,SAClB,OAAO9kD,KAAK+xD,WAAWjvC,GAE3B9iB,KAAK6mD,qBAAqB/jC,GAC1B,IACI/U,EADA2e,EAAY3oB,EAAOuD,KAAK+vC,mBAAmBv0B,GAE3C6uC,GAA2C,QAA3BzkD,EAAKlN,KAAK2xD,mBAAgC,IAAPzkD,OAAgB,EAASA,EAAGgY,YAAcllB,KAAK2xD,YAAc,KAChHC,GAAiBl2C,EAAc8H,GAAGF,YAAcpf,EAASkD,MAAMk+C,iBACnE,GAAIsM,EAAe,CAEf,GADA7jD,EAAQ/N,KAAK0N,gBAAgB1N,KAAKkxD,sBAC9BnjD,GAASA,EAAMqW,cAAe,CAC9B,IAAI4tC,EAAkBL,IAAgB5jD,EAClC6jD,GAAiBI,GACbL,IACAA,EAAYtoC,eAAeokC,EAAU,CAAE3qC,IAAKA,EAAK4J,UAAWA,GAAa3e,GACzE4jD,EAAYtoC,eAAexM,EAAY,CAAEiG,IAAKA,EAAK4J,UAAWA,GAAa3e,IAE/EA,EAAMsb,eAAeqkC,EAAW,CAAE5qC,IAAKA,EAAK4J,UAAWA,GAAailC,GACpE5jD,EAAMsb,eAAezM,EAAY,CAAEkG,IAAKA,EAAK4J,UAAWA,GAAailC,GACrE5jD,EAAMsb,eAAeskC,EAAW,CAAE7qC,IAAKA,EAAK4J,UAAWA,IACvD1sB,KAAK2xD,YAAc5jD,GAGnBA,EAAMsb,eAAeskC,EAAW,CAAE7qC,IAAKA,EAAK4J,UAAWA,SAIvDilC,GAAeC,IACfD,EAAYtoC,eAAeokC,EAAU,CAAE3qC,IAAKA,EAAK4J,UAAWA,IAC5DilC,EAAYtoC,eAAexM,EAAY,CAAEiG,IAAKA,EAAK4J,UAAWA,IAC9D1sB,KAAKqP,MAAMq+C,EAAW,CAClB5qC,IAAKA,EACL7N,OAAQjV,KACRojB,cAAepjB,KACf0sB,UAAWA,IAEf1sB,KAAK2xD,YAAc,MAEvB3xD,KAAKqP,MAAMs+C,EAAW,CAClB7qC,IAAKA,EACL7N,OAAQjV,KACRojB,cAAepjB,KACf0sB,UAAWA,IAGnB1sB,KAAKqP,MAAMy/C,EAAmB,CAAEhsC,IAAKA,IAErCA,EAAImvC,YACJnvC,EAAIovC,kBAGZ3B,EAAMtuD,UAAUkwD,WAAa,SAAUrvC,GACnC,GAAI5e,EAASkD,MAAMgtB,GAAG0wB,SAClB,OAAO9kD,KAAKoyD,YAAYtvC,GAE5B9iB,KAAK6mD,qBAAqB/jC,GAC1B,IAAI4J,EAAY3oB,EAAOuD,KAAK+vC,mBAAmBv0B,GAC3C/U,EAAQ/N,KAAK0N,gBAAgB1N,KAAKkxD,sBACtCx1C,EAAc8H,GAAGmjC,aAAc,EAC/BziD,EAASkD,MAAMo+C,gBAAiB,EAC5Bz3C,GAASA,EAAMqW,eACfpkB,KAAKqyD,gBAAkBtkD,EACvBA,EAAMsb,eAAeukC,EAAW,CAAE9qC,IAAKA,EAAK4J,UAAWA,KAGvD1sB,KAAKqP,MAAMu+C,EAAW,CAClB9qC,IAAKA,EACL7N,OAAQjV,KACRojB,cAAepjB,KACf0sB,UAAWA,IAGnB1sB,KAAKqP,MAAM0/C,EAAmB,CAAEjsC,IAAKA,KAEzCytC,EAAMtuD,UAAUqwD,SAAW,SAAUxvC,GACjC,GAAI5e,EAASkD,MAAMgtB,GAAG0wB,SAClB,OAAO9kD,KAAKuyD,UAAUzvC,GAE1B9iB,KAAK6mD,qBAAqB/jC,GAC1B,IAAI4J,EAAY3oB,EAAOuD,KAAK+vC,mBAAmBv0B,GAC3C/U,EAAQ/N,KAAK0N,gBAAgB1N,KAAKkxD,sBAAuBmB,EAAkBryD,KAAKqyD,gBAAiBG,EAAgBxyD,KAAKwyD,cAAeC,GAAe,EACpJvuD,EAASkD,MAAMq+C,kBACfgN,GAAe,EACfC,aAAa1yD,KAAK2yD,aAEZj3C,EAAc8H,GAAGmjC,cACvBziD,EAASkD,MAAMq+C,kBAAmB,EAClCiN,aAAa1yD,KAAK2yD,aAEtB3yD,KAAK2yD,WAAar6C,YAAW,WACzBpU,EAASkD,MAAMq+C,kBAAmB,IACnCvhD,EAASkD,MAAM+9C,gBACdp3C,GAASA,EAAMqW,eACfpkB,KAAKwyD,cAAgBzkD,EACrBA,EAAMsb,eAAewkC,EAAS,CAAE/qC,IAAKA,EAAK4J,UAAWA,IACjDxoB,EAASkD,MAAMo+C,gBACf6M,GACAA,EAAgBtrD,MAAQgH,EAAMhH,MAC9BgH,EAAMsb,eAAe+kC,EAAO,CAAEtrC,IAAKA,EAAK4J,UAAWA,IAC/C+lC,GAAgBD,GAAiBA,IAAkBzkD,GACnDA,EAAMsb,eAAeglC,EAAW,CAAEvrC,IAAKA,EAAK4J,UAAWA,OAK/D1sB,KAAKqP,MAAMw+C,EAAS,CAChB/qC,IAAKA,EACL7N,OAAQjV,KACRojB,cAAepjB,KACf0sB,UAAWA,IAEXxoB,EAASkD,MAAMo+C,gBACfxlD,KAAKqP,MAAM++C,EAAO,CACdtrC,IAAKA,EACL7N,OAAQjV,KACRojB,cAAepjB,KACf0sB,UAAWA,IAGf+lC,GACAzyD,KAAKqP,MAAMg/C,EAAW,CAClBvrC,IAAKA,EACL7N,OAAQjV,KACRojB,cAAepjB,KACf0sB,UAAWA,KAIvB1sB,KAAKqP,MAAM2/C,EAAiB,CAAElsC,IAAKA,IAC/B5e,EAASkD,MAAMo+C,iBACfxlD,KAAKqP,MAAM6/C,EAAe,CAAEpsC,IAAKA,IAC7B2vC,GACAzyD,KAAKqP,MAAM8/C,EAAmB,CAAErsC,IAAKA,KAG7C5e,EAASkD,MAAMo+C,gBAAiB,EAC5B1iC,EAAImvC,YACJnvC,EAAIovC,kBAGZ3B,EAAMtuD,UAAU2wD,aAAe,SAAU9vC,GACrC9iB,KAAK6mD,qBAAqB/jC,GAC1B,IAAI/U,EAAQ/N,KAAK0N,gBAAgB1N,KAAKkxD,sBAClCnjD,GAASA,EAAMqW,cACfrW,EAAMsb,eAAe8kC,EAAa,CAAErrC,IAAKA,IAGzC9iB,KAAKqP,MAAM8+C,EAAa,CACpBrrC,IAAKA,EACL7N,OAAQjV,KACRojB,cAAepjB,OAGvBA,KAAKqP,MAAM4/C,EAAqB,CAAEnsC,IAAKA,KAE3CytC,EAAMtuD,UAAUmwD,YAAc,SAAUtvC,GACpC,IAAIvZ,EAAQvJ,KACZA,KAAK6mD,qBAAqB/jC,GAC1B,IAAI+vC,GAAmB,EACvB7yD,KAAK6sB,yBAAyB5R,SAAQ,SAAUtN,GAC5C,IAAII,EAAQxE,EAAMmE,gBAAgBC,GAClCzJ,EAASkD,MAAMo+C,gBAAiB,EAChC9pC,EAAc8H,GAAGmjC,aAAc,EAC/B,IAAImM,EAAW/kD,GAASA,EAAMqW,cACzB0uC,IAGD5uD,EAASkD,MAAMm+C,2BACfx3C,EAAMktB,kBAAkBttB,EAAI0J,IAEhC9N,EAAMwpD,cAAgBhlD,EACtBA,EAAMsb,eAAeilC,EAAY,CAAExrC,IAAKA,EAAK4J,UAAW/e,EAAI0J,IAAM9N,GAClEspD,GAAmB,EACf9kD,EAAMqW,eAAiBrW,EAAMmkD,kBAAoBpvC,EAAImvC,YACrDnvC,EAAIovC,qBAGPW,GACD7yD,KAAKqP,MAAMi/C,EAAY,CACnBxrC,IAAKA,EACL7N,OAAQjV,KACRojB,cAAepjB,KACf0sB,UAAW1sB,KAAK6sB,yBAAyB,GAAGxV,KAGpDrX,KAAKqP,MAAM+/C,EAAoB,CAAEtsC,IAAKA,KAE1CytC,EAAMtuD,UAAU8vD,WAAa,SAAUjvC,GACnC,IAAIvZ,EAAQvJ,KACZA,KAAK6mD,qBAAqB/jC,GAC1B,IAAI8uC,GAAiBl2C,EAAc8H,GAAGF,YAAcpf,EAASkD,MAAMk+C,iBACnE,GAAIsM,EAAe,CACf,IAAIiB,GAAmB,EACnBG,EAAqB,GACzBhzD,KAAK6sB,yBAAyB5R,SAAQ,SAAUtN,GAC5C,IAAII,EAAQu/C,EAAcxyB,iBAAiBntB,EAAI0J,KAAO9N,EAAMmE,gBAAgBC,GACxEmlD,EAAW/kD,GAASA,EAAMqW,cACzB0uC,IAGDE,EAAmBjlD,EAAMhH,OAG7BisD,EAAmBjlD,EAAMhH,MAAO,EAChCgH,EAAMsb,eAAeqlC,EAAW,CAAE5rC,IAAKA,EAAK4J,UAAW/e,EAAI0J,KAC3Dw7C,GAAmB,EACf9kD,EAAMqW,eAAiBrW,EAAMmkD,kBAAoBpvC,EAAImvC,YACrDnvC,EAAIovC,sBAGPW,GACD7yD,KAAKqP,MAAMq/C,EAAW,CAClB5rC,IAAKA,EACL7N,OAAQjV,KACRojB,cAAepjB,KACf0sB,UAAW1sB,KAAK6sB,yBAAyB,GAAGxV,KAGpDrX,KAAKqP,MAAMmgD,EAAmB,CAAE1sC,IAAKA,IAErCpH,EAAc8H,GAAGF,YAAc5H,EAAc8H,GAAGpf,KAAK8tD,kBAAoBpvC,EAAImvC,YAC7EnvC,EAAIovC,kBAGZ3B,EAAMtuD,UAAUswD,UAAY,SAAUzvC,GAClC,IAAIvZ,EAAQvJ,KACZA,KAAK6mD,qBAAqB/jC,GAC1B,IAAI0vC,EAAgBxyD,KAAKwyD,cAAeC,GAAe,EACnDvuD,EAASkD,MAAMq+C,kBACfgN,GAAe,EACfC,aAAa1yD,KAAK2yD,aAEZj3C,EAAc8H,GAAGmjC,cACvBziD,EAASkD,MAAMq+C,kBAAmB,EAClCiN,aAAa1yD,KAAK2yD,aAEtB3yD,KAAK2yD,WAAar6C,YAAW,WACzBpU,EAASkD,MAAMq+C,kBAAmB,IACnCvhD,EAASkD,MAAM+9C,gBAClB,IAAI0N,GAAmB,EACnBG,EAAqB,GACrBC,GAAe,EACfC,GAAkB,EACtBlzD,KAAK6sB,yBAAyB5R,SAAQ,SAAUtN,GAC5C,IAAII,EAAQu/C,EAAcxyB,iBAAiBntB,EAAI0J,KAC3C9N,EAAMmE,gBAAgBC,GACtBI,GACAA,EAAMmtB,eAAevtB,EAAI0J,IAE7B,IAAIy7C,EAAW/kD,GAASA,EAAMqW,cACzB0uC,IAGDE,EAAmBjlD,EAAMhH,OAG7BisD,EAAmBjlD,EAAMhH,MAAO,EAChCwC,EAAMipD,cAAgBzkD,EACtBA,EAAMsb,eAAeklC,EAAU,CAAEzrC,IAAKA,EAAK4J,UAAW/e,EAAI0J,KAC1Dw7C,GAAmB,EACf3uD,EAASkD,MAAMo+C,gBAAkBz3C,IAAUxE,EAAMwpD,gBACjDE,GAAe,EACfllD,EAAMsb,eAAemlC,EAAK,CAAE1rC,IAAKA,EAAK4J,UAAW/e,EAAI0J,KACjDo7C,GAAgBD,GAAiBA,IAAkBzkD,IACnDmlD,GAAkB,EAClBnlD,EAAMsb,eAAeolC,EAAS,CAAE3rC,IAAKA,EAAK4J,UAAW/e,EAAI0J,OAG7DtJ,EAAMqW,eAAiBrW,EAAMmkD,kBAAoBpvC,EAAImvC,YACrDnvC,EAAIovC,sBAGPW,GACD7yD,KAAKqP,MAAMk/C,EAAU,CACjBzrC,IAAKA,EACL7N,OAAQjV,KACRojB,cAAepjB,KACf0sB,UAAW1sB,KAAK6sB,yBAAyB,GAAGxV,KAGhDnT,EAASkD,MAAMo+C,iBAAmByN,GAClCjzD,KAAKqP,MAAMm/C,EAAK,CACZ1rC,IAAKA,EACL7N,OAAQjV,KACRojB,cAAepjB,KACf0sB,UAAW1sB,KAAK6sB,yBAAyB,GAAGxV,KAGhDo7C,IAAiBS,GACjBlzD,KAAKqP,MAAMo/C,EAAS,CAChB3rC,IAAKA,EACL7N,OAAQjV,KACRojB,cAAepjB,KACf0sB,UAAW1sB,KAAK6sB,yBAAyB,GAAGxV,KAGpDrX,KAAKqP,MAAMggD,EAAkB,CAAEvsC,IAAKA,IAChC5e,EAASkD,MAAMo+C,iBACfxlD,KAAKqP,MAAMkgD,EAAa,CAAEzsC,IAAKA,IAC3B2vC,GACAzyD,KAAKqP,MAAMigD,EAAiB,CAAExsC,IAAKA,KAG3C5e,EAASkD,MAAMo+C,gBAAiB,GAEpC+K,EAAMtuD,UAAUkxD,OAAS,SAAUrwC,GAC/B9iB,KAAK6mD,qBAAqB/jC,GAC1B,IAAI/U,EAAQ/N,KAAK0N,gBAAgB1N,KAAKkxD,sBAClCnjD,GAASA,EAAMqW,cACfrW,EAAMsb,eAAeslC,EAAO,CAAE7rC,IAAKA,IAGnC9iB,KAAKqP,MAAMs/C,EAAO,CACd7rC,IAAKA,EACL7N,OAAQjV,KACRojB,cAAepjB,OAGvBA,KAAKqP,MAAMogD,EAAe,CAAE3sC,IAAKA,KAErCytC,EAAMtuD,UAAUmxD,aAAe,SAAUtwC,GACrC,GAAK5e,EAASkD,MAAMi+C,sBAApB,CAGArlD,KAAK6mD,qBAAqB/jC,GAC1B,IAAI/U,EAAQu/C,EAAcxyB,iBAAiBhY,EAAI4J,YAC3C1sB,KAAK0N,gBAAgB1N,KAAKkxD,sBAC1BnjD,GACAA,EAAMsb,eAAe0kC,EAAaT,EAAcvyB,YAAYjY,MAGpEytC,EAAMtuD,UAAUoxD,aAAe,SAAUvwC,GACrC,GAAK5e,EAASkD,MAAMi+C,sBAApB,CAGArlD,KAAK6mD,qBAAqB/jC,GAC1B,IAAI/U,EAAQu/C,EAAcxyB,iBAAiBhY,EAAI4J,YAC3C1sB,KAAK0N,gBAAgB1N,KAAKkxD,sBAC1BnjD,GACAA,EAAMsb,eAAeykC,EAAaR,EAAcvyB,YAAYjY,MAGpEytC,EAAMtuD,UAAUqxD,WAAa,SAAUxwC,GACnC,GAAK5e,EAASkD,MAAMi+C,sBAApB,CAGArlD,KAAK6mD,qBAAqB/jC,GAC1B,IAAI/U,EAAQu/C,EAAcxyB,iBAAiBhY,EAAI4J,YAC3C1sB,KAAK0N,gBAAgB1N,KAAKkxD,sBAC1BnjD,GACAA,EAAMsb,eAAe2kC,EAAWV,EAAcvyB,YAAYjY,IAE9DwqC,EAAcpyB,eAAepY,EAAI4J,aAErC6jC,EAAMtuD,UAAUsxD,eAAiB,SAAUzwC,GACvC,GAAK5e,EAASkD,MAAMi+C,sBAApB,CAGArlD,KAAK6mD,qBAAqB/jC,GAC1B,IAAI/U,EAAQu/C,EAAcxyB,iBAAiBhY,EAAI4J,YAC3C1sB,KAAK0N,gBAAgB1N,KAAKkxD,sBAC1BnjD,GACAA,EAAMsb,eAAe2kC,EAAWV,EAAcvyB,YAAYjY,IAE9DwqC,EAAcpyB,eAAepY,EAAI4J,aAErC6jC,EAAMtuD,UAAUuxD,oBAAsB,SAAU1wC,GAC5CwqC,EAAcpyB,eAAepY,EAAI4J,YAErC6jC,EAAMtuD,UAAU4kD,qBAAuB,SAAU/jC,GAC7C,IAAIvZ,EAAQvJ,KACRyzD,EAAkBzzD,KAAK0zD,sBAAuBjnD,EAAI,KAAMC,EAAI,KAChEoW,EAAMA,GAAYggC,OAAOtrC,WACL3U,IAAhBigB,EAAIw0B,SACJt3C,KAAKwwD,kBAAoB,GACzBxwD,KAAK6sB,yBAA2B,GAChC9oB,EAAO8M,WAAW5O,UAAU+c,KAAKxe,KAAKsiB,EAAIw0B,SAAS,SAAUqc,GACzDpqD,EAAMinD,kBAAkBznD,KAAK,CACzBsO,GAAIs8C,EAAMnc,WACV/qC,GAAIknD,EAAMC,QAAUH,EAAgB9d,MAAQ8d,EAAgBttC,OAC5DzZ,GAAIinD,EAAME,QAAUJ,EAAgBxkD,KAAOwkD,EAAgBrtC,YAGnEriB,EAAO8M,WAAW5O,UAAU+c,KAAKxe,KAAKsiB,EAAIy0B,gBAAkBz0B,EAAIw0B,SAAS,SAAUqc,GAC/EpqD,EAAMsjB,yBAAyB9jB,KAAK,CAChCsO,GAAIs8C,EAAMnc,WACV/qC,GAAIknD,EAAMC,QAAUH,EAAgB9d,MAAQ8d,EAAgBttC,OAC5DzZ,GAAIinD,EAAME,QAAUJ,EAAgBxkD,KAAOwkD,EAAgBrtC,cAKnE3Z,GAAKqW,EAAI8wC,QAAUH,EAAgB9d,MAAQ8d,EAAgBttC,OAC3DzZ,GAAKoW,EAAI+wC,QAAUJ,EAAgBxkD,KAAOwkD,EAAgBrtC,OAC1DpmB,KAAK6xD,WAAa,CACdplD,EAAGA,EACHC,EAAGA,GAEP1M,KAAKwwD,kBAAoB,CAAC,CAAE/jD,EAAGA,EAAGC,EAAGA,EAAG2K,GAAItT,EAAOuD,KAAK+vC,mBAAmBv0B,KAC3E9iB,KAAK6sB,yBAA2B,CAC5B,CAAEpgB,EAAGA,EAAGC,EAAGA,EAAG2K,GAAItT,EAAOuD,KAAK+vC,mBAAmBv0B,OAI7DytC,EAAMtuD,UAAU6xD,oBAAsB,SAAUhxC,GAC5C/e,EAAOuD,KAAKmT,KAAK,8FACjBza,KAAK6mD,qBAAqB/jC,IAE9BytC,EAAMtuD,UAAUyxD,oBAAsB,WAClC,IAAK1zD,KAAKqQ,UAAYrQ,KAAKqQ,QAAQ0jD,sBAC/B,MAAO,CACH9kD,IAAK,EACL0mC,KAAM,EACNxvB,OAAQ,EACRC,OAAQ,GAGhB,IAAIjH,EAAOnf,KAAKqQ,QAAQ0jD,wBACxB,MAAO,CACH9kD,IAAKkQ,EAAKlQ,IACV0mC,KAAMx2B,EAAKw2B,KACXxvB,OAAQhH,EAAKhS,MAAQnN,KAAKqQ,QAAQ2jD,aAAe,EACjD5tC,OAAQjH,EAAK/R,OAASpN,KAAKqQ,QAAQ4jD,cAAgB,IAG3D1D,EAAMtuD,UAAUwuD,UAAY,WAUxB,GATAzwD,KAAKsxD,aAAe,IAAIplD,EAAS0T,YAAY,CACzCzS,MAAOnN,KAAKmN,QACZC,OAAQpN,KAAKoN,WAEjBpN,KAAKuxD,gBAAkB,IAAIrlD,EAASa,UAAU,CAC1CC,WAAY,EACZG,MAAOnN,KAAKmN,QACZC,OAAQpN,KAAKoN,WAEZlJ,EAASkD,MAAM69C,UAApB,CAGA,IAAI92B,EAAYnuB,KAAKmuB,YACrB,IAAKA,EACD,KAAM,mDAEVA,EAAUgQ,UAAY6I,GACtBhnC,KAAKqQ,QAAUgqB,SAAS9uB,cAAc,OACtCvL,KAAKqQ,QAAQ4pB,MAAM1C,SAAWm4B,EAC9B1vD,KAAKqQ,QAAQ4pB,MAAMi6B,WAAa,OAChCl0D,KAAKqQ,QAAQ4C,UAAY08C,EACzB3vD,KAAKqQ,QAAQ8jD,aAAa,OAAQ,gBAClChmC,EAAU5d,YAAYvQ,KAAKqQ,SAC3BrQ,KAAK2wD,eAETJ,EAAMtuD,UAAU2c,MAAQ,WAEpB,OADA7a,EAAOuD,KAAKmT,KAAK,kGACVza,MAEXuwD,EAAMtuD,UAAUgd,WAAa,WACzB,OAAOjf,MAEXuwD,EAAMtuD,UAAUsrB,UAAY,WAIxB,OAHAvtB,KAAKie,SAASe,MAAK,SAAU9P,GACzBA,EAAMqe,eAEHvtB,MAEJuwD,EApsBC,CAqsBVxkD,EAAY0D,WACd/P,EAAQ6wD,MAAQA,GAChBA,GAAMtuD,UAAUuO,SAAW0M,EAC3BqS,EAAS9e,cAAc8/C,IACvBvkD,EAAU0E,QAAQC,gBAAgB4/C,GAAO,c,kCC/vBzCxvD,OAAOC,eAAetB,EAAS,aAAc,CAAE4B,OAAO,IACtD,IAAI4C,EAAW,EAAQ,QACnB8T,EAAM,WACN,OAAI9T,EAAS0tC,KAAKwiB,aAAelwD,EAAS0tC,KAAKwiB,YAAYp8C,IAChD,WACH,OAAO9T,EAAS0tC,KAAKwiB,YAAYp8C,OAGlC,WACH,OAAO,IAAIrR,MAAOP,WAPhB,GAUNoB,EAAa,WACb,SAASA,EAAUvC,EAAMiC,GACrBlH,KAAKqX,GAAK7P,EAAU6sD,gBACpBr0D,KAAKs0D,MAAQ,CACTC,KAAM,EACNC,SAAU,EACVC,SAAUz8C,IACV08C,UAAW,GAEf10D,KAAKiF,KAAOA,EACZjF,KAAK20D,UAAUztD,GAsHnB,OApHAM,EAAUvF,UAAU0yD,UAAY,SAAUztD,GACtC,IAAI0tD,EAAO,GAWX,OANIA,EAJC1tD,EAGIA,EAAOtE,OAAS,EACdsE,EAGA,CAACA,GAND,GAQXlH,KAAKkH,OAAS0tD,EACP50D,MAEXwH,EAAUvF,UAAUoF,UAAY,WAC5B,OAAOrH,KAAKkH,QAEhBM,EAAUvF,UAAU4yD,SAAW,SAAU3lD,GACrC,IAA+CpN,EAA3CoF,EAASlH,KAAKkH,OAAQkB,EAAMlB,EAAOtE,OACvC,IAAKd,EAAI,EAAGA,EAAIsG,EAAKtG,IACjB,GAAIoF,EAAOpF,GAAGiF,MAAQmI,EAAMnI,IACxB,OAAO,EAIf,OADA/G,KAAKkH,OAAO6B,KAAKmG,IACV,GAEX1H,EAAUvF,UAAU6yD,UAAY,WAC5B,IAAuEhzD,EAAnEgB,EAAI0E,EAAWutD,EAAajyD,EAAEiyD,WAAY3sD,EAAM2sD,EAAWnyD,OAC/D,IAAKd,EAAI,EAAGA,EAAIsG,EAAKtG,IACjB,GAAIizD,EAAWjzD,GAAGuV,KAAOrX,KAAKqX,GAC1B,OAAO,EAGf,OAAO,GAEX7P,EAAUvF,UAAUgG,MAAQ,WAKxB,OAJAjI,KAAK2J,OACL3J,KAAKs0D,MAAME,SAAW,EACtBx0D,KAAKs0D,MAAMG,SAAWz8C,IACtBxQ,EAAUwtD,cAAch1D,MACjBA,MAEXwH,EAAUvF,UAAU0H,KAAO,WAEvB,OADAnC,EAAUytD,iBAAiBj1D,MACpBA,MAEXwH,EAAUvF,UAAUizD,mBAAqB,SAAUX,GAC/Cv0D,KAAKs0D,MAAME,SAAWD,EAAOv0D,KAAKs0D,MAAMG,SACxCz0D,KAAKs0D,MAAMG,SAAWF,EACtBv0D,KAAKs0D,MAAMC,MAAQv0D,KAAKs0D,MAAME,SAC9Bx0D,KAAKs0D,MAAMI,UAAY,IAAO10D,KAAKs0D,MAAME,UAE7ChtD,EAAUwtD,cAAgB,SAAUztD,GAChCvH,KAAK+0D,WAAWhsD,KAAKxB,GACrBvH,KAAKm1D,oBAET3tD,EAAUytD,iBAAmB,SAAU1tD,GACnC,IAAyEzF,EAArEuV,EAAK9P,EAAK8P,GAAI09C,EAAa/0D,KAAK+0D,WAAY3sD,EAAM2sD,EAAWnyD,OACjE,IAAKd,EAAI,EAAGA,EAAIsG,EAAKtG,IACjB,GAAIizD,EAAWjzD,GAAGuV,KAAOA,EAAI,CACzBrX,KAAK+0D,WAAW54C,OAAOra,EAAG,GAC1B,QAIZ0F,EAAU4tD,WAAa,WACnB,IAAkD7tD,EAAML,EAAQjC,EAAMnD,EAAGzB,EAAGg1D,EAAWnmD,EAAOtN,EAAK0zD,EAA/FC,EAAY,GAAIR,EAAa/0D,KAAK+0D,WACtC,IAAKjzD,EAAI,EAAGA,EAAIizD,EAAWnyD,OAAQd,IAY/B,GAXAyF,EAAOwtD,EAAWjzD,GAClBoF,EAASK,EAAKL,OACdjC,EAAOsC,EAAKtC,KACZsC,EAAK2tD,mBAAmBl9C,KACxBq9C,EAAYnuD,EAAOtE,OAEf0yD,GADArwD,IAC6C,IAAhCA,EAAKzE,KAAK+G,EAAMA,EAAK+sD,OAKjCgB,EAGL,IAAKj1D,EAAI,EAAGA,EAAIg1D,EAAWh1D,IACvB6O,EAAQhI,EAAO7G,QACGwC,IAAdqM,EAAMnI,MACNwuD,EAAUrmD,EAAMnI,KAAOmI,GAInC,IAAKtN,KAAO2zD,EACHA,EAAUrzD,eAAeN,IAG9B2zD,EAAU3zD,GAAK4qB,QAGvBhlB,EAAUguD,eAAiB,WACvB,IAAIC,EAAOjuD,EACPiuD,EAAKV,WAAWnyD,QAChB6yD,EAAKL,aACLhkB,sBAAsBqkB,EAAKD,iBAG3BC,EAAKC,aAAc,GAG3BluD,EAAU2tD,iBAAmB,WACpBn1D,KAAK01D,cACN11D,KAAK01D,aAAc,EACnBtkB,sBAAsBpxC,KAAKw1D,kBAGnChuD,EAAUutD,WAAa,GACvBvtD,EAAU6sD,cAAgB,EAC1B7sD,EAAUkuD,aAAc,EACjBluD,EAhIK,GAkIhB9H,EAAQ8H,UAAYA,G,kCC9IpB,IAAI/E,EAAY,EAAQ,QAEpBkzD,EAAoB,SAAUn6C,GAChC,IAAIulB,EAASC,EACbhhC,KAAKo5C,QAAU,IAAI59B,GAAE,SAAUo6C,EAAWC,GACxC,QAAgBhzD,IAAZk+B,QAAoCl+B,IAAXm+B,EAAsB,MAAM/vB,UAAU,2BACnE8vB,EAAU60B,EACV50B,EAAS60B,KAEX71D,KAAK+gC,QAAUt+B,EAAUs+B,GACzB/gC,KAAKghC,OAASv+B,EAAUu+B,IAI1BrhC,EAAOD,QAAQiE,EAAI,SAAU6X,GAC3B,OAAO,IAAIm6C,EAAkBn6C,K,kCCf/Bza,OAAOC,eAAetB,EAAS,aAAc,CAAE4B,OAAO,IACtD,IAAIyC,EAAS,EAAQ,QACjBqI,EAAe,EAAQ,QACvB0pD,EAAM,MAAO/4C,EAAM,MACvBrd,EAAQgR,QAAU,CACdC,gBAAiB,SAAU7E,EAAa3C,EAAMkpC,EAAK0jB,EAAWC,GAC1Dh2D,KAAKi2D,UAAUnqD,EAAa3C,EAAMkpC,GAClCryC,KAAKk2D,UAAUpqD,EAAa3C,EAAM4sD,EAAWC,GAC7Ch2D,KAAKm2D,0BAA0BrqD,EAAa3C,IAEhD8sD,UAAW,SAAUnqD,EAAa3C,EAAMkpC,GACpC,IAAIvuB,EAASgyC,EAAM/xD,EAAOuD,KAAKyc,YAAY5a,GAC3C2C,EAAY7J,UAAU6hB,GAClBhY,EAAY7J,UAAU6hB,IAClB,WACI,IAAI7J,EAAMja,KAAK4H,MAAMuB,GACrB,YAAetG,IAARoX,EAAoBo4B,EAAMp4B,IAGjDi8C,UAAW,SAAUpqD,EAAa3C,EAAM4sD,EAAWC,GAC/C,IAAIlyC,EAAS/G,EAAMhZ,EAAOuD,KAAKyc,YAAY5a,GACtC2C,EAAY7J,UAAU6hB,IACvBpkB,EAAQgR,QAAQ2lB,gBAAgBvqB,EAAa3C,EAAM4sD,EAAWC,IAGtE3/B,gBAAiB,SAAUvqB,EAAa3C,EAAM4sD,EAAWC,GACrD,IAAIlyC,EAAS/G,EAAMhZ,EAAOuD,KAAKyc,YAAY5a,GAC3C2C,EAAY7J,UAAU6hB,GAAU,SAAU7J,GAQtC,OAPI87C,QAAqBlzD,IAARoX,GAA6B,OAARA,IAClCA,EAAM87C,EAAUv1D,KAAKR,KAAMia,EAAK9Q,IAEpCnJ,KAAKmkB,SAAShb,EAAM8Q,GAChB+7C,GACAA,EAAMx1D,KAAKR,MAERA,OAGfwuB,0BAA2B,SAAU1iB,EAAa3C,EAAMkS,EAAY06C,EAAWC,GAC3E,IAAqIl0D,EAAGqqB,EAApI/jB,EAAMiT,EAAWzY,OAAQwzD,EAAaryD,EAAOuD,KAAKyc,YAAaljB,EAASi1D,EAAMM,EAAWjtD,GAAOu6C,EAAS3mC,EAAMq5C,EAAWjtD,GAC9H2C,EAAY7J,UAAUpB,GAAU,WAC5B,IAAIs+C,EAAM,GACV,IAAKr9C,EAAI,EAAGA,EAAIsG,EAAKtG,IACjBqqB,EAAY9Q,EAAWvZ,GACvBq9C,EAAIhzB,GAAansB,KAAKwI,QAAQW,EAAOitD,EAAWjqC,IAEpD,OAAOgzB,GAEX,IAAIkX,EAAiBjqD,EAAagP,sBAAsBC,GACxDvP,EAAY7J,UAAUyhD,GAAU,SAAUzpC,GACtC,IAA+BrY,EAA3B2pB,EAASvrB,KAAK4H,MAAMuB,GAOxB,IAAKvH,KANDm0D,IACA97C,EAAM87C,EAAUv1D,KAAKR,KAAMia,IAE3Bo8C,GACAA,EAAe71D,KAAKR,KAAMia,EAAK9Q,GAEvB8Q,EACHA,EAAI/X,eAAeN,IAGxB5B,KAAKmkB,SAAShb,EAAOitD,EAAWx0D,GAAMqY,EAAIrY,IAM9C,OAJA5B,KAAKsrB,iBAAiBniB,EAAMoiB,EAAQtR,GAChC+7C,GACAA,EAAMx1D,KAAKR,MAERA,MAEXA,KAAKm2D,0BAA0BrqD,EAAa3C,IAEhDgtD,0BAA2B,SAAUrqD,EAAa3C,GAC9C,IAAImtD,EAAkBvyD,EAAOuD,KAAKyc,YAAY5a,GAAOu6C,EAAS3mC,EAAMu5C,EAAiBz1D,EAASi1D,EAAMQ,EACpGxqD,EAAY7J,UAAUkH,GAAQ,WAC1B,OAAIlG,UAAUL,QACV5C,KAAK0jD,GAAQzgD,UAAU,IAChBjD,MAEJA,KAAKa,OAGpB01D,0BAA2B,SAAUzqD,EAAa3C,EAAMkpC,EAAK0jB,GACzDhyD,EAAOuD,KAAKxD,MAAM,qBAAuBqF,GACzC,IAAI2a,EAASgyC,EAAM/xD,EAAOuD,KAAKyc,YAAY5a,GACvCiZ,EAAUjZ,EACV,mGACJ2C,EAAY7J,UAAU6hB,GAAU,WAC5B/f,EAAOuD,KAAKxD,MAAMse,GAClB,IAAInI,EAAMja,KAAK4H,MAAMuB,GACrB,YAAetG,IAARoX,EAAoBo4B,EAAMp4B,GAErCja,KAAKk2D,UAAUpqD,EAAa3C,EAAM4sD,GAAW,WACzChyD,EAAOuD,KAAKxD,MAAMse,MAEtBpiB,KAAKm2D,0BAA0BrqD,EAAa3C,IAEhDulB,WAAY,SAAU5iB,EAAaswB,GAC/Br4B,EAAOuD,KAAK0X,KAAKod,GAAS,SAAUo6B,EAAeC,GAC/C,IAAI3yC,EAAShY,EAAY7J,UAAUw0D,GAC/BC,EAAYZ,EAAM/xD,EAAOuD,KAAKyc,YAAYyyC,GAC1CG,EAAY55C,EAAMhZ,EAAOuD,KAAKyc,YAAYyyC,GAC9C,SAASI,IACL9yC,EAAO9gB,MAAMhD,KAAMiD,WACnBc,EAAOuD,KAAKxD,MAAM,IACd0yD,EACA,0DACAC,EACA,cAER3qD,EAAY7J,UAAUu0D,GAAiBI,EACvC9qD,EAAY7J,UAAUy0D,GAAaE,EACnC9qD,EAAY7J,UAAU00D,GAAaC,MAG3CC,eAAgB,WACZ72D,KAAK+d,iBAAkB,K,qBCpH/B,IAAI+6B,EAAwB,EAAQ,QAChCge,EAAa,EAAQ,QACrBz0D,EAAkB,EAAQ,QAE1BC,EAAgBD,EAAgB,eAEhC00D,EAAuE,aAAnDD,EAAW,WAAc,OAAO7zD,UAArB,IAG/B+zD,EAAS,SAAUjmD,EAAInP,GACzB,IACE,OAAOmP,EAAGnP,GACV,MAAOkC,MAIXnE,EAAOD,QAAUo5C,EAAwBge,EAAa,SAAU/lD,GAC9D,IAAInN,EAAGqzD,EAAKtjD,EACZ,YAAc9Q,IAAPkO,EAAmB,YAAqB,OAAPA,EAAc,OAEM,iBAAhDkmD,EAAMD,EAAOpzD,EAAI7C,OAAOgQ,GAAKzO,IAA8B20D,EAEnEF,EAAoBD,EAAWlzD,GAEH,WAA3B+P,EAASmjD,EAAWlzD,KAAsC,mBAAZA,EAAEszD,OAAuB,YAAcvjD,I,kCCvB5F,IAAInI,EAAaxL,MAAQA,KAAKwL,WAAc,WACxC,IAAIC,EAAgB,SAAU9K,EAAGoC,GAI7B,OAHA0I,EAAgB1K,OAAO2K,gBAClB,CAAEC,UAAW,cAAgBC,OAAS,SAAUjL,EAAGoC,GAAKpC,EAAEgL,UAAY5I,IACvE,SAAUpC,EAAGoC,GAAK,IAAK,IAAIZ,KAAKY,EAAOA,EAAEb,eAAeC,KAAIxB,EAAEwB,GAAKY,EAAEZ,KAClEsJ,EAAc9K,EAAGoC,IAE5B,OAAO,SAAUpC,EAAGoC,GAEhB,SAAS8I,IAAO7L,KAAK8L,YAAcnL,EADnC8K,EAAc9K,EAAGoC,GAEjBpC,EAAEsB,UAAkB,OAANc,EAAahC,OAAOY,OAAOoB,IAAM8I,EAAG5J,UAAYc,EAAEd,UAAW,IAAI4J,IAV3C,GAa5C9K,OAAOC,eAAetB,EAAS,aAAc,CAAE4B,OAAO,IACtD,IAKI61D,EALApzD,EAAS,EAAQ,QACjBqzD,EAAY,EAAQ,QACpBlzD,EAAW,EAAQ,QACnB8H,EAAY,EAAQ,QACpBI,EAAe,EAAQ,QAE3B,SAASirD,IACL,GAAIF,EACA,OAAOA,EAEX,IAAIhoD,EAASpL,EAAOuD,KAAKwpB,sBACrBriB,EAAUU,EAAOI,WAAW,MAUhC,OATA4nD,EAAc,WACV,IAAIG,EAAmBpzD,EAASkD,MAAMyzB,QAAQy8B,kBAAoB,EAAGC,EAAoB9oD,EAAQ+oD,8BAC7F/oD,EAAQgpD,2BACRhpD,EAAQipD,0BACRjpD,EAAQkpD,yBACRlpD,EAAQmpD,wBACR,EACJ,OAAON,EAAmBC,EAPhB,GASPJ,EAEX,IAAIU,EAAU,WACV,SAASA,EAAOhxD,GACZ7G,KAAKgN,WAAa,EAClBhN,KAAKmN,MAAQ,EACbnN,KAAKoN,OAAS,EACdpN,KAAKigB,SAAU,EACf,IAAIf,EAAOrY,GAAU,GACjBmG,EAAakS,EAAKlS,YAAc9I,EAASkD,MAAM4F,YAAcqqD,IACjEr3D,KAAKgN,WAAaA,EAClBhN,KAAKmQ,QAAUpM,EAAOuD,KAAKwpB,sBAC3B9wB,KAAKmQ,QAAQ8pB,MAAMnI,QAAU,IAC7B9xB,KAAKmQ,QAAQ8pB,MAAM69B,OAAS,IAC5B93D,KAAKmQ,QAAQ8pB,MAAM89B,OAAS,IAC5B/3D,KAAKmQ,QAAQ8pB,MAAM+9B,WAAa,cAChCh4D,KAAKmQ,QAAQ8pB,MAAM1C,SAAW,WAC9Bv3B,KAAKmQ,QAAQ8pB,MAAMhrB,IAAM,IACzBjP,KAAKmQ,QAAQ8pB,MAAM0b,KAAO,IAmD9B,OAjDAkiB,EAAO51D,UAAUsN,WAAa,WAC1B,OAAOvP,KAAKyO,SAEhBopD,EAAO51D,UAAUi7C,cAAgB,WAC7B,OAAOl9C,KAAKgN,YAEhB6qD,EAAO51D,UAAUg2D,cAAgB,SAAUjrD,GACvC,IAAIkrD,EAAgBl4D,KAAKgN,WACzBhN,KAAKgN,WAAaA,EAClBhN,KAAKiN,QAAQjN,KAAK2S,WAAaulD,EAAel4D,KAAK4S,YAAcslD,IAErEL,EAAO51D,UAAU4Q,SAAW,SAAU1F,GAClCnN,KAAKmN,MAAQnN,KAAKmQ,QAAQhD,MAAQA,EAAQnN,KAAKgN,WAC/ChN,KAAKmQ,QAAQ8pB,MAAM9sB,MAAQA,EAAQ,KACnC,IAAIH,EAAahN,KAAKgN,WAAYmT,EAAWngB,KAAKuP,aAAa4Q,SAC/DA,EAAS+J,MAAMld,EAAYA,IAE/B6qD,EAAO51D,UAAU6Q,UAAY,SAAU1F,GACnCpN,KAAKoN,OAASpN,KAAKmQ,QAAQ/C,OAASA,EAASpN,KAAKgN,WAClDhN,KAAKmQ,QAAQ8pB,MAAM7sB,OAASA,EAAS,KACrC,IAAIJ,EAAahN,KAAKgN,WAAYmT,EAAWngB,KAAKuP,aAAa4Q,SAC/DA,EAAS+J,MAAMld,EAAYA,IAE/B6qD,EAAO51D,UAAU0Q,SAAW,WACxB,OAAO3S,KAAKmN,OAEhB0qD,EAAO51D,UAAU2Q,UAAY,WACzB,OAAO5S,KAAKoN,QAEhByqD,EAAO51D,UAAUgL,QAAU,SAAUE,EAAOC,GACxCpN,KAAK6S,SAAS1F,GAAS,GACvBnN,KAAK8S,UAAU1F,GAAU,IAE7ByqD,EAAO51D,UAAUwoB,UAAY,SAAUC,EAAUC,GAC7C,IACI,OAAO3qB,KAAKmQ,QAAQsa,UAAUC,EAAUC,GAE5C,MAAOxI,GACH,IACI,OAAOniB,KAAKmQ,QAAQsa,YAExB,MAAOyS,GAIH,OAHAn5B,EAAOuD,KAAKxD,MAAM,2BACdo5B,EAAI9a,QACJ,2EACG,MAIZy1C,EAnEE,GAqEbn4D,EAAQm4D,OAASA,EACjB7rD,EAAU0E,QAAQC,gBAAgBknD,EAAQ,kBAAch1D,EAAWuJ,EAAa+G,sBAChF,IAAIyM,EAAe,SAAU/S,GAEzB,SAAS+S,EAAY/Y,QACF,IAAXA,IAAqBA,EAAS,CAAEsG,MAAO,EAAGC,OAAQ,IACtD,IAAI7D,EAAQsD,EAAOrM,KAAKR,KAAM6G,IAAW7G,KAGzC,OAFAuJ,EAAMkF,QAAU,IAAI2oD,EAAU7X,aAAah2C,GAC3CA,EAAM0D,QAAQpG,EAAOsG,MAAOtG,EAAOuG,QAC5B7D,EAEX,OARAiC,EAAUoU,EAAa/S,GAQhB+S,EATO,CAUhBi4C,GACFn4D,EAAQkgB,YAAcA,EACtB,IAAI7S,EAAa,SAAUF,GAEvB,SAASE,EAAUlG,QACA,IAAXA,IAAqBA,EAAS,CAAEsG,MAAO,EAAGC,OAAQ,IACtD,IAAI7D,EAAQsD,EAAOrM,KAAKR,KAAM6G,IAAW7G,KAIzC,OAHAuJ,EAAMuD,WAAY,EAClBvD,EAAMkF,QAAU,IAAI2oD,EAAU5U,WAAWj5C,GACzCA,EAAM0D,QAAQpG,EAAOsG,MAAOtG,EAAOuG,QAC5B7D,EAEX,OATAiC,EAAUuB,EAAWF,GASdE,EAVK,CAWd8qD,GACFn4D,EAAQqN,UAAYA,G,qBCrIpB,IAAIktC,EAAS,EAAQ,QACjBC,EAAM,EAAQ,QAEdlhC,EAAOihC,EAAO,QAElBt6C,EAAOD,QAAU,SAAUkC,GACzB,OAAOoX,EAAKpX,KAASoX,EAAKpX,GAAOs4C,EAAIt4C,M,kCCJvC,G,iDAAsB,qBAAXkhD,OAAwB,CACjC,IAAI7lB,EAAgB6lB,OAAOzoB,SAAS4C,cAE9BD,EAAmB,EAAQ,QAC/BC,EAAgBD,IAGV,kBAAmB3C,UACvBt5B,OAAOC,eAAeq5B,SAAU,gBAAiB,CAAEn5B,IAAK87B,IAI5D,IAAI7C,EAAM8C,GAAiBA,EAAc9C,IAAI5hB,MAAM,2BAC/C4hB,IACF,IAA0BA,EAAI,IAKnB,ICrBXg+B,EAAS,WAAa,IAAIC,EAAIp4D,KAASq4D,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,IAAI,YAAYC,YAAY,YAAYC,YAAY,CAAC,QAAU,mBACrKC,EAAkB,G,gFCDtB,SAASC,EAAmBC,EAAK/3B,EAASC,EAAQ+3B,EAAOC,EAAQp3D,EAAKo+B,GACpE,IACE,IAAIgC,EAAO82B,EAAIl3D,GAAKo+B,GAChB1+B,EAAQ0gC,EAAK1gC,MACjB,MAAOwC,GAEP,YADAk9B,EAAOl9B,GAILk+B,EAAKxwB,KACPuvB,EAAQz/B,GAERgiC,QAAQvC,QAAQz/B,GAAO6/B,KAAK43B,EAAOC,GAIxB,SAASC,EAAkBv2D,GACxC,OAAO,WACL,IAAI3C,EAAOC,KACP6X,EAAO5U,UACX,OAAO,IAAIqgC,SAAQ,SAAUvC,EAASC,GACpC,IAAI83B,EAAMp2D,EAAGM,MAAMjD,EAAM8X,GAEzB,SAASkhD,EAAMz3D,GACbu3D,EAAmBC,EAAK/3B,EAASC,EAAQ+3B,EAAOC,EAAQ,OAAQ13D,GAGlE,SAAS03D,EAAO97B,GACd27B,EAAmBC,EAAK/3B,EAASC,EAAQ+3B,EAAOC,EAAQ,QAAS97B,GAGnE67B,OAAMl2D,OC/BG,SAASq2D,EAAgBC,EAAUnoD,GAChD,KAAMmoD,aAAoBnoD,GACxB,MAAM,IAAIC,UAAU,qCCFxB,SAASmoD,EAAkBnkD,EAAQokD,GACjC,IAAK,IAAIh5D,EAAI,EAAGA,EAAIg5D,EAAMz2D,OAAQvC,IAAK,CACrC,IAAI+U,EAAaikD,EAAMh5D,GACvB+U,EAAWnU,WAAamU,EAAWnU,aAAc,EACjDmU,EAAWe,cAAe,EACtB,UAAWf,IAAYA,EAAW+hB,UAAW,GACjDp2B,OAAOC,eAAeiU,EAAQG,EAAWxT,IAAKwT,IAInC,SAASkkD,EAAatoD,EAAauoD,EAAYC,GAG5D,OAFID,GAAYH,EAAkBpoD,EAAY/O,UAAWs3D,GACrDC,GAAaJ,EAAkBpoD,EAAawoD,GACzCxoD,ECbM,SAASyoD,EAAgB34D,EAAGqB,GAMzC,OALAs3D,EAAkB14D,OAAO2K,gBAAkB,SAAyB5K,EAAGqB,GAErE,OADArB,EAAE6K,UAAYxJ,EACPrB,GAGF24D,EAAgB34D,EAAGqB,GCLb,SAASu3D,EAAUC,EAAUC,GAC1C,GAA0B,oBAAfA,GAA4C,OAAfA,EACtC,MAAM,IAAI3oD,UAAU,sDAGtB0oD,EAAS13D,UAAYlB,OAAOY,OAAOi4D,GAAcA,EAAW33D,UAAW,CACrE6J,YAAa,CACXxK,MAAOq4D,EACPxiC,UAAU,EACVhhB,cAAc,KAGdyjD,GAAY,EAAeD,EAAUC,GCb5B,SAASC,EAAgB/4D,GAItC,OAHA+4D,EAAkB94D,OAAO2K,eAAiB3K,OAAOu6B,eAAiB,SAAyBx6B,GACzF,OAAOA,EAAE6K,WAAa5K,OAAOu6B,eAAex6B,IAEvC+4D,EAAgB/4D,GCJV,SAASg5D,IACtB,GAAuB,qBAAZC,UAA4BA,QAAQC,UAAW,OAAO,EACjE,GAAID,QAAQC,UAAUrkD,KAAM,OAAO,EACnC,GAAqB,oBAAVskD,MAAsB,OAAO,EAExC,IAEE,OADAtzD,KAAK1E,UAAUkY,SAAS3Z,KAAKu5D,QAAQC,UAAUrzD,KAAM,IAAI,iBAClD,EACP,MAAOwb,GACP,OAAO,GCTI,SAAS+3C,EAAQrsD,GAa9B,OATEqsD,EADoB,oBAAX94D,QAAoD,kBAApBA,OAAO4S,SACtC,SAAiBnG,GACzB,cAAcA,GAGN,SAAiBA,GACzB,OAAOA,GAAyB,oBAAXzM,QAAyByM,EAAI/B,cAAgB1K,QAAUyM,IAAQzM,OAAOa,UAAY,gBAAkB4L,GAItHqsD,EAAQrsD,GCbF,SAASssD,EAAuBp6D,GAC7C,QAAa,IAATA,EACF,MAAM,IAAIq6D,eAAe,6DAG3B,OAAOr6D,ECHM,SAASs6D,EAA2Bt6D,EAAMS,GACvD,OAAIA,GAA2B,WAAlB05D,EAAQ15D,IAAsC,oBAATA,EAI3C,EAAsBT,GAHpBS,ECDI,SAAS85D,EAAaC,GACnC,IAAIC,EAA4B,IAChC,OAAO,WACL,IACI7mD,EADA8mD,EAAQ,EAAeF,GAG3B,GAAIC,EAA2B,CAC7B,IAAI3hC,EAAY,EAAe74B,MAAM8L,YACrC6H,EAASomD,QAAQC,UAAUS,EAAOx3D,UAAW41B,QAE7CllB,EAAS8mD,EAAMz3D,MAAMhD,KAAMiD,WAG7B,OAAO,EAA0BjD,KAAM2T;;;;;;;;;;;;;;gFCoCpC,SAAS+mD,EAAWC,EAAY1lD,EAAQrT,EAAKs1C,GAChD,IAA2Hv2C,EAAvHD,EAAIuC,UAAUL,OAAQzB,EAAIT,EAAI,EAAIuU,EAAkB,OAATiiC,EAAgBA,EAAOn2C,OAAO2C,yBAAyBuR,EAAQrT,GAAOs1C,EACrH,GAAuB,kBAAZ6iB,SAAoD,oBAArBA,QAAQa,SAAyBz5D,EAAI44D,QAAQa,SAASD,EAAY1lD,EAAQrT,EAAKs1C,QACpH,IAAK,IAAI72C,EAAIs6D,EAAW/3D,OAAS,EAAGvC,GAAK,EAAGA,KAASM,EAAIg6D,EAAWt6D,MAAIc,GAAKT,EAAI,EAAIC,EAAEQ,GAAKT,EAAI,EAAIC,EAAEsU,EAAQrT,EAAKT,GAAKR,EAAEsU,EAAQrT,KAAST,GAChJ,OAAOT,EAAI,GAAKS,GAAKJ,OAAOC,eAAeiU,EAAQrT,EAAKT,GAAIA,E;;;;;;ACjDhE,SAAS,EAAQ0M,GAWf,OATE,EADoB,oBAAXzM,QAAoD,kBAApBA,OAAO4S,SACtC,SAAUnG,GAClB,cAAcA,GAGN,SAAUA,GAClB,OAAOA,GAAyB,oBAAXzM,QAAyByM,EAAI/B,cAAgB1K,QAAUyM,IAAQzM,OAAOa,UAAY,gBAAkB4L,GAItH,EAAQA,GAGjB,SAASgtD,EAAgBhtD,EAAKjM,EAAKN,GAYjC,OAXIM,KAAOiM,EACT9M,OAAOC,eAAe6M,EAAKjM,EAAK,CAC9BN,MAAOA,EACPL,YAAY,EACZkV,cAAc,EACdghB,UAAU,IAGZtpB,EAAIjM,GAAON,EAGNuM,EAGT,SAASitD,EAAmBh2B,GAC1B,OAAOi2B,EAAmBj2B,IAAQk2B,EAAiBl2B,IAAQm2B,IAG7D,SAASF,EAAmBj2B,GAC1B,GAAIl5B,MAAM8rB,QAAQoN,GAAM,CACtB,IAAK,IAAIzkC,EAAI,EAAG66D,EAAO,IAAItvD,MAAMk5B,EAAIliC,QAASvC,EAAIykC,EAAIliC,OAAQvC,IAAK66D,EAAK76D,GAAKykC,EAAIzkC,GAEjF,OAAO66D,GAIX,SAASF,EAAiBz3B,GACxB,GAAIniC,OAAO4S,YAAYjT,OAAOwiC,IAAkD,uBAAzCxiC,OAAOkB,UAAUkY,SAAS3Z,KAAK+iC,GAAgC,OAAO33B,MAAM6F,KAAK8xB,GAG1H,SAAS03B,IACP,MAAM,IAAIhqD,UAAU,mDAMtB,SAASkqD,IACP,MAA0B,qBAAZpB,SAA2BA,QAAQqB,gBAAkBrB,QAAQsB,mBAE7E,SAASC,EAAuBtxD,EAAIyH,GAClC8pD,EAAgBvxD,EAAIyH,GACpB1Q,OAAOiV,oBAAoBvE,EAAKxP,WAAWgZ,SAAQ,SAAUrZ,GAC3D25D,EAAgBvxD,EAAG/H,UAAWwP,EAAKxP,UAAWL,MAEhDb,OAAOiV,oBAAoBvE,GAAMwJ,SAAQ,SAAUrZ,GACjD25D,EAAgBvxD,EAAIyH,EAAM7P,MAI9B,SAAS25D,EAAgBvxD,EAAIyH,EAAM+pD,GACjC,IAAIC,EAAWD,EAAczB,QAAQsB,mBAAmB5pD,EAAM+pD,GAAezB,QAAQsB,mBAAmB5pD,GACxGgqD,EAASxgD,SAAQ,SAAUygD,GACzB,IAAItjC,EAAWojC,EAAczB,QAAQ4B,eAAeD,EAASjqD,EAAM+pD,GAAezB,QAAQ4B,eAAeD,EAASjqD,GAE9G+pD,EACFzB,QAAQqB,eAAeM,EAAStjC,EAAUpuB,EAAIwxD,GAE9CzB,QAAQqB,eAAeM,EAAStjC,EAAUpuB,MAKhD,IAAI4xD,EAAY,CACdjwD,UAAW,IAETkwD,EAAWD,aAAqBhwD,MACpC,SAASkwD,EAAgBr8D,GACvB,OAAO,SAAUwV,EAAQrT,EAAKsS,GAC5B,IAAIigC,EAAyB,oBAAXl/B,EAAwBA,EAASA,EAAOnJ,YAErDqoC,EAAK4nB,iBACR5nB,EAAK4nB,eAAiB,IAGH,kBAAV7nD,IACTA,OAAQrR,GAGVsxC,EAAK4nB,eAAehzD,MAAK,SAAU+L,GACjC,OAAOrV,EAAQqV,EAASlT,EAAKsS,OAanC,SAAS8nD,EAAY16D,GACnB,IAAIiM,EAAO,EAAQjM,GAEnB,OAAgB,MAATA,GAA0B,WAATiM,GAA8B,aAATA,EAQ/C,SAAS0uD,EAA2BC,EAAIC,GAEtC,IAAIC,EAAeD,EAAUl6D,UAAUo6D,MAEvCF,EAAUl6D,UAAUo6D,MAAQ,WAC1B,IAAI9yD,EAAQvJ,KAGRgZ,EAAOjY,OAAOiV,oBAAoBkmD,GAEtC,GAAIA,EAAGI,SAASjD,MACd,IAAK,IAAIz3D,KAAOs6D,EAAGI,SAASjD,MACrB6C,EAAGh6D,eAAeN,IACrBoX,EAAKjQ,KAAKnH,GAKhBoX,EAAKiC,SAAQ,SAAUrZ,GACC,MAAlBA,EAAIsX,OAAO,IACbnY,OAAOC,eAAeuI,EAAO3H,EAAK,CAChCV,IAAK,WACH,OAAOg7D,EAAGt6D,IAEZ+U,IAAK,SAAarV,GAChB46D,EAAGt6D,GAAON,GAEZ6U,cAAc,QAOtB,IAAIxH,EAAO,IAAIwtD,EAEfA,EAAUl6D,UAAUo6D,MAAQD,EAE5B,IAAIG,EAAY,GAahB,OAZAx7D,OAAOiY,KAAKrK,GAAMsM,SAAQ,SAAUrZ,QAChBiB,IAAd8L,EAAK/M,KACP26D,EAAU36D,GAAO+M,EAAK/M,OAUnB26D,EAGT,IAAIC,EAAiB,CAAC,OAAQ,eAAgB,UAAW,cAAe,UAAW,gBAAiB,YAAa,eAAgB,UAAW,YAAa,cAAe,SAAU,gBAAiB,kBAEnM,SAASC,EAAiBN,GACxB,IAAIrnD,EAAU7R,UAAUL,OAAS,QAAsBC,IAAjBI,UAAU,GAAmBA,UAAU,GAAK,GAClF6R,EAAQlU,KAAOkU,EAAQlU,MAAQu7D,EAAUO,eAAiBP,EAAUv7D,KAEpE,IAAIm8B,EAAQo/B,EAAUl6D,UACtBlB,OAAOiV,oBAAoB+mB,GAAO9hB,SAAQ,SAAUrZ,GAClD,GAAY,gBAARA,EAKJ,GAAI46D,EAAe1zD,QAAQlH,IAAQ,EACjCkT,EAAQlT,GAAOm7B,EAAMn7B,OADvB,CAKA,IAAIwT,EAAarU,OAAO2C,yBAAyBq5B,EAAOn7B,QAE/B,IAArBwT,EAAW9T,MAEmB,oBAArB8T,EAAW9T,OACnBwT,EAAQsnB,UAAYtnB,EAAQsnB,QAAU,KAAKx6B,GAAOwT,EAAW9T,OAG7DwT,EAAQ6nD,SAAW7nD,EAAQ6nD,OAAS,KAAK5zD,KAAK,CAC7C4F,KAAM,WACJ,OAAOksD,EAAgB,GAAIj5D,EAAKwT,EAAW9T,WAIxC8T,EAAWlU,KAAOkU,EAAWuB,QAErC7B,EAAQ8nD,WAAa9nD,EAAQ8nD,SAAW,KAAKh7D,GAAO,CACnDV,IAAKkU,EAAWlU,IAChByV,IAAKvB,EAAWuB,WAIrB7B,EAAQ6nD,SAAW7nD,EAAQ6nD,OAAS,KAAK5zD,KAAK,CAC7C4F,KAAM,WACJ,OAAOstD,EAA2Bj8D,KAAMm8D,MAI5C,IAAIxB,EAAawB,EAAUJ,eAEvBpB,IACFA,EAAW1/C,SAAQ,SAAUvY,GAC3B,OAAOA,EAAGoS,aAELqnD,EAAUJ,gBAInB,IAAIc,EAAa97D,OAAOu6B,eAAe6gC,EAAUl6D,WAC7Cw4D,EAAQoC,aAAsB,IAAMA,EAAW/wD,YAAc,IAC7DgxD,EAAWrC,EAAMvmB,OAAOp/B,GAO5B,OANAioD,EAAqBD,EAAUX,EAAW1B,GAEtCU,KACFG,EAAuBwB,EAAUX,GAG5BW,EAET,IAKIE,EAAe,CACjB/6D,WAAW,EACXgB,WAAW,EACXi0D,QAAQ,EACR+F,QAAQ,GAGV,SAASF,EAAqBD,EAAUI,EAAUzC,GAEhD15D,OAAOiV,oBAAoBknD,GAAUjiD,SAAQ,SAAUrZ,GAErD,IAAIo7D,EAAap7D,GAAjB,CAKA,IAAIu7D,EAAqBp8D,OAAO2C,yBAAyBo5D,EAAUl7D,GAEnE,IAAIu7D,GAAuBA,EAAmBhnD,aAA9C,CAIA,IAAIf,EAAarU,OAAO2C,yBAAyBw5D,EAAUt7D,GAQ3D,IAAKi6D,EAAU,CAIb,GAAY,QAARj6D,EACF,OAGF,IAAIw7D,EAAkBr8D,OAAO2C,yBAAyB+2D,EAAO74D,GAE7D,IAAKo6D,EAAY5mD,EAAW9T,QAAU87D,GAAmBA,EAAgB97D,QAAU8T,EAAW9T,MAC5F,OAKA,EAIJP,OAAOC,eAAe87D,EAAUl7D,EAAKwT,QAIzC,SAAS,EAAUN,GACjB,MAAuB,oBAAZA,EACF2nD,EAAiB3nD,GAGnB,SAAUqnD,GACf,OAAOM,EAAiBN,EAAWrnD,IAIvC,EAAUuoD,cAAgB,SAAuBrkD,GAC/CwjD,EAAezzD,KAAK/F,MAAMw5D,EAAgB1B,EAAmB9hD,KAGhD,QC9Mf,IAAIskD,EAAgD,qBAAZvD,SAA0D,qBAAxBA,QAAQwD,YAClF,SAASC,EAAc1oD,EAASG,EAAQrT,GACpC,GAAI07D,IACK1xD,MAAM8rB,QAAQ5iB,IACI,oBAAZA,GACiB,qBAAjBA,EAAQvH,KAAsB,CACrC,IAAIA,EAAOwsD,QAAQwD,YAAY,cAAetoD,EAAQrT,GAClD2L,IAASxM,SACT+T,EAAQvH,KAAOA,IA2BxB,SAASkwD,EAAK3oD,GAEjB,YADgB,IAAZA,IAAsBA,EAAU,IAC7B,SAAUG,EAAQrT,GACrB47D,EAAc1oD,EAASG,EAAQrT,GAC/Bk6D,GAAgB,SAAU4B,EAAkBC,IAEvCD,EAAiBrE,QAAUqE,EAAiBrE,MAAQ,KAAKsE,GAAK7oD,IAFnEgnD,CAGG7mD,EAAQrT,IA8GZ,SAASg8D,EAAIC,GAChB,OAAO/B,GAAgB,SAAUhnD,EAASlT,GACtCkT,EAAQ8nD,SAAW9nD,EAAQ8nD,UAAY,GACvC9nD,EAAQ8nD,SAASh7D,GAAO,CACpBgd,OAAO,EACP1d,IAAK,WACD,OAAOlB,KAAK89D,MAAMD,GAAUj8D,Q,yFCpQtCm8D,GAAQ,KAEd,qE,0BAiBI,EAAAC,eAA+B,KAC/B,EAAAC,YAA+E,GAC/E,EAAAC,YAAc,EACd,EAAAC,MAAQJ,GACR,EAAAK,SAAW,EACX,EAAAC,aAA8B,KAC9B,EAAAC,SAAU,EACV,EAAAC,cAAgB,EAxBpB,kDA2CQ,IAAMrvD,EAAQ,IAAItC,EAAA,SAAM,CACpBH,EAAGzM,KAAKwS,OACR9F,EAAG1M,KAAKwS,OACR6T,QAASrmB,KAAKwS,OACd8T,QAAStmB,KAAKwS,SAElBtD,EAAM4Y,IAAI,IAAI1V,EAAA,UAAO,CACjB3F,EAAGzM,KAAKwS,OACR9F,EAAG1M,KAAKwS,OACRA,OAAQxS,KAAKwS,OACb0T,SAAU,GACVwL,KAAM,aAKV,IAFA,IAAM8sC,EAAW,IAAMx+D,KAAKy+D,SACtBn4C,EAAUtmB,KAAKwS,OAA4B,GAAnBxS,KAAK0+D,YAC1Br+D,EAAI,EAAGA,EAAIL,KAAKy+D,SAAUp+D,IAC/B6O,EAAM4Y,IAAI,IAAI1V,EAAA,UAAO,CACjB3F,EAAGzM,KAAKwS,OACR9F,EAAG1M,KAAKwS,OACR8T,UACAJ,SAAUs4C,EAAWn+D,EACrBmS,OAAQxS,KAAK2+D,UACbjtC,KAAM1xB,KAAK4+D,UAAUv+D,EAAIL,KAAK4+D,UAAUh8D,QACxCi8D,WAAY,GACZC,YAAa9+D,KAAK4+D,UAAUv+D,EAAIL,KAAK4+D,UAAUh8D,WAGvD,OAAOsM,IAvEf,sCAuFQ,IAZS,WACHA,EAAQ,IAAItC,EAAA,SAAM,CACpBH,EAAGzM,KAAKwS,OACR9F,EAAG1M,KAAKwS,OACR6T,QAASrmB,KAAKwS,OACd8T,QAAStmB,KAAKwS,SAGZusD,EAAa,EAAIr2D,KAAK6B,GAAKvK,KAAKg/D,MAEhCC,EAAwB,IAAVv2D,KAAK6B,GAAWw0D,EAAa,EAC3CG,EAAWD,EAAaF,EAXrB,WAYA1+D,GAZA,MAakB,EAAK49D,YAAY59D,GAAhC8yB,EAbH,EAaGA,KAAMgsC,EAbT,EAaSA,KACdjwD,EAAM4Y,IAAI,IAAI/U,EAAA,SAAM,CAChBtG,EAAG,EAAK+F,OACR9F,EAAG,EAAK8F,OACRkf,KAAM,EAAK0tC,YAAY/+D,EAAI,EAAK++D,YAAYx8D,QAC5C2d,OAAQ,OACR0hC,YAAa,GACbod,UAAW,SAAC5wD,EAASV,GACjBU,EAAQuY,OAAO+3C,EAAa1+D,GAE5BoO,EAAQ6D,YACR7D,EAAQmZ,OAAO,EAAG,GAClBnZ,EAAQ8D,IAAI,EAAG,EAAG,EAAKC,OAAS,EAAKksD,YAAaO,EAAYC,GAAU,GACxEzwD,EAAQgE,YACRhE,EAAQiE,gBAAgB3E,GAExBU,EAAQ2R,OACR3R,EAAQ0R,SAASm/C,aAAe,MAChC7wD,EAAQ0R,SAASo/C,UAAY,UAC7B9wD,EAAQ0R,SAAS+T,KAAjB,UAA2B,EAAKnC,SAAhC,sBAZ0B,MAaRtjB,EAAQ0lB,YAAYhB,GAA9BhmB,EAbkB,EAalBA,MACFqyD,EAAQ,EAAKd,YAAc,GAAK,EAAKlsD,OAE3C,GADA/D,EAAQuiB,SAASmC,EAAe,IAARhmB,EAAaqyD,GACjCL,EAAM,CACN,IAAMM,EAAa,EAAKC,UAAYP,EAAKhyD,MAAQgyD,EAAK/xD,OACtDqB,EAAQiT,UAAUy9C,EAAwB,IAAjB,EAAKO,UAAiBF,EAAQ,EAAKztC,SAAW,GAAI,EAAK2tC,UAAWD,GAE/FhxD,EAAQ6R,eA5BXjgB,EAAI,EAAGA,EAAIL,KAAKg/D,MAAO3+D,IAAK,EAA5BA,GAgCT,OAAO6O,IAvHf,gCA0HW,WACGA,EAAQ,IAAItC,EAAA,SACZ+yD,EAAY3/D,KAAK4/D,QACjBC,EAAY7/D,KAAK4/D,QAAU,EAC3BE,EAAe,SAACrxD,EAAkBV,GACpC,IAAMyE,EAAiBzE,EAAMvF,QAAQ,UACrCiG,EAAQ6D,YAER,IAAM5F,EAAI,EAAK8F,OAAkB,IAATA,EACxB/D,EAAQmZ,OAAO,EAAKpV,OAAQ9F,GAC5B+B,EAAQ8D,IAAI,EAAKC,OAAQ,EAAKA,OAAQA,EAAmB,KAAV9J,KAAK6B,GAAW7B,KAAK6B,GAAe,IAAV7B,KAAK6B,IAAW,GACzFkE,EAAQgE,YACRhE,EAAQ6tC,UAAUvuC,IAGtBmB,EAAM4Y,IAAI,IAAI/U,EAAA,SAAM,CAChBssD,UAAWS,EACXpuC,KAAM,OACNmtC,WAAY,GACZC,YAAa,SACdx1D,QAAQ,SAAUq2D,IAErBzwD,EAAM4Y,IAAI,IAAI/U,EAAA,SAAM,CAChBssD,UAAWS,EACXpuC,KAAM,UACNmtC,WAAY,EACZC,YAAa,YACdx1D,QAAQ,SAAUu2D,IAErB,IAAM1sC,EAAO,IAAIvB,EAAA,QAAK,CAClBuB,KAAM,SACN1mB,EAAGzM,KAAKwS,OAASqtD,EACjBnzD,EAAG1M,KAAKwS,OAASqtD,EACjB1yD,MAAmB,EAAZ0yD,EACPzyD,OAAoB,EAAZyyD,EACRvtC,MAAO,SACPF,cAAe,SACfL,SAAU8tC,EAAY,IACtBtrC,WAAY,kBACZ7C,KAAM,SAUV,OARAyB,EAAK/U,GAAG,cAAc,WAClB,EAAK+P,UAAU8L,MAAM8lC,OAAS,aAElC5sC,EAAK/U,GAAG,YAAY,WAChB,EAAK+P,UAAU8L,MAAM8lC,OAAS,aAElC5sC,EAAK/U,GAAG,iBAAkBpe,KAAKggE,YAC/B9wD,EAAM4Y,IAAIqL,GACHjkB,IA3Kf,oMA+KiCo0B,QAAQgmB,IAAItpD,KAAKigE,OAAOjtB,KAAI,WAAiB3yC,GAAK,IAAnB8yB,EAAmB,EAAnBA,KAAMgsC,EAAa,EAAbA,KAC1D,OAAO,IAAI77B,SAAa,SAACvC,EAASC,GAE9B,IAAMokB,EAAQ,EAAK2Z,WAAa1+D,EAChC,IAAK8+D,EACD,OAAOp+B,EAAQ,CAAE5N,OAAMiyB,UAE3B,IAAMr6B,EAAMsP,SAAS9uB,cAAc,OACnCwf,EAAI+mB,OAAS,WACT/Q,EAAQ,CAAE5N,OAAMgsC,KAAMp0C,EAAKq6B,WAE/Br6B,EAAIm1C,QAAU,SAAA/9C,GAAC,OAAI6e,EAAO7e,IAC1B4I,EAAIoP,IAAMglC,SA3L1B,OA+KQn/D,KAAKi+D,YA/Kb,iKAiM4B,WACpB,GAAKj+D,KAAKs+D,QAAV,CAEAt+D,KAAKk+D,aAAel+D,KAAK++D,WAGzB,IAAMoB,EAAWz3D,KAAK+qB,MAAM/qB,KAAK4B,IAAItK,KAAKk+D,aAAe,KAErD9Y,EAAQplD,KAAKk+D,YAAmD,IAArCx1D,KAAK+qB,MAAMzzB,KAAKk+D,YAAc,KAChD,GAAT9Y,IAEAA,EAAQ,KAGR+a,EAAW,GAA0B,MAArBngE,KAAKq+D,cAAwBjZ,EAAQplD,KAAKi+D,YAAYj+D,KAAKq+D,cAAcjZ,OAAS,KAElGplD,KAAKu+D,gBAGLv+D,KAAKu+D,cAAgB,IACrBv+D,KAAKm+D,OAAS,KAASn+D,KAAKo+D,SAC5Bp+D,KAAKo+D,UAAY,IAErB,IAAIx3D,GAAA,SAAM,CACNvC,SAAUrE,KAAK++D,WAAa/+D,KAAKm+D,MACjC/5D,KAAMpE,KAAKg+D,eACX93C,SAAUlmB,KAAKk+D,YACf35D,SAAU,WAEoB,GAAtB,EAAKg6D,eAAsBnZ,EAAQ,EAAK6Y,YAAY,EAAKI,cAAejZ,OAAS,KACjF,EAAKz7C,OACL,EAAKy2D,MAAM,SAAU,EAAK/B,eAE1B,EAAKgC,8BAGdp6D,UArOX,4BAyOUiO,GACF,GAAIA,EAAQ,GAAKA,EAAQlU,KAAKg/D,MAAQ,EAElC,MADAh/D,KAAK2J,OACC,IAAIgX,MAAM,UAEpB3gB,KAAKq+D,aAAenqD,IA9O5B,6BAkPQlU,KAAKs+D,SAAU,IAlPvB,mCAwPYt+D,KAAKs+D,UAGTt+D,KAAKm+D,MAAQJ,GACb/9D,KAAKk+D,YAAc,EACnBl+D,KAAKu+D,cAAgB,EACrBv+D,KAAKo+D,SAAW,EAChBp+D,KAAKq+D,aAAe,KACpBr+D,KAAKs+D,SAAU,EACft+D,KAAKqgE,2BACLrgE,KAAKogE,MAAM,YAlQnB,gCAsQW,WACHpgE,KAAKsgE,UAAL,2BAAe,6GACL/1C,EAAQ,IAAIgmC,EAAA,SAAM,CACpBpiC,UAAW,EAAKA,UAChBhhB,MAAO,EAAK6d,KACZ5d,OAAQ,EAAK4d,OAGXu1C,EAAiB,EAAKC,cAE5B,IAAIh5D,EAAA,cAAU,WACV+4D,EAAev5C,OAAO,MACvBu5C,GAAgBt4D,QACnBsiB,EAAMzC,IAAIy4C,GAZC,SAeL,EAAKE,oBAfA,OAgBX,EAAKzC,eAAiB,EAAK0C,gBAC3Bn2C,EAAMzC,IAAI,EAAKk2C,gBAGfzzC,EAAMzC,IAAI,EAAK64C,WApBJ,8CAvQvB,6BA4BQ,MAAmB,GAAZ3gE,KAAKgrB,OA5BpB,4BAgCQ,OAAOhrB,KAAKigE,OAAOr9D,SAhC3B,iCAqCQ,OAAO,IAAM5C,KAAKg/D,UArC1B,GAA6B,KAGc,GAAtCvB,EAAK,CAAElwD,KAAM3B,MAAOg1D,UAAU,K,8BACO,GAArCnD,EAAK,CAAElwD,KAAM0lC,OAAQ4tB,QAAS,O,4BACM,GAApCpD,EAAK,CAAElwD,KAAM0lC,OAAQ4tB,QAAS,M,+BACM,GAApCpD,EAAK,CAAElwD,KAAM0lC,OAAQ4tB,QAAS,M,iCACM,GAApCpD,EAAK,CAAElwD,KAAM0lC,OAAQ4tB,QAAS,M,mCACM,GAApCpD,EAAK,CAAElwD,KAAM0lC,OAAQ4tB,QAAS,M,gCAC4B,GAA1DpD,EAAK,CAAElwD,KAAM3B,MAAOi1D,QAAS,iBAAM,CAAC,UAAW,Y,iCACX,GAApCpD,EAAK,CAAElwD,KAAM0lC,OAAQ4tB,QAAS,M,gCACK,GAAnCpD,EAAK,CAAElwD,KAAM0lC,OAAQ4tB,QAAS,K,iCAC+B,GAA7DpD,EAAK,CAAElwD,KAAM3B,MAAOi1D,QAAS,iBAAM,CAAC,UAAW,e,mCAG9B,GAAjBjD,EAAI,c,iCAfT,MADC,EAAU,CAAEh9D,KAAM,cAiSlB,I,UC9SkU,MCMpT,SAASkgE,GACtBC,EACA5I,EACAS,EACAoI,EACAC,EACAC,EACAC,EACAC,GAGA,IAqBIC,EArBAvsD,EAAmC,oBAAlBisD,EACjBA,EAAcjsD,QACdisD,EAsDJ,GAnDI5I,IACFrjD,EAAQqjD,OAASA,EACjBrjD,EAAQ8jD,gBAAkBA,EAC1B9jD,EAAQwsD,WAAY,GAIlBN,IACFlsD,EAAQysD,YAAa,GAInBL,IACFpsD,EAAQ0sD,SAAW,UAAYN,GAI7BC,GACFE,EAAO,SAAU5yD,GAEfA,EACEA,GACCzO,KAAKyhE,QAAUzhE,KAAKyhE,OAAOC,YAC3B1hE,KAAKiQ,QAAUjQ,KAAKiQ,OAAOwxD,QAAUzhE,KAAKiQ,OAAOwxD,OAAOC,WAEtDjzD,GAA0C,qBAAxBkzD,sBACrBlzD,EAAUkzD,qBAGRV,GACFA,EAAazgE,KAAKR,KAAMyO,GAGtBA,GAAWA,EAAQmzD,uBACrBnzD,EAAQmzD,sBAAsB95C,IAAIq5C,IAKtCrsD,EAAQ+sD,aAAeR,GACdJ,IACTI,EAAOD,EACH,WACAH,EAAazgE,KACXR,MACC8U,EAAQysD,WAAavhE,KAAKiQ,OAASjQ,MAAM8hE,MAAMxF,SAASyF,aAG3Dd,GAGFI,EACF,GAAIvsD,EAAQysD,WAAY,CAGtBzsD,EAAQktD,cAAgBX,EAExB,IAAIY,EAAiBntD,EAAQqjD,OAC7BrjD,EAAQqjD,OAAS,SAAmChlB,EAAG1kC,GAErD,OADA4yD,EAAK7gE,KAAKiO,GACHwzD,EAAe9uB,EAAG1kC,QAEtB,CAEL,IAAIyzD,EAAWptD,EAAQqtD,aACvBrtD,EAAQqtD,aAAeD,EACnB,GAAGnsD,OAAOmsD,EAAUb,GACpB,CAACA,GAIT,MAAO,CACL3hE,QAASqhE,EACTjsD,QAASA,GCxFb,IAAIqX,GAAY,GACd,GACAgsC,EACAS,GACA,EACA,KACA,KACA,MAIa,GAAAzsC,G,QChBA,IACXi2C,QAAS,SAAUC,GACfA,EAAIl2C,UAAU,WAAY,MCFnB,iB,qBCDf,IAAIquB,EAAgB,EAAQ,QACxB7jB,EAAyB,EAAQ,QAErCh3B,EAAOD,QAAU,SAAUqR,GACzB,OAAOypC,EAAc7jB,EAAuB5lB,M,kCCJ9C,IAAIvF,EAAaxL,MAAQA,KAAKwL,WAAc,WACxC,IAAIC,EAAgB,SAAU9K,EAAGoC,GAI7B,OAHA0I,EAAgB1K,OAAO2K,gBAClB,CAAEC,UAAW,cAAgBC,OAAS,SAAUjL,EAAGoC,GAAKpC,EAAEgL,UAAY5I,IACvE,SAAUpC,EAAGoC,GAAK,IAAK,IAAIZ,KAAKY,EAAOA,EAAEb,eAAeC,KAAIxB,EAAEwB,GAAKY,EAAEZ,KAClEsJ,EAAc9K,EAAGoC,IAE5B,OAAO,SAAUpC,EAAGoC,GAEhB,SAAS8I,IAAO7L,KAAK8L,YAAcnL,EADnC8K,EAAc9K,EAAGoC,GAEjBpC,EAAEsB,UAAkB,OAANc,EAAahC,OAAOY,OAAOoB,IAAM8I,EAAG5J,UAAYc,EAAEd,UAAW,IAAI4J,IAV3C,GAa5C9K,OAAOC,eAAetB,EAAS,aAAc,CAAE4B,OAAO,IACtD,IAWIguB,EAXAvrB,EAAS,EAAQ,QACjBiI,EAAY,EAAQ,QACpB/H,EAAS,EAAQ,QACjBmI,EAAe,EAAQ,QACvBlI,EAAW,EAAQ,QACnBopD,EAAgB,EAAQ,QACxBgV,EAAa,YACbC,EAAc,aACdC,EAAe,eACfC,EAAiB,iBACjBC,EAAiB,iBAErB,SAAS7xC,IACL,OAAIvB,IAGJA,EAAevrB,EAAOuD,KAAKwpB,sBAAsBvhB,WAAW,MACrD+f,GAGX,SAASyB,EAAUtiB,GACfA,EAAQijB,OAEZ,SAASN,EAAY3iB,GACjBA,EAAQ8R,SAEZ,SAASkiC,EAAah0C,GAClBA,EAAQijB,OAEZ,SAASkxB,EAAen0C,GACpBA,EAAQ8R,SAEZ,SAASoiD,IACL3iE,KAAKqe,YAAYikD,GAErB,SAASM,IACL5iE,KAAKqe,YAAYkkD,GAErB,SAASM,IACL7iE,KAAKqe,YAAYmkD,GAErB,SAASM,IACL9iE,KAAKqe,YAAYokD,GAErB,SAASM,IACL/iE,KAAKqe,YAAYqkD,GA1BrBhjE,EAAQoP,OAAS,GA4BjB,IAAIiE,EAAS,SAAUlG,GAEnB,SAASkG,EAAMlM,GACX,IACIjF,EADA2H,EAAQsD,EAAOrM,KAAKR,KAAM6G,IAAW7G,KAEzC,MAAO,EAEH,GADA4B,EAAMmC,EAAOuD,KAAK6qC,iBACdvwC,KAASA,KAAOlC,EAAQoP,QACxB,MAUR,OAPAvF,EAAMgF,SAAW3M,EACjBlC,EAAQoP,OAAOlN,GAAO2H,EACtBA,EAAM6U,GAAG,8HAA+HukD,GACxIp5D,EAAM6U,GAAG,8EAA+EwkD,GACxFr5D,EAAM6U,GAAG,kJAAmJykD,GAC5Jt5D,EAAM6U,GAAG,wOAAyO0kD,GAClPv5D,EAAM6U,GAAG,0TAA2T2kD,GAC7Tx5D,EAgWX,OAjXAiC,EAAUuH,EAAOlG,GAmBjBkG,EAAM9Q,UAAUsN,WAAa,WACzB,OAAOvP,KAAKmH,WAAWoI,cAE3BwD,EAAM9Q,UAAUmN,UAAY,WACxB,OAAOpP,KAAKmH,WAAWiI,aAE3B2D,EAAM9Q,UAAU+gE,aAAe,WAC3B,OAAOhjE,KAAK4H,MAAMy3D,WAAar/D,KAAK,eAExC+S,EAAM9Q,UAAUghE,WAAa,WACzB,OAAOjjE,KAAK4H,MAAMs7D,SAAWljE,KAAK,aAEtC+S,EAAM9Q,UAAUkhE,UAAY,WACxB,OAAOnjE,KAAK0e,UAAU4jD,EAAYtiE,KAAKojE,aAE3CrwD,EAAM9Q,UAAUmhE,WAAa,WACzB,OAAQpjE,KAAKqjE,iBACgB,IAAzBrjE,KAAKsjE,oBACFtjE,KAAK8+D,eACJ9+D,KAAK6+D,cACL7+D,KAAKujE,iBACLvjE,KAAKwjE,kBAEjBzwD,EAAM9Q,UAAUu+C,gBAAkB,WAC9B,OAAOxgD,KAAK0e,UAAU8jD,EAAcxiE,KAAKyjE,mBAE7C1wD,EAAM9Q,UAAUwhE,iBAAmB,WAC/B,GAAIzjE,KAAKyxB,mBAAoB,CACzB,IAAIy+B,EAAMr/B,IACN6yC,EAAUxT,EAAI5R,cAAct+C,KAAKyxB,mBAAoBzxB,KAAK2jE,qBAAuB,UACrF,OAAOD,IAGf3wD,EAAM9Q,UAAU0+C,mBAAqB,WACjC,OAAO3gD,KAAK0e,UAAU+jD,EAAgBziE,KAAK4jE,sBAE/C7wD,EAAM9Q,UAAU2hE,oBAAsB,WAClC,IAAIliB,EAAa1hD,KAAKuxB,+BACtB,GAAImwB,EAAY,CAKZ,IAJA,IAAIwO,EAAMr/B,IACN5oB,EAAQjI,KAAK6jE,+BACb77D,EAAMhI,KAAK8jE,6BACXpjB,EAAMwP,EAAI7R,qBAAqBp2C,EAAMwE,EAAGxE,EAAMyE,EAAG1E,EAAIyE,EAAGzE,EAAI0E,GACvD5K,EAAI,EAAGA,EAAI4/C,EAAW9+C,OAAQd,GAAK,EACxC4+C,EAAIkB,aAAaF,EAAW5/C,GAAI4/C,EAAW5/C,EAAI,IAEnD,OAAO4+C,IAGf3tC,EAAM9Q,UAAU4+C,mBAAqB,WACjC,OAAO7gD,KAAK0e,UAAUgkD,EAAgB1iE,KAAK+jE,sBAE/ChxD,EAAM9Q,UAAU8hE,oBAAsB,WAClC,IAAIriB,EAAa1hD,KAAKwxB,+BACtB,GAAIkwB,EAAY,CAKZ,IAJA,IAAIwO,EAAMr/B,IACN5oB,EAAQjI,KAAKgkE,+BACbh8D,EAAMhI,KAAKikE,6BACXvjB,EAAMwP,EAAI3R,qBAAqBt2C,EAAMwE,EAAGxE,EAAMyE,EAAG1M,KAAKkkE,gCAAiCl8D,EAAIyE,EAAGzE,EAAI0E,EAAG1M,KAAKmkE,+BACrGriE,EAAI,EAAGA,EAAI4/C,EAAW9+C,OAAQd,GAAK,EACxC4+C,EAAIkB,aAAaF,EAAW5/C,GAAI4/C,EAAW5/C,EAAI,IAEnD,OAAO4+C,IAGf3tC,EAAM9Q,UAAUmgD,cAAgB,WAC5B,OAAOpiD,KAAK0e,UAAU6jD,EAAaviE,KAAKokE,iBAE5CrxD,EAAM9Q,UAAUmiE,eAAiB,WAC7B,GAAIpkE,KAAKmjE,YAAa,CAClB,IAAIkB,EAAOtgE,EAAOuD,KAAK2B,YAAYjJ,KAAK8+D,eACxC,MAAQ,QACJuF,EAAKljE,EACL,IACAkjE,EAAKn7D,EACL,IACAm7D,EAAKthE,EACL,IACAshE,EAAKvhE,GAAK9C,KAAKsjE,iBAAmB,GAClC,MAGZvwD,EAAM9Q,UAAUqiE,QAAU,WACtB,OAAQtkE,KAAKu8C,kBACNv8C,KAAK0xB,QACJ1xB,KAAKyxB,oBACLzxB,KAAKuxB,gCACLvxB,KAAKwxB,iCAEjBze,EAAM9Q,UAAUy6C,UAAY,WACxB,OAAQ18C,KAAKukE,iBACTvkE,KAAKiiD,kBACFjiD,KAAKugB,WAAYvgB,KAAKwkE,mCAEjCzxD,EAAM9Q,UAAUygD,aAAe,WAC3B,IAAIv1C,EAAQnN,KAAK2iD,iBACjB,MAAc,SAAVx1C,EACOnN,KAAK08C,YAET18C,KAAKukE,mBAAqBp3D,GAErC4F,EAAM9Q,UAAUiqD,WAAa,SAAUvyC,GACnC,IAAsExX,EAAlEooB,EAAQvqB,KAAKklB,WAAYqsC,EAAkBhnC,EAAMgnC,gBAIrD,OAHAA,EAAgBhiD,aAAaC,QAC7BxP,KAAK0P,QAAQ6hD,GACbpvD,EAAIovD,EAAgB9iD,QAAQC,aAAahG,KAAKW,MAAMsQ,EAAMlN,GAAI/D,KAAKW,MAAMsQ,EAAMjN,GAAI,EAAG,GAAGiC,KAClFxM,EAAE,GAAK,GAElB4Q,EAAM9Q,UAAU4H,QAAU,WAItB,OAHA5F,EAAO8F,KAAK9H,UAAU4H,QAAQrJ,KAAKR,aAC5BN,EAAQoP,OAAO9O,KAAKuO,iBACpBvO,KAAKuO,SACLvO,MAEX+S,EAAM9Q,UAAUwiE,iBAAmB,SAAUtY,GACzC,QAAYA,IAAWnsD,KAAKmjE,cACxBnjE,KAAK0kE,sBACyB,IAA9B1kE,KAAKwnB,uBACLxnB,KAAKskE,YACLtkE,KAAK08C,cACL18C,KAAKklB,aAEbnS,EAAM9Q,UAAU0iE,oBAAsB,SAAU1qD,GAC5ClW,EAAOuD,KAAKmT,KAAK,+EACbR,EACAja,KAAK2iD,eAAe,QAGpB3iD,KAAK2iD,eAAe,IAG5B5vC,EAAM9Q,UAAU2iE,oBAAsB,WAClC,OAA8B,IAA1B5kE,KAAK2iD,kBAOb5vC,EAAM9Q,UAAU4iE,YAAc,WAC1B,IAAI75C,EAAOhrB,KAAKgrB,OAChB,MAAO,CACHve,EAAGzM,KAAKgT,WAAagY,EAAK7d,MAAQ,EAAI,EACtCT,EAAG1M,KAAKgT,WAAagY,EAAK5d,OAAS,EAAI,EACvCD,MAAO6d,EAAK7d,MACZC,OAAQ4d,EAAK5d,SAGrB2F,EAAM9Q,UAAUmd,cAAgB,SAAUxX,GACtCA,EAAQA,GAAS,GACjB,IAAIyX,EAAgBzX,EAAMyX,cACtBC,EAAa1X,EAAM0X,WACnBu/B,EAAW7+C,KAAK6kE,cAChBC,GAAel9D,EAAMwlD,YAAcptD,KAAK08C,YACxCuF,EAAe6iB,GAAe9kE,KAAKiiD,eAAkB,EACrD8iB,EAAqBlmB,EAAS1xC,MAAQ80C,EACtC+iB,EAAsBnmB,EAASzxC,OAAS60C,EACxCgjB,GAAer9D,EAAMulD,YAAcntD,KAAKmjE,YACxCI,EAAgB0B,EAAcjlE,KAAKujE,gBAAkB,EACrDC,EAAgByB,EAAcjlE,KAAKwjE,gBAAkB,EACrD0B,EAAWH,EAAqBr8D,KAAK4B,IAAIi5D,GACzC4B,EAAYH,EAAsBt8D,KAAK4B,IAAIk5D,GAC3C4B,EAAcH,GAAejlE,KAAK6+D,cAAiB,EACnD1xD,EAAQ+3D,EAAwB,EAAbE,EACnBh4D,EAAS+3D,EAAyB,EAAbC,EACrBC,EAAiB,EACjB38D,KAAKW,MAAM44C,EAAc,KAAOA,EAAc,IAC9CojB,EAAiB,GAErB,IAAIlmD,EAAO,CACPhS,MAAOA,EAAQk4D,EACfj4D,OAAQA,EAASi4D,EACjB54D,GAAI/D,KAAKW,MAAM44C,EAAc,EAAImjB,GAC7B18D,KAAK4L,IAAIivD,EAAe,GACxB1kB,EAASpyC,EACbC,GAAIhE,KAAKW,MAAM44C,EAAc,EAAImjB,GAC7B18D,KAAK4L,IAAIkvD,EAAe,GACxB3kB,EAASnyC,GAEjB,OAAK2S,EAGEF,EAFInf,KAAK4gB,iBAAiBzB,EAAMG,IAI3CvM,EAAM9Q,UAAU8M,UAAY,SAAUC,EAAKC,EAAKk9C,EAASG,GACrD,IAA+N/hC,EAAO+mC,EAAcgU,EAAhPp2D,EAAQlP,KAAKmH,WAAYgI,EAASH,GAAOE,EAAME,YAAaX,EAAUU,EAAOI,aAAcuS,EAAe9hB,KAAK6e,kBAAmB0mD,EAAWvlE,KAAKq/D,YAAa8D,EAAYnjE,KAAKmjE,YAAazmB,EAAY18C,KAAK08C,YAClN,IAAK18C,KAAKiO,cAAgBk+C,EACtB,OAAOnsD,KAEX,GAAI8hB,EAKA,OAJArT,EAAQ2R,OACRlR,EAAMi1C,gBAAgBnkD,KAAMyO,EAASQ,GACrCjP,KAAKohB,uBAAuB3S,GAC5BA,EAAQ6R,UACDtgB,KAEX,IAAKulE,EACD,OAAOvlE,KAGX,GADAyO,EAAQ2R,OACJpgB,KAAKykE,iBAAiBtY,KAAaG,EAAY,CAO/C,GANA/hC,EAAQvqB,KAAKklB,WACbosC,EAAe/mC,EAAM+mC,aACrBgU,EAAgBhU,EAAa/hD,aAC7B+1D,EAAc91D,QACd81D,EAAcllD,OACdklD,EAAc9nB,eAAex9C,OACxBmsD,EACD,GAAIj9C,EACAA,EAAMi1C,gBAAgBnkD,KAAMslE,EAAer2D,OAE1C,CACD,IAAIxO,EAAIT,KAAKkhB,qBAAqBjS,GAAKsW,YACvC9W,EAAQmb,UAAUnpB,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAIA,EAAE,IAG1D8kE,EAAS/kE,KAAKR,KAAMslE,EAAetlE,MACnCslE,EAAchlD,UACd,IAAI9R,EAAQ8iD,EAAatkD,WACrBm2D,IAAch0D,EAAOrC,WACrB2B,EAAQ2R,OACR3R,EAAQ0zC,aAAaniD,MACrByO,EAAQ4S,cAAcrhB,MACtByO,EAAQ6S,+BAA+BthB,MACvCyO,EAAQiT,UAAU4vC,EAAanhD,QAAS,EAAG,EAAGmhD,EAAankD,MAAQqB,EAAO8iD,EAAalkD,OAASoB,GAChGC,EAAQ6R,YAGR7R,EAAQ4S,cAAcrhB,MACtByO,EAAQ6S,+BAA+BthB,MACvCyO,EAAQiT,UAAU4vC,EAAanhD,QAAS,EAAG,EAAGmhD,EAAankD,MAAQqB,EAAO8iD,EAAalkD,OAASoB,QAGnG,CAED,GADAC,EAAQ+uC,eAAex9C,OAClBmsD,EACD,GAAIj9C,EACAA,EAAMi1C,gBAAgBnkD,KAAMyO,EAASQ,OAEpC,CACD,IAAInO,EAAId,KAAKkhB,qBAAqBjS,GAAKsW,YACvC9W,EAAQmb,UAAU9oB,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAIA,EAAE,IAGtDqiE,GAAazmB,IAAcvtC,EAAOrC,WAClC2B,EAAQ2R,OACH+rC,IACD19C,EAAQ4S,cAAcrhB,MACtByO,EAAQ6S,+BAA+BthB,OAE3CyO,EAAQ0zC,aAAaniD,MACrBulE,EAAS/kE,KAAKR,KAAMyO,EAASzO,MAC7ByO,EAAQ6R,UACJtgB,KAAKskE,WAAatkE,KAAKwlE,0BACvBD,EAAS/kE,KAAKR,KAAMyO,EAASzO,OAG5BmjE,IAAch0D,EAAOrC,WAC1B2B,EAAQ2R,OACH+rC,IACD19C,EAAQ4S,cAAcrhB,MACtByO,EAAQ6S,+BAA+BthB,OAE3CyO,EAAQ0zC,aAAaniD,MACrBulE,EAAS/kE,KAAKR,KAAMyO,EAASzO,MAC7ByO,EAAQ6R,YAGH6rC,IACD19C,EAAQ4S,cAAcrhB,MACtByO,EAAQ6S,+BAA+BthB,OAE3CulE,EAAS/kE,KAAKR,KAAMyO,EAASzO,OAIrC,OADAyO,EAAQ6R,UACDtgB,MAEX+S,EAAM9Q,UAAUyN,QAAU,SAAUV,EAAKC,EAAKk9C,GAC1C,IAAIj9C,EAAQlP,KAAKmH,WAAYgI,EAASH,GAAOE,EAAMpC,UAAW2B,EAAUU,GAAUA,EAAOI,aAAcg2D,EAAWvlE,KAAKkjE,WAAaljE,KAAKq/D,YAAav9C,EAAe9hB,KAAK6e,kBAAmBiB,EAAkBgC,GAAgBA,EAAapB,IAK5O,GAJK1gB,KAAKuO,WACNwL,QAAQ0rD,IAAIzlE,MACZ+D,EAAOuD,KAAKmT,KAAK,0MAEhBza,KAAKykB,kBAAoB0nC,EAC1B,OAAOnsD,KAEX,GAAI8f,EAKA,OAJArR,EAAQ2R,OACRlR,EAAMi1C,gBAAgBnkD,KAAMyO,EAASQ,GACrCjP,KAAK2hB,qBAAqBlT,GAC1BA,EAAQ6R,UACDtgB,KAEX,IAAKulE,EACD,OAAOvlE,KAIX,GAFAyO,EAAQ2R,OACR3R,EAAQ+uC,eAAex9C,OAClBmsD,EACD,GAAIj9C,EACAA,EAAMi1C,gBAAgBnkD,KAAMyO,EAASQ,OAEpC,CACD,IAAInO,EAAId,KAAKkhB,qBAAqBjS,GAAKsW,YACvC9W,EAAQmb,UAAU9oB,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAIA,EAAE,IAK1D,OAFAykE,EAAS/kE,KAAKR,KAAMyO,EAASzO,MAC7ByO,EAAQ6R,UACDtgB,MAEX+S,EAAM9Q,UAAUyjE,iBAAmB,SAAUC,QAClB,IAAnBA,IAA6BA,EAAiB,GAClD,IAA8NC,EAAcC,EAASz9D,EAAK09D,EAAazlE,EAAG0lE,EAAtQjkD,EAAe9hB,KAAK6e,kBAAmBkD,EAAc/hB,KAAKyhB,wBAAyB3U,EAAYgV,EAAapB,IAAKV,EAAalT,EAAUyC,aAAcy2D,EAAWl5D,EAAU6F,WAAYszD,EAAYn5D,EAAU8F,YACjNoN,EAAWxQ,QACXwQ,EAAW0B,UAAUK,EAAY5R,QAAS,EAAG,EAAG61D,EAAUC,GAC1D,IAKI,IAJAL,EAAe5lD,EAAWtR,aAAa,EAAG,EAAGs3D,EAAUC,GACvDJ,EAAUD,EAAaj3D,KACvBvG,EAAMy9D,EAAQjjE,OACdkjE,EAAc/hE,EAAOuD,KAAKyqC,UAAU/xC,KAAKuO,UACpClO,EAAI,EAAGA,EAAI+H,EAAK/H,GAAK,EACtB0lE,EAAQF,EAAQxlE,EAAI,GAChB0lE,EAAQJ,GACRE,EAAQxlE,GAAKylE,EAAY3kE,EACzB0kE,EAAQxlE,EAAI,GAAKylE,EAAY58D,EAC7B28D,EAAQxlE,EAAI,GAAKylE,EAAY/iE,EAC7B8iE,EAAQxlE,EAAI,GAAK,KAGjBwlE,EAAQxlE,EAAI,GAAK,EAGzB2f,EAAWkC,aAAa0jD,EAAc,EAAG,GAE7C,MAAOzjD,GACHpe,EAAOuD,KAAKxD,MAAM,sDAAwDqe,EAAEC,SAEhF,OAAOpiB,MAEX+S,EAAM9Q,UAAU+4B,kBAAoB,SAAUtO,GAC1C,OAAO4gC,EAActyB,kBAAkBtO,EAAW1sB,OAEtD+S,EAAM9Q,UAAUg5B,kBAAoB,SAAUvO,GAC1C4gC,EAAcryB,kBAAkBvO,EAAW1sB,OAE/C+S,EAAM9Q,UAAUi5B,eAAiB,SAAUxO,GACvC4gC,EAAcpyB,eAAexO,EAAW1sB,OAErC+S,EAlXC,CAmXV9O,EAAO8F,MACTrK,EAAQqT,MAAQA,EAChBA,EAAM9Q,UAAU8uB,UAAYA,EAC5Bhe,EAAM9Q,UAAUmvB,YAAcA,EAC9Bre,EAAM9Q,UAAUwgD,aAAeA,EAC/B1vC,EAAM9Q,UAAU2gD,eAAiBA,EACjC7vC,EAAM9Q,UAAU+Q,WAAY,EAC5BD,EAAM9Q,UAAUuO,SAAW,QAC3BtM,EAASuM,cAAcsC,GACvB/G,EAAU0E,QAAQC,gBAAgBoC,EAAO,cAAUlQ,EAAWuJ,EAAayO,sBAC3E7O,EAAU0E,QAAQC,gBAAgBoC,EAAO,cAAe,EAAG3G,EAAa+G,sBACxEnH,EAAU0E,QAAQC,gBAAgBoC,EAAO,iBAAkB,OAAQ3G,EAAasO,4BAChF1O,EAAU0E,QAAQC,gBAAgBoC,EAAO,oBAAoB,EAAM3G,EAAawE,uBAChF5E,EAAU0E,QAAQC,gBAAgBoC,EAAO,sBAAsB,EAAM3G,EAAawE,uBAClF5E,EAAU0E,QAAQC,gBAAgBoC,EAAO,0BAA0B,EAAM3G,EAAawE,uBACtF5E,EAAU0E,QAAQC,gBAAgBoC,EAAO,YACzC/G,EAAU0E,QAAQC,gBAAgBoC,EAAO,WACzC/G,EAAU0E,QAAQC,gBAAgBoC,EAAO,aACzC/G,EAAU0E,QAAQC,gBAAgBoC,EAAO,WACzC/G,EAAU0E,QAAQC,gBAAgBoC,EAAO,QACzC/G,EAAU0E,QAAQC,gBAAgBoC,EAAO,aAAc,EAAG3G,EAAa+G,sBACvEnH,EAAU0E,QAAQC,gBAAgBoC,EAAO,mBAAelQ,EAAWuJ,EAAayO,sBAChF7O,EAAU0E,QAAQC,gBAAgBoC,EAAO,aAAc,EAAG3G,EAAa+G,sBACvEnH,EAAU0E,QAAQC,gBAAgBoC,EAAO,gBAAiB,EAAG3G,EAAa+G,sBAC1EnH,EAAU0E,QAAQ8d,0BAA0Bzb,EAAO,eAAgB,CAAC,IAAK,MACzE/G,EAAU0E,QAAQC,gBAAgBoC,EAAO,gBAAiB,EAAG3G,EAAa+G,sBAC1EnH,EAAU0E,QAAQC,gBAAgBoC,EAAO,gBAAiB,EAAG3G,EAAa+G,sBAC1EnH,EAAU0E,QAAQC,gBAAgBoC,EAAO,oBACzC/G,EAAU0E,QAAQC,gBAAgBoC,EAAO,YAAQlQ,EAAWuJ,EAAayO,sBACzE7O,EAAU0E,QAAQC,gBAAgBoC,EAAO,eAAgB,EAAG3G,EAAa+G,sBACzEnH,EAAU0E,QAAQC,gBAAgBoC,EAAO,eAAgB,EAAG3G,EAAa+G,sBACzEnH,EAAU0E,QAAQC,gBAAgBoC,EAAO,gCACzC/G,EAAU0E,QAAQC,gBAAgBoC,EAAO,kCACzC/G,EAAU0E,QAAQC,gBAAgBoC,EAAO,gCAAiC,GAC1E/G,EAAU0E,QAAQC,gBAAgBoC,EAAO,8BAA+B,GACxE/G,EAAU0E,QAAQC,gBAAgBoC,EAAO,gCACzC/G,EAAU0E,QAAQC,gBAAgBoC,EAAO,oBAAqB,UAC9D/G,EAAU0E,QAAQC,gBAAgBoC,EAAO,eAAe,GACxD/G,EAAU0E,QAAQC,gBAAgBoC,EAAO,iBAAiB,GAC1D/G,EAAU0E,QAAQC,gBAAgBoC,EAAO,iBAAiB,GAC1D/G,EAAU0E,QAAQC,gBAAgBoC,EAAO,eAAe,GACxD/G,EAAU0E,QAAQC,gBAAgBoC,EAAO,sBAAsB,GAC/D/G,EAAU0E,QAAQC,gBAAgBoC,EAAO,eAAgB,SACzD/G,EAAU0E,QAAQ8d,0BAA0Bzb,EAAO,oBAAqB,CAAC,IAAK,MAC9E/G,EAAU0E,QAAQC,gBAAgBoC,EAAO,qBAAsB,EAAG3G,EAAa+G,sBAC/EnH,EAAU0E,QAAQC,gBAAgBoC,EAAO,qBAAsB,EAAG3G,EAAa+G,sBAC/EnH,EAAU0E,QAAQ8d,0BAA0Bzb,EAAO,mBAAoB,CAAC,IAAK,MAC7E/G,EAAU0E,QAAQC,gBAAgBoC,EAAO,oBAAqB,EAAG3G,EAAa+G,sBAC9EnH,EAAU0E,QAAQC,gBAAgBoC,EAAO,oBAAqB,EAAG3G,EAAa+G,sBAC9EnH,EAAU0E,QAAQ8d,0BAA0Bzb,EAAO,+BAAgC,CAC/E,IACA,MAEJ/G,EAAU0E,QAAQ8d,0BAA0Bzb,EAAO,iCAAkC,CACjF,IACA,MAEJ/G,EAAU0E,QAAQC,gBAAgBoC,EAAO,gCAAiC,GAC1E/G,EAAU0E,QAAQC,gBAAgBoC,EAAO,kCAAmC,GAC5E/G,EAAU0E,QAAQC,gBAAgBoC,EAAO,gCAAiC,GAC1E/G,EAAU0E,QAAQC,gBAAgBoC,EAAO,kCAAmC,GAC5E/G,EAAU0E,QAAQ8d,0BAA0Bzb,EAAO,6BAA8B,CAC7E,IACA,MAEJ/G,EAAU0E,QAAQ8d,0BAA0Bzb,EAAO,+BAAgC,CAC/E,IACA,MAEJ/G,EAAU0E,QAAQC,gBAAgBoC,EAAO,8BAA+B,GACxE/G,EAAU0E,QAAQC,gBAAgBoC,EAAO,gCAAiC,GAC1E/G,EAAU0E,QAAQC,gBAAgBoC,EAAO,8BAA+B,GACxE/G,EAAU0E,QAAQC,gBAAgBoC,EAAO,gCAAiC,GAC1E/G,EAAU0E,QAAQ8d,0BAA0Bzb,EAAO,+BAAgC,CAC/E,IACA,MAEJ/G,EAAU0E,QAAQC,gBAAgBoC,EAAO,gCAAiC,GAC1E/G,EAAU0E,QAAQC,gBAAgBoC,EAAO,gCAAiC,GAC1E/G,EAAU0E,QAAQ8d,0BAA0Bzb,EAAO,6BAA8B,CAC7E,IACA,MAEJ/G,EAAU0E,QAAQC,gBAAgBoC,EAAO,8BAA+B,GACxE/G,EAAU0E,QAAQC,gBAAgBoC,EAAO,8BAA+B,GACxE/G,EAAU0E,QAAQC,gBAAgBoC,EAAO,sBAAuB,GAChE/G,EAAU0E,QAAQge,WAAW3b,EAAO,CAChCmzD,UAAW,OACXC,aAAc,UACdC,aAAc,UACdb,SAAU,YACVc,YAAa,eACbC,YAAa,eACbC,YAAa,UACbC,eAAgB,aAChBC,eAAgB,eAEpB1iE,EAAO8M,WAAWC,WAAWiC,I,mBChhB7BpT,EAAOD,QAAU,CACfgnE,YAAa,EACbC,oBAAqB,EACrBC,aAAc,EACdC,eAAgB,EAChBC,YAAa,EACbC,cAAe,EACfC,aAAc,EACdC,qBAAsB,EACtBC,SAAU,EACVC,kBAAmB,EACnBC,eAAgB,EAChBC,gBAAiB,EACjBC,kBAAmB,EACnBC,UAAW,EACXC,cAAe,EACfC,aAAc,EACdC,SAAU,EACVC,iBAAkB,EAClBC,OAAQ,EACRC,YAAa,EACbC,cAAe,EACfC,cAAe,EACfC,eAAgB,EAChBC,aAAc,EACdC,cAAe,EACfC,iBAAkB,EAClBC,iBAAkB,EAClBC,eAAgB,EAChBC,iBAAkB,EAClBC,cAAe,EACfC,UAAW,I,qBCjCb,IAAIruB,EAAgB,EAAQ,QAE5Bx6C,EAAOD,QAAUy6C,IAEX/4C,OAAOuU,MAEkB,iBAAnBvU,OAAO4S,U,qBCNnB,IAAIQ,EAAS,EAAQ,QAErB7U,EAAOD,QAAU8U,EAAO8uB","file":"luckdraw.umd.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"vue\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"luckdraw\"] = factory(require(\"vue\"));\n\telse\n\t\troot[\"luckdraw\"] = factory(root[\"Vue\"]);\n})((typeof self !== 'undefined' ? self : this), function(__WEBPACK_EXTERNAL_MODULE__8bbf__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"fb15\");\n","var wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\nvar test = {};\n\ntest[TO_STRING_TAG] = 'z';\n\nmodule.exports = String(test) === '[object z]';\n","var aFunction = require('../internals/a-function');\n\n// optional / simple context binding\nmodule.exports = function (fn, that, length) {\n  aFunction(fn);\n  if (that === undefined) return fn;\n  switch (length) {\n    case 0: return function () {\n      return fn.call(that);\n    };\n    case 1: return function (a) {\n      return fn.call(that, a);\n    };\n    case 2: return function (a, b) {\n      return fn.call(that, a, b);\n    };\n    case 3: return function (a, b, c) {\n      return fn.call(that, a, b, c);\n    };\n  }\n  return function (/* ...args */) {\n    return fn.apply(that, arguments);\n  };\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar propertyIsEnumerableModule = require('../internals/object-property-is-enumerable');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar toPrimitive = require('../internals/to-primitive');\nvar has = require('../internals/has');\nvar IE8_DOM_DEFINE = require('../internals/ie8-dom-define');\n\nvar nativeGetOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n\n// `Object.getOwnPropertyDescriptor` method\n// https://tc39.github.io/ecma262/#sec-object.getownpropertydescriptor\nexports.f = DESCRIPTORS ? nativeGetOwnPropertyDescriptor : function getOwnPropertyDescriptor(O, P) {\n  O = toIndexedObject(O);\n  P = toPrimitive(P, true);\n  if (IE8_DOM_DEFINE) try {\n    return nativeGetOwnPropertyDescriptor(O, P);\n  } catch (error) { /* empty */ }\n  if (has(O, P)) return createPropertyDescriptor(!propertyIsEnumerableModule.f.call(O, P), O[P]);\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Util_1 = require(\"./Util\");\nvar Animation_1 = require(\"./Animation\");\nvar Node_1 = require(\"./Node\");\nvar Global_1 = require(\"./Global\");\nvar blacklist = {\n    node: 1,\n    duration: 1,\n    easing: 1,\n    onFinish: 1,\n    yoyo: 1\n}, PAUSED = 1, PLAYING = 2, REVERSING = 3, idCounter = 0, colorAttrs = ['fill', 'stroke', 'shadowColor'];\nvar TweenEngine = (function () {\n    function TweenEngine(prop, propFunc, func, begin, finish, duration, yoyo) {\n        this.prop = prop;\n        this.propFunc = propFunc;\n        this.begin = begin;\n        this._pos = begin;\n        this.duration = duration;\n        this._change = 0;\n        this.prevPos = 0;\n        this.yoyo = yoyo;\n        this._time = 0;\n        this._position = 0;\n        this._startTime = 0;\n        this._finish = 0;\n        this.func = func;\n        this._change = finish - this.begin;\n        this.pause();\n    }\n    TweenEngine.prototype.fire = function (str) {\n        var handler = this[str];\n        if (handler) {\n            handler();\n        }\n    };\n    TweenEngine.prototype.setTime = function (t) {\n        if (t > this.duration) {\n            if (this.yoyo) {\n                this._time = this.duration;\n                this.reverse();\n            }\n            else {\n                this.finish();\n            }\n        }\n        else if (t < 0) {\n            if (this.yoyo) {\n                this._time = 0;\n                this.play();\n            }\n            else {\n                this.reset();\n            }\n        }\n        else {\n            this._time = t;\n            this.update();\n        }\n    };\n    TweenEngine.prototype.getTime = function () {\n        return this._time;\n    };\n    TweenEngine.prototype.setPosition = function (p) {\n        this.prevPos = this._pos;\n        this.propFunc(p);\n        this._pos = p;\n    };\n    TweenEngine.prototype.getPosition = function (t) {\n        if (t === undefined) {\n            t = this._time;\n        }\n        return this.func(t, this.begin, this._change, this.duration);\n    };\n    TweenEngine.prototype.play = function () {\n        this.state = PLAYING;\n        this._startTime = this.getTimer() - this._time;\n        this.onEnterFrame();\n        this.fire('onPlay');\n    };\n    TweenEngine.prototype.reverse = function () {\n        this.state = REVERSING;\n        this._time = this.duration - this._time;\n        this._startTime = this.getTimer() - this._time;\n        this.onEnterFrame();\n        this.fire('onReverse');\n    };\n    TweenEngine.prototype.seek = function (t) {\n        this.pause();\n        this._time = t;\n        this.update();\n        this.fire('onSeek');\n    };\n    TweenEngine.prototype.reset = function () {\n        this.pause();\n        this._time = 0;\n        this.update();\n        this.fire('onReset');\n    };\n    TweenEngine.prototype.finish = function () {\n        this.pause();\n        this._time = this.duration;\n        this.update();\n        this.fire('onFinish');\n    };\n    TweenEngine.prototype.update = function () {\n        this.setPosition(this.getPosition(this._time));\n    };\n    TweenEngine.prototype.onEnterFrame = function () {\n        var t = this.getTimer() - this._startTime;\n        if (this.state === PLAYING) {\n            this.setTime(t);\n        }\n        else if (this.state === REVERSING) {\n            this.setTime(this.duration - t);\n        }\n    };\n    TweenEngine.prototype.pause = function () {\n        this.state = PAUSED;\n        this.fire('onPause');\n    };\n    TweenEngine.prototype.getTimer = function () {\n        return new Date().getTime();\n    };\n    return TweenEngine;\n}());\nvar Tween = (function () {\n    function Tween(config) {\n        var that = this, node = config.node, nodeId = node._id, duration, easing = config.easing || exports.Easings.Linear, yoyo = !!config.yoyo, key;\n        if (typeof config.duration === 'undefined') {\n            duration = 0.3;\n        }\n        else if (config.duration === 0) {\n            duration = 0.001;\n        }\n        else {\n            duration = config.duration;\n        }\n        this.node = node;\n        this._id = idCounter++;\n        var layers = node.getLayer() ||\n            (node instanceof Global_1.Konva['Stage'] ? node.getLayers() : null);\n        if (!layers) {\n            Util_1.Util.error('Tween constructor have `node` that is not in a layer. Please add node into layer first.');\n        }\n        this.anim = new Animation_1.Animation(function () {\n            that.tween.onEnterFrame();\n        }, layers);\n        this.tween = new TweenEngine(key, function (i) {\n            that._tweenFunc(i);\n        }, easing, 0, 1, duration * 1000, yoyo);\n        this._addListeners();\n        if (!Tween.attrs[nodeId]) {\n            Tween.attrs[nodeId] = {};\n        }\n        if (!Tween.attrs[nodeId][this._id]) {\n            Tween.attrs[nodeId][this._id] = {};\n        }\n        if (!Tween.tweens[nodeId]) {\n            Tween.tweens[nodeId] = {};\n        }\n        for (key in config) {\n            if (blacklist[key] === undefined) {\n                this._addAttr(key, config[key]);\n            }\n        }\n        this.reset();\n        this.onFinish = config.onFinish;\n        this.onReset = config.onReset;\n    }\n    Tween.prototype._addAttr = function (key, end) {\n        var node = this.node, nodeId = node._id, start, diff, tweenId, n, len, trueEnd, trueStart, endRGBA;\n        tweenId = Tween.tweens[nodeId][key];\n        if (tweenId) {\n            delete Tween.attrs[nodeId][tweenId][key];\n        }\n        start = node.getAttr(key);\n        if (Util_1.Util._isArray(end)) {\n            diff = [];\n            len = Math.max(end.length, start.length);\n            if (key === 'points' && end.length !== start.length) {\n                if (end.length > start.length) {\n                    trueStart = start;\n                    start = Util_1.Util._prepareArrayForTween(start, end, node.closed());\n                }\n                else {\n                    trueEnd = end;\n                    end = Util_1.Util._prepareArrayForTween(end, start, node.closed());\n                }\n            }\n            if (key.indexOf('fill') === 0) {\n                for (n = 0; n < len; n++) {\n                    if (n % 2 === 0) {\n                        diff.push(end[n] - start[n]);\n                    }\n                    else {\n                        var startRGBA = Util_1.Util.colorToRGBA(start[n]);\n                        endRGBA = Util_1.Util.colorToRGBA(end[n]);\n                        start[n] = startRGBA;\n                        diff.push({\n                            r: endRGBA.r - startRGBA.r,\n                            g: endRGBA.g - startRGBA.g,\n                            b: endRGBA.b - startRGBA.b,\n                            a: endRGBA.a - startRGBA.a\n                        });\n                    }\n                }\n            }\n            else {\n                for (n = 0; n < len; n++) {\n                    diff.push(end[n] - start[n]);\n                }\n            }\n        }\n        else if (colorAttrs.indexOf(key) !== -1) {\n            start = Util_1.Util.colorToRGBA(start);\n            endRGBA = Util_1.Util.colorToRGBA(end);\n            diff = {\n                r: endRGBA.r - start.r,\n                g: endRGBA.g - start.g,\n                b: endRGBA.b - start.b,\n                a: endRGBA.a - start.a\n            };\n        }\n        else {\n            diff = end - start;\n        }\n        Tween.attrs[nodeId][this._id][key] = {\n            start: start,\n            diff: diff,\n            end: end,\n            trueEnd: trueEnd,\n            trueStart: trueStart\n        };\n        Tween.tweens[nodeId][key] = this._id;\n    };\n    Tween.prototype._tweenFunc = function (i) {\n        var node = this.node, attrs = Tween.attrs[node._id][this._id], key, attr, start, diff, newVal, n, len, end;\n        for (key in attrs) {\n            attr = attrs[key];\n            start = attr.start;\n            diff = attr.diff;\n            end = attr.end;\n            if (Util_1.Util._isArray(start)) {\n                newVal = [];\n                len = Math.max(start.length, end.length);\n                if (key.indexOf('fill') === 0) {\n                    for (n = 0; n < len; n++) {\n                        if (n % 2 === 0) {\n                            newVal.push((start[n] || 0) + diff[n] * i);\n                        }\n                        else {\n                            newVal.push('rgba(' +\n                                Math.round(start[n].r + diff[n].r * i) +\n                                ',' +\n                                Math.round(start[n].g + diff[n].g * i) +\n                                ',' +\n                                Math.round(start[n].b + diff[n].b * i) +\n                                ',' +\n                                (start[n].a + diff[n].a * i) +\n                                ')');\n                        }\n                    }\n                }\n                else {\n                    for (n = 0; n < len; n++) {\n                        newVal.push((start[n] || 0) + diff[n] * i);\n                    }\n                }\n            }\n            else if (colorAttrs.indexOf(key) !== -1) {\n                newVal =\n                    'rgba(' +\n                        Math.round(start.r + diff.r * i) +\n                        ',' +\n                        Math.round(start.g + diff.g * i) +\n                        ',' +\n                        Math.round(start.b + diff.b * i) +\n                        ',' +\n                        (start.a + diff.a * i) +\n                        ')';\n            }\n            else {\n                newVal = start + diff * i;\n            }\n            node.setAttr(key, newVal);\n        }\n    };\n    Tween.prototype._addListeners = function () {\n        var _this = this;\n        this.tween.onPlay = function () {\n            _this.anim.start();\n        };\n        this.tween.onReverse = function () {\n            _this.anim.start();\n        };\n        this.tween.onPause = function () {\n            _this.anim.stop();\n        };\n        this.tween.onFinish = function () {\n            var node = _this.node;\n            var attrs = Tween.attrs[node._id][_this._id];\n            if (attrs.points && attrs.points.trueEnd) {\n                node.setAttr('points', attrs.points.trueEnd);\n            }\n            if (_this.onFinish) {\n                _this.onFinish.call(_this);\n            }\n        };\n        this.tween.onReset = function () {\n            var node = _this.node;\n            var attrs = Tween.attrs[node._id][_this._id];\n            if (attrs.points && attrs.points.trueStart) {\n                node.points(attrs.points.trueStart);\n            }\n            if (_this.onReset) {\n                _this.onReset();\n            }\n        };\n    };\n    Tween.prototype.play = function () {\n        this.tween.play();\n        return this;\n    };\n    Tween.prototype.reverse = function () {\n        this.tween.reverse();\n        return this;\n    };\n    Tween.prototype.reset = function () {\n        this.tween.reset();\n        return this;\n    };\n    Tween.prototype.seek = function (t) {\n        this.tween.seek(t * 1000);\n        return this;\n    };\n    Tween.prototype.pause = function () {\n        this.tween.pause();\n        return this;\n    };\n    Tween.prototype.finish = function () {\n        this.tween.finish();\n        return this;\n    };\n    Tween.prototype.destroy = function () {\n        var nodeId = this.node._id, thisId = this._id, attrs = Tween.tweens[nodeId], key;\n        this.pause();\n        for (key in attrs) {\n            delete Tween.tweens[nodeId][key];\n        }\n        delete Tween.attrs[nodeId][thisId];\n    };\n    Tween.attrs = {};\n    Tween.tweens = {};\n    return Tween;\n}());\nexports.Tween = Tween;\nNode_1.Node.prototype.to = function (params) {\n    var onFinish = params.onFinish;\n    params.node = this;\n    params.onFinish = function () {\n        this.destroy();\n        if (onFinish) {\n            onFinish();\n        }\n    };\n    var tween = new Tween(params);\n    tween.play();\n};\nexports.Easings = {\n    BackEaseIn: function (t, b, c, d) {\n        var s = 1.70158;\n        return c * (t /= d) * t * ((s + 1) * t - s) + b;\n    },\n    BackEaseOut: function (t, b, c, d) {\n        var s = 1.70158;\n        return c * ((t = t / d - 1) * t * ((s + 1) * t + s) + 1) + b;\n    },\n    BackEaseInOut: function (t, b, c, d) {\n        var s = 1.70158;\n        if ((t /= d / 2) < 1) {\n            return (c / 2) * (t * t * (((s *= 1.525) + 1) * t - s)) + b;\n        }\n        return (c / 2) * ((t -= 2) * t * (((s *= 1.525) + 1) * t + s) + 2) + b;\n    },\n    ElasticEaseIn: function (t, b, c, d, a, p) {\n        var s = 0;\n        if (t === 0) {\n            return b;\n        }\n        if ((t /= d) === 1) {\n            return b + c;\n        }\n        if (!p) {\n            p = d * 0.3;\n        }\n        if (!a || a < Math.abs(c)) {\n            a = c;\n            s = p / 4;\n        }\n        else {\n            s = (p / (2 * Math.PI)) * Math.asin(c / a);\n        }\n        return (-(a *\n            Math.pow(2, 10 * (t -= 1)) *\n            Math.sin(((t * d - s) * (2 * Math.PI)) / p)) + b);\n    },\n    ElasticEaseOut: function (t, b, c, d, a, p) {\n        var s = 0;\n        if (t === 0) {\n            return b;\n        }\n        if ((t /= d) === 1) {\n            return b + c;\n        }\n        if (!p) {\n            p = d * 0.3;\n        }\n        if (!a || a < Math.abs(c)) {\n            a = c;\n            s = p / 4;\n        }\n        else {\n            s = (p / (2 * Math.PI)) * Math.asin(c / a);\n        }\n        return (a * Math.pow(2, -10 * t) * Math.sin(((t * d - s) * (2 * Math.PI)) / p) +\n            c +\n            b);\n    },\n    ElasticEaseInOut: function (t, b, c, d, a, p) {\n        var s = 0;\n        if (t === 0) {\n            return b;\n        }\n        if ((t /= d / 2) === 2) {\n            return b + c;\n        }\n        if (!p) {\n            p = d * (0.3 * 1.5);\n        }\n        if (!a || a < Math.abs(c)) {\n            a = c;\n            s = p / 4;\n        }\n        else {\n            s = (p / (2 * Math.PI)) * Math.asin(c / a);\n        }\n        if (t < 1) {\n            return (-0.5 *\n                (a *\n                    Math.pow(2, 10 * (t -= 1)) *\n                    Math.sin(((t * d - s) * (2 * Math.PI)) / p)) +\n                b);\n        }\n        return (a *\n            Math.pow(2, -10 * (t -= 1)) *\n            Math.sin(((t * d - s) * (2 * Math.PI)) / p) *\n            0.5 +\n            c +\n            b);\n    },\n    BounceEaseOut: function (t, b, c, d) {\n        if ((t /= d) < 1 / 2.75) {\n            return c * (7.5625 * t * t) + b;\n        }\n        else if (t < 2 / 2.75) {\n            return c * (7.5625 * (t -= 1.5 / 2.75) * t + 0.75) + b;\n        }\n        else if (t < 2.5 / 2.75) {\n            return c * (7.5625 * (t -= 2.25 / 2.75) * t + 0.9375) + b;\n        }\n        else {\n            return c * (7.5625 * (t -= 2.625 / 2.75) * t + 0.984375) + b;\n        }\n    },\n    BounceEaseIn: function (t, b, c, d) {\n        return c - exports.Easings.BounceEaseOut(d - t, 0, c, d) + b;\n    },\n    BounceEaseInOut: function (t, b, c, d) {\n        if (t < d / 2) {\n            return exports.Easings.BounceEaseIn(t * 2, 0, c, d) * 0.5 + b;\n        }\n        else {\n            return exports.Easings.BounceEaseOut(t * 2 - d, 0, c, d) * 0.5 + c * 0.5 + b;\n        }\n    },\n    EaseIn: function (t, b, c, d) {\n        return c * (t /= d) * t + b;\n    },\n    EaseOut: function (t, b, c, d) {\n        return -c * (t /= d) * (t - 2) + b;\n    },\n    EaseInOut: function (t, b, c, d) {\n        if ((t /= d / 2) < 1) {\n            return (c / 2) * t * t + b;\n        }\n        return (-c / 2) * (--t * (t - 2) - 1) + b;\n    },\n    StrongEaseIn: function (t, b, c, d) {\n        return c * (t /= d) * t * t * t * t + b;\n    },\n    StrongEaseOut: function (t, b, c, d) {\n        return c * ((t = t / d - 1) * t * t * t * t + 1) + b;\n    },\n    StrongEaseInOut: function (t, b, c, d) {\n        if ((t /= d / 2) < 1) {\n            return (c / 2) * t * t * t * t * t + b;\n        }\n        return (c / 2) * ((t -= 2) * t * t * t * t + 2) + b;\n    },\n    Linear: function (t, b, c, d) {\n        return (c * t) / d + b;\n    }\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar fails = require('../internals/fails');\nvar createElement = require('../internals/document-create-element');\n\n// Thank's IE8 for his funny defineProperty\nmodule.exports = !DESCRIPTORS && !fails(function () {\n  return Object.defineProperty(createElement('div'), 'a', {\n    get: function () { return 7; }\n  }).a != 7;\n});\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Util_1 = require(\"./Util\");\nvar Container_1 = require(\"./Container\");\nvar Factory_1 = require(\"./Factory\");\nvar BaseLayer_1 = require(\"./BaseLayer\");\nvar Canvas_1 = require(\"./Canvas\");\nvar Shape_1 = require(\"./Shape\");\nvar Validators_1 = require(\"./Validators\");\nvar Global_1 = require(\"./Global\");\nvar HASH = '#', BEFORE_DRAW = 'beforeDraw', DRAW = 'draw', INTERSECTION_OFFSETS = [\n    { x: 0, y: 0 },\n    { x: -1, y: -1 },\n    { x: 1, y: -1 },\n    { x: 1, y: 1 },\n    { x: -1, y: 1 }\n], INTERSECTION_OFFSETS_LEN = INTERSECTION_OFFSETS.length;\nvar Layer = (function (_super) {\n    __extends(Layer, _super);\n    function Layer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.hitCanvas = new Canvas_1.HitCanvas({\n            pixelRatio: 1\n        });\n        return _this;\n    }\n    Layer.prototype.setSize = function (_a) {\n        var width = _a.width, height = _a.height;\n        _super.prototype.setSize.call(this, { width: width, height: height });\n        this.hitCanvas.setSize(width, height);\n        return this;\n    };\n    Layer.prototype._validateAdd = function (child) {\n        var type = child.getType();\n        if (type !== 'Group' && type !== 'Shape') {\n            Util_1.Util.throw('You may only add groups and shapes to a layer.');\n        }\n    };\n    Layer.prototype.getIntersection = function (pos, selector) {\n        var obj, i, intersectionOffset, shape;\n        if (!this.hitGraphEnabled() || !this.isVisible()) {\n            return null;\n        }\n        var spiralSearchDistance = 1;\n        var continueSearch = false;\n        while (true) {\n            for (i = 0; i < INTERSECTION_OFFSETS_LEN; i++) {\n                intersectionOffset = INTERSECTION_OFFSETS[i];\n                obj = this._getIntersection({\n                    x: pos.x + intersectionOffset.x * spiralSearchDistance,\n                    y: pos.y + intersectionOffset.y * spiralSearchDistance\n                });\n                shape = obj.shape;\n                if (shape && selector) {\n                    return shape.findAncestor(selector, true);\n                }\n                else if (shape) {\n                    return shape;\n                }\n                continueSearch = !!obj.antialiased;\n                if (!obj.antialiased) {\n                    break;\n                }\n            }\n            if (continueSearch) {\n                spiralSearchDistance += 1;\n            }\n            else {\n                return null;\n            }\n        }\n    };\n    Layer.prototype._getIntersection = function (pos) {\n        var ratio = this.hitCanvas.pixelRatio;\n        var p = this.hitCanvas.context.getImageData(Math.round(pos.x * ratio), Math.round(pos.y * ratio), 1, 1).data, p3 = p[3], colorKey, shape;\n        if (p3 === 255) {\n            colorKey = Util_1.Util._rgbToHex(p[0], p[1], p[2]);\n            shape = Shape_1.shapes[HASH + colorKey];\n            if (shape) {\n                return {\n                    shape: shape\n                };\n            }\n            return {\n                antialiased: true\n            };\n        }\n        else if (p3 > 0) {\n            return {\n                antialiased: true\n            };\n        }\n        return {};\n    };\n    Layer.prototype.drawScene = function (can, top) {\n        var layer = this.getLayer(), canvas = can || (layer && layer.getCanvas());\n        this._fire(BEFORE_DRAW, {\n            node: this\n        });\n        if (this.clearBeforeDraw()) {\n            canvas.getContext().clear();\n        }\n        Container_1.Container.prototype.drawScene.call(this, canvas, top);\n        this._fire(DRAW, {\n            node: this\n        });\n        return this;\n    };\n    Layer.prototype.drawHit = function (can, top) {\n        var layer = this.getLayer(), canvas = can || (layer && layer.hitCanvas);\n        if (layer && layer.clearBeforeDraw()) {\n            layer\n                .getHitCanvas()\n                .getContext()\n                .clear();\n        }\n        Container_1.Container.prototype.drawHit.call(this, canvas, top);\n        return this;\n    };\n    Layer.prototype.clear = function (bounds) {\n        BaseLayer_1.BaseLayer.prototype.clear.call(this, bounds);\n        this.getHitCanvas()\n            .getContext()\n            .clear(bounds);\n        return this;\n    };\n    Layer.prototype.enableHitGraph = function () {\n        this.hitGraphEnabled(true);\n        return this;\n    };\n    Layer.prototype.disableHitGraph = function () {\n        this.hitGraphEnabled(false);\n        return this;\n    };\n    Layer.prototype.toggleHitCanvas = function () {\n        if (!this.parent) {\n            return;\n        }\n        var parent = this.parent;\n        var added = !!this.hitCanvas._canvas.parentNode;\n        if (added) {\n            parent.content.removeChild(this.hitCanvas._canvas);\n        }\n        else {\n            parent.content.appendChild(this.hitCanvas._canvas);\n        }\n    };\n    return Layer;\n}(BaseLayer_1.BaseLayer));\nexports.Layer = Layer;\nLayer.prototype.nodeType = 'Layer';\nGlobal_1._registerNode(Layer);\nFactory_1.Factory.addGetterSetter(Layer, 'hitGraphEnabled', true, Validators_1.getBooleanValidator());\nUtil_1.Collection.mapMethods(Layer);\n","module.exports = function (it, Constructor, name) {\n  if (!(it instanceof Constructor)) {\n    throw TypeError('Incorrect ' + (name ? name + ' ' : '') + 'invocation');\n  } return it;\n};\n","var getBuiltIn = require('../internals/get-built-in');\n\nmodule.exports = getBuiltIn('document', 'documentElement');\n","module.exports = function (it) {\n  if (typeof it != 'function') {\n    throw TypeError(String(it) + ' is not a function');\n  } return it;\n};\n","var wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar ITERATOR = wellKnownSymbol('iterator');\nvar SAFE_CLOSING = false;\n\ntry {\n  var called = 0;\n  var iteratorWithReturn = {\n    next: function () {\n      return { done: !!called++ };\n    },\n    'return': function () {\n      SAFE_CLOSING = true;\n    }\n  };\n  iteratorWithReturn[ITERATOR] = function () {\n    return this;\n  };\n  // eslint-disable-next-line no-throw-literal\n  Array.from(iteratorWithReturn, function () { throw 2; });\n} catch (error) { /* empty */ }\n\nmodule.exports = function (exec, SKIP_CLOSING) {\n  if (!SKIP_CLOSING && !SAFE_CLOSING) return false;\n  var ITERATION_SUPPORT = false;\n  try {\n    var object = {};\n    object[ITERATOR] = function () {\n      return {\n        next: function () {\n          return { done: ITERATION_SUPPORT = true };\n        }\n      };\n    };\n    exec(object);\n  } catch (error) { /* empty */ }\n  return ITERATION_SUPPORT;\n};\n","var userAgent = require('../internals/engine-user-agent');\n\nmodule.exports = /(iphone|ipod|ipad).*applewebkit/i.test(userAgent);\n","// `RequireObjectCoercible` abstract operation\n// https://tc39.github.io/ecma262/#sec-requireobjectcoercible\nmodule.exports = function (it) {\n  if (it == undefined) throw TypeError(\"Can't call method on \" + it);\n  return it;\n};\n","var fails = require('../internals/fails');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar V8_VERSION = require('../internals/engine-v8-version');\n\nvar SPECIES = wellKnownSymbol('species');\n\nmodule.exports = function (METHOD_NAME) {\n  // We can't use this feature detection in V8 since it causes\n  // deoptimization and serious performance degradation\n  // https://github.com/zloirock/core-js/issues/677\n  return V8_VERSION >= 51 || !fails(function () {\n    var array = [];\n    var constructor = array.constructor = {};\n    constructor[SPECIES] = function () {\n      return { foo: 1 };\n    };\n    return array[METHOD_NAME](Boolean).foo !== 1;\n  });\n};\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Util_1 = require(\"../Util\");\nvar Factory_1 = require(\"../Factory\");\nvar Shape_1 = require(\"../Shape\");\nvar Validators_1 = require(\"../Validators\");\nvar Global_1 = require(\"../Global\");\nvar Circle = (function (_super) {\n    __extends(Circle, _super);\n    function Circle() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Circle.prototype._sceneFunc = function (context) {\n        context.beginPath();\n        context.arc(0, 0, this.radius(), 0, Math.PI * 2, false);\n        context.closePath();\n        context.fillStrokeShape(this);\n    };\n    Circle.prototype.getWidth = function () {\n        return this.radius() * 2;\n    };\n    Circle.prototype.getHeight = function () {\n        return this.radius() * 2;\n    };\n    Circle.prototype.setWidth = function (width) {\n        if (this.radius() !== width / 2) {\n            this.radius(width / 2);\n        }\n    };\n    Circle.prototype.setHeight = function (height) {\n        if (this.radius() !== height / 2) {\n            this.radius(height / 2);\n        }\n    };\n    return Circle;\n}(Shape_1.Shape));\nexports.Circle = Circle;\nCircle.prototype._centroid = true;\nCircle.prototype.className = 'Circle';\nCircle.prototype._attrsAffectingSize = ['radius'];\nGlobal_1._registerNode(Circle);\nFactory_1.Factory.addGetterSetter(Circle, 'radius', 0, Validators_1.getNumberValidator());\nUtil_1.Collection.mapMethods(Circle);\n","var anObject = require('../internals/an-object');\nvar isArrayIteratorMethod = require('../internals/is-array-iterator-method');\nvar toLength = require('../internals/to-length');\nvar bind = require('../internals/function-bind-context');\nvar getIteratorMethod = require('../internals/get-iterator-method');\nvar callWithSafeIterationClosing = require('../internals/call-with-safe-iteration-closing');\n\nvar Result = function (stopped, result) {\n  this.stopped = stopped;\n  this.result = result;\n};\n\nvar iterate = module.exports = function (iterable, fn, that, AS_ENTRIES, IS_ITERATOR) {\n  var boundFunction = bind(fn, that, AS_ENTRIES ? 2 : 1);\n  var iterator, iterFn, index, length, result, next, step;\n\n  if (IS_ITERATOR) {\n    iterator = iterable;\n  } else {\n    iterFn = getIteratorMethod(iterable);\n    if (typeof iterFn != 'function') throw TypeError('Target is not iterable');\n    // optimisation for array iterators\n    if (isArrayIteratorMethod(iterFn)) {\n      for (index = 0, length = toLength(iterable.length); length > index; index++) {\n        result = AS_ENTRIES\n          ? boundFunction(anObject(step = iterable[index])[0], step[1])\n          : boundFunction(iterable[index]);\n        if (result && result instanceof Result) return result;\n      } return new Result(false);\n    }\n    iterator = iterFn.call(iterable);\n  }\n\n  next = iterator.next;\n  while (!(step = next.call(iterator)).done) {\n    result = callWithSafeIterationClosing(iterator, boundFunction, step.value, AS_ENTRIES);\n    if (typeof result == 'object' && result && result instanceof Result) return result;\n  } return new Result(false);\n};\n\niterate.stop = function (result) {\n  return new Result(true, result);\n};\n","var toInteger = require('../internals/to-integer');\n\nvar max = Math.max;\nvar min = Math.min;\n\n// Helper for a popular repeating case of the spec:\n// Let integer be ? ToInteger(index).\n// If integer < 0, let result be max((length + integer), 0); else let result be min(integer, length).\nmodule.exports = function (index, length) {\n  var integer = toInteger(index);\n  return integer < 0 ? max(integer + length, 0) : min(integer, length);\n};\n","var global = require('../internals/global');\nvar getOwnPropertyDescriptor = require('../internals/object-get-own-property-descriptor').f;\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar redefine = require('../internals/redefine');\nvar setGlobal = require('../internals/set-global');\nvar copyConstructorProperties = require('../internals/copy-constructor-properties');\nvar isForced = require('../internals/is-forced');\n\n/*\n  options.target      - name of the target object\n  options.global      - target is the global object\n  options.stat        - export as static methods of target\n  options.proto       - export as prototype methods of target\n  options.real        - real prototype method for the `pure` version\n  options.forced      - export even if the native feature is available\n  options.bind        - bind methods to the target, required for the `pure` version\n  options.wrap        - wrap constructors to preventing global pollution, required for the `pure` version\n  options.unsafe      - use the simple assignment of property instead of delete + defineProperty\n  options.sham        - add a flag to not completely full polyfills\n  options.enumerable  - export as enumerable property\n  options.noTargetGet - prevent calling a getter on target\n*/\nmodule.exports = function (options, source) {\n  var TARGET = options.target;\n  var GLOBAL = options.global;\n  var STATIC = options.stat;\n  var FORCED, target, key, targetProperty, sourceProperty, descriptor;\n  if (GLOBAL) {\n    target = global;\n  } else if (STATIC) {\n    target = global[TARGET] || setGlobal(TARGET, {});\n  } else {\n    target = (global[TARGET] || {}).prototype;\n  }\n  if (target) for (key in source) {\n    sourceProperty = source[key];\n    if (options.noTargetGet) {\n      descriptor = getOwnPropertyDescriptor(target, key);\n      targetProperty = descriptor && descriptor.value;\n    } else targetProperty = target[key];\n    FORCED = isForced(GLOBAL ? key : TARGET + (STATIC ? '.' : '#') + key, options.forced);\n    // contained in target\n    if (!FORCED && targetProperty !== undefined) {\n      if (typeof sourceProperty === typeof targetProperty) continue;\n      copyConstructorProperties(sourceProperty, targetProperty);\n    }\n    // add a flag to not completely full polyfills\n    if (options.sham || (targetProperty && targetProperty.sham)) {\n      createNonEnumerableProperty(sourceProperty, 'sham', true);\n    }\n    // extend global\n    redefine(target, key, sourceProperty, options);\n  }\n};\n","var internalObjectKeys = require('../internals/object-keys-internal');\nvar enumBugKeys = require('../internals/enum-bug-keys');\n\nvar hiddenKeys = enumBugKeys.concat('length', 'prototype');\n\n// `Object.getOwnPropertyNames` method\n// https://tc39.github.io/ecma262/#sec-object.getownpropertynames\nexports.f = Object.getOwnPropertyNames || function getOwnPropertyNames(O) {\n  return internalObjectKeys(O, hiddenKeys);\n};\n","'use strict';\nvar getBuiltIn = require('../internals/get-built-in');\nvar definePropertyModule = require('../internals/object-define-property');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar DESCRIPTORS = require('../internals/descriptors');\n\nvar SPECIES = wellKnownSymbol('species');\n\nmodule.exports = function (CONSTRUCTOR_NAME) {\n  var Constructor = getBuiltIn(CONSTRUCTOR_NAME);\n  var defineProperty = definePropertyModule.f;\n\n  if (DESCRIPTORS && Constructor && !Constructor[SPECIES]) {\n    defineProperty(Constructor, SPECIES, {\n      configurable: true,\n      get: function () { return this; }\n    });\n  }\n};\n","var global = require('../internals/global');\nvar fails = require('../internals/fails');\nvar classof = require('../internals/classof-raw');\nvar bind = require('../internals/function-bind-context');\nvar html = require('../internals/html');\nvar createElement = require('../internals/document-create-element');\nvar IS_IOS = require('../internals/engine-is-ios');\n\nvar location = global.location;\nvar set = global.setImmediate;\nvar clear = global.clearImmediate;\nvar process = global.process;\nvar MessageChannel = global.MessageChannel;\nvar Dispatch = global.Dispatch;\nvar counter = 0;\nvar queue = {};\nvar ONREADYSTATECHANGE = 'onreadystatechange';\nvar defer, channel, port;\n\nvar run = function (id) {\n  // eslint-disable-next-line no-prototype-builtins\n  if (queue.hasOwnProperty(id)) {\n    var fn = queue[id];\n    delete queue[id];\n    fn();\n  }\n};\n\nvar runner = function (id) {\n  return function () {\n    run(id);\n  };\n};\n\nvar listener = function (event) {\n  run(event.data);\n};\n\nvar post = function (id) {\n  // old engines have not location.origin\n  global.postMessage(id + '', location.protocol + '//' + location.host);\n};\n\n// Node.js 0.9+ & IE10+ has setImmediate, otherwise:\nif (!set || !clear) {\n  set = function setImmediate(fn) {\n    var args = [];\n    var i = 1;\n    while (arguments.length > i) args.push(arguments[i++]);\n    queue[++counter] = function () {\n      // eslint-disable-next-line no-new-func\n      (typeof fn == 'function' ? fn : Function(fn)).apply(undefined, args);\n    };\n    defer(counter);\n    return counter;\n  };\n  clear = function clearImmediate(id) {\n    delete queue[id];\n  };\n  // Node.js 0.8-\n  if (classof(process) == 'process') {\n    defer = function (id) {\n      process.nextTick(runner(id));\n    };\n  // Sphere (JS game engine) Dispatch API\n  } else if (Dispatch && Dispatch.now) {\n    defer = function (id) {\n      Dispatch.now(runner(id));\n    };\n  // Browsers with MessageChannel, includes WebWorkers\n  // except iOS - https://github.com/zloirock/core-js/issues/624\n  } else if (MessageChannel && !IS_IOS) {\n    channel = new MessageChannel();\n    port = channel.port2;\n    channel.port1.onmessage = listener;\n    defer = bind(port.postMessage, port, 1);\n  // Browsers with postMessage, skip WebWorkers\n  // IE8 has postMessage, but it's sync & typeof its postMessage is 'object'\n  } else if (\n    global.addEventListener &&\n    typeof postMessage == 'function' &&\n    !global.importScripts &&\n    !fails(post) &&\n    location.protocol !== 'file:'\n  ) {\n    defer = post;\n    global.addEventListener('message', listener, false);\n  // IE8-\n  } else if (ONREADYSTATECHANGE in createElement('script')) {\n    defer = function (id) {\n      html.appendChild(createElement('script'))[ONREADYSTATECHANGE] = function () {\n        html.removeChild(this);\n        run(id);\n      };\n    };\n  // Rest old browsers\n  } else {\n    defer = function (id) {\n      setTimeout(runner(id), 0);\n    };\n  }\n}\n\nmodule.exports = {\n  set: set,\n  clear: clear\n};\n","var global = require('../internals/global');\nvar userAgent = require('../internals/engine-user-agent');\n\nvar process = global.process;\nvar versions = process && process.versions;\nvar v8 = versions && versions.v8;\nvar match, version;\n\nif (v8) {\n  match = v8.split('.');\n  version = match[0] + match[1];\n} else if (userAgent) {\n  match = userAgent.match(/Edge\\/(\\d+)/);\n  if (!match || match[1] >= 74) {\n    match = userAgent.match(/Chrome\\/(\\d+)/);\n    if (match) version = match[1];\n  }\n}\n\nmodule.exports = version && +version;\n","var getBuiltIn = require('../internals/get-built-in');\n\nmodule.exports = getBuiltIn('navigator', 'userAgent') || '';\n","var classof = require('../internals/classof');\nvar Iterators = require('../internals/iterators');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar ITERATOR = wellKnownSymbol('iterator');\n\nmodule.exports = function (it) {\n  if (it != undefined) return it[ITERATOR]\n    || it['@@iterator']\n    || Iterators[classof(it)];\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar definePropertyModule = require('../internals/object-define-property');\nvar anObject = require('../internals/an-object');\nvar objectKeys = require('../internals/object-keys');\n\n// `Object.defineProperties` method\n// https://tc39.github.io/ecma262/#sec-object.defineproperties\nmodule.exports = DESCRIPTORS ? Object.defineProperties : function defineProperties(O, Properties) {\n  anObject(O);\n  var keys = objectKeys(Properties);\n  var length = keys.length;\n  var index = 0;\n  var key;\n  while (length > index) definePropertyModule.f(O, key = keys[index++], Properties[key]);\n  return O;\n};\n","var isObject = require('../internals/is-object');\n\nmodule.exports = function (it) {\n  if (!isObject(it) && it !== null) {\n    throw TypeError(\"Can't set \" + String(it) + ' as a prototype');\n  } return it;\n};\n","'use strict';\nvar charAt = require('../internals/string-multibyte').charAt;\nvar InternalStateModule = require('../internals/internal-state');\nvar defineIterator = require('../internals/define-iterator');\n\nvar STRING_ITERATOR = 'String Iterator';\nvar setInternalState = InternalStateModule.set;\nvar getInternalState = InternalStateModule.getterFor(STRING_ITERATOR);\n\n// `String.prototype[@@iterator]` method\n// https://tc39.github.io/ecma262/#sec-string.prototype-@@iterator\ndefineIterator(String, 'String', function (iterated) {\n  setInternalState(this, {\n    type: STRING_ITERATOR,\n    string: String(iterated),\n    index: 0\n  });\n// `%StringIteratorPrototype%.next` method\n// https://tc39.github.io/ecma262/#sec-%stringiteratorprototype%.next\n}, function next() {\n  var state = getInternalState(this);\n  var string = state.string;\n  var index = state.index;\n  var point;\n  if (index >= string.length) return { value: undefined, done: true };\n  point = charAt(string, index);\n  state.index += point.length;\n  return { value: point, done: false };\n});\n","module.exports = {};\n","var global = require('../internals/global');\n\nmodule.exports = global;\n","var fails = require('../internals/fails');\nvar classof = require('../internals/classof-raw');\n\nvar split = ''.split;\n\n// fallback for non-array-like ES3 and non-enumerable old V8 strings\nmodule.exports = fails(function () {\n  // throws an error in rhino, see https://github.com/mozilla/rhino/issues/346\n  // eslint-disable-next-line no-prototype-builtins\n  return !Object('z').propertyIsEnumerable(0);\n}) ? function (it) {\n  return classof(it) == 'String' ? split.call(it, '') : Object(it);\n} : Object;\n","var wellKnownSymbol = require('../internals/well-known-symbol');\nvar create = require('../internals/object-create');\nvar definePropertyModule = require('../internals/object-define-property');\n\nvar UNSCOPABLES = wellKnownSymbol('unscopables');\nvar ArrayPrototype = Array.prototype;\n\n// Array.prototype[@@unscopables]\n// https://tc39.github.io/ecma262/#sec-array.prototype-@@unscopables\nif (ArrayPrototype[UNSCOPABLES] == undefined) {\n  definePropertyModule.f(ArrayPrototype, UNSCOPABLES, {\n    configurable: true,\n    value: create(null)\n  });\n}\n\n// add a key to Array.prototype[@@unscopables]\nmodule.exports = function (key) {\n  ArrayPrototype[UNSCOPABLES][key] = true;\n};\n","var global = require('../internals/global');\n\nmodule.exports = function (a, b) {\n  var console = global.console;\n  if (console && console.error) {\n    arguments.length === 1 ? console.error(a) : console.error(a, b);\n  }\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Global_1 = require(\"./Global\");\nvar Util_1 = require(\"./Util\");\nfunction _formatValue(val) {\n    if (Util_1.Util._isString(val)) {\n        return '\"' + val + '\"';\n    }\n    if (Object.prototype.toString.call(val) === '[object Number]') {\n        return val;\n    }\n    if (Util_1.Util._isBoolean(val)) {\n        return val;\n    }\n    return Object.prototype.toString.call(val);\n}\nfunction RGBComponent(val) {\n    if (val > 255) {\n        return 255;\n    }\n    else if (val < 0) {\n        return 0;\n    }\n    return Math.round(val);\n}\nexports.RGBComponent = RGBComponent;\nfunction alphaComponent(val) {\n    if (val > 1) {\n        return 1;\n    }\n    else if (val < 0.0001) {\n        return 0.0001;\n    }\n    return val;\n}\nexports.alphaComponent = alphaComponent;\nfunction getNumberValidator() {\n    if (Global_1.Konva.isUnminified) {\n        return function (val, attr) {\n            if (!Util_1.Util._isNumber(val)) {\n                Util_1.Util.warn(_formatValue(val) +\n                    ' is a not valid value for \"' +\n                    attr +\n                    '\" attribute. The value should be a number.');\n            }\n            return val;\n        };\n    }\n}\nexports.getNumberValidator = getNumberValidator;\nfunction getNumberOrAutoValidator() {\n    if (Global_1.Konva.isUnminified) {\n        return function (val, attr) {\n            var isNumber = Util_1.Util._isNumber(val);\n            var isAuto = val === 'auto';\n            if (!(isNumber || isAuto)) {\n                Util_1.Util.warn(_formatValue(val) +\n                    ' is a not valid value for \"' +\n                    attr +\n                    '\" attribute. The value should be a number or \"auto\".');\n            }\n            return val;\n        };\n    }\n}\nexports.getNumberOrAutoValidator = getNumberOrAutoValidator;\nfunction getStringValidator() {\n    if (Global_1.Konva.isUnminified) {\n        return function (val, attr) {\n            if (!Util_1.Util._isString(val)) {\n                Util_1.Util.warn(_formatValue(val) +\n                    ' is a not valid value for \"' +\n                    attr +\n                    '\" attribute. The value should be a string.');\n            }\n            return val;\n        };\n    }\n}\nexports.getStringValidator = getStringValidator;\nfunction getFunctionValidator() {\n    if (Global_1.Konva.isUnminified) {\n        return function (val, attr) {\n            if (!Util_1.Util._isFunction(val)) {\n                Util_1.Util.warn(_formatValue(val) +\n                    ' is a not valid value for \"' +\n                    attr +\n                    '\" attribute. The value should be a function.');\n            }\n            return val;\n        };\n    }\n}\nexports.getFunctionValidator = getFunctionValidator;\nfunction getNumberArrayValidator() {\n    if (Global_1.Konva.isUnminified) {\n        return function (val, attr) {\n            if (!Util_1.Util._isArray(val)) {\n                Util_1.Util.warn(_formatValue(val) +\n                    ' is a not valid value for \"' +\n                    attr +\n                    '\" attribute. The value should be a array of numbers.');\n            }\n            else {\n                val.forEach(function (item) {\n                    if (!Util_1.Util._isNumber(item)) {\n                        Util_1.Util.warn('\"' +\n                            attr +\n                            '\" attribute has non numeric element ' +\n                            item +\n                            '. Make sure that all elements are numbers.');\n                    }\n                });\n            }\n            return val;\n        };\n    }\n}\nexports.getNumberArrayValidator = getNumberArrayValidator;\nfunction getBooleanValidator() {\n    if (Global_1.Konva.isUnminified) {\n        return function (val, attr) {\n            var isBool = val === true || val === false;\n            if (!isBool) {\n                Util_1.Util.warn(_formatValue(val) +\n                    ' is a not valid value for \"' +\n                    attr +\n                    '\" attribute. The value should be a boolean.');\n            }\n            return val;\n        };\n    }\n}\nexports.getBooleanValidator = getBooleanValidator;\nfunction getComponentValidator(components) {\n    if (Global_1.Konva.isUnminified) {\n        return function (val, attr) {\n            if (!Util_1.Util.isObject(val)) {\n                Util_1.Util.warn(_formatValue(val) +\n                    ' is a not valid value for \"' +\n                    attr +\n                    '\" attribute. The value should be an object with properties ' +\n                    components);\n            }\n            return val;\n        };\n    }\n}\nexports.getComponentValidator = getComponentValidator;\n","var anObject = require('../internals/an-object');\nvar aFunction = require('../internals/a-function');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar SPECIES = wellKnownSymbol('species');\n\n// `SpeciesConstructor` abstract operation\n// https://tc39.github.io/ecma262/#sec-speciesconstructor\nmodule.exports = function (O, defaultConstructor) {\n  var C = anObject(O).constructor;\n  var S;\n  return C === undefined || (S = anObject(C)[SPECIES]) == undefined ? defaultConstructor : aFunction(S);\n};\n","var fails = require('../internals/fails');\n\nmodule.exports = !!Object.getOwnPropertySymbols && !fails(function () {\n  // Chrome 38 Symbol has incorrect toString conversion\n  // eslint-disable-next-line no-undef\n  return !String(Symbol());\n});\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Util_1 = require(\"./Util\");\nvar Factory_1 = require(\"./Factory\");\nvar Canvas_1 = require(\"./Canvas\");\nvar Global_1 = require(\"./Global\");\nvar DragAndDrop_1 = require(\"./DragAndDrop\");\nvar Validators_1 = require(\"./Validators\");\nexports.ids = {};\nexports.names = {};\nvar _addId = function (node, id) {\n    if (!id) {\n        return;\n    }\n    exports.ids[id] = node;\n};\nexports._removeId = function (id, node) {\n    if (!id) {\n        return;\n    }\n    if (exports.ids[id] !== node) {\n        return;\n    }\n    delete exports.ids[id];\n};\nexports._addName = function (node, name) {\n    if (name) {\n        if (!exports.names[name]) {\n            exports.names[name] = [];\n        }\n        exports.names[name].push(node);\n    }\n};\nexports._removeName = function (name, _id) {\n    if (!name) {\n        return;\n    }\n    var nodes = exports.names[name];\n    if (!nodes) {\n        return;\n    }\n    for (var n = 0; n < nodes.length; n++) {\n        var no = nodes[n];\n        if (no._id === _id) {\n            nodes.splice(n, 1);\n        }\n    }\n    if (nodes.length === 0) {\n        delete exports.names[name];\n    }\n};\nvar ABSOLUTE_OPACITY = 'absoluteOpacity', ABSOLUTE_TRANSFORM = 'absoluteTransform', ABSOLUTE_SCALE = 'absoluteScale', CANVAS = 'canvas', CHANGE = 'Change', CHILDREN = 'children', KONVA = 'konva', LISTENING = 'listening', MOUSEENTER = 'mouseenter', MOUSELEAVE = 'mouseleave', NAME = 'name', SET = 'set', SHAPE = 'Shape', SPACE = ' ', STAGE = 'stage', TRANSFORM = 'transform', UPPER_STAGE = 'Stage', VISIBLE = 'visible', TRANSFORM_CHANGE_STR = [\n    'xChange.konva',\n    'yChange.konva',\n    'scaleXChange.konva',\n    'scaleYChange.konva',\n    'skewXChange.konva',\n    'skewYChange.konva',\n    'rotationChange.konva',\n    'offsetXChange.konva',\n    'offsetYChange.konva',\n    'transformsEnabledChange.konva',\n].join(SPACE), SCALE_CHANGE_STR = ['scaleXChange.konva', 'scaleYChange.konva'].join(SPACE);\nvar emptyChildren = new Util_1.Collection();\nvar idCounter = 1;\nvar Node = (function () {\n    function Node(config) {\n        var _this = this;\n        this._id = idCounter++;\n        this.eventListeners = {};\n        this.attrs = {};\n        this.index = 0;\n        this.parent = null;\n        this._cache = new Map();\n        this._lastPos = null;\n        this._batchingTransformChange = false;\n        this._needClearTransformCache = false;\n        this._filterUpToDate = false;\n        this._isUnderCache = false;\n        this.children = emptyChildren;\n        this._dragEventId = null;\n        this.setAttrs(config);\n        this.on(TRANSFORM_CHANGE_STR, function () {\n            if (_this._batchingTransformChange) {\n                _this._needClearTransformCache = true;\n                return;\n            }\n            _this._clearCache(TRANSFORM);\n            _this._clearSelfAndDescendantCache(ABSOLUTE_TRANSFORM);\n        });\n        this.on('visibleChange.konva', function () {\n            _this._clearSelfAndDescendantCache(VISIBLE);\n        });\n        this.on('listeningChange.konva', function () {\n            _this._clearSelfAndDescendantCache(LISTENING);\n        });\n        this.on('opacityChange.konva', function () {\n            _this._clearSelfAndDescendantCache(ABSOLUTE_OPACITY);\n        });\n    }\n    Node.prototype.hasChildren = function () {\n        return false;\n    };\n    Node.prototype.getChildren = function () {\n        return emptyChildren;\n    };\n    Node.prototype._clearCache = function (attr) {\n        if (attr) {\n            this._cache.delete(attr);\n        }\n        else {\n            this._cache.clear();\n        }\n    };\n    Node.prototype._getCache = function (attr, privateGetter) {\n        var cache = this._cache.get(attr);\n        if (cache === undefined) {\n            cache = privateGetter.call(this);\n            this._cache.set(attr, cache);\n        }\n        return cache;\n    };\n    Node.prototype._getCanvasCache = function () {\n        return this._cache.get(CANVAS);\n    };\n    Node.prototype._clearSelfAndDescendantCache = function (attr, forceEvent) {\n        this._clearCache(attr);\n        if (forceEvent && attr === ABSOLUTE_TRANSFORM) {\n            this.fire('_clearTransformCache');\n        }\n        if (this.isCached()) {\n            return;\n        }\n        if (this.children) {\n            this.children.each(function (node) {\n                node._clearSelfAndDescendantCache(attr, true);\n            });\n        }\n    };\n    Node.prototype.clearCache = function () {\n        this._cache.delete(CANVAS);\n        this._clearSelfAndDescendantCache();\n        return this;\n    };\n    Node.prototype.cache = function (config) {\n        var conf = config || {};\n        var rect = {};\n        if (conf.x === undefined ||\n            conf.y === undefined ||\n            conf.width === undefined ||\n            conf.height === undefined) {\n            rect = this.getClientRect({\n                skipTransform: true,\n                relativeTo: this.getParent(),\n            });\n        }\n        var width = Math.ceil(conf.width || rect.width), height = Math.ceil(conf.height || rect.height), pixelRatio = conf.pixelRatio, x = conf.x === undefined ? rect.x : conf.x, y = conf.y === undefined ? rect.y : conf.y, offset = conf.offset || 0, drawBorder = conf.drawBorder || false;\n        if (!width || !height) {\n            Util_1.Util.error('Can not cache the node. Width or height of the node equals 0. Caching is skipped.');\n            return;\n        }\n        width += offset * 2;\n        height += offset * 2;\n        x -= offset;\n        y -= offset;\n        var cachedSceneCanvas = new Canvas_1.SceneCanvas({\n            pixelRatio: pixelRatio,\n            width: width,\n            height: height,\n        }), cachedFilterCanvas = new Canvas_1.SceneCanvas({\n            pixelRatio: pixelRatio,\n            width: 0,\n            height: 0,\n        }), cachedHitCanvas = new Canvas_1.HitCanvas({\n            pixelRatio: 1,\n            width: width,\n            height: height,\n        }), sceneContext = cachedSceneCanvas.getContext(), hitContext = cachedHitCanvas.getContext();\n        cachedHitCanvas.isCache = true;\n        this._cache.delete('canvas');\n        this._filterUpToDate = false;\n        if (conf.imageSmoothingEnabled === false) {\n            cachedSceneCanvas.getContext()._context.imageSmoothingEnabled = false;\n            cachedFilterCanvas.getContext()._context.imageSmoothingEnabled = false;\n        }\n        sceneContext.save();\n        hitContext.save();\n        sceneContext.translate(-x, -y);\n        hitContext.translate(-x, -y);\n        this._isUnderCache = true;\n        this._clearSelfAndDescendantCache(ABSOLUTE_OPACITY);\n        this._clearSelfAndDescendantCache(ABSOLUTE_SCALE);\n        this.drawScene(cachedSceneCanvas, this, true);\n        this.drawHit(cachedHitCanvas, this, true);\n        this._isUnderCache = false;\n        sceneContext.restore();\n        hitContext.restore();\n        if (drawBorder) {\n            sceneContext.save();\n            sceneContext.beginPath();\n            sceneContext.rect(0, 0, width, height);\n            sceneContext.closePath();\n            sceneContext.setAttr('strokeStyle', 'red');\n            sceneContext.setAttr('lineWidth', 5);\n            sceneContext.stroke();\n            sceneContext.restore();\n        }\n        this._cache.set(CANVAS, {\n            scene: cachedSceneCanvas,\n            filter: cachedFilterCanvas,\n            hit: cachedHitCanvas,\n            x: x,\n            y: y,\n        });\n        return this;\n    };\n    Node.prototype.isCached = function () {\n        return this._cache.has('canvas');\n    };\n    Node.prototype.getClientRect = function (config) {\n        throw new Error('abstract \"getClientRect\" method call');\n    };\n    Node.prototype._transformedRect = function (rect, top) {\n        var points = [\n            { x: rect.x, y: rect.y },\n            { x: rect.x + rect.width, y: rect.y },\n            { x: rect.x + rect.width, y: rect.y + rect.height },\n            { x: rect.x, y: rect.y + rect.height },\n        ];\n        var minX, minY, maxX, maxY;\n        var trans = this.getAbsoluteTransform(top);\n        points.forEach(function (point) {\n            var transformed = trans.point(point);\n            if (minX === undefined) {\n                minX = maxX = transformed.x;\n                minY = maxY = transformed.y;\n            }\n            minX = Math.min(minX, transformed.x);\n            minY = Math.min(minY, transformed.y);\n            maxX = Math.max(maxX, transformed.x);\n            maxY = Math.max(maxY, transformed.y);\n        });\n        return {\n            x: minX,\n            y: minY,\n            width: maxX - minX,\n            height: maxY - minY,\n        };\n    };\n    Node.prototype._drawCachedSceneCanvas = function (context) {\n        context.save();\n        context._applyOpacity(this);\n        context._applyGlobalCompositeOperation(this);\n        var canvasCache = this._getCanvasCache();\n        context.translate(canvasCache.x, canvasCache.y);\n        var cacheCanvas = this._getCachedSceneCanvas();\n        var ratio = cacheCanvas.pixelRatio;\n        context.drawImage(cacheCanvas._canvas, 0, 0, cacheCanvas.width / ratio, cacheCanvas.height / ratio);\n        context.restore();\n    };\n    Node.prototype._drawCachedHitCanvas = function (context) {\n        var canvasCache = this._getCanvasCache(), hitCanvas = canvasCache.hit;\n        context.save();\n        context.translate(canvasCache.x, canvasCache.y);\n        context.drawImage(hitCanvas._canvas, 0, 0);\n        context.restore();\n    };\n    Node.prototype._getCachedSceneCanvas = function () {\n        var filters = this.filters(), cachedCanvas = this._getCanvasCache(), sceneCanvas = cachedCanvas.scene, filterCanvas = cachedCanvas.filter, filterContext = filterCanvas.getContext(), len, imageData, n, filter;\n        if (filters) {\n            if (!this._filterUpToDate) {\n                var ratio = sceneCanvas.pixelRatio;\n                filterCanvas.setSize(sceneCanvas.width / sceneCanvas.pixelRatio, sceneCanvas.height / sceneCanvas.pixelRatio);\n                try {\n                    len = filters.length;\n                    filterContext.clear();\n                    filterContext.drawImage(sceneCanvas._canvas, 0, 0, sceneCanvas.getWidth() / ratio, sceneCanvas.getHeight() / ratio);\n                    imageData = filterContext.getImageData(0, 0, filterCanvas.getWidth(), filterCanvas.getHeight());\n                    for (n = 0; n < len; n++) {\n                        filter = filters[n];\n                        if (typeof filter !== 'function') {\n                            Util_1.Util.error('Filter should be type of function, but got ' +\n                                typeof filter +\n                                ' instead. Please check correct filters');\n                            continue;\n                        }\n                        filter.call(this, imageData);\n                        filterContext.putImageData(imageData, 0, 0);\n                    }\n                }\n                catch (e) {\n                    Util_1.Util.error('Unable to apply filter. ' +\n                        e.message +\n                        ' This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.');\n                }\n                this._filterUpToDate = true;\n            }\n            return filterCanvas;\n        }\n        return sceneCanvas;\n    };\n    Node.prototype.on = function (evtStr, handler) {\n        if (arguments.length === 3) {\n            return this._delegate.apply(this, arguments);\n        }\n        var events = evtStr.split(SPACE), len = events.length, n, event, parts, baseEvent, name;\n        for (n = 0; n < len; n++) {\n            event = events[n];\n            parts = event.split('.');\n            baseEvent = parts[0];\n            name = parts[1] || '';\n            if (!this.eventListeners[baseEvent]) {\n                this.eventListeners[baseEvent] = [];\n            }\n            this.eventListeners[baseEvent].push({\n                name: name,\n                handler: handler,\n            });\n        }\n        return this;\n    };\n    Node.prototype.off = function (evtStr, callback) {\n        var events = (evtStr || '').split(SPACE), len = events.length, n, t, event, parts, baseEvent, name;\n        if (!evtStr) {\n            for (t in this.eventListeners) {\n                this._off(t);\n            }\n        }\n        for (n = 0; n < len; n++) {\n            event = events[n];\n            parts = event.split('.');\n            baseEvent = parts[0];\n            name = parts[1];\n            if (baseEvent) {\n                if (this.eventListeners[baseEvent]) {\n                    this._off(baseEvent, name, callback);\n                }\n            }\n            else {\n                for (t in this.eventListeners) {\n                    this._off(t, name, callback);\n                }\n            }\n        }\n        return this;\n    };\n    Node.prototype.dispatchEvent = function (evt) {\n        var e = {\n            target: this,\n            type: evt.type,\n            evt: evt,\n        };\n        this.fire(evt.type, e);\n        return this;\n    };\n    Node.prototype.addEventListener = function (type, handler) {\n        this.on(type, function (evt) {\n            handler.call(this, evt.evt);\n        });\n        return this;\n    };\n    Node.prototype.removeEventListener = function (type) {\n        this.off(type);\n        return this;\n    };\n    Node.prototype._delegate = function (event, selector, handler) {\n        var stopNode = this;\n        this.on(event, function (evt) {\n            var targets = evt.target.findAncestors(selector, true, stopNode);\n            for (var i = 0; i < targets.length; i++) {\n                evt = Util_1.Util.cloneObject(evt);\n                evt.currentTarget = targets[i];\n                handler.call(targets[i], evt);\n            }\n        });\n    };\n    Node.prototype.remove = function () {\n        if (this.isDragging()) {\n            this.stopDrag();\n        }\n        DragAndDrop_1.DD._dragElements.delete(this._id);\n        this._remove();\n        return this;\n    };\n    Node.prototype._clearCaches = function () {\n        this._clearSelfAndDescendantCache(ABSOLUTE_TRANSFORM);\n        this._clearSelfAndDescendantCache(ABSOLUTE_OPACITY);\n        this._clearSelfAndDescendantCache(ABSOLUTE_SCALE);\n        this._clearSelfAndDescendantCache(STAGE);\n        this._clearSelfAndDescendantCache(VISIBLE);\n        this._clearSelfAndDescendantCache(LISTENING);\n    };\n    Node.prototype._remove = function () {\n        this._clearCaches();\n        var parent = this.getParent();\n        if (parent && parent.children) {\n            parent.children.splice(this.index, 1);\n            parent._setChildrenIndices();\n            this.parent = null;\n        }\n    };\n    Node.prototype.destroy = function () {\n        exports._removeId(this.id(), this);\n        var names = (this.name() || '').split(/\\s/g);\n        for (var i = 0; i < names.length; i++) {\n            var subname = names[i];\n            exports._removeName(subname, this._id);\n        }\n        this.remove();\n        return this;\n    };\n    Node.prototype.getAttr = function (attr) {\n        var method = 'get' + Util_1.Util._capitalize(attr);\n        if (Util_1.Util._isFunction(this[method])) {\n            return this[method]();\n        }\n        return this.attrs[attr];\n    };\n    Node.prototype.getAncestors = function () {\n        var parent = this.getParent(), ancestors = new Util_1.Collection();\n        while (parent) {\n            ancestors.push(parent);\n            parent = parent.getParent();\n        }\n        return ancestors;\n    };\n    Node.prototype.getAttrs = function () {\n        return this.attrs || {};\n    };\n    Node.prototype.setAttrs = function (config) {\n        var key, method;\n        if (!config) {\n            return this;\n        }\n        for (key in config) {\n            if (key === CHILDREN) {\n                continue;\n            }\n            method = SET + Util_1.Util._capitalize(key);\n            if (Util_1.Util._isFunction(this[method])) {\n                this[method](config[key]);\n            }\n            else {\n                this._setAttr(key, config[key]);\n            }\n        }\n        return this;\n    };\n    Node.prototype.isListening = function () {\n        return this._getCache(LISTENING, this._isListening);\n    };\n    Node.prototype._isListening = function () {\n        var listening = this.listening(), parent = this.getParent();\n        if (listening === 'inherit') {\n            if (parent) {\n                return parent.isListening();\n            }\n            else {\n                return true;\n            }\n        }\n        else {\n            return listening;\n        }\n    };\n    Node.prototype.isVisible = function () {\n        return this._getCache(VISIBLE, this._isVisible);\n    };\n    Node.prototype._isVisible = function (relativeTo) {\n        var visible = this.visible(), parent = this.getParent();\n        if (visible === 'inherit') {\n            if (parent && parent !== relativeTo) {\n                return parent._isVisible(relativeTo);\n            }\n            else {\n                return true;\n            }\n        }\n        else if (relativeTo && relativeTo !== parent) {\n            return visible && parent._isVisible(relativeTo);\n        }\n        else {\n            return visible;\n        }\n    };\n    Node.prototype.shouldDrawHit = function () {\n        var layer = this.getLayer();\n        return ((!layer && this.isListening() && this.isVisible()) ||\n            (layer &&\n                layer.hitGraphEnabled() &&\n                this.isListening() &&\n                this.isVisible()));\n    };\n    Node.prototype.show = function () {\n        this.visible(true);\n        return this;\n    };\n    Node.prototype.hide = function () {\n        this.visible(false);\n        return this;\n    };\n    Node.prototype.getZIndex = function () {\n        return this.index || 0;\n    };\n    Node.prototype.getAbsoluteZIndex = function () {\n        var depth = this.getDepth(), that = this, index = 0, nodes, len, n, child;\n        function addChildren(children) {\n            nodes = [];\n            len = children.length;\n            for (n = 0; n < len; n++) {\n                child = children[n];\n                index++;\n                if (child.nodeType !== SHAPE) {\n                    nodes = nodes.concat(child.getChildren().toArray());\n                }\n                if (child._id === that._id) {\n                    n = len;\n                }\n            }\n            if (nodes.length > 0 && nodes[0].getDepth() <= depth) {\n                addChildren(nodes);\n            }\n        }\n        if (that.nodeType !== UPPER_STAGE) {\n            addChildren(that.getStage().getChildren());\n        }\n        return index;\n    };\n    Node.prototype.getDepth = function () {\n        var depth = 0, parent = this.parent;\n        while (parent) {\n            depth++;\n            parent = parent.parent;\n        }\n        return depth;\n    };\n    Node.prototype._batchTransformChanges = function (func) {\n        this._batchingTransformChange = true;\n        func();\n        this._batchingTransformChange = false;\n        if (this._needClearTransformCache) {\n            this._clearCache(TRANSFORM);\n            this._clearSelfAndDescendantCache(ABSOLUTE_TRANSFORM, true);\n        }\n        this._needClearTransformCache = false;\n    };\n    Node.prototype.setPosition = function (pos) {\n        var _this = this;\n        this._batchTransformChanges(function () {\n            _this.x(pos.x);\n            _this.y(pos.y);\n        });\n        return this;\n    };\n    Node.prototype.getPosition = function () {\n        return {\n            x: this.x(),\n            y: this.y(),\n        };\n    };\n    Node.prototype.getAbsolutePosition = function (top) {\n        var haveCachedParent = false;\n        var parent = this.parent;\n        while (parent) {\n            if (parent.isCached()) {\n                haveCachedParent = true;\n                break;\n            }\n            parent = parent.parent;\n        }\n        if (haveCachedParent && !top) {\n            top = true;\n        }\n        var absoluteMatrix = this.getAbsoluteTransform(top).getMatrix(), absoluteTransform = new Util_1.Transform(), offset = this.offset();\n        absoluteTransform.m = absoluteMatrix.slice();\n        absoluteTransform.translate(offset.x, offset.y);\n        return absoluteTransform.getTranslation();\n    };\n    Node.prototype.setAbsolutePosition = function (pos) {\n        var origTrans = this._clearTransform(), it;\n        this.attrs.x = origTrans.x;\n        this.attrs.y = origTrans.y;\n        delete origTrans.x;\n        delete origTrans.y;\n        this._clearCache(TRANSFORM);\n        it = this._getAbsoluteTransform();\n        it.invert();\n        it.translate(pos.x, pos.y);\n        pos = {\n            x: this.attrs.x + it.getTranslation().x,\n            y: this.attrs.y + it.getTranslation().y,\n        };\n        this._setTransform(origTrans);\n        this.setPosition({ x: pos.x, y: pos.y });\n        return this;\n    };\n    Node.prototype._setTransform = function (trans) {\n        var key;\n        for (key in trans) {\n            this.attrs[key] = trans[key];\n        }\n    };\n    Node.prototype._clearTransform = function () {\n        var trans = {\n            x: this.x(),\n            y: this.y(),\n            rotation: this.rotation(),\n            scaleX: this.scaleX(),\n            scaleY: this.scaleY(),\n            offsetX: this.offsetX(),\n            offsetY: this.offsetY(),\n            skewX: this.skewX(),\n            skewY: this.skewY(),\n        };\n        this.attrs.x = 0;\n        this.attrs.y = 0;\n        this.attrs.rotation = 0;\n        this.attrs.scaleX = 1;\n        this.attrs.scaleY = 1;\n        this.attrs.offsetX = 0;\n        this.attrs.offsetY = 0;\n        this.attrs.skewX = 0;\n        this.attrs.skewY = 0;\n        return trans;\n    };\n    Node.prototype.move = function (change) {\n        var changeX = change.x, changeY = change.y, x = this.x(), y = this.y();\n        if (changeX !== undefined) {\n            x += changeX;\n        }\n        if (changeY !== undefined) {\n            y += changeY;\n        }\n        this.setPosition({ x: x, y: y });\n        return this;\n    };\n    Node.prototype._eachAncestorReverse = function (func, top) {\n        var family = [], parent = this.getParent(), len, n;\n        if (top && top._id === this._id) {\n            func(this);\n            return;\n        }\n        family.unshift(this);\n        while (parent && (!top || parent._id !== top._id)) {\n            family.unshift(parent);\n            parent = parent.parent;\n        }\n        len = family.length;\n        for (n = 0; n < len; n++) {\n            func(family[n]);\n        }\n    };\n    Node.prototype.rotate = function (theta) {\n        this.rotation(this.rotation() + theta);\n        return this;\n    };\n    Node.prototype.moveToTop = function () {\n        if (!this.parent) {\n            Util_1.Util.warn('Node has no parent. moveToTop function is ignored.');\n            return false;\n        }\n        var index = this.index;\n        this.parent.children.splice(index, 1);\n        this.parent.children.push(this);\n        this.parent._setChildrenIndices();\n        return true;\n    };\n    Node.prototype.moveUp = function () {\n        if (!this.parent) {\n            Util_1.Util.warn('Node has no parent. moveUp function is ignored.');\n            return false;\n        }\n        var index = this.index, len = this.parent.getChildren().length;\n        if (index < len - 1) {\n            this.parent.children.splice(index, 1);\n            this.parent.children.splice(index + 1, 0, this);\n            this.parent._setChildrenIndices();\n            return true;\n        }\n        return false;\n    };\n    Node.prototype.moveDown = function () {\n        if (!this.parent) {\n            Util_1.Util.warn('Node has no parent. moveDown function is ignored.');\n            return false;\n        }\n        var index = this.index;\n        if (index > 0) {\n            this.parent.children.splice(index, 1);\n            this.parent.children.splice(index - 1, 0, this);\n            this.parent._setChildrenIndices();\n            return true;\n        }\n        return false;\n    };\n    Node.prototype.moveToBottom = function () {\n        if (!this.parent) {\n            Util_1.Util.warn('Node has no parent. moveToBottom function is ignored.');\n            return false;\n        }\n        var index = this.index;\n        if (index > 0) {\n            this.parent.children.splice(index, 1);\n            this.parent.children.unshift(this);\n            this.parent._setChildrenIndices();\n            return true;\n        }\n        return false;\n    };\n    Node.prototype.setZIndex = function (zIndex) {\n        if (!this.parent) {\n            Util_1.Util.warn('Node has no parent. zIndex parameter is ignored.');\n            return this;\n        }\n        if (zIndex < 0 || zIndex >= this.parent.children.length) {\n            Util_1.Util.warn('Unexpected value ' +\n                zIndex +\n                ' for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to ' +\n                (this.parent.children.length - 1) +\n                '.');\n        }\n        var index = this.index;\n        this.parent.children.splice(index, 1);\n        this.parent.children.splice(zIndex, 0, this);\n        this.parent._setChildrenIndices();\n        return this;\n    };\n    Node.prototype.getAbsoluteOpacity = function () {\n        return this._getCache(ABSOLUTE_OPACITY, this._getAbsoluteOpacity);\n    };\n    Node.prototype._getAbsoluteOpacity = function () {\n        var absOpacity = this.opacity();\n        var parent = this.getParent();\n        if (parent && !parent._isUnderCache) {\n            absOpacity *= parent.getAbsoluteOpacity();\n        }\n        return absOpacity;\n    };\n    Node.prototype.moveTo = function (newContainer) {\n        if (this.getParent() !== newContainer) {\n            this._remove();\n            newContainer.add(this);\n        }\n        return this;\n    };\n    Node.prototype.toObject = function () {\n        var obj = {}, attrs = this.getAttrs(), key, val, getter, defaultValue, nonPlainObject;\n        obj.attrs = {};\n        for (key in attrs) {\n            val = attrs[key];\n            nonPlainObject =\n                Util_1.Util.isObject(val) && !Util_1.Util._isPlainObject(val) && !Util_1.Util._isArray(val);\n            if (nonPlainObject) {\n                continue;\n            }\n            getter = typeof this[key] === 'function' && this[key];\n            delete attrs[key];\n            defaultValue = getter ? getter.call(this) : null;\n            attrs[key] = val;\n            if (defaultValue !== val) {\n                obj.attrs[key] = val;\n            }\n        }\n        obj.className = this.getClassName();\n        return Util_1.Util._prepareToStringify(obj);\n    };\n    Node.prototype.toJSON = function () {\n        return JSON.stringify(this.toObject());\n    };\n    Node.prototype.getParent = function () {\n        return this.parent;\n    };\n    Node.prototype.findAncestors = function (selector, includeSelf, stopNode) {\n        var res = [];\n        if (includeSelf && this._isMatch(selector)) {\n            res.push(this);\n        }\n        var ancestor = this.parent;\n        while (ancestor) {\n            if (ancestor === stopNode) {\n                return res;\n            }\n            if (ancestor._isMatch(selector)) {\n                res.push(ancestor);\n            }\n            ancestor = ancestor.parent;\n        }\n        return res;\n    };\n    Node.prototype.isAncestorOf = function (node) {\n        return false;\n    };\n    Node.prototype.findAncestor = function (selector, includeSelf, stopNode) {\n        return this.findAncestors(selector, includeSelf, stopNode)[0];\n    };\n    Node.prototype._isMatch = function (selector) {\n        if (!selector) {\n            return false;\n        }\n        if (typeof selector === 'function') {\n            return selector(this);\n        }\n        var selectorArr = selector.replace(/ /g, '').split(','), len = selectorArr.length, n, sel;\n        for (n = 0; n < len; n++) {\n            sel = selectorArr[n];\n            if (!Util_1.Util.isValidSelector(sel)) {\n                Util_1.Util.warn('Selector \"' +\n                    sel +\n                    '\" is invalid. Allowed selectors examples are \"#foo\", \".bar\" or \"Group\".');\n                Util_1.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like \"Triangle\".');\n                Util_1.Util.warn('Konva is awesome, right?');\n            }\n            if (sel.charAt(0) === '#') {\n                if (this.id() === sel.slice(1)) {\n                    return true;\n                }\n            }\n            else if (sel.charAt(0) === '.') {\n                if (this.hasName(sel.slice(1))) {\n                    return true;\n                }\n            }\n            else if (this.className === sel || this.nodeType === sel) {\n                return true;\n            }\n        }\n        return false;\n    };\n    Node.prototype.getLayer = function () {\n        var parent = this.getParent();\n        return parent ? parent.getLayer() : null;\n    };\n    Node.prototype.getStage = function () {\n        return this._getCache(STAGE, this._getStage);\n    };\n    Node.prototype._getStage = function () {\n        var parent = this.getParent();\n        if (parent) {\n            return parent.getStage();\n        }\n        else {\n            return undefined;\n        }\n    };\n    Node.prototype.fire = function (eventType, evt, bubble) {\n        if (evt === void 0) { evt = {}; }\n        evt.target = evt.target || this;\n        if (bubble) {\n            this._fireAndBubble(eventType, evt);\n        }\n        else {\n            this._fire(eventType, evt);\n        }\n        return this;\n    };\n    Node.prototype.getAbsoluteTransform = function (top) {\n        if (top) {\n            return this._getAbsoluteTransform(top);\n        }\n        else {\n            return this._getCache(ABSOLUTE_TRANSFORM, this._getAbsoluteTransform);\n        }\n    };\n    Node.prototype._getAbsoluteTransform = function (top) {\n        var at;\n        if (top) {\n            at = new Util_1.Transform();\n            this._eachAncestorReverse(function (node) {\n                var transformsEnabled = node.transformsEnabled();\n                if (transformsEnabled === 'all') {\n                    at.multiply(node.getTransform());\n                }\n                else if (transformsEnabled === 'position') {\n                    at.translate(node.x() - node.offsetX(), node.y() - node.offsetY());\n                }\n            }, top);\n            return at;\n        }\n        else {\n            if (this.parent) {\n                at = this.parent.getAbsoluteTransform().copy();\n            }\n            else {\n                at = new Util_1.Transform();\n            }\n            var transformsEnabled = this.transformsEnabled();\n            if (transformsEnabled === 'all') {\n                at.multiply(this.getTransform());\n            }\n            else if (transformsEnabled === 'position') {\n                at.translate(this.x() - this.offsetX(), this.y() - this.offsetY());\n            }\n            return at;\n        }\n    };\n    Node.prototype.getAbsoluteScale = function (top) {\n        var parent = this;\n        while (parent) {\n            if (parent._isUnderCache) {\n                top = parent;\n            }\n            parent = parent.getParent();\n        }\n        var transform = this.getAbsoluteTransform(top);\n        var attrs = transform.decompose();\n        return {\n            x: attrs.scaleX,\n            y: attrs.scaleY,\n        };\n    };\n    Node.prototype.getAbsoluteRotation = function () {\n        return this.getAbsoluteTransform().decompose().rotation;\n    };\n    Node.prototype.getTransform = function () {\n        return this._getCache(TRANSFORM, this._getTransform);\n    };\n    Node.prototype._getTransform = function () {\n        var m = new Util_1.Transform(), x = this.x(), y = this.y(), rotation = Global_1.Konva.getAngle(this.rotation()), scaleX = this.scaleX(), scaleY = this.scaleY(), skewX = this.skewX(), skewY = this.skewY(), offsetX = this.offsetX(), offsetY = this.offsetY();\n        if (x !== 0 || y !== 0) {\n            m.translate(x, y);\n        }\n        if (rotation !== 0) {\n            m.rotate(rotation);\n        }\n        if (skewX !== 0 || skewY !== 0) {\n            m.skew(skewX, skewY);\n        }\n        if (scaleX !== 1 || scaleY !== 1) {\n            m.scale(scaleX, scaleY);\n        }\n        if (offsetX !== 0 || offsetY !== 0) {\n            m.translate(-1 * offsetX, -1 * offsetY);\n        }\n        return m;\n    };\n    Node.prototype.clone = function (obj) {\n        var attrs = Util_1.Util.cloneObject(this.attrs), key, allListeners, len, n, listener;\n        for (key in obj) {\n            attrs[key] = obj[key];\n        }\n        var node = new this.constructor(attrs);\n        for (key in this.eventListeners) {\n            allListeners = this.eventListeners[key];\n            len = allListeners.length;\n            for (n = 0; n < len; n++) {\n                listener = allListeners[n];\n                if (listener.name.indexOf(KONVA) < 0) {\n                    if (!node.eventListeners[key]) {\n                        node.eventListeners[key] = [];\n                    }\n                    node.eventListeners[key].push(listener);\n                }\n            }\n        }\n        return node;\n    };\n    Node.prototype._toKonvaCanvas = function (config) {\n        config = config || {};\n        var box = this.getClientRect();\n        var stage = this.getStage(), x = config.x !== undefined ? config.x : box.x, y = config.y !== undefined ? config.y : box.y, pixelRatio = config.pixelRatio || 1, canvas = new Canvas_1.SceneCanvas({\n            width: config.width || box.width || (stage ? stage.width() : 0),\n            height: config.height || box.height || (stage ? stage.height() : 0),\n            pixelRatio: pixelRatio,\n        }), context = canvas.getContext();\n        context.save();\n        if (x || y) {\n            context.translate(-1 * x, -1 * y);\n        }\n        this.drawScene(canvas);\n        context.restore();\n        return canvas;\n    };\n    Node.prototype.toCanvas = function (config) {\n        return this._toKonvaCanvas(config)._canvas;\n    };\n    Node.prototype.toDataURL = function (config) {\n        config = config || {};\n        var mimeType = config.mimeType || null, quality = config.quality || null;\n        var url = this._toKonvaCanvas(config).toDataURL(mimeType, quality);\n        if (config.callback) {\n            config.callback(url);\n        }\n        return url;\n    };\n    Node.prototype.toImage = function (config) {\n        if (!config || !config.callback) {\n            throw 'callback required for toImage method config argument';\n        }\n        var callback = config.callback;\n        delete config.callback;\n        Util_1.Util._urlToImage(this.toDataURL(config), function (img) {\n            callback(img);\n        });\n    };\n    Node.prototype.setSize = function (size) {\n        this.width(size.width);\n        this.height(size.height);\n        return this;\n    };\n    Node.prototype.getSize = function () {\n        return {\n            width: this.width(),\n            height: this.height(),\n        };\n    };\n    Node.prototype.getClassName = function () {\n        return this.className || this.nodeType;\n    };\n    Node.prototype.getType = function () {\n        return this.nodeType;\n    };\n    Node.prototype.getDragDistance = function () {\n        if (this.attrs.dragDistance !== undefined) {\n            return this.attrs.dragDistance;\n        }\n        else if (this.parent) {\n            return this.parent.getDragDistance();\n        }\n        else {\n            return Global_1.Konva.dragDistance;\n        }\n    };\n    Node.prototype._off = function (type, name, callback) {\n        var evtListeners = this.eventListeners[type], i, evtName, handler;\n        for (i = 0; i < evtListeners.length; i++) {\n            evtName = evtListeners[i].name;\n            handler = evtListeners[i].handler;\n            if ((evtName !== 'konva' || name === 'konva') &&\n                (!name || evtName === name) &&\n                (!callback || callback === handler)) {\n                evtListeners.splice(i, 1);\n                if (evtListeners.length === 0) {\n                    delete this.eventListeners[type];\n                    break;\n                }\n                i--;\n            }\n        }\n    };\n    Node.prototype._fireChangeEvent = function (attr, oldVal, newVal) {\n        this._fire(attr + CHANGE, {\n            oldVal: oldVal,\n            newVal: newVal,\n        });\n    };\n    Node.prototype.setId = function (id) {\n        var oldId = this.id();\n        exports._removeId(oldId, this);\n        _addId(this, id);\n        this._setAttr('id', id);\n        return this;\n    };\n    Node.prototype.setName = function (name) {\n        var oldNames = (this.name() || '').split(/\\s/g);\n        var newNames = (name || '').split(/\\s/g);\n        var subname, i;\n        for (i = 0; i < oldNames.length; i++) {\n            subname = oldNames[i];\n            if (newNames.indexOf(subname) === -1 && subname) {\n                exports._removeName(subname, this._id);\n            }\n        }\n        for (i = 0; i < newNames.length; i++) {\n            subname = newNames[i];\n            if (oldNames.indexOf(subname) === -1 && subname) {\n                exports._addName(this, subname);\n            }\n        }\n        this._setAttr(NAME, name);\n        return this;\n    };\n    Node.prototype.addName = function (name) {\n        if (!this.hasName(name)) {\n            var oldName = this.name();\n            var newName = oldName ? oldName + ' ' + name : name;\n            this.setName(newName);\n        }\n        return this;\n    };\n    Node.prototype.hasName = function (name) {\n        if (!name) {\n            return false;\n        }\n        var fullName = this.name();\n        if (!fullName) {\n            return false;\n        }\n        var names = (fullName || '').split(/\\s/g);\n        return names.indexOf(name) !== -1;\n    };\n    Node.prototype.removeName = function (name) {\n        var names = (this.name() || '').split(/\\s/g);\n        var index = names.indexOf(name);\n        if (index !== -1) {\n            names.splice(index, 1);\n            this.setName(names.join(' '));\n        }\n        return this;\n    };\n    Node.prototype.setAttr = function (attr, val) {\n        var func = this[SET + Util_1.Util._capitalize(attr)];\n        if (Util_1.Util._isFunction(func)) {\n            func.call(this, val);\n        }\n        else {\n            this._setAttr(attr, val);\n        }\n        return this;\n    };\n    Node.prototype._setAttr = function (key, val) {\n        var oldVal = this.attrs[key];\n        if (oldVal === val && !Util_1.Util.isObject(val)) {\n            return;\n        }\n        if (val === undefined || val === null) {\n            delete this.attrs[key];\n        }\n        else {\n            this.attrs[key] = val;\n        }\n        this._fireChangeEvent(key, oldVal, val);\n    };\n    Node.prototype._setComponentAttr = function (key, component, val) {\n        var oldVal;\n        if (val !== undefined) {\n            oldVal = this.attrs[key];\n            if (!oldVal) {\n                this.attrs[key] = this.getAttr(key);\n            }\n            this.attrs[key][component] = val;\n            this._fireChangeEvent(key, oldVal, val);\n        }\n    };\n    Node.prototype._fireAndBubble = function (eventType, evt, compareShape) {\n        if (evt && this.nodeType === SHAPE) {\n            evt.target = this;\n        }\n        var shouldStop = (eventType === MOUSEENTER || eventType === MOUSELEAVE) &&\n            ((compareShape &&\n                (this === compareShape ||\n                    (this.isAncestorOf && this.isAncestorOf(compareShape)))) ||\n                (this.nodeType === 'Stage' && !compareShape));\n        if (!shouldStop) {\n            this._fire(eventType, evt);\n            var stopBubble = (eventType === MOUSEENTER || eventType === MOUSELEAVE) &&\n                compareShape &&\n                compareShape.isAncestorOf &&\n                compareShape.isAncestorOf(this) &&\n                !compareShape.isAncestorOf(this.parent);\n            if (((evt && !evt.cancelBubble) || !evt) &&\n                this.parent &&\n                this.parent.isListening() &&\n                !stopBubble) {\n                if (compareShape && compareShape.parent) {\n                    this._fireAndBubble.call(this.parent, eventType, evt, compareShape);\n                }\n                else {\n                    this._fireAndBubble.call(this.parent, eventType, evt);\n                }\n            }\n        }\n    };\n    Node.prototype._fire = function (eventType, evt) {\n        var events = this.eventListeners[eventType], i;\n        if (events) {\n            evt = evt || {};\n            evt.currentTarget = this;\n            evt.type = eventType;\n            for (i = 0; i < events.length; i++) {\n                events[i].handler.call(this, evt);\n            }\n        }\n    };\n    Node.prototype.draw = function () {\n        this.drawScene();\n        this.drawHit();\n        return this;\n    };\n    Node.prototype._createDragElement = function (evt) {\n        var pointerId = evt ? evt.pointerId : undefined;\n        var stage = this.getStage();\n        var ap = this.getAbsolutePosition();\n        var pos = stage._getPointerById(pointerId) ||\n            stage._changedPointerPositions[0] ||\n            ap;\n        DragAndDrop_1.DD._dragElements.set(this._id, {\n            node: this,\n            startPointerPos: pos,\n            offset: {\n                x: pos.x - ap.x,\n                y: pos.y - ap.y,\n            },\n            dragStatus: 'ready',\n            pointerId: pointerId,\n        });\n    };\n    Node.prototype.startDrag = function (evt) {\n        if (!DragAndDrop_1.DD._dragElements.has(this._id)) {\n            this._createDragElement(evt);\n        }\n        var elem = DragAndDrop_1.DD._dragElements.get(this._id);\n        elem.dragStatus = 'dragging';\n        this.fire('dragstart', {\n            type: 'dragstart',\n            target: this,\n            evt: evt && evt.evt,\n        }, true);\n    };\n    Node.prototype._setDragPosition = function (evt, elem) {\n        var pos = this.getStage()._getPointerById(elem.pointerId);\n        if (!pos) {\n            return;\n        }\n        var newNodePos = {\n            x: pos.x - elem.offset.x,\n            y: pos.y - elem.offset.y,\n        };\n        var dbf = this.dragBoundFunc();\n        if (dbf !== undefined) {\n            var bounded = dbf.call(this, newNodePos, evt);\n            if (!bounded) {\n                Util_1.Util.warn('dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.');\n            }\n            else {\n                newNodePos = bounded;\n            }\n        }\n        if (!this._lastPos ||\n            this._lastPos.x !== newNodePos.x ||\n            this._lastPos.y !== newNodePos.y) {\n            this.setAbsolutePosition(newNodePos);\n            if (this.getLayer()) {\n                this.getLayer().batchDraw();\n            }\n            else if (this.getStage()) {\n                this.getStage().batchDraw();\n            }\n        }\n        this._lastPos = newNodePos;\n    };\n    Node.prototype.stopDrag = function (evt) {\n        var elem = DragAndDrop_1.DD._dragElements.get(this._id);\n        if (elem) {\n            elem.dragStatus = 'stopped';\n        }\n        DragAndDrop_1.DD._endDragBefore(evt);\n        DragAndDrop_1.DD._endDragAfter(evt);\n    };\n    Node.prototype.setDraggable = function (draggable) {\n        this._setAttr('draggable', draggable);\n        this._dragChange();\n    };\n    Node.prototype.isDragging = function () {\n        var elem = DragAndDrop_1.DD._dragElements.get(this._id);\n        return elem ? elem.dragStatus === 'dragging' : false;\n    };\n    Node.prototype._listenDrag = function () {\n        this._dragCleanup();\n        this.on('mousedown.konva touchstart.konva', function (evt) {\n            var _this = this;\n            var shouldCheckButton = evt.evt['button'] !== undefined;\n            var canDrag = !shouldCheckButton || Global_1.Konva.dragButtons.indexOf(evt.evt['button']) >= 0;\n            if (!canDrag) {\n                return;\n            }\n            if (this.isDragging()) {\n                return;\n            }\n            var hasDraggingChild = false;\n            DragAndDrop_1.DD._dragElements.forEach(function (elem) {\n                if (_this.isAncestorOf(elem.node)) {\n                    hasDraggingChild = true;\n                }\n            });\n            if (!hasDraggingChild) {\n                this._createDragElement(evt);\n            }\n        });\n    };\n    Node.prototype._dragChange = function () {\n        if (this.attrs.draggable) {\n            this._listenDrag();\n        }\n        else {\n            this._dragCleanup();\n            var stage = this.getStage();\n            if (stage && DragAndDrop_1.DD._dragElements.has(this._id)) {\n                this.stopDrag();\n            }\n        }\n    };\n    Node.prototype._dragCleanup = function () {\n        this.off('mousedown.konva');\n        this.off('touchstart.konva');\n    };\n    Node.create = function (data, container) {\n        if (Util_1.Util._isString(data)) {\n            data = JSON.parse(data);\n        }\n        return this._createNode(data, container);\n    };\n    Node._createNode = function (obj, container) {\n        var className = Node.prototype.getClassName.call(obj), children = obj.children, no, len, n;\n        if (container) {\n            obj.attrs.container = container;\n        }\n        if (!Global_1._NODES_REGISTRY[className]) {\n            Util_1.Util.warn('Can not find a node with class name \"' +\n                className +\n                '\". Fallback to \"Shape\".');\n            className = 'Shape';\n        }\n        var Class = Global_1._NODES_REGISTRY[className];\n        no = new Class(obj.attrs);\n        if (children) {\n            len = children.length;\n            for (n = 0; n < len; n++) {\n                no.add(Node._createNode(children[n]));\n            }\n        }\n        return no;\n    };\n    return Node;\n}());\nexports.Node = Node;\nNode.prototype.nodeType = 'Node';\nNode.prototype._attrsAffectingSize = [];\nFactory_1.Factory.addGetterSetter(Node, 'zIndex');\nFactory_1.Factory.addGetterSetter(Node, 'absolutePosition');\nFactory_1.Factory.addGetterSetter(Node, 'position');\nFactory_1.Factory.addGetterSetter(Node, 'x', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Node, 'y', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Node, 'globalCompositeOperation', 'source-over', Validators_1.getStringValidator());\nFactory_1.Factory.addGetterSetter(Node, 'opacity', 1, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Node, 'name', '', Validators_1.getStringValidator());\nFactory_1.Factory.addGetterSetter(Node, 'id', '', Validators_1.getStringValidator());\nFactory_1.Factory.addGetterSetter(Node, 'rotation', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addComponentsGetterSetter(Node, 'scale', ['x', 'y']);\nFactory_1.Factory.addGetterSetter(Node, 'scaleX', 1, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Node, 'scaleY', 1, Validators_1.getNumberValidator());\nFactory_1.Factory.addComponentsGetterSetter(Node, 'skew', ['x', 'y']);\nFactory_1.Factory.addGetterSetter(Node, 'skewX', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Node, 'skewY', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addComponentsGetterSetter(Node, 'offset', ['x', 'y']);\nFactory_1.Factory.addGetterSetter(Node, 'offsetX', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Node, 'offsetY', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Node, 'dragDistance', null, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Node, 'width', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Node, 'height', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Node, 'listening', 'inherit', function (val) {\n    var isValid = val === true || val === false || val === 'inherit';\n    if (!isValid) {\n        Util_1.Util.warn(val +\n            ' is a not valid value for \"listening\" attribute. The value may be true, false or \"inherit\".');\n    }\n    return val;\n});\nFactory_1.Factory.addGetterSetter(Node, 'preventDefault', true, Validators_1.getBooleanValidator());\nFactory_1.Factory.addGetterSetter(Node, 'filters', null, function (val) {\n    this._filterUpToDate = false;\n    return val;\n});\nFactory_1.Factory.addGetterSetter(Node, 'visible', 'inherit', function (val) {\n    var isValid = val === true || val === false || val === 'inherit';\n    if (!isValid) {\n        Util_1.Util.warn(val +\n            ' is a not valid value for \"visible\" attribute. The value may be true, false or \"inherit\".');\n    }\n    return val;\n});\nFactory_1.Factory.addGetterSetter(Node, 'transformsEnabled', 'all', Validators_1.getStringValidator());\nFactory_1.Factory.addGetterSetter(Node, 'size');\nFactory_1.Factory.addGetterSetter(Node, 'dragBoundFunc');\nFactory_1.Factory.addGetterSetter(Node, 'draggable', false, Validators_1.getBooleanValidator());\nFactory_1.Factory.backCompat(Node, {\n    rotateDeg: 'rotate',\n    setRotationDeg: 'setRotation',\n    getRotationDeg: 'getRotation',\n});\nUtil_1.Collection.mapMethods(Node);\n","var toIndexedObject = require('../internals/to-indexed-object');\nvar toLength = require('../internals/to-length');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\n\n// `Array.prototype.{ indexOf, includes }` methods implementation\nvar createMethod = function (IS_INCLUDES) {\n  return function ($this, el, fromIndex) {\n    var O = toIndexedObject($this);\n    var length = toLength(O.length);\n    var index = toAbsoluteIndex(fromIndex, length);\n    var value;\n    // Array#includes uses SameValueZero equality algorithm\n    // eslint-disable-next-line no-self-compare\n    if (IS_INCLUDES && el != el) while (length > index) {\n      value = O[index++];\n      // eslint-disable-next-line no-self-compare\n      if (value != value) return true;\n    // Array#indexOf ignores holes, Array#includes - not\n    } else for (;length > index; index++) {\n      if ((IS_INCLUDES || index in O) && O[index] === el) return IS_INCLUDES || index || 0;\n    } return !IS_INCLUDES && -1;\n  };\n};\n\nmodule.exports = {\n  // `Array.prototype.includes` method\n  // https://tc39.github.io/ecma262/#sec-array.prototype.includes\n  includes: createMethod(true),\n  // `Array.prototype.indexOf` method\n  // https://tc39.github.io/ecma262/#sec-array.prototype.indexof\n  indexOf: createMethod(false)\n};\n","var toInteger = require('../internals/to-integer');\n\nvar min = Math.min;\n\n// `ToLength` abstract operation\n// https://tc39.github.io/ecma262/#sec-tolength\nmodule.exports = function (argument) {\n  return argument > 0 ? min(toInteger(argument), 0x1FFFFFFFFFFFFF) : 0; // 2 ** 53 - 1 == 9007199254740991\n};\n","var hasOwnProperty = {}.hasOwnProperty;\n\nmodule.exports = function (it, key) {\n  return hasOwnProperty.call(it, key);\n};\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Util_1 = require(\"../Util\");\nvar Factory_1 = require(\"../Factory\");\nvar Shape_1 = require(\"../Shape\");\nvar Global_1 = require(\"../Global\");\nvar Validators_1 = require(\"../Validators\");\nvar Global_2 = require(\"../Global\");\nvar AUTO = 'auto', CENTER = 'center', JUSTIFY = 'justify', CHANGE_KONVA = 'Change.konva', CONTEXT_2D = '2d', DASH = '-', LEFT = 'left', TEXT = 'text', TEXT_UPPER = 'Text', TOP = 'top', BOTTOM = 'bottom', MIDDLE = 'middle', NORMAL = 'normal', PX_SPACE = 'px ', SPACE = ' ', RIGHT = 'right', WORD = 'word', CHAR = 'char', NONE = 'none', ELLIPSIS = '…', ATTR_CHANGE_LIST = [\n    'fontFamily',\n    'fontSize',\n    'fontStyle',\n    'fontVariant',\n    'padding',\n    'align',\n    'verticalAlign',\n    'lineHeight',\n    'text',\n    'width',\n    'height',\n    'wrap',\n    'ellipsis',\n    'letterSpacing'\n], attrChangeListLen = ATTR_CHANGE_LIST.length;\nvar dummyContext;\nfunction getDummyContext() {\n    if (dummyContext) {\n        return dummyContext;\n    }\n    dummyContext = Util_1.Util.createCanvasElement().getContext(CONTEXT_2D);\n    return dummyContext;\n}\nfunction _fillFunc(context) {\n    context.fillText(this._partialText, this._partialTextX, this._partialTextY);\n}\nfunction _strokeFunc(context) {\n    context.strokeText(this._partialText, this._partialTextX, this._partialTextY);\n}\nfunction checkDefaultFill(config) {\n    config = config || {};\n    if (!config.fillLinearGradientColorStops &&\n        !config.fillRadialGradientColorStops &&\n        !config.fillPatternImage) {\n        config.fill = config.fill || 'black';\n    }\n    return config;\n}\nvar trimRight = String.prototype.trimRight ||\n    function polyfill() {\n        return this.replace(/[\\s\\xa0]+$/, '');\n    };\nvar Text = (function (_super) {\n    __extends(Text, _super);\n    function Text(config) {\n        var _this = _super.call(this, checkDefaultFill(config)) || this;\n        _this._partialTextX = 0;\n        _this._partialTextY = 0;\n        for (var n = 0; n < attrChangeListLen; n++) {\n            _this.on(ATTR_CHANGE_LIST[n] + CHANGE_KONVA, _this._setTextData);\n        }\n        _this._setTextData();\n        return _this;\n    }\n    Text.prototype._sceneFunc = function (context) {\n        var padding = this.padding(), fontSize = this.fontSize(), lineHeightPx = this.lineHeight() * fontSize, textArr = this.textArr, textArrLen = textArr.length, verticalAlign = this.verticalAlign(), alignY = 0, align = this.align(), totalWidth = this.getWidth(), letterSpacing = this.letterSpacing(), fill = this.fill(), textDecoration = this.textDecoration(), shouldUnderline = textDecoration.indexOf('underline') !== -1, shouldLineThrough = textDecoration.indexOf('line-through') !== -1, n;\n        var translateY = 0;\n        var translateY = lineHeightPx / 2;\n        var lineTranslateX = 0;\n        var lineTranslateY = 0;\n        context.setAttr('font', this._getContextFont());\n        context.setAttr('textBaseline', MIDDLE);\n        context.setAttr('textAlign', LEFT);\n        if (verticalAlign === MIDDLE) {\n            alignY = (this.getHeight() - textArrLen * lineHeightPx - padding * 2) / 2;\n        }\n        else if (verticalAlign === BOTTOM) {\n            alignY = this.getHeight() - textArrLen * lineHeightPx - padding * 2;\n        }\n        context.translate(padding, alignY + padding);\n        for (n = 0; n < textArrLen; n++) {\n            var lineTranslateX = 0;\n            var lineTranslateY = 0;\n            var obj = textArr[n], text = obj.text, width = obj.width, lastLine = n !== textArrLen - 1, spacesNumber, oneWord, lineWidth;\n            context.save();\n            if (align === RIGHT) {\n                lineTranslateX += totalWidth - width - padding * 2;\n            }\n            else if (align === CENTER) {\n                lineTranslateX += (totalWidth - width - padding * 2) / 2;\n            }\n            if (shouldUnderline) {\n                context.save();\n                context.beginPath();\n                context.moveTo(lineTranslateX, translateY + lineTranslateY + Math.round(fontSize / 2));\n                spacesNumber = text.split(' ').length - 1;\n                oneWord = spacesNumber === 0;\n                lineWidth =\n                    align === JUSTIFY && lastLine && !oneWord\n                        ? totalWidth - padding * 2\n                        : width;\n                context.lineTo(lineTranslateX + Math.round(lineWidth), translateY + lineTranslateY + Math.round(fontSize / 2));\n                context.lineWidth = fontSize / 15;\n                context.strokeStyle = fill;\n                context.stroke();\n                context.restore();\n            }\n            if (shouldLineThrough) {\n                context.save();\n                context.beginPath();\n                context.moveTo(lineTranslateX, translateY + lineTranslateY);\n                spacesNumber = text.split(' ').length - 1;\n                oneWord = spacesNumber === 0;\n                lineWidth =\n                    align === JUSTIFY && lastLine && !oneWord\n                        ? totalWidth - padding * 2\n                        : width;\n                context.lineTo(lineTranslateX + Math.round(lineWidth), translateY + lineTranslateY);\n                context.lineWidth = fontSize / 15;\n                context.strokeStyle = fill;\n                context.stroke();\n                context.restore();\n            }\n            if (letterSpacing !== 0 || align === JUSTIFY) {\n                spacesNumber = text.split(' ').length - 1;\n                for (var li = 0; li < text.length; li++) {\n                    var letter = text[li];\n                    if (letter === ' ' && n !== textArrLen - 1 && align === JUSTIFY) {\n                        lineTranslateX += Math.floor((totalWidth - padding * 2 - width) / spacesNumber);\n                    }\n                    this._partialTextX = lineTranslateX;\n                    this._partialTextY = translateY + lineTranslateY;\n                    this._partialText = letter;\n                    context.fillStrokeShape(this);\n                    lineTranslateX +=\n                        Math.round(this.measureSize(letter).width) + letterSpacing;\n                }\n            }\n            else {\n                this._partialTextX = lineTranslateX;\n                this._partialTextY = translateY + lineTranslateY;\n                this._partialText = text;\n                context.fillStrokeShape(this);\n            }\n            context.restore();\n            if (textArrLen > 1) {\n                translateY += lineHeightPx;\n            }\n        }\n    };\n    Text.prototype._hitFunc = function (context) {\n        var width = this.getWidth(), height = this.getHeight();\n        context.beginPath();\n        context.rect(0, 0, width, height);\n        context.closePath();\n        context.fillStrokeShape(this);\n    };\n    Text.prototype.setText = function (text) {\n        var str = Util_1.Util._isString(text)\n            ? text\n            : text === null || text === undefined\n                ? ''\n                : text + '';\n        this._setAttr(TEXT, str);\n        return this;\n    };\n    Text.prototype.getWidth = function () {\n        var isAuto = this.attrs.width === AUTO || this.attrs.width === undefined;\n        return isAuto ? this.getTextWidth() + this.padding() * 2 : this.attrs.width;\n    };\n    Text.prototype.getHeight = function () {\n        var isAuto = this.attrs.height === AUTO || this.attrs.height === undefined;\n        return isAuto\n            ? this.fontSize() * this.textArr.length * this.lineHeight() +\n                this.padding() * 2\n            : this.attrs.height;\n    };\n    Text.prototype.getTextWidth = function () {\n        return this.textWidth;\n    };\n    Text.prototype.getTextHeight = function () {\n        Util_1.Util.warn('text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height.');\n        return this.textHeight;\n    };\n    Text.prototype.measureSize = function (text) {\n        var _context = getDummyContext(), fontSize = this.fontSize(), metrics;\n        _context.save();\n        _context.font = this._getContextFont();\n        metrics = _context.measureText(text);\n        _context.restore();\n        return {\n            width: metrics.width,\n            height: fontSize\n        };\n    };\n    Text.prototype._getContextFont = function () {\n        if (Global_1.Konva.UA.isIE) {\n            return (this.fontStyle() +\n                SPACE +\n                this.fontSize() +\n                PX_SPACE +\n                this.fontFamily());\n        }\n        return (this.fontStyle() +\n            SPACE +\n            this.fontVariant() +\n            SPACE +\n            this.fontSize() +\n            PX_SPACE +\n            this.fontFamily());\n    };\n    Text.prototype._addTextLine = function (line) {\n        if (this.align() === JUSTIFY) {\n            line = line.trim();\n        }\n        var width = this._getTextWidth(line);\n        return this.textArr.push({ text: line, width: width });\n    };\n    Text.prototype._getTextWidth = function (text) {\n        var letterSpacing = this.letterSpacing();\n        var length = text.length;\n        return (getDummyContext().measureText(text).width +\n            (length ? letterSpacing * (length - 1) : 0));\n    };\n    Text.prototype._setTextData = function () {\n        var lines = this.text().split('\\n'), fontSize = +this.fontSize(), textWidth = 0, lineHeightPx = this.lineHeight() * fontSize, width = this.attrs.width, height = this.attrs.height, fixedWidth = width !== AUTO && width !== undefined, fixedHeight = height !== AUTO && height !== undefined, padding = this.padding(), maxWidth = width - padding * 2, maxHeightPx = height - padding * 2, currentHeightPx = 0, wrap = this.wrap(), shouldWrap = wrap !== NONE, wrapAtWord = wrap !== CHAR && shouldWrap, shouldAddEllipsis = this.ellipsis() && !shouldWrap;\n        this.textArr = [];\n        getDummyContext().font = this._getContextFont();\n        var additionalWidth = shouldAddEllipsis ? this._getTextWidth(ELLIPSIS) : 0;\n        for (var i = 0, max = lines.length; i < max; ++i) {\n            var line = lines[i];\n            var lineWidth = this._getTextWidth(line);\n            if (fixedWidth && lineWidth > maxWidth) {\n                while (line.length > 0) {\n                    var low = 0, high = line.length, match = '', matchWidth = 0;\n                    while (low < high) {\n                        var mid = (low + high) >>> 1, substr = line.slice(0, mid + 1), substrWidth = this._getTextWidth(substr) + additionalWidth;\n                        if (substrWidth <= maxWidth) {\n                            low = mid + 1;\n                            match = substr + (shouldAddEllipsis ? ELLIPSIS : '');\n                            matchWidth = substrWidth;\n                        }\n                        else {\n                            high = mid;\n                        }\n                    }\n                    if (match) {\n                        if (wrapAtWord) {\n                            var wrapIndex;\n                            var nextChar = line[match.length];\n                            var nextIsSpaceOrDash = nextChar === SPACE || nextChar === DASH;\n                            if (nextIsSpaceOrDash && matchWidth <= maxWidth) {\n                                wrapIndex = match.length;\n                            }\n                            else {\n                                wrapIndex =\n                                    Math.max(match.lastIndexOf(SPACE), match.lastIndexOf(DASH)) +\n                                        1;\n                            }\n                            if (wrapIndex > 0) {\n                                low = wrapIndex;\n                                match = match.slice(0, low);\n                                matchWidth = this._getTextWidth(match);\n                            }\n                        }\n                        match = match.trimRight();\n                        this._addTextLine(match);\n                        textWidth = Math.max(textWidth, matchWidth);\n                        currentHeightPx += lineHeightPx;\n                        if (!shouldWrap ||\n                            (fixedHeight && currentHeightPx + lineHeightPx > maxHeightPx)) {\n                            break;\n                        }\n                        line = line.slice(low);\n                        line = line.trimLeft();\n                        if (line.length > 0) {\n                            lineWidth = this._getTextWidth(line);\n                            if (lineWidth <= maxWidth) {\n                                this._addTextLine(line);\n                                currentHeightPx += lineHeightPx;\n                                textWidth = Math.max(textWidth, lineWidth);\n                                break;\n                            }\n                        }\n                    }\n                    else {\n                        break;\n                    }\n                }\n            }\n            else {\n                this._addTextLine(line);\n                currentHeightPx += lineHeightPx;\n                textWidth = Math.max(textWidth, lineWidth);\n            }\n            if (fixedHeight && currentHeightPx + lineHeightPx > maxHeightPx) {\n                break;\n            }\n        }\n        this.textHeight = fontSize;\n        this.textWidth = textWidth;\n    };\n    Text.prototype.getStrokeScaleEnabled = function () {\n        return true;\n    };\n    return Text;\n}(Shape_1.Shape));\nexports.Text = Text;\nText.prototype._fillFunc = _fillFunc;\nText.prototype._strokeFunc = _strokeFunc;\nText.prototype.className = TEXT_UPPER;\nText.prototype._attrsAffectingSize = [\n    'text',\n    'fontSize',\n    'padding',\n    'wrap',\n    'lineHeight'\n];\nGlobal_2._registerNode(Text);\nFactory_1.Factory.overWriteSetter(Text, 'width', Validators_1.getNumberOrAutoValidator());\nFactory_1.Factory.overWriteSetter(Text, 'height', Validators_1.getNumberOrAutoValidator());\nFactory_1.Factory.addGetterSetter(Text, 'fontFamily', 'Arial');\nFactory_1.Factory.addGetterSetter(Text, 'fontSize', 12, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Text, 'fontStyle', NORMAL);\nFactory_1.Factory.addGetterSetter(Text, 'fontVariant', NORMAL);\nFactory_1.Factory.addGetterSetter(Text, 'padding', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Text, 'align', LEFT);\nFactory_1.Factory.addGetterSetter(Text, 'verticalAlign', TOP);\nFactory_1.Factory.addGetterSetter(Text, 'lineHeight', 1, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Text, 'wrap', WORD);\nFactory_1.Factory.addGetterSetter(Text, 'ellipsis', false);\nFactory_1.Factory.addGetterSetter(Text, 'letterSpacing', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Text, 'text', '', Validators_1.getStringValidator());\nFactory_1.Factory.addGetterSetter(Text, 'textDecoration', '');\nUtil_1.Collection.mapMethods(Text);\n","var IS_PURE = require('../internals/is-pure');\nvar store = require('../internals/shared-store');\n\n(module.exports = function (key, value) {\n  return store[key] || (store[key] = value !== undefined ? value : {});\n})('versions', []).push({\n  version: '3.6.5',\n  mode: IS_PURE ? 'pure' : 'global',\n  copyright: '© 2020 Denis Pushkarev (zloirock.ru)'\n});\n","var getBuiltIn = require('../internals/get-built-in');\nvar getOwnPropertyNamesModule = require('../internals/object-get-own-property-names');\nvar getOwnPropertySymbolsModule = require('../internals/object-get-own-property-symbols');\nvar anObject = require('../internals/an-object');\n\n// all object keys, includes non-enumerable and symbols\nmodule.exports = getBuiltIn('Reflect', 'ownKeys') || function ownKeys(it) {\n  var keys = getOwnPropertyNamesModule.f(anObject(it));\n  var getOwnPropertySymbols = getOwnPropertySymbolsModule.f;\n  return getOwnPropertySymbols ? keys.concat(getOwnPropertySymbols(it)) : keys;\n};\n","// a string of all valid unicode whitespaces\n// eslint-disable-next-line max-len\nmodule.exports = '\\u0009\\u000A\\u000B\\u000C\\u000D\\u0020\\u00A0\\u1680\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF';\n","var requireObjectCoercible = require('../internals/require-object-coercible');\nvar whitespaces = require('../internals/whitespaces');\n\nvar whitespace = '[' + whitespaces + ']';\nvar ltrim = RegExp('^' + whitespace + whitespace + '*');\nvar rtrim = RegExp(whitespace + whitespace + '*$');\n\n// `String.prototype.{ trim, trimStart, trimEnd, trimLeft, trimRight }` methods implementation\nvar createMethod = function (TYPE) {\n  return function ($this) {\n    var string = String(requireObjectCoercible($this));\n    if (TYPE & 1) string = string.replace(ltrim, '');\n    if (TYPE & 2) string = string.replace(rtrim, '');\n    return string;\n  };\n};\n\nmodule.exports = {\n  // `String.prototype.{ trimLeft, trimStart }` methods\n  // https://tc39.github.io/ecma262/#sec-string.prototype.trimstart\n  start: createMethod(1),\n  // `String.prototype.{ trimRight, trimEnd }` methods\n  // https://tc39.github.io/ecma262/#sec-string.prototype.trimend\n  end: createMethod(2),\n  // `String.prototype.trim` method\n  // https://tc39.github.io/ecma262/#sec-string.prototype.trim\n  trim: createMethod(3)\n};\n","module.exports = function (bitmap, value) {\n  return {\n    enumerable: !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable: !(bitmap & 4),\n    value: value\n  };\n};\n","var toInteger = require('../internals/to-integer');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\n\n// `String.prototype.{ codePointAt, at }` methods implementation\nvar createMethod = function (CONVERT_TO_STRING) {\n  return function ($this, pos) {\n    var S = String(requireObjectCoercible($this));\n    var position = toInteger(pos);\n    var size = S.length;\n    var first, second;\n    if (position < 0 || position >= size) return CONVERT_TO_STRING ? '' : undefined;\n    first = S.charCodeAt(position);\n    return first < 0xD800 || first > 0xDBFF || position + 1 === size\n      || (second = S.charCodeAt(position + 1)) < 0xDC00 || second > 0xDFFF\n        ? CONVERT_TO_STRING ? S.charAt(position) : first\n        : CONVERT_TO_STRING ? S.slice(position, position + 2) : (first - 0xD800 << 10) + (second - 0xDC00) + 0x10000;\n  };\n};\n\nmodule.exports = {\n  // `String.prototype.codePointAt` method\n  // https://tc39.github.io/ecma262/#sec-string.prototype.codepointat\n  codeAt: createMethod(false),\n  // `String.prototype.at` method\n  // https://github.com/mathiasbynens/String.prototype.at\n  charAt: createMethod(true)\n};\n","var isObject = require('../internals/is-object');\nvar isArray = require('../internals/is-array');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar SPECIES = wellKnownSymbol('species');\n\n// `ArraySpeciesCreate` abstract operation\n// https://tc39.github.io/ecma262/#sec-arrayspeciescreate\nmodule.exports = function (originalArray, length) {\n  var C;\n  if (isArray(originalArray)) {\n    C = originalArray.constructor;\n    // cross-realm fallback\n    if (typeof C == 'function' && (C === Array || isArray(C.prototype))) C = undefined;\n    else if (isObject(C)) {\n      C = C[SPECIES];\n      if (C === null) C = undefined;\n    }\n  } return new (C === undefined ? Array : C)(length === 0 ? 0 : length);\n};\n","var NATIVE_WEAK_MAP = require('../internals/native-weak-map');\nvar global = require('../internals/global');\nvar isObject = require('../internals/is-object');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar objectHas = require('../internals/has');\nvar sharedKey = require('../internals/shared-key');\nvar hiddenKeys = require('../internals/hidden-keys');\n\nvar WeakMap = global.WeakMap;\nvar set, get, has;\n\nvar enforce = function (it) {\n  return has(it) ? get(it) : set(it, {});\n};\n\nvar getterFor = function (TYPE) {\n  return function (it) {\n    var state;\n    if (!isObject(it) || (state = get(it)).type !== TYPE) {\n      throw TypeError('Incompatible receiver, ' + TYPE + ' required');\n    } return state;\n  };\n};\n\nif (NATIVE_WEAK_MAP) {\n  var store = new WeakMap();\n  var wmget = store.get;\n  var wmhas = store.has;\n  var wmset = store.set;\n  set = function (it, metadata) {\n    wmset.call(store, it, metadata);\n    return metadata;\n  };\n  get = function (it) {\n    return wmget.call(store, it) || {};\n  };\n  has = function (it) {\n    return wmhas.call(store, it);\n  };\n} else {\n  var STATE = sharedKey('state');\n  hiddenKeys[STATE] = true;\n  set = function (it, metadata) {\n    createNonEnumerableProperty(it, STATE, metadata);\n    return metadata;\n  };\n  get = function (it) {\n    return objectHas(it, STATE) ? it[STATE] : {};\n  };\n  has = function (it) {\n    return objectHas(it, STATE);\n  };\n}\n\nmodule.exports = {\n  set: set,\n  get: get,\n  has: has,\n  enforce: enforce,\n  getterFor: getterFor\n};\n","var global = require('../internals/global');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar has = require('../internals/has');\nvar setGlobal = require('../internals/set-global');\nvar inspectSource = require('../internals/inspect-source');\nvar InternalStateModule = require('../internals/internal-state');\n\nvar getInternalState = InternalStateModule.get;\nvar enforceInternalState = InternalStateModule.enforce;\nvar TEMPLATE = String(String).split('String');\n\n(module.exports = function (O, key, value, options) {\n  var unsafe = options ? !!options.unsafe : false;\n  var simple = options ? !!options.enumerable : false;\n  var noTargetGet = options ? !!options.noTargetGet : false;\n  if (typeof value == 'function') {\n    if (typeof key == 'string' && !has(value, 'name')) createNonEnumerableProperty(value, 'name', key);\n    enforceInternalState(value).source = TEMPLATE.join(typeof key == 'string' ? key : '');\n  }\n  if (O === global) {\n    if (simple) O[key] = value;\n    else setGlobal(key, value);\n    return;\n  } else if (!unsafe) {\n    delete O[key];\n  } else if (!noTargetGet && O[key]) {\n    simple = true;\n  }\n  if (simple) O[key] = value;\n  else createNonEnumerableProperty(O, key, value);\n// add fake Function#toString for correct work wrapped methods / constructors with methods like LoDash isNative\n})(Function.prototype, 'toString', function toString() {\n  return typeof this == 'function' && getInternalState(this).source || inspectSource(this);\n});\n","var isObject = require('../internals/is-object');\nvar setPrototypeOf = require('../internals/object-set-prototype-of');\n\n// makes subclassing work correct for wrapped built-ins\nmodule.exports = function ($this, dummy, Wrapper) {\n  var NewTarget, NewTargetPrototype;\n  if (\n    // it can work only with native `setPrototypeOf`\n    setPrototypeOf &&\n    // we haven't completely correct pre-ES6 way for getting `new.target`, so use this\n    typeof (NewTarget = dummy.constructor) == 'function' &&\n    NewTarget !== Wrapper &&\n    isObject(NewTargetPrototype = NewTarget.prototype) &&\n    NewTargetPrototype !== Wrapper.prototype\n  ) setPrototypeOf($this, NewTargetPrototype);\n  return $this;\n};\n","exports.f = Object.getOwnPropertySymbols;\n","// IE8- don't enum bug keys\nmodule.exports = [\n  'constructor',\n  'hasOwnProperty',\n  'isPrototypeOf',\n  'propertyIsEnumerable',\n  'toLocaleString',\n  'toString',\n  'valueOf'\n];\n","var requireObjectCoercible = require('../internals/require-object-coercible');\n\n// `ToObject` abstract operation\n// https://tc39.github.io/ecma262/#sec-toobject\nmodule.exports = function (argument) {\n  return Object(requireObjectCoercible(argument));\n};\n","var anObject = require('../internals/an-object');\nvar defineProperties = require('../internals/object-define-properties');\nvar enumBugKeys = require('../internals/enum-bug-keys');\nvar hiddenKeys = require('../internals/hidden-keys');\nvar html = require('../internals/html');\nvar documentCreateElement = require('../internals/document-create-element');\nvar sharedKey = require('../internals/shared-key');\n\nvar GT = '>';\nvar LT = '<';\nvar PROTOTYPE = 'prototype';\nvar SCRIPT = 'script';\nvar IE_PROTO = sharedKey('IE_PROTO');\n\nvar EmptyConstructor = function () { /* empty */ };\n\nvar scriptTag = function (content) {\n  return LT + SCRIPT + GT + content + LT + '/' + SCRIPT + GT;\n};\n\n// Create object with fake `null` prototype: use ActiveX Object with cleared prototype\nvar NullProtoObjectViaActiveX = function (activeXDocument) {\n  activeXDocument.write(scriptTag(''));\n  activeXDocument.close();\n  var temp = activeXDocument.parentWindow.Object;\n  activeXDocument = null; // avoid memory leak\n  return temp;\n};\n\n// Create object with fake `null` prototype: use iframe Object with cleared prototype\nvar NullProtoObjectViaIFrame = function () {\n  // Thrash, waste and sodomy: IE GC bug\n  var iframe = documentCreateElement('iframe');\n  var JS = 'java' + SCRIPT + ':';\n  var iframeDocument;\n  iframe.style.display = 'none';\n  html.appendChild(iframe);\n  // https://github.com/zloirock/core-js/issues/475\n  iframe.src = String(JS);\n  iframeDocument = iframe.contentWindow.document;\n  iframeDocument.open();\n  iframeDocument.write(scriptTag('document.F=Object'));\n  iframeDocument.close();\n  return iframeDocument.F;\n};\n\n// Check for document.domain and active x support\n// No need to use active x approach when document.domain is not set\n// see https://github.com/es-shims/es5-shim/issues/150\n// variation of https://github.com/kitcambridge/es5-shim/commit/4f738ac066346\n// avoid IE GC bug\nvar activeXDocument;\nvar NullProtoObject = function () {\n  try {\n    /* global ActiveXObject */\n    activeXDocument = document.domain && new ActiveXObject('htmlfile');\n  } catch (error) { /* ignore */ }\n  NullProtoObject = activeXDocument ? NullProtoObjectViaActiveX(activeXDocument) : NullProtoObjectViaIFrame();\n  var length = enumBugKeys.length;\n  while (length--) delete NullProtoObject[PROTOTYPE][enumBugKeys[length]];\n  return NullProtoObject();\n};\n\nhiddenKeys[IE_PROTO] = true;\n\n// `Object.create` method\n// https://tc39.github.io/ecma262/#sec-object.create\nmodule.exports = Object.create || function create(O, Properties) {\n  var result;\n  if (O !== null) {\n    EmptyConstructor[PROTOTYPE] = anObject(O);\n    result = new EmptyConstructor();\n    EmptyConstructor[PROTOTYPE] = null;\n    // add \"__proto__\" for Object.getPrototypeOf polyfill\n    result[IE_PROTO] = O;\n  } else result = NullProtoObject();\n  return Properties === undefined ? result : defineProperties(result, Properties);\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Global_1 = require(\"./Global\");\nvar Captures = new Map();\nvar SUPPORT_POINTER_EVENTS = Global_1.Konva._global['PointerEvent'] !== undefined;\nfunction getCapturedShape(pointerId) {\n    return Captures.get(pointerId);\n}\nexports.getCapturedShape = getCapturedShape;\nfunction createEvent(evt) {\n    return {\n        evt: evt,\n        pointerId: evt.pointerId\n    };\n}\nexports.createEvent = createEvent;\nfunction hasPointerCapture(pointerId, shape) {\n    return Captures.get(pointerId) === shape;\n}\nexports.hasPointerCapture = hasPointerCapture;\nfunction setPointerCapture(pointerId, shape) {\n    releaseCapture(pointerId);\n    var stage = shape.getStage();\n    if (!stage)\n        return;\n    Captures.set(pointerId, shape);\n    if (SUPPORT_POINTER_EVENTS) {\n        shape._fire('gotpointercapture', createEvent(new PointerEvent('gotpointercapture')));\n    }\n}\nexports.setPointerCapture = setPointerCapture;\nfunction releaseCapture(pointerId, target) {\n    var shape = Captures.get(pointerId);\n    if (!shape)\n        return;\n    var stage = shape.getStage();\n    if (stage && stage.content) {\n    }\n    Captures.delete(pointerId);\n    if (SUPPORT_POINTER_EVENTS) {\n        shape._fire('lostpointercapture', createEvent(new PointerEvent('lostpointercapture')));\n    }\n}\nexports.releaseCapture = releaseCapture;\n","'use strict';\nvar $ = require('../internals/export');\nvar createIteratorConstructor = require('../internals/create-iterator-constructor');\nvar getPrototypeOf = require('../internals/object-get-prototype-of');\nvar setPrototypeOf = require('../internals/object-set-prototype-of');\nvar setToStringTag = require('../internals/set-to-string-tag');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar redefine = require('../internals/redefine');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar IS_PURE = require('../internals/is-pure');\nvar Iterators = require('../internals/iterators');\nvar IteratorsCore = require('../internals/iterators-core');\n\nvar IteratorPrototype = IteratorsCore.IteratorPrototype;\nvar BUGGY_SAFARI_ITERATORS = IteratorsCore.BUGGY_SAFARI_ITERATORS;\nvar ITERATOR = wellKnownSymbol('iterator');\nvar KEYS = 'keys';\nvar VALUES = 'values';\nvar ENTRIES = 'entries';\n\nvar returnThis = function () { return this; };\n\nmodule.exports = function (Iterable, NAME, IteratorConstructor, next, DEFAULT, IS_SET, FORCED) {\n  createIteratorConstructor(IteratorConstructor, NAME, next);\n\n  var getIterationMethod = function (KIND) {\n    if (KIND === DEFAULT && defaultIterator) return defaultIterator;\n    if (!BUGGY_SAFARI_ITERATORS && KIND in IterablePrototype) return IterablePrototype[KIND];\n    switch (KIND) {\n      case KEYS: return function keys() { return new IteratorConstructor(this, KIND); };\n      case VALUES: return function values() { return new IteratorConstructor(this, KIND); };\n      case ENTRIES: return function entries() { return new IteratorConstructor(this, KIND); };\n    } return function () { return new IteratorConstructor(this); };\n  };\n\n  var TO_STRING_TAG = NAME + ' Iterator';\n  var INCORRECT_VALUES_NAME = false;\n  var IterablePrototype = Iterable.prototype;\n  var nativeIterator = IterablePrototype[ITERATOR]\n    || IterablePrototype['@@iterator']\n    || DEFAULT && IterablePrototype[DEFAULT];\n  var defaultIterator = !BUGGY_SAFARI_ITERATORS && nativeIterator || getIterationMethod(DEFAULT);\n  var anyNativeIterator = NAME == 'Array' ? IterablePrototype.entries || nativeIterator : nativeIterator;\n  var CurrentIteratorPrototype, methods, KEY;\n\n  // fix native\n  if (anyNativeIterator) {\n    CurrentIteratorPrototype = getPrototypeOf(anyNativeIterator.call(new Iterable()));\n    if (IteratorPrototype !== Object.prototype && CurrentIteratorPrototype.next) {\n      if (!IS_PURE && getPrototypeOf(CurrentIteratorPrototype) !== IteratorPrototype) {\n        if (setPrototypeOf) {\n          setPrototypeOf(CurrentIteratorPrototype, IteratorPrototype);\n        } else if (typeof CurrentIteratorPrototype[ITERATOR] != 'function') {\n          createNonEnumerableProperty(CurrentIteratorPrototype, ITERATOR, returnThis);\n        }\n      }\n      // Set @@toStringTag to native iterators\n      setToStringTag(CurrentIteratorPrototype, TO_STRING_TAG, true, true);\n      if (IS_PURE) Iterators[TO_STRING_TAG] = returnThis;\n    }\n  }\n\n  // fix Array#{values, @@iterator}.name in V8 / FF\n  if (DEFAULT == VALUES && nativeIterator && nativeIterator.name !== VALUES) {\n    INCORRECT_VALUES_NAME = true;\n    defaultIterator = function values() { return nativeIterator.call(this); };\n  }\n\n  // define iterator\n  if ((!IS_PURE || FORCED) && IterablePrototype[ITERATOR] !== defaultIterator) {\n    createNonEnumerableProperty(IterablePrototype, ITERATOR, defaultIterator);\n  }\n  Iterators[NAME] = defaultIterator;\n\n  // export additional methods\n  if (DEFAULT) {\n    methods = {\n      values: getIterationMethod(VALUES),\n      keys: IS_SET ? defaultIterator : getIterationMethod(KEYS),\n      entries: getIterationMethod(ENTRIES)\n    };\n    if (FORCED) for (KEY in methods) {\n      if (BUGGY_SAFARI_ITERATORS || INCORRECT_VALUES_NAME || !(KEY in IterablePrototype)) {\n        redefine(IterablePrototype, KEY, methods[KEY]);\n      }\n    } else $({ target: NAME, proto: true, forced: BUGGY_SAFARI_ITERATORS || INCORRECT_VALUES_NAME }, methods);\n  }\n\n  return methods;\n};\n","var global = require('../internals/global');\nvar inspectSource = require('../internals/inspect-source');\n\nvar WeakMap = global.WeakMap;\n\nmodule.exports = typeof WeakMap === 'function' && /native code/.test(inspectSource(WeakMap));\n","var isObject = require('../internals/is-object');\n\nmodule.exports = function (it) {\n  if (!isObject(it)) {\n    throw TypeError(String(it) + ' is not an object');\n  } return it;\n};\n","var fails = require('../internals/fails');\n\n// Thank's IE8 for his funny defineProperty\nmodule.exports = !fails(function () {\n  return Object.defineProperty({}, 1, { get: function () { return 7; } })[1] != 7;\n});\n","module.exports = function (it) {\n  return typeof it === 'object' ? it !== null : typeof it === 'function';\n};\n","// addapted from the document.currentScript polyfill by Adam Miller\n// MIT license\n// source: https://github.com/amiller-gh/currentScript-polyfill\n\n// added support for Firefox https://bugzilla.mozilla.org/show_bug.cgi?id=1620505\n\n(function (root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    define([], factory);\n  } else if (typeof module === 'object' && module.exports) {\n    module.exports = factory();\n  } else {\n    root.getCurrentScript = factory();\n  }\n}(typeof self !== 'undefined' ? self : this, function () {\n  function getCurrentScript () {\n    const descriptor = Object.getOwnPropertyDescriptor(document, 'currentScript')\n    // for chrome\n    if (!descriptor && 'currentScript' in document && document.currentScript) {\n      return document.currentScript\n    }\n\n    // for other browsers with native support for currentScript\n    if (descriptor && descriptor.get !== getCurrentScript && document.currentScript) {\n      return document.currentScript\n    }\n  \n    // IE 8-10 support script readyState\n    // IE 11+ & Firefox support stack trace\n    try {\n      throw new Error();\n    }\n    catch (err) {\n      // Find the second match for the \"at\" string to get file src url from stack.\n      var ieStackRegExp = /.*at [^(]*\\((.*):(.+):(.+)\\)$/ig,\n        ffStackRegExp = /@([^@]*):(\\d+):(\\d+)\\s*$/ig,\n        stackDetails = ieStackRegExp.exec(err.stack) || ffStackRegExp.exec(err.stack),\n        scriptLocation = (stackDetails && stackDetails[1]) || false,\n        line = (stackDetails && stackDetails[2]) || false,\n        currentLocation = document.location.href.replace(document.location.hash, ''),\n        pageSource,\n        inlineScriptSourceRegExp,\n        inlineScriptSource,\n        scripts = document.getElementsByTagName('script'); // Live NodeList collection\n  \n      if (scriptLocation === currentLocation) {\n        pageSource = document.documentElement.outerHTML;\n        inlineScriptSourceRegExp = new RegExp('(?:[^\\\\n]+?\\\\n){0,' + (line - 2) + '}[^<]*<script>([\\\\d\\\\D]*?)<\\\\/script>[\\\\d\\\\D]*', 'i');\n        inlineScriptSource = pageSource.replace(inlineScriptSourceRegExp, '$1').trim();\n      }\n  \n      for (var i = 0; i < scripts.length; i++) {\n        // If ready state is interactive, return the script tag\n        if (scripts[i].readyState === 'interactive') {\n          return scripts[i];\n        }\n  \n        // If src matches, return the script tag\n        if (scripts[i].src === scriptLocation) {\n          return scripts[i];\n        }\n  \n        // If inline source matches, return the script tag\n        if (\n          scriptLocation === currentLocation &&\n          scripts[i].innerHTML &&\n          scripts[i].innerHTML.trim() === inlineScriptSource\n        ) {\n          return scripts[i];\n        }\n      }\n  \n      // If no match, return null\n      return null;\n    }\n  };\n\n  return getCurrentScript\n}));\n","var store = require('../internals/shared-store');\n\nvar functionToString = Function.toString;\n\n// this helper broken in `3.4.1-3.4.4`, so we can't use `shared` helper\nif (typeof store.inspectSource != 'function') {\n  store.inspectSource = function (it) {\n    return functionToString.call(it);\n  };\n}\n\nmodule.exports = store.inspectSource;\n","module.exports = __WEBPACK_EXTERNAL_MODULE__8bbf__;","var id = 0;\nvar postfix = Math.random();\n\nmodule.exports = function (key) {\n  return 'Symbol(' + String(key === undefined ? '' : key) + ')_' + (++id + postfix).toString(36);\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar definePropertyModule = require('../internals/object-define-property');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\n\nmodule.exports = DESCRIPTORS ? function (object, key, value) {\n  return definePropertyModule.f(object, key, createPropertyDescriptor(1, value));\n} : function (object, key, value) {\n  object[key] = value;\n  return object;\n};\n","var fails = require('../internals/fails');\n\nvar replacement = /#|\\.prototype\\./;\n\nvar isForced = function (feature, detection) {\n  var value = data[normalize(feature)];\n  return value == POLYFILL ? true\n    : value == NATIVE ? false\n    : typeof detection == 'function' ? fails(detection)\n    : !!detection;\n};\n\nvar normalize = isForced.normalize = function (string) {\n  return String(string).replace(replacement, '.').toLowerCase();\n};\n\nvar data = isForced.data = {};\nvar NATIVE = isForced.NATIVE = 'N';\nvar POLYFILL = isForced.POLYFILL = 'P';\n\nmodule.exports = isForced;\n","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunctionPrototype[toStringTagSymbol] =\n    GeneratorFunction.displayName = \"GeneratorFunction\";\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      prototype[method] = function(arg) {\n        return this._invoke(method, arg);\n      };\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      if (!(toStringTagSymbol in genFun)) {\n        genFun[toStringTagSymbol] = \"GeneratorFunction\";\n      }\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return PromiseImpl.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return PromiseImpl.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    if (PromiseImpl === void 0) PromiseImpl = Promise;\n\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList),\n      PromiseImpl\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  Gp[toStringTagSymbol] = \"Generator\";\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n}\n","var anObject = require('../internals/an-object');\n\n// call something on iterator step with safe closing on error\nmodule.exports = function (iterator, fn, value, ENTRIES) {\n  try {\n    return ENTRIES ? fn(anObject(value)[0], value[1]) : fn(value);\n  // 7.4.6 IteratorClose(iterator, completion)\n  } catch (error) {\n    var returnMethod = iterator['return'];\n    if (returnMethod !== undefined) anObject(returnMethod.call(iterator));\n    throw error;\n  }\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar IE8_DOM_DEFINE = require('../internals/ie8-dom-define');\nvar anObject = require('../internals/an-object');\nvar toPrimitive = require('../internals/to-primitive');\n\nvar nativeDefineProperty = Object.defineProperty;\n\n// `Object.defineProperty` method\n// https://tc39.github.io/ecma262/#sec-object.defineproperty\nexports.f = DESCRIPTORS ? nativeDefineProperty : function defineProperty(O, P, Attributes) {\n  anObject(O);\n  P = toPrimitive(P, true);\n  anObject(Attributes);\n  if (IE8_DOM_DEFINE) try {\n    return nativeDefineProperty(O, P, Attributes);\n  } catch (error) { /* empty */ }\n  if ('get' in Attributes || 'set' in Attributes) throw TypeError('Accessors not supported');\n  if ('value' in Attributes) O[P] = Attributes.value;\n  return O;\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Global_1 = require(\"./Global\");\nvar Collection = (function () {\n    function Collection() {\n    }\n    Collection.toCollection = function (arr) {\n        var collection = new Collection(), len = arr.length, n;\n        for (n = 0; n < len; n++) {\n            collection.push(arr[n]);\n        }\n        return collection;\n    };\n    Collection._mapMethod = function (methodName) {\n        Collection.prototype[methodName] = function () {\n            var len = this.length, i;\n            var args = [].slice.call(arguments);\n            for (i = 0; i < len; i++) {\n                this[i][methodName].apply(this[i], args);\n            }\n            return this;\n        };\n    };\n    Collection.mapMethods = function (constructor) {\n        var prot = constructor.prototype;\n        for (var methodName in prot) {\n            Collection._mapMethod(methodName);\n        }\n    };\n    return Collection;\n}());\nexports.Collection = Collection;\nCollection.prototype = [];\nCollection.prototype.each = function (func) {\n    for (var n = 0; n < this.length; n++) {\n        func(this[n], n);\n    }\n};\nCollection.prototype.toArray = function () {\n    var arr = [], len = this.length, n;\n    for (n = 0; n < len; n++) {\n        arr.push(this[n]);\n    }\n    return arr;\n};\nvar Transform = (function () {\n    function Transform(m) {\n        if (m === void 0) { m = [1, 0, 0, 1, 0, 0]; }\n        this.m = (m && m.slice()) || [1, 0, 0, 1, 0, 0];\n    }\n    Transform.prototype.copy = function () {\n        return new Transform(this.m);\n    };\n    Transform.prototype.point = function (point) {\n        var m = this.m;\n        return {\n            x: m[0] * point.x + m[2] * point.y + m[4],\n            y: m[1] * point.x + m[3] * point.y + m[5]\n        };\n    };\n    Transform.prototype.translate = function (x, y) {\n        this.m[4] += this.m[0] * x + this.m[2] * y;\n        this.m[5] += this.m[1] * x + this.m[3] * y;\n        return this;\n    };\n    Transform.prototype.scale = function (sx, sy) {\n        this.m[0] *= sx;\n        this.m[1] *= sx;\n        this.m[2] *= sy;\n        this.m[3] *= sy;\n        return this;\n    };\n    Transform.prototype.rotate = function (rad) {\n        var c = Math.cos(rad);\n        var s = Math.sin(rad);\n        var m11 = this.m[0] * c + this.m[2] * s;\n        var m12 = this.m[1] * c + this.m[3] * s;\n        var m21 = this.m[0] * -s + this.m[2] * c;\n        var m22 = this.m[1] * -s + this.m[3] * c;\n        this.m[0] = m11;\n        this.m[1] = m12;\n        this.m[2] = m21;\n        this.m[3] = m22;\n        return this;\n    };\n    Transform.prototype.getTranslation = function () {\n        return {\n            x: this.m[4],\n            y: this.m[5]\n        };\n    };\n    Transform.prototype.skew = function (sx, sy) {\n        var m11 = this.m[0] + this.m[2] * sy;\n        var m12 = this.m[1] + this.m[3] * sy;\n        var m21 = this.m[2] + this.m[0] * sx;\n        var m22 = this.m[3] + this.m[1] * sx;\n        this.m[0] = m11;\n        this.m[1] = m12;\n        this.m[2] = m21;\n        this.m[3] = m22;\n        return this;\n    };\n    Transform.prototype.multiply = function (matrix) {\n        var m11 = this.m[0] * matrix.m[0] + this.m[2] * matrix.m[1];\n        var m12 = this.m[1] * matrix.m[0] + this.m[3] * matrix.m[1];\n        var m21 = this.m[0] * matrix.m[2] + this.m[2] * matrix.m[3];\n        var m22 = this.m[1] * matrix.m[2] + this.m[3] * matrix.m[3];\n        var dx = this.m[0] * matrix.m[4] + this.m[2] * matrix.m[5] + this.m[4];\n        var dy = this.m[1] * matrix.m[4] + this.m[3] * matrix.m[5] + this.m[5];\n        this.m[0] = m11;\n        this.m[1] = m12;\n        this.m[2] = m21;\n        this.m[3] = m22;\n        this.m[4] = dx;\n        this.m[5] = dy;\n        return this;\n    };\n    Transform.prototype.invert = function () {\n        var d = 1 / (this.m[0] * this.m[3] - this.m[1] * this.m[2]);\n        var m0 = this.m[3] * d;\n        var m1 = -this.m[1] * d;\n        var m2 = -this.m[2] * d;\n        var m3 = this.m[0] * d;\n        var m4 = d * (this.m[2] * this.m[5] - this.m[3] * this.m[4]);\n        var m5 = d * (this.m[1] * this.m[4] - this.m[0] * this.m[5]);\n        this.m[0] = m0;\n        this.m[1] = m1;\n        this.m[2] = m2;\n        this.m[3] = m3;\n        this.m[4] = m4;\n        this.m[5] = m5;\n        return this;\n    };\n    Transform.prototype.getMatrix = function () {\n        return this.m;\n    };\n    Transform.prototype.setAbsolutePosition = function (x, y) {\n        var m0 = this.m[0], m1 = this.m[1], m2 = this.m[2], m3 = this.m[3], m4 = this.m[4], m5 = this.m[5], yt = (m0 * (y - m5) - m1 * (x - m4)) / (m0 * m3 - m1 * m2), xt = (x - m4 - m2 * yt) / m0;\n        return this.translate(xt, yt);\n    };\n    Transform.prototype.decompose = function () {\n        var a = this.m[0];\n        var b = this.m[1];\n        var c = this.m[2];\n        var d = this.m[3];\n        var e = this.m[4];\n        var f = this.m[5];\n        var delta = a * d - b * c;\n        var result = {\n            x: e,\n            y: f,\n            rotation: 0,\n            scaleX: 0,\n            scaleY: 0,\n            skewX: 0,\n            skewY: 0\n        };\n        if (a != 0 || b != 0) {\n            var r = Math.sqrt(a * a + b * b);\n            result.rotation = b > 0 ? Math.acos(a / r) : -Math.acos(a / r);\n            result.scaleX = r;\n            result.scaleY = delta / r;\n            result.skewX = (a * c + b * d) / delta;\n            result.skewY = 0;\n        }\n        else if (c != 0 || d != 0) {\n            var s = Math.sqrt(c * c + d * d);\n            result.rotation =\n                Math.PI / 2 - (d > 0 ? Math.acos(-c / s) : -Math.acos(c / s));\n            result.scaleX = delta / s;\n            result.scaleY = s;\n            result.skewX = 0;\n            result.skewY = (a * c + b * d) / delta;\n        }\n        else {\n        }\n        result.rotation = exports.Util._getRotation(result.rotation);\n        return result;\n    };\n    return Transform;\n}());\nexports.Transform = Transform;\nvar OBJECT_ARRAY = '[object Array]', OBJECT_NUMBER = '[object Number]', OBJECT_STRING = '[object String]', OBJECT_BOOLEAN = '[object Boolean]', PI_OVER_DEG180 = Math.PI / 180, DEG180_OVER_PI = 180 / Math.PI, HASH = '#', EMPTY_STRING = '', ZERO = '0', KONVA_WARNING = 'Konva warning: ', KONVA_ERROR = 'Konva error: ', RGB_PAREN = 'rgb(', COLORS = {\n    aliceblue: [240, 248, 255],\n    antiquewhite: [250, 235, 215],\n    aqua: [0, 255, 255],\n    aquamarine: [127, 255, 212],\n    azure: [240, 255, 255],\n    beige: [245, 245, 220],\n    bisque: [255, 228, 196],\n    black: [0, 0, 0],\n    blanchedalmond: [255, 235, 205],\n    blue: [0, 0, 255],\n    blueviolet: [138, 43, 226],\n    brown: [165, 42, 42],\n    burlywood: [222, 184, 135],\n    cadetblue: [95, 158, 160],\n    chartreuse: [127, 255, 0],\n    chocolate: [210, 105, 30],\n    coral: [255, 127, 80],\n    cornflowerblue: [100, 149, 237],\n    cornsilk: [255, 248, 220],\n    crimson: [220, 20, 60],\n    cyan: [0, 255, 255],\n    darkblue: [0, 0, 139],\n    darkcyan: [0, 139, 139],\n    darkgoldenrod: [184, 132, 11],\n    darkgray: [169, 169, 169],\n    darkgreen: [0, 100, 0],\n    darkgrey: [169, 169, 169],\n    darkkhaki: [189, 183, 107],\n    darkmagenta: [139, 0, 139],\n    darkolivegreen: [85, 107, 47],\n    darkorange: [255, 140, 0],\n    darkorchid: [153, 50, 204],\n    darkred: [139, 0, 0],\n    darksalmon: [233, 150, 122],\n    darkseagreen: [143, 188, 143],\n    darkslateblue: [72, 61, 139],\n    darkslategray: [47, 79, 79],\n    darkslategrey: [47, 79, 79],\n    darkturquoise: [0, 206, 209],\n    darkviolet: [148, 0, 211],\n    deeppink: [255, 20, 147],\n    deepskyblue: [0, 191, 255],\n    dimgray: [105, 105, 105],\n    dimgrey: [105, 105, 105],\n    dodgerblue: [30, 144, 255],\n    firebrick: [178, 34, 34],\n    floralwhite: [255, 255, 240],\n    forestgreen: [34, 139, 34],\n    fuchsia: [255, 0, 255],\n    gainsboro: [220, 220, 220],\n    ghostwhite: [248, 248, 255],\n    gold: [255, 215, 0],\n    goldenrod: [218, 165, 32],\n    gray: [128, 128, 128],\n    green: [0, 128, 0],\n    greenyellow: [173, 255, 47],\n    grey: [128, 128, 128],\n    honeydew: [240, 255, 240],\n    hotpink: [255, 105, 180],\n    indianred: [205, 92, 92],\n    indigo: [75, 0, 130],\n    ivory: [255, 255, 240],\n    khaki: [240, 230, 140],\n    lavender: [230, 230, 250],\n    lavenderblush: [255, 240, 245],\n    lawngreen: [124, 252, 0],\n    lemonchiffon: [255, 250, 205],\n    lightblue: [173, 216, 230],\n    lightcoral: [240, 128, 128],\n    lightcyan: [224, 255, 255],\n    lightgoldenrodyellow: [250, 250, 210],\n    lightgray: [211, 211, 211],\n    lightgreen: [144, 238, 144],\n    lightgrey: [211, 211, 211],\n    lightpink: [255, 182, 193],\n    lightsalmon: [255, 160, 122],\n    lightseagreen: [32, 178, 170],\n    lightskyblue: [135, 206, 250],\n    lightslategray: [119, 136, 153],\n    lightslategrey: [119, 136, 153],\n    lightsteelblue: [176, 196, 222],\n    lightyellow: [255, 255, 224],\n    lime: [0, 255, 0],\n    limegreen: [50, 205, 50],\n    linen: [250, 240, 230],\n    magenta: [255, 0, 255],\n    maroon: [128, 0, 0],\n    mediumaquamarine: [102, 205, 170],\n    mediumblue: [0, 0, 205],\n    mediumorchid: [186, 85, 211],\n    mediumpurple: [147, 112, 219],\n    mediumseagreen: [60, 179, 113],\n    mediumslateblue: [123, 104, 238],\n    mediumspringgreen: [0, 250, 154],\n    mediumturquoise: [72, 209, 204],\n    mediumvioletred: [199, 21, 133],\n    midnightblue: [25, 25, 112],\n    mintcream: [245, 255, 250],\n    mistyrose: [255, 228, 225],\n    moccasin: [255, 228, 181],\n    navajowhite: [255, 222, 173],\n    navy: [0, 0, 128],\n    oldlace: [253, 245, 230],\n    olive: [128, 128, 0],\n    olivedrab: [107, 142, 35],\n    orange: [255, 165, 0],\n    orangered: [255, 69, 0],\n    orchid: [218, 112, 214],\n    palegoldenrod: [238, 232, 170],\n    palegreen: [152, 251, 152],\n    paleturquoise: [175, 238, 238],\n    palevioletred: [219, 112, 147],\n    papayawhip: [255, 239, 213],\n    peachpuff: [255, 218, 185],\n    peru: [205, 133, 63],\n    pink: [255, 192, 203],\n    plum: [221, 160, 203],\n    powderblue: [176, 224, 230],\n    purple: [128, 0, 128],\n    rebeccapurple: [102, 51, 153],\n    red: [255, 0, 0],\n    rosybrown: [188, 143, 143],\n    royalblue: [65, 105, 225],\n    saddlebrown: [139, 69, 19],\n    salmon: [250, 128, 114],\n    sandybrown: [244, 164, 96],\n    seagreen: [46, 139, 87],\n    seashell: [255, 245, 238],\n    sienna: [160, 82, 45],\n    silver: [192, 192, 192],\n    skyblue: [135, 206, 235],\n    slateblue: [106, 90, 205],\n    slategray: [119, 128, 144],\n    slategrey: [119, 128, 144],\n    snow: [255, 255, 250],\n    springgreen: [0, 255, 127],\n    steelblue: [70, 130, 180],\n    tan: [210, 180, 140],\n    teal: [0, 128, 128],\n    thistle: [216, 191, 216],\n    transparent: [255, 255, 255, 0],\n    tomato: [255, 99, 71],\n    turquoise: [64, 224, 208],\n    violet: [238, 130, 238],\n    wheat: [245, 222, 179],\n    white: [255, 255, 255],\n    whitesmoke: [245, 245, 245],\n    yellow: [255, 255, 0],\n    yellowgreen: [154, 205, 5]\n}, RGB_REGEX = /rgb\\((\\d{1,3}),(\\d{1,3}),(\\d{1,3})\\)/, animQueue = [];\nexports.Util = {\n    _isElement: function (obj) {\n        return !!(obj && obj.nodeType == 1);\n    },\n    _isFunction: function (obj) {\n        return !!(obj && obj.constructor && obj.call && obj.apply);\n    },\n    _isPlainObject: function (obj) {\n        return !!obj && obj.constructor === Object;\n    },\n    _isArray: function (obj) {\n        return Object.prototype.toString.call(obj) === OBJECT_ARRAY;\n    },\n    _isNumber: function (obj) {\n        return (Object.prototype.toString.call(obj) === OBJECT_NUMBER &&\n            !isNaN(obj) &&\n            isFinite(obj));\n    },\n    _isString: function (obj) {\n        return Object.prototype.toString.call(obj) === OBJECT_STRING;\n    },\n    _isBoolean: function (obj) {\n        return Object.prototype.toString.call(obj) === OBJECT_BOOLEAN;\n    },\n    isObject: function (val) {\n        return val instanceof Object;\n    },\n    isValidSelector: function (selector) {\n        if (typeof selector !== 'string') {\n            return false;\n        }\n        var firstChar = selector[0];\n        return (firstChar === '#' ||\n            firstChar === '.' ||\n            firstChar === firstChar.toUpperCase());\n    },\n    _sign: function (number) {\n        if (number === 0) {\n            return 0;\n        }\n        if (number > 0) {\n            return 1;\n        }\n        else {\n            return -1;\n        }\n    },\n    requestAnimFrame: function (callback) {\n        animQueue.push(callback);\n        if (animQueue.length === 1) {\n            requestAnimationFrame(function () {\n                var queue = animQueue;\n                animQueue = [];\n                queue.forEach(function (cb) {\n                    cb();\n                });\n            });\n        }\n    },\n    createCanvasElement: function () {\n        var canvas = document.createElement('canvas');\n        try {\n            canvas.style = canvas.style || {};\n        }\n        catch (e) { }\n        return canvas;\n    },\n    createImageElement: function () {\n        return document.createElement('img');\n    },\n    _isInDocument: function (el) {\n        while ((el = el.parentNode)) {\n            if (el == document) {\n                return true;\n            }\n        }\n        return false;\n    },\n    _simplifyArray: function (arr) {\n        var retArr = [], len = arr.length, util = exports.Util, n, val;\n        for (n = 0; n < len; n++) {\n            val = arr[n];\n            if (util._isNumber(val)) {\n                val = Math.round(val * 1000) / 1000;\n            }\n            else if (!util._isString(val)) {\n                val = val.toString();\n            }\n            retArr.push(val);\n        }\n        return retArr;\n    },\n    _urlToImage: function (url, callback) {\n        var imageObj = new Global_1.glob.Image();\n        imageObj.onload = function () {\n            callback(imageObj);\n        };\n        imageObj.src = url;\n    },\n    _rgbToHex: function (r, g, b) {\n        return ((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1);\n    },\n    _hexToRgb: function (hex) {\n        hex = hex.replace(HASH, EMPTY_STRING);\n        var bigint = parseInt(hex, 16);\n        return {\n            r: (bigint >> 16) & 255,\n            g: (bigint >> 8) & 255,\n            b: bigint & 255\n        };\n    },\n    getRandomColor: function () {\n        var randColor = ((Math.random() * 0xffffff) << 0).toString(16);\n        while (randColor.length < 6) {\n            randColor = ZERO + randColor;\n        }\n        return HASH + randColor;\n    },\n    get: function (val, def) {\n        if (val === undefined) {\n            return def;\n        }\n        else {\n            return val;\n        }\n    },\n    getRGB: function (color) {\n        var rgb;\n        if (color in COLORS) {\n            rgb = COLORS[color];\n            return {\n                r: rgb[0],\n                g: rgb[1],\n                b: rgb[2]\n            };\n        }\n        else if (color[0] === HASH) {\n            return this._hexToRgb(color.substring(1));\n        }\n        else if (color.substr(0, 4) === RGB_PAREN) {\n            rgb = RGB_REGEX.exec(color.replace(/ /g, ''));\n            return {\n                r: parseInt(rgb[1], 10),\n                g: parseInt(rgb[2], 10),\n                b: parseInt(rgb[3], 10)\n            };\n        }\n        else {\n            return {\n                r: 0,\n                g: 0,\n                b: 0\n            };\n        }\n    },\n    colorToRGBA: function (str) {\n        str = str || 'black';\n        return (exports.Util._namedColorToRBA(str) ||\n            exports.Util._hex3ColorToRGBA(str) ||\n            exports.Util._hex6ColorToRGBA(str) ||\n            exports.Util._rgbColorToRGBA(str) ||\n            exports.Util._rgbaColorToRGBA(str) ||\n            exports.Util._hslColorToRGBA(str));\n    },\n    _namedColorToRBA: function (str) {\n        var c = COLORS[str.toLowerCase()];\n        if (!c) {\n            return null;\n        }\n        return {\n            r: c[0],\n            g: c[1],\n            b: c[2],\n            a: 1\n        };\n    },\n    _rgbColorToRGBA: function (str) {\n        if (str.indexOf('rgb(') === 0) {\n            str = str.match(/rgb\\(([^)]+)\\)/)[1];\n            var parts = str.split(/ *, */).map(Number);\n            return {\n                r: parts[0],\n                g: parts[1],\n                b: parts[2],\n                a: 1\n            };\n        }\n    },\n    _rgbaColorToRGBA: function (str) {\n        if (str.indexOf('rgba(') === 0) {\n            str = str.match(/rgba\\(([^)]+)\\)/)[1];\n            var parts = str.split(/ *, */).map(Number);\n            return {\n                r: parts[0],\n                g: parts[1],\n                b: parts[2],\n                a: parts[3]\n            };\n        }\n    },\n    _hex6ColorToRGBA: function (str) {\n        if (str[0] === '#' && str.length === 7) {\n            return {\n                r: parseInt(str.slice(1, 3), 16),\n                g: parseInt(str.slice(3, 5), 16),\n                b: parseInt(str.slice(5, 7), 16),\n                a: 1\n            };\n        }\n    },\n    _hex3ColorToRGBA: function (str) {\n        if (str[0] === '#' && str.length === 4) {\n            return {\n                r: parseInt(str[1] + str[1], 16),\n                g: parseInt(str[2] + str[2], 16),\n                b: parseInt(str[3] + str[3], 16),\n                a: 1\n            };\n        }\n    },\n    _hslColorToRGBA: function (str) {\n        if (/hsl\\((\\d+),\\s*([\\d.]+)%,\\s*([\\d.]+)%\\)/g.test(str)) {\n            var _a = /hsl\\((\\d+),\\s*([\\d.]+)%,\\s*([\\d.]+)%\\)/g.exec(str), _ = _a[0], hsl = _a.slice(1);\n            var h = Number(hsl[0]) / 360;\n            var s = Number(hsl[1]) / 100;\n            var l = Number(hsl[2]) / 100;\n            var t2 = void 0;\n            var t3 = void 0;\n            var val = void 0;\n            if (s === 0) {\n                val = l * 255;\n                return {\n                    r: Math.round(val),\n                    g: Math.round(val),\n                    b: Math.round(val),\n                    a: 1\n                };\n            }\n            if (l < 0.5) {\n                t2 = l * (1 + s);\n            }\n            else {\n                t2 = l + s - l * s;\n            }\n            var t1 = 2 * l - t2;\n            var rgb = [0, 0, 0];\n            for (var i = 0; i < 3; i++) {\n                t3 = h + (1 / 3) * -(i - 1);\n                if (t3 < 0) {\n                    t3++;\n                }\n                if (t3 > 1) {\n                    t3--;\n                }\n                if (6 * t3 < 1) {\n                    val = t1 + (t2 - t1) * 6 * t3;\n                }\n                else if (2 * t3 < 1) {\n                    val = t2;\n                }\n                else if (3 * t3 < 2) {\n                    val = t1 + (t2 - t1) * (2 / 3 - t3) * 6;\n                }\n                else {\n                    val = t1;\n                }\n                rgb[i] = val * 255;\n            }\n            return {\n                r: Math.round(rgb[0]),\n                g: Math.round(rgb[1]),\n                b: Math.round(rgb[2]),\n                a: 1\n            };\n        }\n    },\n    haveIntersection: function (r1, r2) {\n        return !(r2.x > r1.x + r1.width ||\n            r2.x + r2.width < r1.x ||\n            r2.y > r1.y + r1.height ||\n            r2.y + r2.height < r1.y);\n    },\n    cloneObject: function (obj) {\n        var retObj = {};\n        for (var key in obj) {\n            if (this._isPlainObject(obj[key])) {\n                retObj[key] = this.cloneObject(obj[key]);\n            }\n            else if (this._isArray(obj[key])) {\n                retObj[key] = this.cloneArray(obj[key]);\n            }\n            else {\n                retObj[key] = obj[key];\n            }\n        }\n        return retObj;\n    },\n    cloneArray: function (arr) {\n        return arr.slice(0);\n    },\n    _degToRad: function (deg) {\n        return deg * PI_OVER_DEG180;\n    },\n    _radToDeg: function (rad) {\n        return rad * DEG180_OVER_PI;\n    },\n    _getRotation: function (radians) {\n        return Global_1.Konva.angleDeg ? exports.Util._radToDeg(radians) : radians;\n    },\n    _capitalize: function (str) {\n        return str.charAt(0).toUpperCase() + str.slice(1);\n    },\n    throw: function (str) {\n        throw new Error(KONVA_ERROR + str);\n    },\n    error: function (str) {\n        console.error(KONVA_ERROR + str);\n    },\n    warn: function (str) {\n        if (!Global_1.Konva.showWarnings) {\n            return;\n        }\n        console.warn(KONVA_WARNING + str);\n    },\n    extend: function (child, parent) {\n        function Ctor() {\n            this.constructor = child;\n        }\n        Ctor.prototype = parent.prototype;\n        var oldProto = child.prototype;\n        child.prototype = new Ctor();\n        for (var key in oldProto) {\n            if (oldProto.hasOwnProperty(key)) {\n                child.prototype[key] = oldProto[key];\n            }\n        }\n        child.__super__ = parent.prototype;\n        child.super = parent;\n    },\n    _getControlPoints: function (x0, y0, x1, y1, x2, y2, t) {\n        var d01 = Math.sqrt(Math.pow(x1 - x0, 2) + Math.pow(y1 - y0, 2)), d12 = Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2)), fa = (t * d01) / (d01 + d12), fb = (t * d12) / (d01 + d12), p1x = x1 - fa * (x2 - x0), p1y = y1 - fa * (y2 - y0), p2x = x1 + fb * (x2 - x0), p2y = y1 + fb * (y2 - y0);\n        return [p1x, p1y, p2x, p2y];\n    },\n    _expandPoints: function (p, tension) {\n        var len = p.length, allPoints = [], n, cp;\n        for (n = 2; n < len - 2; n += 2) {\n            cp = exports.Util._getControlPoints(p[n - 2], p[n - 1], p[n], p[n + 1], p[n + 2], p[n + 3], tension);\n            allPoints.push(cp[0]);\n            allPoints.push(cp[1]);\n            allPoints.push(p[n]);\n            allPoints.push(p[n + 1]);\n            allPoints.push(cp[2]);\n            allPoints.push(cp[3]);\n        }\n        return allPoints;\n    },\n    each: function (obj, func) {\n        for (var key in obj) {\n            func(key, obj[key]);\n        }\n    },\n    _inRange: function (val, left, right) {\n        return left <= val && val < right;\n    },\n    _getProjectionToSegment: function (x1, y1, x2, y2, x3, y3) {\n        var x, y, dist;\n        var pd2 = (x1 - x2) * (x1 - x2) + (y1 - y2) * (y1 - y2);\n        if (pd2 == 0) {\n            x = x1;\n            y = y1;\n            dist = (x3 - x2) * (x3 - x2) + (y3 - y2) * (y3 - y2);\n        }\n        else {\n            var u = ((x3 - x1) * (x2 - x1) + (y3 - y1) * (y2 - y1)) / pd2;\n            if (u < 0) {\n                x = x1;\n                y = y1;\n                dist = (x1 - x3) * (x1 - x3) + (y1 - y3) * (y1 - y3);\n            }\n            else if (u > 1.0) {\n                x = x2;\n                y = y2;\n                dist = (x2 - x3) * (x2 - x3) + (y2 - y3) * (y2 - y3);\n            }\n            else {\n                x = x1 + u * (x2 - x1);\n                y = y1 + u * (y2 - y1);\n                dist = (x - x3) * (x - x3) + (y - y3) * (y - y3);\n            }\n        }\n        return [x, y, dist];\n    },\n    _getProjectionToLine: function (pt, line, isClosed) {\n        var pc = exports.Util.cloneObject(pt);\n        var dist = Number.MAX_VALUE;\n        line.forEach(function (p1, i) {\n            if (!isClosed && i === line.length - 1) {\n                return;\n            }\n            var p2 = line[(i + 1) % line.length];\n            var proj = exports.Util._getProjectionToSegment(p1.x, p1.y, p2.x, p2.y, pt.x, pt.y);\n            var px = proj[0], py = proj[1], pdist = proj[2];\n            if (pdist < dist) {\n                pc.x = px;\n                pc.y = py;\n                dist = pdist;\n            }\n        });\n        return pc;\n    },\n    _prepareArrayForTween: function (startArray, endArray, isClosed) {\n        var n, start = [], end = [];\n        if (startArray.length > endArray.length) {\n            var temp = endArray;\n            endArray = startArray;\n            startArray = temp;\n        }\n        for (n = 0; n < startArray.length; n += 2) {\n            start.push({\n                x: startArray[n],\n                y: startArray[n + 1]\n            });\n        }\n        for (n = 0; n < endArray.length; n += 2) {\n            end.push({\n                x: endArray[n],\n                y: endArray[n + 1]\n            });\n        }\n        var newStart = [];\n        end.forEach(function (point) {\n            var pr = exports.Util._getProjectionToLine(point, start, isClosed);\n            newStart.push(pr.x);\n            newStart.push(pr.y);\n        });\n        return newStart;\n    },\n    _prepareToStringify: function (obj) {\n        var desc;\n        obj.visitedByCircularReferenceRemoval = true;\n        for (var key in obj) {\n            if (!(obj.hasOwnProperty(key) && obj[key] && typeof obj[key] == 'object')) {\n                continue;\n            }\n            desc = Object.getOwnPropertyDescriptor(obj, key);\n            if (obj[key].visitedByCircularReferenceRemoval ||\n                exports.Util._isElement(obj[key])) {\n                if (desc.configurable) {\n                    delete obj[key];\n                }\n                else {\n                    return null;\n                }\n            }\n            else if (exports.Util._prepareToStringify(obj[key]) === null) {\n                if (desc.configurable) {\n                    delete obj[key];\n                }\n                else {\n                    return null;\n                }\n            }\n        }\n        delete obj.visitedByCircularReferenceRemoval;\n        return obj;\n    },\n    _assign: function (target, source) {\n        for (var key in source) {\n            target[key] = source[key];\n        }\n        return target;\n    },\n    _getFirstPointerId: function (evt) {\n        if (!evt.touches) {\n            return 999;\n        }\n        else {\n            return evt.changedTouches[0].identifier;\n        }\n    }\n};\n","'use strict';\nvar IteratorPrototype = require('../internals/iterators-core').IteratorPrototype;\nvar create = require('../internals/object-create');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\nvar setToStringTag = require('../internals/set-to-string-tag');\nvar Iterators = require('../internals/iterators');\n\nvar returnThis = function () { return this; };\n\nmodule.exports = function (IteratorConstructor, NAME, next) {\n  var TO_STRING_TAG = NAME + ' Iterator';\n  IteratorConstructor.prototype = create(IteratorPrototype, { next: createPropertyDescriptor(1, next) });\n  setToStringTag(IteratorConstructor, TO_STRING_TAG, false, true);\n  Iterators[TO_STRING_TAG] = returnThis;\n  return IteratorConstructor;\n};\n","var ceil = Math.ceil;\nvar floor = Math.floor;\n\n// `ToInteger` abstract operation\n// https://tc39.github.io/ecma262/#sec-tointeger\nmodule.exports = function (argument) {\n  return isNaN(argument = +argument) ? 0 : (argument > 0 ? floor : ceil)(argument);\n};\n","'use strict';\nvar DESCRIPTORS = require('../internals/descriptors');\nvar global = require('../internals/global');\nvar isForced = require('../internals/is-forced');\nvar redefine = require('../internals/redefine');\nvar has = require('../internals/has');\nvar classof = require('../internals/classof-raw');\nvar inheritIfRequired = require('../internals/inherit-if-required');\nvar toPrimitive = require('../internals/to-primitive');\nvar fails = require('../internals/fails');\nvar create = require('../internals/object-create');\nvar getOwnPropertyNames = require('../internals/object-get-own-property-names').f;\nvar getOwnPropertyDescriptor = require('../internals/object-get-own-property-descriptor').f;\nvar defineProperty = require('../internals/object-define-property').f;\nvar trim = require('../internals/string-trim').trim;\n\nvar NUMBER = 'Number';\nvar NativeNumber = global[NUMBER];\nvar NumberPrototype = NativeNumber.prototype;\n\n// Opera ~12 has broken Object#toString\nvar BROKEN_CLASSOF = classof(create(NumberPrototype)) == NUMBER;\n\n// `ToNumber` abstract operation\n// https://tc39.github.io/ecma262/#sec-tonumber\nvar toNumber = function (argument) {\n  var it = toPrimitive(argument, false);\n  var first, third, radix, maxCode, digits, length, index, code;\n  if (typeof it == 'string' && it.length > 2) {\n    it = trim(it);\n    first = it.charCodeAt(0);\n    if (first === 43 || first === 45) {\n      third = it.charCodeAt(2);\n      if (third === 88 || third === 120) return NaN; // Number('+0x1') should be NaN, old V8 fix\n    } else if (first === 48) {\n      switch (it.charCodeAt(1)) {\n        case 66: case 98: radix = 2; maxCode = 49; break; // fast equal of /^0b[01]+$/i\n        case 79: case 111: radix = 8; maxCode = 55; break; // fast equal of /^0o[0-7]+$/i\n        default: return +it;\n      }\n      digits = it.slice(2);\n      length = digits.length;\n      for (index = 0; index < length; index++) {\n        code = digits.charCodeAt(index);\n        // parseInt parses a string to a first unavailable symbol\n        // but ToNumber should return NaN if a string contains unavailable symbols\n        if (code < 48 || code > maxCode) return NaN;\n      } return parseInt(digits, radix);\n    }\n  } return +it;\n};\n\n// `Number` constructor\n// https://tc39.github.io/ecma262/#sec-number-constructor\nif (isForced(NUMBER, !NativeNumber(' 0o1') || !NativeNumber('0b1') || NativeNumber('+0x1'))) {\n  var NumberWrapper = function Number(value) {\n    var it = arguments.length < 1 ? 0 : value;\n    var dummy = this;\n    return dummy instanceof NumberWrapper\n      // check on 1..constructor(foo) case\n      && (BROKEN_CLASSOF ? fails(function () { NumberPrototype.valueOf.call(dummy); }) : classof(dummy) != NUMBER)\n        ? inheritIfRequired(new NativeNumber(toNumber(it)), dummy, NumberWrapper) : toNumber(it);\n  };\n  for (var keys = DESCRIPTORS ? getOwnPropertyNames(NativeNumber) : (\n    // ES3:\n    'MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,' +\n    // ES2015 (in case, if modules with ES2015 Number statics required before):\n    'EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,' +\n    'MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger'\n  ).split(','), j = 0, key; keys.length > j; j++) {\n    if (has(NativeNumber, key = keys[j]) && !has(NumberWrapper, key)) {\n      defineProperty(NumberWrapper, key, getOwnPropertyDescriptor(NativeNumber, key));\n    }\n  }\n  NumberWrapper.prototype = NumberPrototype;\n  NumberPrototype.constructor = NumberWrapper;\n  redefine(global, NUMBER, NumberWrapper);\n}\n","var DESCRIPTORS = require('../internals/descriptors');\nvar fails = require('../internals/fails');\nvar has = require('../internals/has');\n\nvar defineProperty = Object.defineProperty;\nvar cache = {};\n\nvar thrower = function (it) { throw it; };\n\nmodule.exports = function (METHOD_NAME, options) {\n  if (has(cache, METHOD_NAME)) return cache[METHOD_NAME];\n  if (!options) options = {};\n  var method = [][METHOD_NAME];\n  var ACCESSORS = has(options, 'ACCESSORS') ? options.ACCESSORS : false;\n  var argument0 = has(options, 0) ? options[0] : thrower;\n  var argument1 = has(options, 1) ? options[1] : undefined;\n\n  return cache[METHOD_NAME] = !!method && !fails(function () {\n    if (ACCESSORS && !DESCRIPTORS) return true;\n    var O = { length: -1 };\n\n    if (ACCESSORS) defineProperty(O, 1, { enumerable: true, get: thrower });\n    else O[1] = 1;\n\n    method.call(O, argument0, argument1);\n  });\n};\n","'use strict';\nvar getPrototypeOf = require('../internals/object-get-prototype-of');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar has = require('../internals/has');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar IS_PURE = require('../internals/is-pure');\n\nvar ITERATOR = wellKnownSymbol('iterator');\nvar BUGGY_SAFARI_ITERATORS = false;\n\nvar returnThis = function () { return this; };\n\n// `%IteratorPrototype%` object\n// https://tc39.github.io/ecma262/#sec-%iteratorprototype%-object\nvar IteratorPrototype, PrototypeOfArrayIteratorPrototype, arrayIterator;\n\nif ([].keys) {\n  arrayIterator = [].keys();\n  // Safari 8 has buggy iterators w/o `next`\n  if (!('next' in arrayIterator)) BUGGY_SAFARI_ITERATORS = true;\n  else {\n    PrototypeOfArrayIteratorPrototype = getPrototypeOf(getPrototypeOf(arrayIterator));\n    if (PrototypeOfArrayIteratorPrototype !== Object.prototype) IteratorPrototype = PrototypeOfArrayIteratorPrototype;\n  }\n}\n\nif (IteratorPrototype == undefined) IteratorPrototype = {};\n\n// 25.1.2.1.1 %IteratorPrototype%[@@iterator]()\nif (!IS_PURE && !has(IteratorPrototype, ITERATOR)) {\n  createNonEnumerableProperty(IteratorPrototype, ITERATOR, returnThis);\n}\n\nmodule.exports = {\n  IteratorPrototype: IteratorPrototype,\n  BUGGY_SAFARI_ITERATORS: BUGGY_SAFARI_ITERATORS\n};\n","'use strict';\nvar TO_STRING_TAG_SUPPORT = require('../internals/to-string-tag-support');\nvar classof = require('../internals/classof');\n\n// `Object.prototype.toString` method implementation\n// https://tc39.github.io/ecma262/#sec-object.prototype.tostring\nmodule.exports = TO_STRING_TAG_SUPPORT ? {}.toString : function toString() {\n  return '[object ' + classof(this) + ']';\n};\n","var global = require('../internals/global');\nvar getOwnPropertyDescriptor = require('../internals/object-get-own-property-descriptor').f;\nvar classof = require('../internals/classof-raw');\nvar macrotask = require('../internals/task').set;\nvar IS_IOS = require('../internals/engine-is-ios');\n\nvar MutationObserver = global.MutationObserver || global.WebKitMutationObserver;\nvar process = global.process;\nvar Promise = global.Promise;\nvar IS_NODE = classof(process) == 'process';\n// Node.js 11 shows ExperimentalWarning on getting `queueMicrotask`\nvar queueMicrotaskDescriptor = getOwnPropertyDescriptor(global, 'queueMicrotask');\nvar queueMicrotask = queueMicrotaskDescriptor && queueMicrotaskDescriptor.value;\n\nvar flush, head, last, notify, toggle, node, promise, then;\n\n// modern engines have queueMicrotask method\nif (!queueMicrotask) {\n  flush = function () {\n    var parent, fn;\n    if (IS_NODE && (parent = process.domain)) parent.exit();\n    while (head) {\n      fn = head.fn;\n      head = head.next;\n      try {\n        fn();\n      } catch (error) {\n        if (head) notify();\n        else last = undefined;\n        throw error;\n      }\n    } last = undefined;\n    if (parent) parent.enter();\n  };\n\n  // Node.js\n  if (IS_NODE) {\n    notify = function () {\n      process.nextTick(flush);\n    };\n  // browsers with MutationObserver, except iOS - https://github.com/zloirock/core-js/issues/339\n  } else if (MutationObserver && !IS_IOS) {\n    toggle = true;\n    node = document.createTextNode('');\n    new MutationObserver(flush).observe(node, { characterData: true });\n    notify = function () {\n      node.data = toggle = !toggle;\n    };\n  // environments with maybe non-completely correct, but existent Promise\n  } else if (Promise && Promise.resolve) {\n    // Promise.resolve without an argument throws an error in LG WebOS 2\n    promise = Promise.resolve(undefined);\n    then = promise.then;\n    notify = function () {\n      then.call(promise, flush);\n    };\n  // for other environments - macrotask based on:\n  // - setImmediate\n  // - MessageChannel\n  // - window.postMessag\n  // - onreadystatechange\n  // - setTimeout\n  } else {\n    notify = function () {\n      // strange IE + webpack dev server bug - use .call(global)\n      macrotask.call(global, flush);\n    };\n  }\n}\n\nmodule.exports = queueMicrotask || function (fn) {\n  var task = { fn: fn, next: undefined };\n  if (last) last.next = task;\n  if (!head) {\n    head = task;\n    notify();\n  } last = task;\n};\n","var global = require('../internals/global');\nvar shared = require('../internals/shared');\nvar has = require('../internals/has');\nvar uid = require('../internals/uid');\nvar NATIVE_SYMBOL = require('../internals/native-symbol');\nvar USE_SYMBOL_AS_UID = require('../internals/use-symbol-as-uid');\n\nvar WellKnownSymbolsStore = shared('wks');\nvar Symbol = global.Symbol;\nvar createWellKnownSymbol = USE_SYMBOL_AS_UID ? Symbol : Symbol && Symbol.withoutSetter || uid;\n\nmodule.exports = function (name) {\n  if (!has(WellKnownSymbolsStore, name)) {\n    if (NATIVE_SYMBOL && has(Symbol, name)) WellKnownSymbolsStore[name] = Symbol[name];\n    else WellKnownSymbolsStore[name] = createWellKnownSymbol('Symbol.' + name);\n  } return WellKnownSymbolsStore[name];\n};\n","var bind = require('../internals/function-bind-context');\nvar IndexedObject = require('../internals/indexed-object');\nvar toObject = require('../internals/to-object');\nvar toLength = require('../internals/to-length');\nvar arraySpeciesCreate = require('../internals/array-species-create');\n\nvar push = [].push;\n\n// `Array.prototype.{ forEach, map, filter, some, every, find, findIndex }` methods implementation\nvar createMethod = function (TYPE) {\n  var IS_MAP = TYPE == 1;\n  var IS_FILTER = TYPE == 2;\n  var IS_SOME = TYPE == 3;\n  var IS_EVERY = TYPE == 4;\n  var IS_FIND_INDEX = TYPE == 6;\n  var NO_HOLES = TYPE == 5 || IS_FIND_INDEX;\n  return function ($this, callbackfn, that, specificCreate) {\n    var O = toObject($this);\n    var self = IndexedObject(O);\n    var boundFunction = bind(callbackfn, that, 3);\n    var length = toLength(self.length);\n    var index = 0;\n    var create = specificCreate || arraySpeciesCreate;\n    var target = IS_MAP ? create($this, length) : IS_FILTER ? create($this, 0) : undefined;\n    var value, result;\n    for (;length > index; index++) if (NO_HOLES || index in self) {\n      value = self[index];\n      result = boundFunction(value, index, O);\n      if (TYPE) {\n        if (IS_MAP) target[index] = result; // map\n        else if (result) switch (TYPE) {\n          case 3: return true;              // some\n          case 5: return value;             // find\n          case 6: return index;             // findIndex\n          case 2: push.call(target, value); // filter\n        } else if (IS_EVERY) return false;  // every\n      }\n    }\n    return IS_FIND_INDEX ? -1 : IS_SOME || IS_EVERY ? IS_EVERY : target;\n  };\n};\n\nmodule.exports = {\n  // `Array.prototype.forEach` method\n  // https://tc39.github.io/ecma262/#sec-array.prototype.foreach\n  forEach: createMethod(0),\n  // `Array.prototype.map` method\n  // https://tc39.github.io/ecma262/#sec-array.prototype.map\n  map: createMethod(1),\n  // `Array.prototype.filter` method\n  // https://tc39.github.io/ecma262/#sec-array.prototype.filter\n  filter: createMethod(2),\n  // `Array.prototype.some` method\n  // https://tc39.github.io/ecma262/#sec-array.prototype.some\n  some: createMethod(3),\n  // `Array.prototype.every` method\n  // https://tc39.github.io/ecma262/#sec-array.prototype.every\n  every: createMethod(4),\n  // `Array.prototype.find` method\n  // https://tc39.github.io/ecma262/#sec-array.prototype.find\n  find: createMethod(5),\n  // `Array.prototype.findIndex` method\n  // https://tc39.github.io/ecma262/#sec-array.prototype.findIndex\n  findIndex: createMethod(6)\n};\n","var isObject = require('../internals/is-object');\n\n// `ToPrimitive` abstract operation\n// https://tc39.github.io/ecma262/#sec-toprimitive\n// instead of the ES6 spec version, we didn't implement @@toPrimitive case\n// and the second argument - flag - preferred type is a string\nmodule.exports = function (input, PREFERRED_STRING) {\n  if (!isObject(input)) return input;\n  var fn, val;\n  if (PREFERRED_STRING && typeof (fn = input.toString) == 'function' && !isObject(val = fn.call(input))) return val;\n  if (typeof (fn = input.valueOf) == 'function' && !isObject(val = fn.call(input))) return val;\n  if (!PREFERRED_STRING && typeof (fn = input.toString) == 'function' && !isObject(val = fn.call(input))) return val;\n  throw TypeError(\"Can't convert object to primitive value\");\n};\n","module.exports = false;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Util_1 = require(\"./Util\");\nvar Global_1 = require(\"./Global\");\nvar COMMA = ',', OPEN_PAREN = '(', CLOSE_PAREN = ')', OPEN_PAREN_BRACKET = '([', CLOSE_BRACKET_PAREN = '])', SEMICOLON = ';', DOUBLE_PAREN = '()', EQUALS = '=', CONTEXT_METHODS = [\n    'arc',\n    'arcTo',\n    'beginPath',\n    'bezierCurveTo',\n    'clearRect',\n    'clip',\n    'closePath',\n    'createLinearGradient',\n    'createPattern',\n    'createRadialGradient',\n    'drawImage',\n    'ellipse',\n    'fill',\n    'fillText',\n    'getImageData',\n    'createImageData',\n    'lineTo',\n    'moveTo',\n    'putImageData',\n    'quadraticCurveTo',\n    'rect',\n    'restore',\n    'rotate',\n    'save',\n    'scale',\n    'setLineDash',\n    'setTransform',\n    'stroke',\n    'strokeText',\n    'transform',\n    'translate'\n];\nvar CONTEXT_PROPERTIES = [\n    'fillStyle',\n    'strokeStyle',\n    'shadowColor',\n    'shadowBlur',\n    'shadowOffsetX',\n    'shadowOffsetY',\n    'lineCap',\n    'lineDashOffset',\n    'lineJoin',\n    'lineWidth',\n    'miterLimit',\n    'font',\n    'textAlign',\n    'textBaseline',\n    'globalAlpha',\n    'globalCompositeOperation',\n    'imageSmoothingEnabled'\n];\nvar traceArrMax = 100;\nvar Context = (function () {\n    function Context(canvas) {\n        this.canvas = canvas;\n        this._context = canvas._canvas.getContext('2d');\n        if (Global_1.Konva.enableTrace) {\n            this.traceArr = [];\n            this._enableTrace();\n        }\n    }\n    Context.prototype.fillShape = function (shape) {\n        if (shape.fillEnabled()) {\n            this._fill(shape);\n        }\n    };\n    Context.prototype._fill = function (shape) {\n    };\n    Context.prototype.strokeShape = function (shape) {\n        if (shape.hasStroke()) {\n            this._stroke(shape);\n        }\n    };\n    Context.prototype._stroke = function (shape) {\n    };\n    Context.prototype.fillStrokeShape = function (shape) {\n        this.fillShape(shape);\n        this.strokeShape(shape);\n    };\n    Context.prototype.getTrace = function (relaxed) {\n        var traceArr = this.traceArr, len = traceArr.length, str = '', n, trace, method, args;\n        for (n = 0; n < len; n++) {\n            trace = traceArr[n];\n            method = trace.method;\n            if (method) {\n                args = trace.args;\n                str += method;\n                if (relaxed) {\n                    str += DOUBLE_PAREN;\n                }\n                else {\n                    if (Util_1.Util._isArray(args[0])) {\n                        str += OPEN_PAREN_BRACKET + args.join(COMMA) + CLOSE_BRACKET_PAREN;\n                    }\n                    else {\n                        str += OPEN_PAREN + args.join(COMMA) + CLOSE_PAREN;\n                    }\n                }\n            }\n            else {\n                str += trace.property;\n                if (!relaxed) {\n                    str += EQUALS + trace.val;\n                }\n            }\n            str += SEMICOLON;\n        }\n        return str;\n    };\n    Context.prototype.clearTrace = function () {\n        this.traceArr = [];\n    };\n    Context.prototype._trace = function (str) {\n        var traceArr = this.traceArr, len;\n        traceArr.push(str);\n        len = traceArr.length;\n        if (len >= traceArrMax) {\n            traceArr.shift();\n        }\n    };\n    Context.prototype.reset = function () {\n        var pixelRatio = this.getCanvas().getPixelRatio();\n        this.setTransform(1 * pixelRatio, 0, 0, 1 * pixelRatio, 0, 0);\n    };\n    Context.prototype.getCanvas = function () {\n        return this.canvas;\n    };\n    Context.prototype.clear = function (bounds) {\n        var canvas = this.getCanvas();\n        if (bounds) {\n            this.clearRect(bounds.x || 0, bounds.y || 0, bounds.width || 0, bounds.height || 0);\n        }\n        else {\n            this.clearRect(0, 0, canvas.getWidth() / canvas.pixelRatio, canvas.getHeight() / canvas.pixelRatio);\n        }\n    };\n    Context.prototype._applyLineCap = function (shape) {\n        var lineCap = shape.getLineCap();\n        if (lineCap) {\n            this.setAttr('lineCap', lineCap);\n        }\n    };\n    Context.prototype._applyOpacity = function (shape) {\n        var absOpacity = shape.getAbsoluteOpacity();\n        if (absOpacity !== 1) {\n            this.setAttr('globalAlpha', absOpacity);\n        }\n    };\n    Context.prototype._applyLineJoin = function (shape) {\n        var lineJoin = shape.getLineJoin();\n        if (lineJoin) {\n            this.setAttr('lineJoin', lineJoin);\n        }\n    };\n    Context.prototype.setAttr = function (attr, val) {\n        this._context[attr] = val;\n    };\n    Context.prototype.arc = function (a0, a1, a2, a3, a4, a5) {\n        this._context.arc(a0, a1, a2, a3, a4, a5);\n    };\n    Context.prototype.arcTo = function (a0, a1, a2, a3, a4) {\n        this._context.arcTo(a0, a1, a2, a3, a4);\n    };\n    Context.prototype.beginPath = function () {\n        this._context.beginPath();\n    };\n    Context.prototype.bezierCurveTo = function (a0, a1, a2, a3, a4, a5) {\n        this._context.bezierCurveTo(a0, a1, a2, a3, a4, a5);\n    };\n    Context.prototype.clearRect = function (a0, a1, a2, a3) {\n        this._context.clearRect(a0, a1, a2, a3);\n    };\n    Context.prototype.clip = function () {\n        this._context.clip();\n    };\n    Context.prototype.closePath = function () {\n        this._context.closePath();\n    };\n    Context.prototype.createImageData = function (a0, a1) {\n        var a = arguments;\n        if (a.length === 2) {\n            return this._context.createImageData(a0, a1);\n        }\n        else if (a.length === 1) {\n            return this._context.createImageData(a0);\n        }\n    };\n    Context.prototype.createLinearGradient = function (a0, a1, a2, a3) {\n        return this._context.createLinearGradient(a0, a1, a2, a3);\n    };\n    Context.prototype.createPattern = function (a0, a1) {\n        return this._context.createPattern(a0, a1);\n    };\n    Context.prototype.createRadialGradient = function (a0, a1, a2, a3, a4, a5) {\n        return this._context.createRadialGradient(a0, a1, a2, a3, a4, a5);\n    };\n    Context.prototype.drawImage = function (a0, a1, a2, a3, a4, a5, a6, a7, a8) {\n        var a = arguments, _context = this._context;\n        if (a.length === 3) {\n            _context.drawImage(a0, a1, a2);\n        }\n        else if (a.length === 5) {\n            _context.drawImage(a0, a1, a2, a3, a4);\n        }\n        else if (a.length === 9) {\n            _context.drawImage(a0, a1, a2, a3, a4, a5, a6, a7, a8);\n        }\n    };\n    Context.prototype.ellipse = function (a0, a1, a2, a3, a4, a5, a6, a7) {\n        this._context.ellipse(a0, a1, a2, a3, a4, a5, a6, a7);\n    };\n    Context.prototype.isPointInPath = function (x, y) {\n        return this._context.isPointInPath(x, y);\n    };\n    Context.prototype.fill = function () {\n        this._context.fill();\n    };\n    Context.prototype.fillRect = function (x, y, width, height) {\n        this._context.fillRect(x, y, width, height);\n    };\n    Context.prototype.strokeRect = function (x, y, width, height) {\n        this._context.strokeRect(x, y, width, height);\n    };\n    Context.prototype.fillText = function (a0, a1, a2) {\n        this._context.fillText(a0, a1, a2);\n    };\n    Context.prototype.measureText = function (text) {\n        return this._context.measureText(text);\n    };\n    Context.prototype.getImageData = function (a0, a1, a2, a3) {\n        return this._context.getImageData(a0, a1, a2, a3);\n    };\n    Context.prototype.lineTo = function (a0, a1) {\n        this._context.lineTo(a0, a1);\n    };\n    Context.prototype.moveTo = function (a0, a1) {\n        this._context.moveTo(a0, a1);\n    };\n    Context.prototype.rect = function (a0, a1, a2, a3) {\n        this._context.rect(a0, a1, a2, a3);\n    };\n    Context.prototype.putImageData = function (a0, a1, a2) {\n        this._context.putImageData(a0, a1, a2);\n    };\n    Context.prototype.quadraticCurveTo = function (a0, a1, a2, a3) {\n        this._context.quadraticCurveTo(a0, a1, a2, a3);\n    };\n    Context.prototype.restore = function () {\n        this._context.restore();\n    };\n    Context.prototype.rotate = function (a0) {\n        this._context.rotate(a0);\n    };\n    Context.prototype.save = function () {\n        this._context.save();\n    };\n    Context.prototype.scale = function (a0, a1) {\n        this._context.scale(a0, a1);\n    };\n    Context.prototype.setLineDash = function (a0) {\n        if (this._context.setLineDash) {\n            this._context.setLineDash(a0);\n        }\n        else if ('mozDash' in this._context) {\n            this._context['mozDash'] = a0;\n        }\n        else if ('webkitLineDash' in this._context) {\n            this._context['webkitLineDash'] = a0;\n        }\n    };\n    Context.prototype.getLineDash = function () {\n        return this._context.getLineDash();\n    };\n    Context.prototype.setTransform = function (a0, a1, a2, a3, a4, a5) {\n        this._context.setTransform(a0, a1, a2, a3, a4, a5);\n    };\n    Context.prototype.stroke = function () {\n        this._context.stroke();\n    };\n    Context.prototype.strokeText = function (a0, a1, a2, a3) {\n        this._context.strokeText(a0, a1, a2, a3);\n    };\n    Context.prototype.transform = function (a0, a1, a2, a3, a4, a5) {\n        this._context.transform(a0, a1, a2, a3, a4, a5);\n    };\n    Context.prototype.translate = function (a0, a1) {\n        this._context.translate(a0, a1);\n    };\n    Context.prototype._enableTrace = function () {\n        var that = this, len = CONTEXT_METHODS.length, _simplifyArray = Util_1.Util._simplifyArray, origSetter = this.setAttr, n, args;\n        var func = function (methodName) {\n            var origMethod = that[methodName], ret;\n            that[methodName] = function () {\n                args = _simplifyArray(Array.prototype.slice.call(arguments, 0));\n                ret = origMethod.apply(that, arguments);\n                that._trace({\n                    method: methodName,\n                    args: args\n                });\n                return ret;\n            };\n        };\n        for (n = 0; n < len; n++) {\n            func(CONTEXT_METHODS[n]);\n        }\n        that.setAttr = function () {\n            origSetter.apply(that, arguments);\n            var prop = arguments[0];\n            var val = arguments[1];\n            if (prop === 'shadowOffsetX' ||\n                prop === 'shadowOffsetY' ||\n                prop === 'shadowBlur') {\n                val = val / this.canvas.getPixelRatio();\n            }\n            that._trace({\n                property: prop,\n                val: val\n            });\n        };\n    };\n    Context.prototype._applyGlobalCompositeOperation = function (node) {\n        var globalCompositeOperation = node.getGlobalCompositeOperation();\n        if (globalCompositeOperation !== 'source-over') {\n            this.setAttr('globalCompositeOperation', globalCompositeOperation);\n        }\n    };\n    return Context;\n}());\nexports.Context = Context;\nCONTEXT_PROPERTIES.forEach(function (prop) {\n    Object.defineProperty(Context.prototype, prop, {\n        get: function () {\n            return this._context[prop];\n        },\n        set: function (val) {\n            this._context[prop] = val;\n        }\n    });\n});\nvar SceneContext = (function (_super) {\n    __extends(SceneContext, _super);\n    function SceneContext() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    SceneContext.prototype._fillColor = function (shape) {\n        var fill = shape.fill();\n        this.setAttr('fillStyle', fill);\n        shape._fillFunc(this);\n    };\n    SceneContext.prototype._fillPattern = function (shape) {\n        var fillPatternX = shape.getFillPatternX(), fillPatternY = shape.getFillPatternY(), fillPatternRotation = Global_1.Konva.getAngle(shape.getFillPatternRotation()), fillPatternOffsetX = shape.getFillPatternOffsetX(), fillPatternOffsetY = shape.getFillPatternOffsetY(), fillPatternScaleX = shape.getFillPatternScaleX(), fillPatternScaleY = shape.getFillPatternScaleY();\n        if (fillPatternX || fillPatternY) {\n            this.translate(fillPatternX || 0, fillPatternY || 0);\n        }\n        if (fillPatternRotation) {\n            this.rotate(fillPatternRotation);\n        }\n        if (fillPatternScaleX || fillPatternScaleY) {\n            this.scale(fillPatternScaleX, fillPatternScaleY);\n        }\n        if (fillPatternOffsetX || fillPatternOffsetY) {\n            this.translate(-1 * fillPatternOffsetX, -1 * fillPatternOffsetY);\n        }\n        this.setAttr('fillStyle', shape._getFillPattern());\n        shape._fillFunc(this);\n    };\n    SceneContext.prototype._fillLinearGradient = function (shape) {\n        var grd = shape._getLinearGradient();\n        if (grd) {\n            this.setAttr('fillStyle', grd);\n            shape._fillFunc(this);\n        }\n    };\n    SceneContext.prototype._fillRadialGradient = function (shape) {\n        var grd = shape._getRadialGradient();\n        if (grd) {\n            this.setAttr('fillStyle', grd);\n            shape._fillFunc(this);\n        }\n    };\n    SceneContext.prototype._fill = function (shape) {\n        var hasColor = shape.fill(), fillPriority = shape.getFillPriority();\n        if (hasColor && fillPriority === 'color') {\n            this._fillColor(shape);\n            return;\n        }\n        var hasPattern = shape.getFillPatternImage();\n        if (hasPattern && fillPriority === 'pattern') {\n            this._fillPattern(shape);\n            return;\n        }\n        var hasLinearGradient = shape.getFillLinearGradientColorStops();\n        if (hasLinearGradient && fillPriority === 'linear-gradient') {\n            this._fillLinearGradient(shape);\n            return;\n        }\n        var hasRadialGradient = shape.getFillRadialGradientColorStops();\n        if (hasRadialGradient && fillPriority === 'radial-gradient') {\n            this._fillRadialGradient(shape);\n            return;\n        }\n        if (hasColor) {\n            this._fillColor(shape);\n        }\n        else if (hasPattern) {\n            this._fillPattern(shape);\n        }\n        else if (hasLinearGradient) {\n            this._fillLinearGradient(shape);\n        }\n        else if (hasRadialGradient) {\n            this._fillRadialGradient(shape);\n        }\n    };\n    SceneContext.prototype._strokeLinearGradient = function (shape) {\n        var start = shape.getStrokeLinearGradientStartPoint(), end = shape.getStrokeLinearGradientEndPoint(), colorStops = shape.getStrokeLinearGradientColorStops(), grd = this.createLinearGradient(start.x, start.y, end.x, end.y);\n        if (colorStops) {\n            for (var n = 0; n < colorStops.length; n += 2) {\n                grd.addColorStop(colorStops[n], colorStops[n + 1]);\n            }\n            this.setAttr('strokeStyle', grd);\n        }\n    };\n    SceneContext.prototype._stroke = function (shape) {\n        var dash = shape.dash(), strokeScaleEnabled = shape.getStrokeScaleEnabled();\n        if (shape.hasStroke()) {\n            if (!strokeScaleEnabled) {\n                this.save();\n                var pixelRatio = this.getCanvas().getPixelRatio();\n                this.setTransform(pixelRatio, 0, 0, pixelRatio, 0, 0);\n            }\n            this._applyLineCap(shape);\n            if (dash && shape.dashEnabled()) {\n                this.setLineDash(dash);\n                this.setAttr('lineDashOffset', shape.dashOffset());\n            }\n            this.setAttr('lineWidth', shape.strokeWidth());\n            if (!shape.getShadowForStrokeEnabled()) {\n                this.setAttr('shadowColor', 'rgba(0,0,0,0)');\n            }\n            var hasLinearGradient = shape.getStrokeLinearGradientColorStops();\n            if (hasLinearGradient) {\n                this._strokeLinearGradient(shape);\n            }\n            else {\n                this.setAttr('strokeStyle', shape.stroke());\n            }\n            shape._strokeFunc(this);\n            if (!strokeScaleEnabled) {\n                this.restore();\n            }\n        }\n    };\n    SceneContext.prototype._applyShadow = function (shape) {\n        var util = Util_1.Util, color = util.get(shape.getShadowRGBA(), 'black'), blur = util.get(shape.getShadowBlur(), 5), offset = util.get(shape.getShadowOffset(), {\n            x: 0,\n            y: 0\n        }), scale = shape.getAbsoluteScale(), ratio = this.canvas.getPixelRatio(), scaleX = scale.x * ratio, scaleY = scale.y * ratio;\n        this.setAttr('shadowColor', color);\n        this.setAttr('shadowBlur', blur * Math.min(Math.abs(scaleX), Math.abs(scaleY)));\n        this.setAttr('shadowOffsetX', offset.x * scaleX);\n        this.setAttr('shadowOffsetY', offset.y * scaleY);\n    };\n    return SceneContext;\n}(Context));\nexports.SceneContext = SceneContext;\nvar HitContext = (function (_super) {\n    __extends(HitContext, _super);\n    function HitContext() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    HitContext.prototype._fill = function (shape) {\n        this.save();\n        this.setAttr('fillStyle', shape.colorKey);\n        shape._fillFuncHit(this);\n        this.restore();\n    };\n    HitContext.prototype.strokeShape = function (shape) {\n        if (shape.hasHitStroke()) {\n            this._stroke(shape);\n        }\n    };\n    HitContext.prototype._stroke = function (shape) {\n        if (shape.hasHitStroke()) {\n            var strokeScaleEnabled = shape.getStrokeScaleEnabled();\n            if (!strokeScaleEnabled) {\n                this.save();\n                var pixelRatio = this.getCanvas().getPixelRatio();\n                this.setTransform(pixelRatio, 0, 0, pixelRatio, 0, 0);\n            }\n            this._applyLineCap(shape);\n            var hitStrokeWidth = shape.hitStrokeWidth();\n            var strokeWidth = hitStrokeWidth === 'auto' ? shape.strokeWidth() : hitStrokeWidth;\n            this.setAttr('lineWidth', strokeWidth);\n            this.setAttr('strokeStyle', shape.colorKey);\n            shape._strokeFuncHit(this);\n            if (!strokeScaleEnabled) {\n                this.restore();\n            }\n        }\n    };\n    return HitContext;\n}(Context));\nexports.HitContext = HitContext;\n","var toString = {}.toString;\n\nmodule.exports = function (it) {\n  return toString.call(it).slice(8, -1);\n};\n","var global = require('../internals/global');\nvar setGlobal = require('../internals/set-global');\n\nvar SHARED = '__core-js_shared__';\nvar store = global[SHARED] || setGlobal(SHARED, {});\n\nmodule.exports = store;\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","var has = require('../internals/has');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar indexOf = require('../internals/array-includes').indexOf;\nvar hiddenKeys = require('../internals/hidden-keys');\n\nmodule.exports = function (object, names) {\n  var O = toIndexedObject(object);\n  var i = 0;\n  var result = [];\n  var key;\n  for (key in O) !has(hiddenKeys, key) && has(O, key) && result.push(key);\n  // Don't enum bug & hidden keys\n  while (names.length > i) if (has(O, key = names[i++])) {\n    ~indexOf(result, key) || result.push(key);\n  }\n  return result;\n};\n","var global = require('../internals/global');\nvar isObject = require('../internals/is-object');\n\nvar document = global.document;\n// typeof document.createElement is 'object' in old IE\nvar EXISTS = isObject(document) && isObject(document.createElement);\n\nmodule.exports = function (it) {\n  return EXISTS ? document.createElement(it) : {};\n};\n","var anObject = require('../internals/an-object');\nvar isObject = require('../internals/is-object');\nvar newPromiseCapability = require('../internals/new-promise-capability');\n\nmodule.exports = function (C, x) {\n  anObject(C);\n  if (isObject(x) && x.constructor === C) return x;\n  var promiseCapability = newPromiseCapability.f(C);\n  var resolve = promiseCapability.resolve;\n  resolve(x);\n  return promiseCapability.promise;\n};\n","var global = require('../internals/global');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\n\nmodule.exports = function (key, value) {\n  try {\n    createNonEnumerableProperty(global, key, value);\n  } catch (error) {\n    global[key] = value;\n  } return value;\n};\n","module.exports = {};\n","module.exports = function (exec) {\n  try {\n    return !!exec();\n  } catch (error) {\n    return true;\n  }\n};\n","var path = require('../internals/path');\nvar global = require('../internals/global');\n\nvar aFunction = function (variable) {\n  return typeof variable == 'function' ? variable : undefined;\n};\n\nmodule.exports = function (namespace, method) {\n  return arguments.length < 2 ? aFunction(path[namespace]) || aFunction(global[namespace])\n    : path[namespace] && path[namespace][method] || global[namespace] && global[namespace][method];\n};\n","'use strict';\nvar nativePropertyIsEnumerable = {}.propertyIsEnumerable;\nvar getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n\n// Nashorn ~ JDK8 bug\nvar NASHORN_BUG = getOwnPropertyDescriptor && !nativePropertyIsEnumerable.call({ 1: 2 }, 1);\n\n// `Object.prototype.propertyIsEnumerable` method implementation\n// https://tc39.github.io/ecma262/#sec-object.prototype.propertyisenumerable\nexports.f = NASHORN_BUG ? function propertyIsEnumerable(V) {\n  var descriptor = getOwnPropertyDescriptor(this, V);\n  return !!descriptor && descriptor.enumerable;\n} : nativePropertyIsEnumerable;\n","var anObject = require('../internals/an-object');\nvar aPossiblePrototype = require('../internals/a-possible-prototype');\n\n// `Object.setPrototypeOf` method\n// https://tc39.github.io/ecma262/#sec-object.setprototypeof\n// Works with __proto__ only. Old v8 can't work with null proto objects.\n/* eslint-disable no-proto */\nmodule.exports = Object.setPrototypeOf || ('__proto__' in {} ? function () {\n  var CORRECT_SETTER = false;\n  var test = {};\n  var setter;\n  try {\n    setter = Object.getOwnPropertyDescriptor(Object.prototype, '__proto__').set;\n    setter.call(test, []);\n    CORRECT_SETTER = test instanceof Array;\n  } catch (error) { /* empty */ }\n  return function setPrototypeOf(O, proto) {\n    anObject(O);\n    aPossiblePrototype(proto);\n    if (CORRECT_SETTER) setter.call(O, proto);\n    else O.__proto__ = proto;\n    return O;\n  };\n}() : undefined);\n","var TO_STRING_TAG_SUPPORT = require('../internals/to-string-tag-support');\nvar redefine = require('../internals/redefine');\nvar toString = require('../internals/object-to-string');\n\n// `Object.prototype.toString` method\n// https://tc39.github.io/ecma262/#sec-object.prototype.tostring\nif (!TO_STRING_TAG_SUPPORT) {\n  redefine(Object.prototype, 'toString', toString, { unsafe: true });\n}\n","var defineProperty = require('../internals/object-define-property').f;\nvar has = require('../internals/has');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\n\nmodule.exports = function (it, TAG, STATIC) {\n  if (it && !has(it = STATIC ? it : it.prototype, TO_STRING_TAG)) {\n    defineProperty(it, TO_STRING_TAG, { configurable: true, value: TAG });\n  }\n};\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Util_1 = require(\"./Util\");\nvar Container_1 = require(\"./Container\");\nvar Node_1 = require(\"./Node\");\nvar Factory_1 = require(\"./Factory\");\nvar Canvas_1 = require(\"./Canvas\");\nvar BaseLayer = (function (_super) {\n    __extends(BaseLayer, _super);\n    function BaseLayer(config) {\n        var _this = _super.call(this, config) || this;\n        _this.canvas = new Canvas_1.SceneCanvas();\n        _this._waitingForDraw = false;\n        _this.on('visibleChange', _this._checkVisibility);\n        _this._checkVisibility();\n        _this.on('imageSmoothingEnabledChange', _this._setSmoothEnabled);\n        _this._setSmoothEnabled();\n        return _this;\n    }\n    BaseLayer.prototype.createPNGStream = function () {\n        var c = this.canvas._canvas;\n        return c.createPNGStream();\n    };\n    BaseLayer.prototype.getCanvas = function () {\n        return this.canvas;\n    };\n    BaseLayer.prototype.getHitCanvas = function () {\n        return this.hitCanvas;\n    };\n    BaseLayer.prototype.getContext = function () {\n        return this.getCanvas().getContext();\n    };\n    BaseLayer.prototype.clear = function (bounds) {\n        this.getContext().clear(bounds);\n        return this;\n    };\n    BaseLayer.prototype.setZIndex = function (index) {\n        _super.prototype.setZIndex.call(this, index);\n        var stage = this.getStage();\n        if (stage) {\n            stage.content.removeChild(this.getCanvas()._canvas);\n            if (index < stage.children.length - 1) {\n                stage.content.insertBefore(this.getCanvas()._canvas, stage.children[index + 1].getCanvas()._canvas);\n            }\n            else {\n                stage.content.appendChild(this.getCanvas()._canvas);\n            }\n        }\n        return this;\n    };\n    BaseLayer.prototype.moveToTop = function () {\n        Node_1.Node.prototype.moveToTop.call(this);\n        var stage = this.getStage();\n        if (stage) {\n            stage.content.removeChild(this.getCanvas()._canvas);\n            stage.content.appendChild(this.getCanvas()._canvas);\n        }\n        return true;\n    };\n    BaseLayer.prototype.moveUp = function () {\n        var moved = Node_1.Node.prototype.moveUp.call(this);\n        if (!moved) {\n            return false;\n        }\n        var stage = this.getStage();\n        if (!stage) {\n            return false;\n        }\n        stage.content.removeChild(this.getCanvas()._canvas);\n        if (this.index < stage.children.length - 1) {\n            stage.content.insertBefore(this.getCanvas()._canvas, stage.children[this.index + 1].getCanvas()._canvas);\n        }\n        else {\n            stage.content.appendChild(this.getCanvas()._canvas);\n        }\n        return true;\n    };\n    BaseLayer.prototype.moveDown = function () {\n        if (Node_1.Node.prototype.moveDown.call(this)) {\n            var stage = this.getStage();\n            if (stage) {\n                var children = stage.children;\n                stage.content.removeChild(this.getCanvas()._canvas);\n                stage.content.insertBefore(this.getCanvas()._canvas, children[this.index + 1].getCanvas()._canvas);\n            }\n            return true;\n        }\n        return false;\n    };\n    BaseLayer.prototype.moveToBottom = function () {\n        if (Node_1.Node.prototype.moveToBottom.call(this)) {\n            var stage = this.getStage();\n            if (stage) {\n                var children = stage.children;\n                stage.content.removeChild(this.getCanvas()._canvas);\n                stage.content.insertBefore(this.getCanvas()._canvas, children[1].getCanvas()._canvas);\n            }\n            return true;\n        }\n        return false;\n    };\n    BaseLayer.prototype.getLayer = function () {\n        return this;\n    };\n    BaseLayer.prototype.hitGraphEnabled = function () {\n        return true;\n    };\n    BaseLayer.prototype.remove = function () {\n        var _canvas = this.getCanvas()._canvas;\n        Node_1.Node.prototype.remove.call(this);\n        if (_canvas && _canvas.parentNode && Util_1.Util._isInDocument(_canvas)) {\n            _canvas.parentNode.removeChild(_canvas);\n        }\n        return this;\n    };\n    BaseLayer.prototype.getStage = function () {\n        return this.parent;\n    };\n    BaseLayer.prototype.setSize = function (_a) {\n        var width = _a.width, height = _a.height;\n        this.canvas.setSize(width, height);\n        this._setSmoothEnabled();\n        return this;\n    };\n    BaseLayer.prototype._toKonvaCanvas = function (config) {\n        config = config || {};\n        config.width = config.width || this.getWidth();\n        config.height = config.height || this.getHeight();\n        config.x = config.x !== undefined ? config.x : this.x();\n        config.y = config.y !== undefined ? config.y : this.y();\n        return Node_1.Node.prototype._toKonvaCanvas.call(this, config);\n    };\n    BaseLayer.prototype._checkVisibility = function () {\n        var visible = this.visible();\n        if (visible) {\n            this.canvas._canvas.style.display = 'block';\n        }\n        else {\n            this.canvas._canvas.style.display = 'none';\n        }\n    };\n    BaseLayer.prototype._setSmoothEnabled = function () {\n        this.getContext()._context.imageSmoothingEnabled = this.imageSmoothingEnabled();\n    };\n    BaseLayer.prototype.getWidth = function () {\n        if (this.parent) {\n            return this.parent.width();\n        }\n    };\n    BaseLayer.prototype.setWidth = function () {\n        Util_1.Util.warn('Can not change width of layer. Use \"stage.width(value)\" function instead.');\n    };\n    BaseLayer.prototype.getHeight = function () {\n        if (this.parent) {\n            return this.parent.height();\n        }\n    };\n    BaseLayer.prototype.setHeight = function () {\n        Util_1.Util.warn('Can not change height of layer. Use \"stage.height(value)\" function instead.');\n    };\n    BaseLayer.prototype.getIntersection = function (pos, selector) {\n        return null;\n    };\n    BaseLayer.prototype.batchDraw = function () {\n        var _this = this;\n        if (!this._waitingForDraw) {\n            this._waitingForDraw = true;\n            Util_1.Util.requestAnimFrame(function () {\n                _this.draw();\n                _this._waitingForDraw = false;\n            });\n        }\n        return this;\n    };\n    BaseLayer.prototype._applyTransform = function (shape, context, top) {\n        var m = shape.getAbsoluteTransform(top).getMatrix();\n        context.transform(m[0], m[1], m[2], m[3], m[4], m[5]);\n    };\n    return BaseLayer;\n}(Container_1.Container));\nexports.BaseLayer = BaseLayer;\nBaseLayer.prototype.nodeType = 'BaseLayer';\nFactory_1.Factory.addGetterSetter(BaseLayer, 'imageSmoothingEnabled', true);\nFactory_1.Factory.addGetterSetter(BaseLayer, 'clearBeforeDraw', true);\nUtil_1.Collection.mapMethods(BaseLayer);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar PI_OVER_180 = Math.PI / 180;\nfunction detectBrowser() {\n    return (typeof window !== 'undefined' &&\n        ({}.toString.call(window) === '[object Window]' ||\n            {}.toString.call(window) === '[object global]'));\n}\nvar _detectIE = function (ua) {\n    var msie = ua.indexOf('msie ');\n    if (msie > 0) {\n        return parseInt(ua.substring(msie + 5, ua.indexOf('.', msie)), 10);\n    }\n    var trident = ua.indexOf('trident/');\n    if (trident > 0) {\n        var rv = ua.indexOf('rv:');\n        return parseInt(ua.substring(rv + 3, ua.indexOf('.', rv)), 10);\n    }\n    var edge = ua.indexOf('edge/');\n    if (edge > 0) {\n        return parseInt(ua.substring(edge + 5, ua.indexOf('.', edge)), 10);\n    }\n    return false;\n};\nexports._parseUA = function (userAgent) {\n    var ua = userAgent.toLowerCase(), match = /(chrome)[ /]([\\w.]+)/.exec(ua) ||\n        /(webkit)[ /]([\\w.]+)/.exec(ua) ||\n        /(opera)(?:.*version|)[ /]([\\w.]+)/.exec(ua) ||\n        /(msie) ([\\w.]+)/.exec(ua) ||\n        (ua.indexOf('compatible') < 0 &&\n            /(mozilla)(?:.*? rv:([\\w.]+)|)/.exec(ua)) ||\n        [], mobile = !!userAgent.match(/Android|BlackBerry|iPhone|iPad|iPod|Opera Mini|IEMobile/i), ieMobile = !!userAgent.match(/IEMobile/i);\n    return {\n        browser: match[1] || '',\n        version: match[2] || '0',\n        isIE: _detectIE(ua),\n        mobile: mobile,\n        ieMobile: ieMobile\n    };\n};\nexports.glob = typeof global !== 'undefined'\n    ? global\n    : typeof window !== 'undefined'\n        ? window\n        : typeof WorkerGlobalScope !== 'undefined'\n            ? self\n            : {};\nexports.Konva = {\n    _global: exports.glob,\n    version: '6.0.0',\n    isBrowser: detectBrowser(),\n    isUnminified: /param/.test(function (param) { }.toString()),\n    dblClickWindow: 400,\n    getAngle: function (angle) {\n        return exports.Konva.angleDeg ? angle * PI_OVER_180 : angle;\n    },\n    enableTrace: false,\n    _pointerEventsEnabled: false,\n    hitOnDragEnabled: false,\n    captureTouchEventsEnabled: false,\n    listenClickTap: false,\n    inDblClickWindow: false,\n    pixelRatio: undefined,\n    dragDistance: 3,\n    angleDeg: true,\n    showWarnings: true,\n    dragButtons: [0, 1],\n    isDragging: function () {\n        return exports.Konva['DD'].isDragging;\n    },\n    isDragReady: function () {\n        return !!exports.Konva['DD'].node;\n    },\n    UA: exports._parseUA((exports.glob.navigator && exports.glob.navigator.userAgent) || ''),\n    document: exports.glob.document,\n    _injectGlobal: function (Konva) {\n        exports.glob.Konva = Konva;\n    },\n    _parseUA: exports._parseUA\n};\nexports._NODES_REGISTRY = {};\nexports._registerNode = function (NodeClass) {\n    exports._NODES_REGISTRY[NodeClass.prototype.getClassName()] = NodeClass;\n    exports.Konva[NodeClass.prototype.getClassName()] = NodeClass;\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar $map = require('../internals/array-iteration').map;\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('map');\n// FF49- issue\nvar USES_TO_LENGTH = arrayMethodUsesToLength('map');\n\n// `Array.prototype.map` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.map\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT || !USES_TO_LENGTH }, {\n  map: function map(callbackfn /* , thisArg */) {\n    return $map(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","var check = function (it) {\n  return it && it.Math == Math && it;\n};\n\n// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nmodule.exports =\n  // eslint-disable-next-line no-undef\n  check(typeof globalThis == 'object' && globalThis) ||\n  check(typeof window == 'object' && window) ||\n  check(typeof self == 'object' && self) ||\n  check(typeof global == 'object' && global) ||\n  // eslint-disable-next-line no-new-func\n  Function('return this')();\n","var global = require('../internals/global');\nvar DOMIterables = require('../internals/dom-iterables');\nvar ArrayIteratorMethods = require('../modules/es.array.iterator');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar ITERATOR = wellKnownSymbol('iterator');\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\nvar ArrayValues = ArrayIteratorMethods.values;\n\nfor (var COLLECTION_NAME in DOMIterables) {\n  var Collection = global[COLLECTION_NAME];\n  var CollectionPrototype = Collection && Collection.prototype;\n  if (CollectionPrototype) {\n    // some Chrome versions have non-configurable methods on DOMTokenList\n    if (CollectionPrototype[ITERATOR] !== ArrayValues) try {\n      createNonEnumerableProperty(CollectionPrototype, ITERATOR, ArrayValues);\n    } catch (error) {\n      CollectionPrototype[ITERATOR] = ArrayValues;\n    }\n    if (!CollectionPrototype[TO_STRING_TAG]) {\n      createNonEnumerableProperty(CollectionPrototype, TO_STRING_TAG, COLLECTION_NAME);\n    }\n    if (DOMIterables[COLLECTION_NAME]) for (var METHOD_NAME in ArrayIteratorMethods) {\n      // some Chrome versions have non-configurable methods on DOMTokenList\n      if (CollectionPrototype[METHOD_NAME] !== ArrayIteratorMethods[METHOD_NAME]) try {\n        createNonEnumerableProperty(CollectionPrototype, METHOD_NAME, ArrayIteratorMethods[METHOD_NAME]);\n      } catch (error) {\n        CollectionPrototype[METHOD_NAME] = ArrayIteratorMethods[METHOD_NAME];\n      }\n    }\n  }\n}\n","var internalObjectKeys = require('../internals/object-keys-internal');\nvar enumBugKeys = require('../internals/enum-bug-keys');\n\n// `Object.keys` method\n// https://tc39.github.io/ecma262/#sec-object.keys\nmodule.exports = Object.keys || function keys(O) {\n  return internalObjectKeys(O, enumBugKeys);\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Global_1 = require(\"./Global\");\nvar Util_1 = require(\"./Util\");\nexports.DD = {\n    get isDragging() {\n        var flag = false;\n        exports.DD._dragElements.forEach(function (elem) {\n            if (elem.dragStatus === 'dragging') {\n                flag = true;\n            }\n        });\n        return flag;\n    },\n    justDragged: false,\n    get node() {\n        var node;\n        exports.DD._dragElements.forEach(function (elem) {\n            node = elem.node;\n        });\n        return node;\n    },\n    _dragElements: new Map(),\n    _drag: function (evt) {\n        exports.DD._dragElements.forEach(function (elem, key) {\n            var node = elem.node;\n            var stage = node.getStage();\n            stage.setPointersPositions(evt);\n            if (elem.pointerId === undefined) {\n                elem.pointerId = Util_1.Util._getFirstPointerId(evt);\n            }\n            var pos = stage._changedPointerPositions.find(function (pos) { return pos.id === elem.pointerId; });\n            if (!pos) {\n                return;\n            }\n            if (elem.dragStatus !== 'dragging') {\n                var dragDistance = node.dragDistance();\n                var distance = Math.max(Math.abs(pos.x - elem.startPointerPos.x), Math.abs(pos.y - elem.startPointerPos.y));\n                if (distance < dragDistance) {\n                    return;\n                }\n                node.startDrag({ evt: evt });\n                if (!node.isDragging()) {\n                    return;\n                }\n            }\n            node._setDragPosition(evt, elem);\n            node.fire('dragmove', {\n                type: 'dragmove',\n                target: node,\n                evt: evt\n            }, true);\n        });\n    },\n    _endDragBefore: function (evt) {\n        exports.DD._dragElements.forEach(function (elem, key) {\n            var node = elem.node;\n            var stage = node.getStage();\n            if (evt) {\n                stage.setPointersPositions(evt);\n            }\n            var pos = stage._changedPointerPositions.find(function (pos) { return pos.id === elem.pointerId; });\n            if (!pos) {\n                return;\n            }\n            if (elem.dragStatus === 'dragging' || elem.dragStatus === 'stopped') {\n                exports.DD.justDragged = true;\n                Global_1.Konva.listenClickTap = false;\n                elem.dragStatus = 'stopped';\n            }\n            var drawNode = elem.node.getLayer() ||\n                (elem.node instanceof Global_1.Konva['Stage'] && elem.node);\n            if (drawNode) {\n                drawNode.draw();\n            }\n        });\n    },\n    _endDragAfter: function (evt) {\n        exports.DD._dragElements.forEach(function (elem, key) {\n            if (elem.dragStatus === 'stopped') {\n                elem.node.fire('dragend', {\n                    type: 'dragend',\n                    target: elem.node,\n                    evt: evt\n                }, true);\n            }\n            if (elem.dragStatus !== 'dragging') {\n                exports.DD._dragElements.delete(key);\n            }\n        });\n    }\n};\nif (Global_1.Konva.isBrowser) {\n    window.addEventListener('mouseup', exports.DD._endDragBefore, true);\n    window.addEventListener('touchend', exports.DD._endDragBefore, true);\n    window.addEventListener('mousemove', exports.DD._drag);\n    window.addEventListener('touchmove', exports.DD._drag);\n    window.addEventListener('mouseup', exports.DD._endDragAfter, false);\n    window.addEventListener('touchend', exports.DD._endDragAfter, false);\n}\n","var has = require('../internals/has');\nvar toObject = require('../internals/to-object');\nvar sharedKey = require('../internals/shared-key');\nvar CORRECT_PROTOTYPE_GETTER = require('../internals/correct-prototype-getter');\n\nvar IE_PROTO = sharedKey('IE_PROTO');\nvar ObjectPrototype = Object.prototype;\n\n// `Object.getPrototypeOf` method\n// https://tc39.github.io/ecma262/#sec-object.getprototypeof\nmodule.exports = CORRECT_PROTOTYPE_GETTER ? Object.getPrototypeOf : function (O) {\n  O = toObject(O);\n  if (has(O, IE_PROTO)) return O[IE_PROTO];\n  if (typeof O.constructor == 'function' && O instanceof O.constructor) {\n    return O.constructor.prototype;\n  } return O instanceof Object ? ObjectPrototype : null;\n};\n","var fails = require('../internals/fails');\n\nmodule.exports = !fails(function () {\n  function F() { /* empty */ }\n  F.prototype.constructor = null;\n  return Object.getPrototypeOf(new F()) !== F.prototype;\n});\n","'use strict';\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar addToUnscopables = require('../internals/add-to-unscopables');\nvar Iterators = require('../internals/iterators');\nvar InternalStateModule = require('../internals/internal-state');\nvar defineIterator = require('../internals/define-iterator');\n\nvar ARRAY_ITERATOR = 'Array Iterator';\nvar setInternalState = InternalStateModule.set;\nvar getInternalState = InternalStateModule.getterFor(ARRAY_ITERATOR);\n\n// `Array.prototype.entries` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.entries\n// `Array.prototype.keys` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.keys\n// `Array.prototype.values` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.values\n// `Array.prototype[@@iterator]` method\n// https://tc39.github.io/ecma262/#sec-array.prototype-@@iterator\n// `CreateArrayIterator` internal method\n// https://tc39.github.io/ecma262/#sec-createarrayiterator\nmodule.exports = defineIterator(Array, 'Array', function (iterated, kind) {\n  setInternalState(this, {\n    type: ARRAY_ITERATOR,\n    target: toIndexedObject(iterated), // target\n    index: 0,                          // next index\n    kind: kind                         // kind\n  });\n// `%ArrayIteratorPrototype%.next` method\n// https://tc39.github.io/ecma262/#sec-%arrayiteratorprototype%.next\n}, function () {\n  var state = getInternalState(this);\n  var target = state.target;\n  var kind = state.kind;\n  var index = state.index++;\n  if (!target || index >= target.length) {\n    state.target = undefined;\n    return { value: undefined, done: true };\n  }\n  if (kind == 'keys') return { value: index, done: false };\n  if (kind == 'values') return { value: target[index], done: false };\n  return { value: [index, target[index]], done: false };\n}, 'values');\n\n// argumentsList[@@iterator] is %ArrayProto_values%\n// https://tc39.github.io/ecma262/#sec-createunmappedargumentsobject\n// https://tc39.github.io/ecma262/#sec-createmappedargumentsobject\nIterators.Arguments = Iterators.Array;\n\n// https://tc39.github.io/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables('keys');\naddToUnscopables('values');\naddToUnscopables('entries');\n","var redefine = require('../internals/redefine');\n\nmodule.exports = function (target, src, options) {\n  for (var key in src) redefine(target, key, src[key], options);\n  return target;\n};\n","module.exports = function (exec) {\n  try {\n    return { error: false, value: exec() };\n  } catch (error) {\n    return { error: true, value: error };\n  }\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar IS_PURE = require('../internals/is-pure');\nvar global = require('../internals/global');\nvar getBuiltIn = require('../internals/get-built-in');\nvar NativePromise = require('../internals/native-promise-constructor');\nvar redefine = require('../internals/redefine');\nvar redefineAll = require('../internals/redefine-all');\nvar setToStringTag = require('../internals/set-to-string-tag');\nvar setSpecies = require('../internals/set-species');\nvar isObject = require('../internals/is-object');\nvar aFunction = require('../internals/a-function');\nvar anInstance = require('../internals/an-instance');\nvar classof = require('../internals/classof-raw');\nvar inspectSource = require('../internals/inspect-source');\nvar iterate = require('../internals/iterate');\nvar checkCorrectnessOfIteration = require('../internals/check-correctness-of-iteration');\nvar speciesConstructor = require('../internals/species-constructor');\nvar task = require('../internals/task').set;\nvar microtask = require('../internals/microtask');\nvar promiseResolve = require('../internals/promise-resolve');\nvar hostReportErrors = require('../internals/host-report-errors');\nvar newPromiseCapabilityModule = require('../internals/new-promise-capability');\nvar perform = require('../internals/perform');\nvar InternalStateModule = require('../internals/internal-state');\nvar isForced = require('../internals/is-forced');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar V8_VERSION = require('../internals/engine-v8-version');\n\nvar SPECIES = wellKnownSymbol('species');\nvar PROMISE = 'Promise';\nvar getInternalState = InternalStateModule.get;\nvar setInternalState = InternalStateModule.set;\nvar getInternalPromiseState = InternalStateModule.getterFor(PROMISE);\nvar PromiseConstructor = NativePromise;\nvar TypeError = global.TypeError;\nvar document = global.document;\nvar process = global.process;\nvar $fetch = getBuiltIn('fetch');\nvar newPromiseCapability = newPromiseCapabilityModule.f;\nvar newGenericPromiseCapability = newPromiseCapability;\nvar IS_NODE = classof(process) == 'process';\nvar DISPATCH_EVENT = !!(document && document.createEvent && global.dispatchEvent);\nvar UNHANDLED_REJECTION = 'unhandledrejection';\nvar REJECTION_HANDLED = 'rejectionhandled';\nvar PENDING = 0;\nvar FULFILLED = 1;\nvar REJECTED = 2;\nvar HANDLED = 1;\nvar UNHANDLED = 2;\nvar Internal, OwnPromiseCapability, PromiseWrapper, nativeThen;\n\nvar FORCED = isForced(PROMISE, function () {\n  var GLOBAL_CORE_JS_PROMISE = inspectSource(PromiseConstructor) !== String(PromiseConstructor);\n  if (!GLOBAL_CORE_JS_PROMISE) {\n    // V8 6.6 (Node 10 and Chrome 66) have a bug with resolving custom thenables\n    // https://bugs.chromium.org/p/chromium/issues/detail?id=830565\n    // We can't detect it synchronously, so just check versions\n    if (V8_VERSION === 66) return true;\n    // Unhandled rejections tracking support, NodeJS Promise without it fails @@species test\n    if (!IS_NODE && typeof PromiseRejectionEvent != 'function') return true;\n  }\n  // We need Promise#finally in the pure version for preventing prototype pollution\n  if (IS_PURE && !PromiseConstructor.prototype['finally']) return true;\n  // We can't use @@species feature detection in V8 since it causes\n  // deoptimization and performance degradation\n  // https://github.com/zloirock/core-js/issues/679\n  if (V8_VERSION >= 51 && /native code/.test(PromiseConstructor)) return false;\n  // Detect correctness of subclassing with @@species support\n  var promise = PromiseConstructor.resolve(1);\n  var FakePromise = function (exec) {\n    exec(function () { /* empty */ }, function () { /* empty */ });\n  };\n  var constructor = promise.constructor = {};\n  constructor[SPECIES] = FakePromise;\n  return !(promise.then(function () { /* empty */ }) instanceof FakePromise);\n});\n\nvar INCORRECT_ITERATION = FORCED || !checkCorrectnessOfIteration(function (iterable) {\n  PromiseConstructor.all(iterable)['catch'](function () { /* empty */ });\n});\n\n// helpers\nvar isThenable = function (it) {\n  var then;\n  return isObject(it) && typeof (then = it.then) == 'function' ? then : false;\n};\n\nvar notify = function (promise, state, isReject) {\n  if (state.notified) return;\n  state.notified = true;\n  var chain = state.reactions;\n  microtask(function () {\n    var value = state.value;\n    var ok = state.state == FULFILLED;\n    var index = 0;\n    // variable length - can't use forEach\n    while (chain.length > index) {\n      var reaction = chain[index++];\n      var handler = ok ? reaction.ok : reaction.fail;\n      var resolve = reaction.resolve;\n      var reject = reaction.reject;\n      var domain = reaction.domain;\n      var result, then, exited;\n      try {\n        if (handler) {\n          if (!ok) {\n            if (state.rejection === UNHANDLED) onHandleUnhandled(promise, state);\n            state.rejection = HANDLED;\n          }\n          if (handler === true) result = value;\n          else {\n            if (domain) domain.enter();\n            result = handler(value); // can throw\n            if (domain) {\n              domain.exit();\n              exited = true;\n            }\n          }\n          if (result === reaction.promise) {\n            reject(TypeError('Promise-chain cycle'));\n          } else if (then = isThenable(result)) {\n            then.call(result, resolve, reject);\n          } else resolve(result);\n        } else reject(value);\n      } catch (error) {\n        if (domain && !exited) domain.exit();\n        reject(error);\n      }\n    }\n    state.reactions = [];\n    state.notified = false;\n    if (isReject && !state.rejection) onUnhandled(promise, state);\n  });\n};\n\nvar dispatchEvent = function (name, promise, reason) {\n  var event, handler;\n  if (DISPATCH_EVENT) {\n    event = document.createEvent('Event');\n    event.promise = promise;\n    event.reason = reason;\n    event.initEvent(name, false, true);\n    global.dispatchEvent(event);\n  } else event = { promise: promise, reason: reason };\n  if (handler = global['on' + name]) handler(event);\n  else if (name === UNHANDLED_REJECTION) hostReportErrors('Unhandled promise rejection', reason);\n};\n\nvar onUnhandled = function (promise, state) {\n  task.call(global, function () {\n    var value = state.value;\n    var IS_UNHANDLED = isUnhandled(state);\n    var result;\n    if (IS_UNHANDLED) {\n      result = perform(function () {\n        if (IS_NODE) {\n          process.emit('unhandledRejection', value, promise);\n        } else dispatchEvent(UNHANDLED_REJECTION, promise, value);\n      });\n      // Browsers should not trigger `rejectionHandled` event if it was handled here, NodeJS - should\n      state.rejection = IS_NODE || isUnhandled(state) ? UNHANDLED : HANDLED;\n      if (result.error) throw result.value;\n    }\n  });\n};\n\nvar isUnhandled = function (state) {\n  return state.rejection !== HANDLED && !state.parent;\n};\n\nvar onHandleUnhandled = function (promise, state) {\n  task.call(global, function () {\n    if (IS_NODE) {\n      process.emit('rejectionHandled', promise);\n    } else dispatchEvent(REJECTION_HANDLED, promise, state.value);\n  });\n};\n\nvar bind = function (fn, promise, state, unwrap) {\n  return function (value) {\n    fn(promise, state, value, unwrap);\n  };\n};\n\nvar internalReject = function (promise, state, value, unwrap) {\n  if (state.done) return;\n  state.done = true;\n  if (unwrap) state = unwrap;\n  state.value = value;\n  state.state = REJECTED;\n  notify(promise, state, true);\n};\n\nvar internalResolve = function (promise, state, value, unwrap) {\n  if (state.done) return;\n  state.done = true;\n  if (unwrap) state = unwrap;\n  try {\n    if (promise === value) throw TypeError(\"Promise can't be resolved itself\");\n    var then = isThenable(value);\n    if (then) {\n      microtask(function () {\n        var wrapper = { done: false };\n        try {\n          then.call(value,\n            bind(internalResolve, promise, wrapper, state),\n            bind(internalReject, promise, wrapper, state)\n          );\n        } catch (error) {\n          internalReject(promise, wrapper, error, state);\n        }\n      });\n    } else {\n      state.value = value;\n      state.state = FULFILLED;\n      notify(promise, state, false);\n    }\n  } catch (error) {\n    internalReject(promise, { done: false }, error, state);\n  }\n};\n\n// constructor polyfill\nif (FORCED) {\n  // 25.4.3.1 Promise(executor)\n  PromiseConstructor = function Promise(executor) {\n    anInstance(this, PromiseConstructor, PROMISE);\n    aFunction(executor);\n    Internal.call(this);\n    var state = getInternalState(this);\n    try {\n      executor(bind(internalResolve, this, state), bind(internalReject, this, state));\n    } catch (error) {\n      internalReject(this, state, error);\n    }\n  };\n  // eslint-disable-next-line no-unused-vars\n  Internal = function Promise(executor) {\n    setInternalState(this, {\n      type: PROMISE,\n      done: false,\n      notified: false,\n      parent: false,\n      reactions: [],\n      rejection: false,\n      state: PENDING,\n      value: undefined\n    });\n  };\n  Internal.prototype = redefineAll(PromiseConstructor.prototype, {\n    // `Promise.prototype.then` method\n    // https://tc39.github.io/ecma262/#sec-promise.prototype.then\n    then: function then(onFulfilled, onRejected) {\n      var state = getInternalPromiseState(this);\n      var reaction = newPromiseCapability(speciesConstructor(this, PromiseConstructor));\n      reaction.ok = typeof onFulfilled == 'function' ? onFulfilled : true;\n      reaction.fail = typeof onRejected == 'function' && onRejected;\n      reaction.domain = IS_NODE ? process.domain : undefined;\n      state.parent = true;\n      state.reactions.push(reaction);\n      if (state.state != PENDING) notify(this, state, false);\n      return reaction.promise;\n    },\n    // `Promise.prototype.catch` method\n    // https://tc39.github.io/ecma262/#sec-promise.prototype.catch\n    'catch': function (onRejected) {\n      return this.then(undefined, onRejected);\n    }\n  });\n  OwnPromiseCapability = function () {\n    var promise = new Internal();\n    var state = getInternalState(promise);\n    this.promise = promise;\n    this.resolve = bind(internalResolve, promise, state);\n    this.reject = bind(internalReject, promise, state);\n  };\n  newPromiseCapabilityModule.f = newPromiseCapability = function (C) {\n    return C === PromiseConstructor || C === PromiseWrapper\n      ? new OwnPromiseCapability(C)\n      : newGenericPromiseCapability(C);\n  };\n\n  if (!IS_PURE && typeof NativePromise == 'function') {\n    nativeThen = NativePromise.prototype.then;\n\n    // wrap native Promise#then for native async functions\n    redefine(NativePromise.prototype, 'then', function then(onFulfilled, onRejected) {\n      var that = this;\n      return new PromiseConstructor(function (resolve, reject) {\n        nativeThen.call(that, resolve, reject);\n      }).then(onFulfilled, onRejected);\n    // https://github.com/zloirock/core-js/issues/640\n    }, { unsafe: true });\n\n    // wrap fetch result\n    if (typeof $fetch == 'function') $({ global: true, enumerable: true, forced: true }, {\n      // eslint-disable-next-line no-unused-vars\n      fetch: function fetch(input /* , init */) {\n        return promiseResolve(PromiseConstructor, $fetch.apply(global, arguments));\n      }\n    });\n  }\n}\n\n$({ global: true, wrap: true, forced: FORCED }, {\n  Promise: PromiseConstructor\n});\n\nsetToStringTag(PromiseConstructor, PROMISE, false, true);\nsetSpecies(PROMISE);\n\nPromiseWrapper = getBuiltIn(PROMISE);\n\n// statics\n$({ target: PROMISE, stat: true, forced: FORCED }, {\n  // `Promise.reject` method\n  // https://tc39.github.io/ecma262/#sec-promise.reject\n  reject: function reject(r) {\n    var capability = newPromiseCapability(this);\n    capability.reject.call(undefined, r);\n    return capability.promise;\n  }\n});\n\n$({ target: PROMISE, stat: true, forced: IS_PURE || FORCED }, {\n  // `Promise.resolve` method\n  // https://tc39.github.io/ecma262/#sec-promise.resolve\n  resolve: function resolve(x) {\n    return promiseResolve(IS_PURE && this === PromiseWrapper ? PromiseConstructor : this, x);\n  }\n});\n\n$({ target: PROMISE, stat: true, forced: INCORRECT_ITERATION }, {\n  // `Promise.all` method\n  // https://tc39.github.io/ecma262/#sec-promise.all\n  all: function all(iterable) {\n    var C = this;\n    var capability = newPromiseCapability(C);\n    var resolve = capability.resolve;\n    var reject = capability.reject;\n    var result = perform(function () {\n      var $promiseResolve = aFunction(C.resolve);\n      var values = [];\n      var counter = 0;\n      var remaining = 1;\n      iterate(iterable, function (promise) {\n        var index = counter++;\n        var alreadyCalled = false;\n        values.push(undefined);\n        remaining++;\n        $promiseResolve.call(C, promise).then(function (value) {\n          if (alreadyCalled) return;\n          alreadyCalled = true;\n          values[index] = value;\n          --remaining || resolve(values);\n        }, reject);\n      });\n      --remaining || resolve(values);\n    });\n    if (result.error) reject(result.value);\n    return capability.promise;\n  },\n  // `Promise.race` method\n  // https://tc39.github.io/ecma262/#sec-promise.race\n  race: function race(iterable) {\n    var C = this;\n    var capability = newPromiseCapability(C);\n    var reject = capability.reject;\n    var result = perform(function () {\n      var $promiseResolve = aFunction(C.resolve);\n      iterate(iterable, function (promise) {\n        $promiseResolve.call(C, promise).then(capability.resolve, reject);\n      });\n    });\n    if (result.error) reject(result.value);\n    return capability.promise;\n  }\n});\n","var has = require('../internals/has');\nvar ownKeys = require('../internals/own-keys');\nvar getOwnPropertyDescriptorModule = require('../internals/object-get-own-property-descriptor');\nvar definePropertyModule = require('../internals/object-define-property');\n\nmodule.exports = function (target, source) {\n  var keys = ownKeys(source);\n  var defineProperty = definePropertyModule.f;\n  var getOwnPropertyDescriptor = getOwnPropertyDescriptorModule.f;\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i];\n    if (!has(target, key)) defineProperty(target, key, getOwnPropertyDescriptor(source, key));\n  }\n};\n","var classof = require('../internals/classof-raw');\n\n// `IsArray` abstract operation\n// https://tc39.github.io/ecma262/#sec-isarray\nmodule.exports = Array.isArray || function isArray(arg) {\n  return classof(arg) == 'Array';\n};\n","var wellKnownSymbol = require('../internals/well-known-symbol');\nvar Iterators = require('../internals/iterators');\n\nvar ITERATOR = wellKnownSymbol('iterator');\nvar ArrayPrototype = Array.prototype;\n\n// check on default Array iterator\nmodule.exports = function (it) {\n  return it !== undefined && (Iterators.Array === it || ArrayPrototype[ITERATOR] === it);\n};\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Util_1 = require(\"./Util\");\nvar Factory_1 = require(\"./Factory\");\nvar Node_1 = require(\"./Node\");\nvar DragAndDrop_1 = require(\"./DragAndDrop\");\nvar Validators_1 = require(\"./Validators\");\nvar Global_1 = require(\"./Global\");\nvar Container = (function (_super) {\n    __extends(Container, _super);\n    function Container() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.children = new Util_1.Collection();\n        return _this;\n    }\n    Container.prototype.getChildren = function (filterFunc) {\n        if (!filterFunc) {\n            return this.children;\n        }\n        var results = new Util_1.Collection();\n        this.children.each(function (child) {\n            if (filterFunc(child)) {\n                results.push(child);\n            }\n        });\n        return results;\n    };\n    Container.prototype.hasChildren = function () {\n        return this.getChildren().length > 0;\n    };\n    Container.prototype.removeChildren = function () {\n        var child;\n        for (var i = 0; i < this.children.length; i++) {\n            child = this.children[i];\n            child.parent = null;\n            child.index = 0;\n            child.remove();\n        }\n        this.children = new Util_1.Collection();\n        return this;\n    };\n    Container.prototype.destroyChildren = function () {\n        var child;\n        for (var i = 0; i < this.children.length; i++) {\n            child = this.children[i];\n            child.parent = null;\n            child.index = 0;\n            child.destroy();\n        }\n        this.children = new Util_1.Collection();\n        return this;\n    };\n    Container.prototype.add = function () {\n        var children = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            children[_i] = arguments[_i];\n        }\n        if (arguments.length > 1) {\n            for (var i = 0; i < arguments.length; i++) {\n                this.add(arguments[i]);\n            }\n            return this;\n        }\n        var child = children[0];\n        if (child.getParent()) {\n            child.moveTo(this);\n            return this;\n        }\n        var _children = this.children;\n        this._validateAdd(child);\n        child._clearCaches();\n        child.index = _children.length;\n        child.parent = this;\n        _children.push(child);\n        this._fire('add', {\n            child: child\n        });\n        return this;\n    };\n    Container.prototype.destroy = function () {\n        if (this.hasChildren()) {\n            this.destroyChildren();\n        }\n        _super.prototype.destroy.call(this);\n        return this;\n    };\n    Container.prototype.find = function (selector) {\n        return this._generalFind(selector, false);\n    };\n    Container.prototype.get = function (selector) {\n        Util_1.Util.warn('collection.get() method is deprecated. Please use collection.find() instead.');\n        return this.find(selector);\n    };\n    Container.prototype.findOne = function (selector) {\n        var result = this._generalFind(selector, true);\n        return result.length > 0 ? result[0] : undefined;\n    };\n    Container.prototype._generalFind = function (selector, findOne) {\n        var retArr = [];\n        this._descendants(function (node) {\n            var valid = node._isMatch(selector);\n            if (valid) {\n                retArr.push(node);\n            }\n            if (valid && findOne) {\n                return true;\n            }\n            return false;\n        });\n        return Util_1.Collection.toCollection(retArr);\n    };\n    Container.prototype._descendants = function (fn) {\n        var shouldStop = false;\n        for (var i = 0; i < this.children.length; i++) {\n            var child = this.children[i];\n            shouldStop = fn(child);\n            if (shouldStop) {\n                return true;\n            }\n            if (!child.hasChildren()) {\n                continue;\n            }\n            shouldStop = child._descendants(fn);\n            if (shouldStop) {\n                return true;\n            }\n        }\n        return false;\n    };\n    Container.prototype.toObject = function () {\n        var obj = Node_1.Node.prototype.toObject.call(this);\n        obj.children = [];\n        var children = this.getChildren();\n        var len = children.length;\n        for (var n = 0; n < len; n++) {\n            var child = children[n];\n            obj.children.push(child.toObject());\n        }\n        return obj;\n    };\n    Container.prototype.isAncestorOf = function (node) {\n        var parent = node.getParent();\n        while (parent) {\n            if (parent._id === this._id) {\n                return true;\n            }\n            parent = parent.getParent();\n        }\n        return false;\n    };\n    Container.prototype.clone = function (obj) {\n        var node = Node_1.Node.prototype.clone.call(this, obj);\n        this.getChildren().each(function (no) {\n            node.add(no.clone());\n        });\n        return node;\n    };\n    Container.prototype.getAllIntersections = function (pos) {\n        var arr = [];\n        this.find('Shape').each(function (shape) {\n            if (shape.isVisible() && shape.intersects(pos)) {\n                arr.push(shape);\n            }\n        });\n        return arr;\n    };\n    Container.prototype._setChildrenIndices = function () {\n        this.children.each(function (child, n) {\n            child.index = n;\n        });\n    };\n    Container.prototype.drawScene = function (can, top, caching) {\n        var layer = this.getLayer(), canvas = can || (layer && layer.getCanvas()), context = canvas && canvas.getContext(), cachedCanvas = this._getCanvasCache(), cachedSceneCanvas = cachedCanvas && cachedCanvas.scene;\n        if (this.isVisible() || caching) {\n            if (!caching && cachedSceneCanvas) {\n                context.save();\n                layer._applyTransform(this, context, top);\n                this._drawCachedSceneCanvas(context);\n                context.restore();\n            }\n            else {\n                this._drawChildren(canvas, 'drawScene', top, false, caching, caching);\n            }\n        }\n        return this;\n    };\n    Container.prototype.drawHit = function (can, top, caching) {\n        var layer = this.getLayer(), canvas = can || (layer && layer.hitCanvas), context = canvas && canvas.getContext(), cachedCanvas = this._getCanvasCache(), cachedHitCanvas = cachedCanvas && cachedCanvas.hit;\n        if (this.shouldDrawHit(canvas) || caching) {\n            if (!caching && cachedHitCanvas) {\n                context.save();\n                layer._applyTransform(this, context, top);\n                this._drawCachedHitCanvas(context);\n                context.restore();\n            }\n            else {\n                this._drawChildren(canvas, 'drawHit', top, false, caching, caching);\n            }\n        }\n        return this;\n    };\n    Container.prototype._drawChildren = function (canvas, drawMethod, top, caching, skipBuffer, skipComposition) {\n        var layer = this.getLayer(), context = canvas && canvas.getContext(), clipWidth = this.clipWidth(), clipHeight = this.clipHeight(), clipFunc = this.clipFunc(), hasClip = (clipWidth && clipHeight) || clipFunc, clipX, clipY;\n        if (hasClip && layer) {\n            context.save();\n            var transform = this.getAbsoluteTransform(top);\n            var m = transform.getMatrix();\n            context.transform(m[0], m[1], m[2], m[3], m[4], m[5]);\n            context.beginPath();\n            if (clipFunc) {\n                clipFunc.call(this, context, this);\n            }\n            else {\n                clipX = this.clipX();\n                clipY = this.clipY();\n                context.rect(clipX, clipY, clipWidth, clipHeight);\n            }\n            context.clip();\n            m = transform\n                .copy()\n                .invert()\n                .getMatrix();\n            context.transform(m[0], m[1], m[2], m[3], m[4], m[5]);\n        }\n        var hasComposition = this.globalCompositeOperation() !== 'source-over' &&\n            !skipComposition &&\n            drawMethod === 'drawScene';\n        if (hasComposition && layer) {\n            context.save();\n            context._applyGlobalCompositeOperation(this);\n        }\n        this.children.each(function (child) {\n            child[drawMethod](canvas, top, caching, skipBuffer);\n        });\n        if (hasComposition && layer) {\n            context.restore();\n        }\n        if (hasClip && layer) {\n            context.restore();\n        }\n    };\n    Container.prototype.shouldDrawHit = function (canvas) {\n        if (canvas && canvas.isCache) {\n            return true;\n        }\n        var layer = this.getLayer();\n        var layerUnderDrag = false;\n        DragAndDrop_1.DD._dragElements.forEach(function (elem) {\n            if (elem.dragStatus === 'dragging' && elem.node.getLayer() === layer) {\n                layerUnderDrag = true;\n            }\n        });\n        var dragSkip = !Global_1.Konva.hitOnDragEnabled && layerUnderDrag;\n        return layer && layer.hitGraphEnabled() && this.isVisible() && !dragSkip;\n    };\n    Container.prototype.getClientRect = function (config) {\n        config = config || {};\n        var skipTransform = config.skipTransform;\n        var relativeTo = config.relativeTo;\n        var minX, minY, maxX, maxY;\n        var selfRect = {\n            x: Infinity,\n            y: Infinity,\n            width: 0,\n            height: 0\n        };\n        var that = this;\n        this.children.each(function (child) {\n            if (!child.visible()) {\n                return;\n            }\n            var rect = child.getClientRect({\n                relativeTo: that,\n                skipShadow: config.skipShadow,\n                skipStroke: config.skipStroke\n            });\n            if (rect.width === 0 && rect.height === 0) {\n                return;\n            }\n            if (minX === undefined) {\n                minX = rect.x;\n                minY = rect.y;\n                maxX = rect.x + rect.width;\n                maxY = rect.y + rect.height;\n            }\n            else {\n                minX = Math.min(minX, rect.x);\n                minY = Math.min(minY, rect.y);\n                maxX = Math.max(maxX, rect.x + rect.width);\n                maxY = Math.max(maxY, rect.y + rect.height);\n            }\n        });\n        var shapes = this.find('Shape');\n        var hasVisible = false;\n        for (var i = 0; i < shapes.length; i++) {\n            var shape = shapes[i];\n            if (shape._isVisible(this)) {\n                hasVisible = true;\n                break;\n            }\n        }\n        if (hasVisible && minX !== undefined) {\n            selfRect = {\n                x: minX,\n                y: minY,\n                width: maxX - minX,\n                height: maxY - minY\n            };\n        }\n        else {\n            selfRect = {\n                x: 0,\n                y: 0,\n                width: 0,\n                height: 0\n            };\n        }\n        if (!skipTransform) {\n            return this._transformedRect(selfRect, relativeTo);\n        }\n        return selfRect;\n    };\n    return Container;\n}(Node_1.Node));\nexports.Container = Container;\nFactory_1.Factory.addComponentsGetterSetter(Container, 'clip', [\n    'x',\n    'y',\n    'width',\n    'height'\n]);\nFactory_1.Factory.addGetterSetter(Container, 'clipX', undefined, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Container, 'clipY', undefined, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Container, 'clipWidth', undefined, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Container, 'clipHeight', undefined, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Container, 'clipFunc');\nUtil_1.Collection.mapMethods(Container);\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Util_1 = require(\"./Util\");\nvar Factory_1 = require(\"./Factory\");\nvar Container_1 = require(\"./Container\");\nvar Global_1 = require(\"./Global\");\nvar Canvas_1 = require(\"./Canvas\");\nvar DragAndDrop_1 = require(\"./DragAndDrop\");\nvar Global_2 = require(\"./Global\");\nvar PointerEvents = require(\"./PointerEvents\");\nvar STAGE = 'Stage', STRING = 'string', PX = 'px', MOUSEOUT = 'mouseout', MOUSELEAVE = 'mouseleave', MOUSEOVER = 'mouseover', MOUSEENTER = 'mouseenter', MOUSEMOVE = 'mousemove', MOUSEDOWN = 'mousedown', MOUSEUP = 'mouseup', POINTERMOVE = 'pointermove', POINTERDOWN = 'pointerdown', POINTERUP = 'pointerup', POINTERCANCEL = 'pointercancel', LOSTPOINTERCAPTURE = 'lostpointercapture', CONTEXTMENU = 'contextmenu', CLICK = 'click', DBL_CLICK = 'dblclick', TOUCHSTART = 'touchstart', TOUCHEND = 'touchend', TAP = 'tap', DBL_TAP = 'dbltap', TOUCHMOVE = 'touchmove', WHEEL = 'wheel', CONTENT_MOUSEOUT = 'contentMouseout', CONTENT_MOUSEOVER = 'contentMouseover', CONTENT_MOUSEMOVE = 'contentMousemove', CONTENT_MOUSEDOWN = 'contentMousedown', CONTENT_MOUSEUP = 'contentMouseup', CONTENT_CONTEXTMENU = 'contentContextmenu', CONTENT_CLICK = 'contentClick', CONTENT_DBL_CLICK = 'contentDblclick', CONTENT_TOUCHSTART = 'contentTouchstart', CONTENT_TOUCHEND = 'contentTouchend', CONTENT_DBL_TAP = 'contentDbltap', CONTENT_TAP = 'contentTap', CONTENT_TOUCHMOVE = 'contentTouchmove', CONTENT_POINTERMOVE = 'contentPointermove', CONTENT_POINTERDOWN = 'contentPointerdown', CONTENT_POINTERUP = 'contentPointerup', CONTENT_WHEEL = 'contentWheel', RELATIVE = 'relative', KONVA_CONTENT = 'konvajs-content', SPACE = ' ', UNDERSCORE = '_', CONTAINER = 'container', MAX_LAYERS_NUMBER = 5, EMPTY_STRING = '', EVENTS = [\n    MOUSEENTER,\n    MOUSEDOWN,\n    MOUSEMOVE,\n    MOUSEUP,\n    MOUSEOUT,\n    TOUCHSTART,\n    TOUCHMOVE,\n    TOUCHEND,\n    MOUSEOVER,\n    WHEEL,\n    CONTEXTMENU,\n    POINTERDOWN,\n    POINTERMOVE,\n    POINTERUP,\n    POINTERCANCEL,\n    LOSTPOINTERCAPTURE\n], eventsLength = EVENTS.length;\nfunction addEvent(ctx, eventName) {\n    ctx.content.addEventListener(eventName, function (evt) {\n        ctx[UNDERSCORE + eventName](evt);\n    }, false);\n}\nvar NO_POINTERS_MESSAGE = \"Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);\";\nexports.stages = [];\nfunction checkNoClip(attrs) {\n    if (attrs === void 0) { attrs = {}; }\n    if (attrs.clipFunc || attrs.clipWidth || attrs.clipHeight) {\n        Util_1.Util.warn('Stage does not support clipping. Please use clip for Layers or Groups.');\n    }\n    return attrs;\n}\nvar Stage = (function (_super) {\n    __extends(Stage, _super);\n    function Stage(config) {\n        var _this = _super.call(this, checkNoClip(config)) || this;\n        _this._pointerPositions = [];\n        _this._changedPointerPositions = [];\n        _this._buildDOM();\n        _this._bindContentEvents();\n        exports.stages.push(_this);\n        _this.on('widthChange.konva heightChange.konva', _this._resizeDOM);\n        _this.on('visibleChange.konva', _this._checkVisibility);\n        _this.on('clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva', function () {\n            checkNoClip(_this.attrs);\n        });\n        _this._checkVisibility();\n        return _this;\n    }\n    Stage.prototype._validateAdd = function (child) {\n        var isLayer = child.getType() === 'Layer';\n        var isFastLayer = child.getType() === 'FastLayer';\n        var valid = isLayer || isFastLayer;\n        if (!valid) {\n            Util_1.Util.throw('You may only add layers to the stage.');\n        }\n    };\n    Stage.prototype._checkVisibility = function () {\n        if (!this.content) {\n            return;\n        }\n        var style = this.visible() ? '' : 'none';\n        this.content.style.display = style;\n    };\n    Stage.prototype.setContainer = function (container) {\n        if (typeof container === STRING) {\n            if (container.charAt(0) === '.') {\n                var className = container.slice(1);\n                container = document.getElementsByClassName(className)[0];\n            }\n            else {\n                var id;\n                if (container.charAt(0) !== '#') {\n                    id = container;\n                }\n                else {\n                    id = container.slice(1);\n                }\n                container = document.getElementById(id);\n            }\n            if (!container) {\n                throw 'Can not find container in document with id ' + id;\n            }\n        }\n        this._setAttr(CONTAINER, container);\n        if (this.content) {\n            if (this.content.parentElement) {\n                this.content.parentElement.removeChild(this.content);\n            }\n            container.appendChild(this.content);\n        }\n        return this;\n    };\n    Stage.prototype.shouldDrawHit = function () {\n        return true;\n    };\n    Stage.prototype.clear = function () {\n        var layers = this.children, len = layers.length, n;\n        for (n = 0; n < len; n++) {\n            layers[n].clear();\n        }\n        return this;\n    };\n    Stage.prototype.clone = function (obj) {\n        if (!obj) {\n            obj = {};\n        }\n        obj.container = document.createElement('div');\n        return Container_1.Container.prototype.clone.call(this, obj);\n    };\n    Stage.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        var content = this.content;\n        if (content && Util_1.Util._isInDocument(content)) {\n            this.container().removeChild(content);\n        }\n        var index = exports.stages.indexOf(this);\n        if (index > -1) {\n            exports.stages.splice(index, 1);\n        }\n        return this;\n    };\n    Stage.prototype.getPointerPosition = function () {\n        var pos = this._pointerPositions[0] || this._changedPointerPositions[0];\n        if (!pos) {\n            Util_1.Util.warn(NO_POINTERS_MESSAGE);\n            return null;\n        }\n        return {\n            x: pos.x,\n            y: pos.y\n        };\n    };\n    Stage.prototype._getPointerById = function (id) {\n        return this._pointerPositions.find(function (p) { return p.id === id; });\n    };\n    Stage.prototype.getPointersPositions = function () {\n        return this._pointerPositions;\n    };\n    Stage.prototype.getStage = function () {\n        return this;\n    };\n    Stage.prototype.getContent = function () {\n        return this.content;\n    };\n    Stage.prototype._toKonvaCanvas = function (config) {\n        config = config || {};\n        var x = config.x || 0, y = config.y || 0, canvas = new Canvas_1.SceneCanvas({\n            width: config.width || this.width(),\n            height: config.height || this.height(),\n            pixelRatio: config.pixelRatio || 1\n        }), _context = canvas.getContext()._context, layers = this.children;\n        if (x || y) {\n            _context.translate(-1 * x, -1 * y);\n        }\n        layers.each(function (layer) {\n            if (!layer.isVisible()) {\n                return;\n            }\n            var layerCanvas = layer._toKonvaCanvas(config);\n            _context.drawImage(layerCanvas._canvas, x, y, layerCanvas.getWidth() / layerCanvas.getPixelRatio(), layerCanvas.getHeight() / layerCanvas.getPixelRatio());\n        });\n        return canvas;\n    };\n    Stage.prototype.getIntersection = function (pos, selector) {\n        if (!pos) {\n            return null;\n        }\n        var layers = this.children, len = layers.length, end = len - 1, n, shape;\n        for (n = end; n >= 0; n--) {\n            shape = layers[n].getIntersection(pos, selector);\n            if (shape) {\n                return shape;\n            }\n        }\n        return null;\n    };\n    Stage.prototype._resizeDOM = function () {\n        var width = this.width();\n        var height = this.height();\n        if (this.content) {\n            this.content.style.width = width + PX;\n            this.content.style.height = height + PX;\n        }\n        this.bufferCanvas.setSize(width, height);\n        this.bufferHitCanvas.setSize(width, height);\n        this.children.each(function (layer) {\n            layer.setSize({ width: width, height: height });\n            layer.draw();\n        });\n    };\n    Stage.prototype.add = function (layer) {\n        if (arguments.length > 1) {\n            for (var i = 0; i < arguments.length; i++) {\n                this.add(arguments[i]);\n            }\n            return this;\n        }\n        _super.prototype.add.call(this, layer);\n        var length = this.children.length;\n        if (length > MAX_LAYERS_NUMBER) {\n            Util_1.Util.warn('The stage has ' +\n                length +\n                ' layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group.');\n        }\n        layer.setSize({ width: this.width(), height: this.height() });\n        layer.draw();\n        if (Global_1.Konva.isBrowser) {\n            this.content.appendChild(layer.canvas._canvas);\n        }\n        return this;\n    };\n    Stage.prototype.getParent = function () {\n        return null;\n    };\n    Stage.prototype.getLayer = function () {\n        return null;\n    };\n    Stage.prototype.hasPointerCapture = function (pointerId) {\n        return PointerEvents.hasPointerCapture(pointerId, this);\n    };\n    Stage.prototype.setPointerCapture = function (pointerId) {\n        PointerEvents.setPointerCapture(pointerId, this);\n    };\n    Stage.prototype.releaseCapture = function (pointerId) {\n        PointerEvents.releaseCapture(pointerId, this);\n    };\n    Stage.prototype.getLayers = function () {\n        return this.getChildren();\n    };\n    Stage.prototype._bindContentEvents = function () {\n        if (!Global_1.Konva.isBrowser) {\n            return;\n        }\n        for (var n = 0; n < eventsLength; n++) {\n            addEvent(this, EVENTS[n]);\n        }\n    };\n    Stage.prototype._mouseenter = function (evt) {\n        this.setPointersPositions(evt);\n        this._fire(MOUSEENTER, { evt: evt, target: this, currentTarget: this });\n    };\n    Stage.prototype._mouseover = function (evt) {\n        this.setPointersPositions(evt);\n        this._fire(CONTENT_MOUSEOVER, { evt: evt });\n        this._fire(MOUSEOVER, { evt: evt, target: this, currentTarget: this });\n    };\n    Stage.prototype._mouseout = function (evt) {\n        var _a;\n        this.setPointersPositions(evt);\n        var targetShape = ((_a = this.targetShape) === null || _a === void 0 ? void 0 : _a.getStage()) ? this.targetShape : null;\n        var eventsEnabled = !DragAndDrop_1.DD.isDragging || Global_1.Konva.hitOnDragEnabled;\n        if (targetShape && eventsEnabled) {\n            targetShape._fireAndBubble(MOUSEOUT, { evt: evt });\n            targetShape._fireAndBubble(MOUSELEAVE, { evt: evt });\n            this._fire(MOUSELEAVE, { evt: evt, target: this, currentTarget: this });\n            this.targetShape = null;\n        }\n        else if (eventsEnabled) {\n            this._fire(MOUSELEAVE, {\n                evt: evt,\n                target: this,\n                currentTarget: this\n            });\n            this._fire(MOUSEOUT, {\n                evt: evt,\n                target: this,\n                currentTarget: this\n            });\n        }\n        this.pointerPos = undefined;\n        this._pointerPositions = [];\n        this._fire(CONTENT_MOUSEOUT, { evt: evt });\n    };\n    Stage.prototype._mousemove = function (evt) {\n        var _a;\n        if (Global_1.Konva.UA.ieMobile) {\n            return this._touchmove(evt);\n        }\n        this.setPointersPositions(evt);\n        var pointerId = Util_1.Util._getFirstPointerId(evt);\n        var shape;\n        var targetShape = ((_a = this.targetShape) === null || _a === void 0 ? void 0 : _a.getStage()) ? this.targetShape : null;\n        var eventsEnabled = !DragAndDrop_1.DD.isDragging || Global_1.Konva.hitOnDragEnabled;\n        if (eventsEnabled) {\n            shape = this.getIntersection(this.getPointerPosition());\n            if (shape && shape.isListening()) {\n                var differentTarget = targetShape !== shape;\n                if (eventsEnabled && differentTarget) {\n                    if (targetShape) {\n                        targetShape._fireAndBubble(MOUSEOUT, { evt: evt, pointerId: pointerId }, shape);\n                        targetShape._fireAndBubble(MOUSELEAVE, { evt: evt, pointerId: pointerId }, shape);\n                    }\n                    shape._fireAndBubble(MOUSEOVER, { evt: evt, pointerId: pointerId }, targetShape);\n                    shape._fireAndBubble(MOUSEENTER, { evt: evt, pointerId: pointerId }, targetShape);\n                    shape._fireAndBubble(MOUSEMOVE, { evt: evt, pointerId: pointerId });\n                    this.targetShape = shape;\n                }\n                else {\n                    shape._fireAndBubble(MOUSEMOVE, { evt: evt, pointerId: pointerId });\n                }\n            }\n            else {\n                if (targetShape && eventsEnabled) {\n                    targetShape._fireAndBubble(MOUSEOUT, { evt: evt, pointerId: pointerId });\n                    targetShape._fireAndBubble(MOUSELEAVE, { evt: evt, pointerId: pointerId });\n                    this._fire(MOUSEOVER, {\n                        evt: evt,\n                        target: this,\n                        currentTarget: this,\n                        pointerId: pointerId\n                    });\n                    this.targetShape = null;\n                }\n                this._fire(MOUSEMOVE, {\n                    evt: evt,\n                    target: this,\n                    currentTarget: this,\n                    pointerId: pointerId\n                });\n            }\n            this._fire(CONTENT_MOUSEMOVE, { evt: evt });\n        }\n        if (evt.cancelable) {\n            evt.preventDefault();\n        }\n    };\n    Stage.prototype._mousedown = function (evt) {\n        if (Global_1.Konva.UA.ieMobile) {\n            return this._touchstart(evt);\n        }\n        this.setPointersPositions(evt);\n        var pointerId = Util_1.Util._getFirstPointerId(evt);\n        var shape = this.getIntersection(this.getPointerPosition());\n        DragAndDrop_1.DD.justDragged = false;\n        Global_1.Konva.listenClickTap = true;\n        if (shape && shape.isListening()) {\n            this.clickStartShape = shape;\n            shape._fireAndBubble(MOUSEDOWN, { evt: evt, pointerId: pointerId });\n        }\n        else {\n            this._fire(MOUSEDOWN, {\n                evt: evt,\n                target: this,\n                currentTarget: this,\n                pointerId: pointerId\n            });\n        }\n        this._fire(CONTENT_MOUSEDOWN, { evt: evt });\n    };\n    Stage.prototype._mouseup = function (evt) {\n        if (Global_1.Konva.UA.ieMobile) {\n            return this._touchend(evt);\n        }\n        this.setPointersPositions(evt);\n        var pointerId = Util_1.Util._getFirstPointerId(evt);\n        var shape = this.getIntersection(this.getPointerPosition()), clickStartShape = this.clickStartShape, clickEndShape = this.clickEndShape, fireDblClick = false;\n        if (Global_1.Konva.inDblClickWindow) {\n            fireDblClick = true;\n            clearTimeout(this.dblTimeout);\n        }\n        else if (!DragAndDrop_1.DD.justDragged) {\n            Global_1.Konva.inDblClickWindow = true;\n            clearTimeout(this.dblTimeout);\n        }\n        this.dblTimeout = setTimeout(function () {\n            Global_1.Konva.inDblClickWindow = false;\n        }, Global_1.Konva.dblClickWindow);\n        if (shape && shape.isListening()) {\n            this.clickEndShape = shape;\n            shape._fireAndBubble(MOUSEUP, { evt: evt, pointerId: pointerId });\n            if (Global_1.Konva.listenClickTap &&\n                clickStartShape &&\n                clickStartShape._id === shape._id) {\n                shape._fireAndBubble(CLICK, { evt: evt, pointerId: pointerId });\n                if (fireDblClick && clickEndShape && clickEndShape === shape) {\n                    shape._fireAndBubble(DBL_CLICK, { evt: evt, pointerId: pointerId });\n                }\n            }\n        }\n        else {\n            this._fire(MOUSEUP, {\n                evt: evt,\n                target: this,\n                currentTarget: this,\n                pointerId: pointerId\n            });\n            if (Global_1.Konva.listenClickTap) {\n                this._fire(CLICK, {\n                    evt: evt,\n                    target: this,\n                    currentTarget: this,\n                    pointerId: pointerId\n                });\n            }\n            if (fireDblClick) {\n                this._fire(DBL_CLICK, {\n                    evt: evt,\n                    target: this,\n                    currentTarget: this,\n                    pointerId: pointerId\n                });\n            }\n        }\n        this._fire(CONTENT_MOUSEUP, { evt: evt });\n        if (Global_1.Konva.listenClickTap) {\n            this._fire(CONTENT_CLICK, { evt: evt });\n            if (fireDblClick) {\n                this._fire(CONTENT_DBL_CLICK, { evt: evt });\n            }\n        }\n        Global_1.Konva.listenClickTap = false;\n        if (evt.cancelable) {\n            evt.preventDefault();\n        }\n    };\n    Stage.prototype._contextmenu = function (evt) {\n        this.setPointersPositions(evt);\n        var shape = this.getIntersection(this.getPointerPosition());\n        if (shape && shape.isListening()) {\n            shape._fireAndBubble(CONTEXTMENU, { evt: evt });\n        }\n        else {\n            this._fire(CONTEXTMENU, {\n                evt: evt,\n                target: this,\n                currentTarget: this\n            });\n        }\n        this._fire(CONTENT_CONTEXTMENU, { evt: evt });\n    };\n    Stage.prototype._touchstart = function (evt) {\n        var _this = this;\n        this.setPointersPositions(evt);\n        var triggeredOnShape = false;\n        this._changedPointerPositions.forEach(function (pos) {\n            var shape = _this.getIntersection(pos);\n            Global_1.Konva.listenClickTap = true;\n            DragAndDrop_1.DD.justDragged = false;\n            var hasShape = shape && shape.isListening();\n            if (!hasShape) {\n                return;\n            }\n            if (Global_1.Konva.captureTouchEventsEnabled) {\n                shape.setPointerCapture(pos.id);\n            }\n            _this.tapStartShape = shape;\n            shape._fireAndBubble(TOUCHSTART, { evt: evt, pointerId: pos.id }, _this);\n            triggeredOnShape = true;\n            if (shape.isListening() && shape.preventDefault() && evt.cancelable) {\n                evt.preventDefault();\n            }\n        });\n        if (!triggeredOnShape) {\n            this._fire(TOUCHSTART, {\n                evt: evt,\n                target: this,\n                currentTarget: this,\n                pointerId: this._changedPointerPositions[0].id\n            });\n        }\n        this._fire(CONTENT_TOUCHSTART, { evt: evt });\n    };\n    Stage.prototype._touchmove = function (evt) {\n        var _this = this;\n        this.setPointersPositions(evt);\n        var eventsEnabled = !DragAndDrop_1.DD.isDragging || Global_1.Konva.hitOnDragEnabled;\n        if (eventsEnabled) {\n            var triggeredOnShape = false;\n            var processedShapesIds = {};\n            this._changedPointerPositions.forEach(function (pos) {\n                var shape = PointerEvents.getCapturedShape(pos.id) || _this.getIntersection(pos);\n                var hasShape = shape && shape.isListening();\n                if (!hasShape) {\n                    return;\n                }\n                if (processedShapesIds[shape._id]) {\n                    return;\n                }\n                processedShapesIds[shape._id] = true;\n                shape._fireAndBubble(TOUCHMOVE, { evt: evt, pointerId: pos.id });\n                triggeredOnShape = true;\n                if (shape.isListening() && shape.preventDefault() && evt.cancelable) {\n                    evt.preventDefault();\n                }\n            });\n            if (!triggeredOnShape) {\n                this._fire(TOUCHMOVE, {\n                    evt: evt,\n                    target: this,\n                    currentTarget: this,\n                    pointerId: this._changedPointerPositions[0].id\n                });\n            }\n            this._fire(CONTENT_TOUCHMOVE, { evt: evt });\n        }\n        if (DragAndDrop_1.DD.isDragging && DragAndDrop_1.DD.node.preventDefault() && evt.cancelable) {\n            evt.preventDefault();\n        }\n    };\n    Stage.prototype._touchend = function (evt) {\n        var _this = this;\n        this.setPointersPositions(evt);\n        var clickEndShape = this.clickEndShape, fireDblClick = false;\n        if (Global_1.Konva.inDblClickWindow) {\n            fireDblClick = true;\n            clearTimeout(this.dblTimeout);\n        }\n        else if (!DragAndDrop_1.DD.justDragged) {\n            Global_1.Konva.inDblClickWindow = true;\n            clearTimeout(this.dblTimeout);\n        }\n        this.dblTimeout = setTimeout(function () {\n            Global_1.Konva.inDblClickWindow = false;\n        }, Global_1.Konva.dblClickWindow);\n        var triggeredOnShape = false;\n        var processedShapesIds = {};\n        var tapTriggered = false;\n        var dblTapTriggered = false;\n        this._changedPointerPositions.forEach(function (pos) {\n            var shape = PointerEvents.getCapturedShape(pos.id) ||\n                _this.getIntersection(pos);\n            if (shape) {\n                shape.releaseCapture(pos.id);\n            }\n            var hasShape = shape && shape.isListening();\n            if (!hasShape) {\n                return;\n            }\n            if (processedShapesIds[shape._id]) {\n                return;\n            }\n            processedShapesIds[shape._id] = true;\n            _this.clickEndShape = shape;\n            shape._fireAndBubble(TOUCHEND, { evt: evt, pointerId: pos.id });\n            triggeredOnShape = true;\n            if (Global_1.Konva.listenClickTap && shape === _this.tapStartShape) {\n                tapTriggered = true;\n                shape._fireAndBubble(TAP, { evt: evt, pointerId: pos.id });\n                if (fireDblClick && clickEndShape && clickEndShape === shape) {\n                    dblTapTriggered = true;\n                    shape._fireAndBubble(DBL_TAP, { evt: evt, pointerId: pos.id });\n                }\n            }\n            if (shape.isListening() && shape.preventDefault() && evt.cancelable) {\n                evt.preventDefault();\n            }\n        });\n        if (!triggeredOnShape) {\n            this._fire(TOUCHEND, {\n                evt: evt,\n                target: this,\n                currentTarget: this,\n                pointerId: this._changedPointerPositions[0].id\n            });\n        }\n        if (Global_1.Konva.listenClickTap && !tapTriggered) {\n            this._fire(TAP, {\n                evt: evt,\n                target: this,\n                currentTarget: this,\n                pointerId: this._changedPointerPositions[0].id\n            });\n        }\n        if (fireDblClick && !dblTapTriggered) {\n            this._fire(DBL_TAP, {\n                evt: evt,\n                target: this,\n                currentTarget: this,\n                pointerId: this._changedPointerPositions[0].id\n            });\n        }\n        this._fire(CONTENT_TOUCHEND, { evt: evt });\n        if (Global_1.Konva.listenClickTap) {\n            this._fire(CONTENT_TAP, { evt: evt });\n            if (fireDblClick) {\n                this._fire(CONTENT_DBL_TAP, { evt: evt });\n            }\n        }\n        Global_1.Konva.listenClickTap = false;\n    };\n    Stage.prototype._wheel = function (evt) {\n        this.setPointersPositions(evt);\n        var shape = this.getIntersection(this.getPointerPosition());\n        if (shape && shape.isListening()) {\n            shape._fireAndBubble(WHEEL, { evt: evt });\n        }\n        else {\n            this._fire(WHEEL, {\n                evt: evt,\n                target: this,\n                currentTarget: this\n            });\n        }\n        this._fire(CONTENT_WHEEL, { evt: evt });\n    };\n    Stage.prototype._pointerdown = function (evt) {\n        if (!Global_1.Konva._pointerEventsEnabled) {\n            return;\n        }\n        this.setPointersPositions(evt);\n        var shape = PointerEvents.getCapturedShape(evt.pointerId) ||\n            this.getIntersection(this.getPointerPosition());\n        if (shape) {\n            shape._fireAndBubble(POINTERDOWN, PointerEvents.createEvent(evt));\n        }\n    };\n    Stage.prototype._pointermove = function (evt) {\n        if (!Global_1.Konva._pointerEventsEnabled) {\n            return;\n        }\n        this.setPointersPositions(evt);\n        var shape = PointerEvents.getCapturedShape(evt.pointerId) ||\n            this.getIntersection(this.getPointerPosition());\n        if (shape) {\n            shape._fireAndBubble(POINTERMOVE, PointerEvents.createEvent(evt));\n        }\n    };\n    Stage.prototype._pointerup = function (evt) {\n        if (!Global_1.Konva._pointerEventsEnabled) {\n            return;\n        }\n        this.setPointersPositions(evt);\n        var shape = PointerEvents.getCapturedShape(evt.pointerId) ||\n            this.getIntersection(this.getPointerPosition());\n        if (shape) {\n            shape._fireAndBubble(POINTERUP, PointerEvents.createEvent(evt));\n        }\n        PointerEvents.releaseCapture(evt.pointerId);\n    };\n    Stage.prototype._pointercancel = function (evt) {\n        if (!Global_1.Konva._pointerEventsEnabled) {\n            return;\n        }\n        this.setPointersPositions(evt);\n        var shape = PointerEvents.getCapturedShape(evt.pointerId) ||\n            this.getIntersection(this.getPointerPosition());\n        if (shape) {\n            shape._fireAndBubble(POINTERUP, PointerEvents.createEvent(evt));\n        }\n        PointerEvents.releaseCapture(evt.pointerId);\n    };\n    Stage.prototype._lostpointercapture = function (evt) {\n        PointerEvents.releaseCapture(evt.pointerId);\n    };\n    Stage.prototype.setPointersPositions = function (evt) {\n        var _this = this;\n        var contentPosition = this._getContentPosition(), x = null, y = null;\n        evt = evt ? evt : window.event;\n        if (evt.touches !== undefined) {\n            this._pointerPositions = [];\n            this._changedPointerPositions = [];\n            Util_1.Collection.prototype.each.call(evt.touches, function (touch) {\n                _this._pointerPositions.push({\n                    id: touch.identifier,\n                    x: (touch.clientX - contentPosition.left) / contentPosition.scaleX,\n                    y: (touch.clientY - contentPosition.top) / contentPosition.scaleY\n                });\n            });\n            Util_1.Collection.prototype.each.call(evt.changedTouches || evt.touches, function (touch) {\n                _this._changedPointerPositions.push({\n                    id: touch.identifier,\n                    x: (touch.clientX - contentPosition.left) / contentPosition.scaleX,\n                    y: (touch.clientY - contentPosition.top) / contentPosition.scaleY\n                });\n            });\n        }\n        else {\n            x = (evt.clientX - contentPosition.left) / contentPosition.scaleX;\n            y = (evt.clientY - contentPosition.top) / contentPosition.scaleY;\n            this.pointerPos = {\n                x: x,\n                y: y\n            };\n            this._pointerPositions = [{ x: x, y: y, id: Util_1.Util._getFirstPointerId(evt) }];\n            this._changedPointerPositions = [\n                { x: x, y: y, id: Util_1.Util._getFirstPointerId(evt) }\n            ];\n        }\n    };\n    Stage.prototype._setPointerPosition = function (evt) {\n        Util_1.Util.warn('Method _setPointerPosition is deprecated. Use \"stage.setPointersPositions(event)\" instead.');\n        this.setPointersPositions(evt);\n    };\n    Stage.prototype._getContentPosition = function () {\n        if (!this.content || !this.content.getBoundingClientRect) {\n            return {\n                top: 0,\n                left: 0,\n                scaleX: 1,\n                scaleY: 1\n            };\n        }\n        var rect = this.content.getBoundingClientRect();\n        return {\n            top: rect.top,\n            left: rect.left,\n            scaleX: rect.width / this.content.clientWidth || 1,\n            scaleY: rect.height / this.content.clientHeight || 1\n        };\n    };\n    Stage.prototype._buildDOM = function () {\n        this.bufferCanvas = new Canvas_1.SceneCanvas({\n            width: this.width(),\n            height: this.height()\n        });\n        this.bufferHitCanvas = new Canvas_1.HitCanvas({\n            pixelRatio: 1,\n            width: this.width(),\n            height: this.height()\n        });\n        if (!Global_1.Konva.isBrowser) {\n            return;\n        }\n        var container = this.container();\n        if (!container) {\n            throw 'Stage has no container. A container is required.';\n        }\n        container.innerHTML = EMPTY_STRING;\n        this.content = document.createElement('div');\n        this.content.style.position = RELATIVE;\n        this.content.style.userSelect = 'none';\n        this.content.className = KONVA_CONTENT;\n        this.content.setAttribute('role', 'presentation');\n        container.appendChild(this.content);\n        this._resizeDOM();\n    };\n    Stage.prototype.cache = function () {\n        Util_1.Util.warn('Cache function is not allowed for stage. You may use cache only for layers, groups and shapes.');\n        return this;\n    };\n    Stage.prototype.clearCache = function () {\n        return this;\n    };\n    Stage.prototype.batchDraw = function () {\n        this.children.each(function (layer) {\n            layer.batchDraw();\n        });\n        return this;\n    };\n    return Stage;\n}(Container_1.Container));\nexports.Stage = Stage;\nStage.prototype.nodeType = STAGE;\nGlobal_2._registerNode(Stage);\nFactory_1.Factory.addGetterSetter(Stage, 'container');\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Global_1 = require(\"./Global\");\nvar now = (function () {\n    if (Global_1.glob.performance && Global_1.glob.performance.now) {\n        return function () {\n            return Global_1.glob.performance.now();\n        };\n    }\n    return function () {\n        return new Date().getTime();\n    };\n})();\nvar Animation = (function () {\n    function Animation(func, layers) {\n        this.id = Animation.animIdCounter++;\n        this.frame = {\n            time: 0,\n            timeDiff: 0,\n            lastTime: now(),\n            frameRate: 0\n        };\n        this.func = func;\n        this.setLayers(layers);\n    }\n    Animation.prototype.setLayers = function (layers) {\n        var lays = [];\n        if (!layers) {\n            lays = [];\n        }\n        else if (layers.length > 0) {\n            lays = layers;\n        }\n        else {\n            lays = [layers];\n        }\n        this.layers = lays;\n        return this;\n    };\n    Animation.prototype.getLayers = function () {\n        return this.layers;\n    };\n    Animation.prototype.addLayer = function (layer) {\n        var layers = this.layers, len = layers.length, n;\n        for (n = 0; n < len; n++) {\n            if (layers[n]._id === layer._id) {\n                return false;\n            }\n        }\n        this.layers.push(layer);\n        return true;\n    };\n    Animation.prototype.isRunning = function () {\n        var a = Animation, animations = a.animations, len = animations.length, n;\n        for (n = 0; n < len; n++) {\n            if (animations[n].id === this.id) {\n                return true;\n            }\n        }\n        return false;\n    };\n    Animation.prototype.start = function () {\n        this.stop();\n        this.frame.timeDiff = 0;\n        this.frame.lastTime = now();\n        Animation._addAnimation(this);\n        return this;\n    };\n    Animation.prototype.stop = function () {\n        Animation._removeAnimation(this);\n        return this;\n    };\n    Animation.prototype._updateFrameObject = function (time) {\n        this.frame.timeDiff = time - this.frame.lastTime;\n        this.frame.lastTime = time;\n        this.frame.time += this.frame.timeDiff;\n        this.frame.frameRate = 1000 / this.frame.timeDiff;\n    };\n    Animation._addAnimation = function (anim) {\n        this.animations.push(anim);\n        this._handleAnimation();\n    };\n    Animation._removeAnimation = function (anim) {\n        var id = anim.id, animations = this.animations, len = animations.length, n;\n        for (n = 0; n < len; n++) {\n            if (animations[n].id === id) {\n                this.animations.splice(n, 1);\n                break;\n            }\n        }\n    };\n    Animation._runFrames = function () {\n        var layerHash = {}, animations = this.animations, anim, layers, func, n, i, layersLen, layer, key, needRedraw;\n        for (n = 0; n < animations.length; n++) {\n            anim = animations[n];\n            layers = anim.layers;\n            func = anim.func;\n            anim._updateFrameObject(now());\n            layersLen = layers.length;\n            if (func) {\n                needRedraw = func.call(anim, anim.frame) !== false;\n            }\n            else {\n                needRedraw = true;\n            }\n            if (!needRedraw) {\n                continue;\n            }\n            for (i = 0; i < layersLen; i++) {\n                layer = layers[i];\n                if (layer._id !== undefined) {\n                    layerHash[layer._id] = layer;\n                }\n            }\n        }\n        for (key in layerHash) {\n            if (!layerHash.hasOwnProperty(key)) {\n                continue;\n            }\n            layerHash[key].draw();\n        }\n    };\n    Animation._animationLoop = function () {\n        var Anim = Animation;\n        if (Anim.animations.length) {\n            Anim._runFrames();\n            requestAnimationFrame(Anim._animationLoop);\n        }\n        else {\n            Anim.animRunning = false;\n        }\n    };\n    Animation._handleAnimation = function () {\n        if (!this.animRunning) {\n            this.animRunning = true;\n            requestAnimationFrame(this._animationLoop);\n        }\n    };\n    Animation.animations = [];\n    Animation.animIdCounter = 0;\n    Animation.animRunning = false;\n    return Animation;\n}());\nexports.Animation = Animation;\n","'use strict';\nvar aFunction = require('../internals/a-function');\n\nvar PromiseCapability = function (C) {\n  var resolve, reject;\n  this.promise = new C(function ($$resolve, $$reject) {\n    if (resolve !== undefined || reject !== undefined) throw TypeError('Bad Promise constructor');\n    resolve = $$resolve;\n    reject = $$reject;\n  });\n  this.resolve = aFunction(resolve);\n  this.reject = aFunction(reject);\n};\n\n// 25.4.1.5 NewPromiseCapability(C)\nmodule.exports.f = function (C) {\n  return new PromiseCapability(C);\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Util_1 = require(\"./Util\");\nvar Validators_1 = require(\"./Validators\");\nvar GET = 'get', SET = 'set';\nexports.Factory = {\n    addGetterSetter: function (constructor, attr, def, validator, after) {\n        this.addGetter(constructor, attr, def);\n        this.addSetter(constructor, attr, validator, after);\n        this.addOverloadedGetterSetter(constructor, attr);\n    },\n    addGetter: function (constructor, attr, def) {\n        var method = GET + Util_1.Util._capitalize(attr);\n        constructor.prototype[method] =\n            constructor.prototype[method] ||\n                function () {\n                    var val = this.attrs[attr];\n                    return val === undefined ? def : val;\n                };\n    },\n    addSetter: function (constructor, attr, validator, after) {\n        var method = SET + Util_1.Util._capitalize(attr);\n        if (!constructor.prototype[method]) {\n            exports.Factory.overWriteSetter(constructor, attr, validator, after);\n        }\n    },\n    overWriteSetter: function (constructor, attr, validator, after) {\n        var method = SET + Util_1.Util._capitalize(attr);\n        constructor.prototype[method] = function (val) {\n            if (validator && val !== undefined && val !== null) {\n                val = validator.call(this, val, attr);\n            }\n            this._setAttr(attr, val);\n            if (after) {\n                after.call(this);\n            }\n            return this;\n        };\n    },\n    addComponentsGetterSetter: function (constructor, attr, components, validator, after) {\n        var len = components.length, capitalize = Util_1.Util._capitalize, getter = GET + capitalize(attr), setter = SET + capitalize(attr), n, component;\n        constructor.prototype[getter] = function () {\n            var ret = {};\n            for (n = 0; n < len; n++) {\n                component = components[n];\n                ret[component] = this.getAttr(attr + capitalize(component));\n            }\n            return ret;\n        };\n        var basicValidator = Validators_1.getComponentValidator(components);\n        constructor.prototype[setter] = function (val) {\n            var oldVal = this.attrs[attr], key;\n            if (validator) {\n                val = validator.call(this, val);\n            }\n            if (basicValidator) {\n                basicValidator.call(this, val, attr);\n            }\n            for (key in val) {\n                if (!val.hasOwnProperty(key)) {\n                    continue;\n                }\n                this._setAttr(attr + capitalize(key), val[key]);\n            }\n            this._fireChangeEvent(attr, oldVal, val);\n            if (after) {\n                after.call(this);\n            }\n            return this;\n        };\n        this.addOverloadedGetterSetter(constructor, attr);\n    },\n    addOverloadedGetterSetter: function (constructor, attr) {\n        var capitalizedAttr = Util_1.Util._capitalize(attr), setter = SET + capitalizedAttr, getter = GET + capitalizedAttr;\n        constructor.prototype[attr] = function () {\n            if (arguments.length) {\n                this[setter](arguments[0]);\n                return this;\n            }\n            return this[getter]();\n        };\n    },\n    addDeprecatedGetterSetter: function (constructor, attr, def, validator) {\n        Util_1.Util.error('Adding deprecated ' + attr);\n        var method = GET + Util_1.Util._capitalize(attr);\n        var message = attr +\n            ' property is deprecated and will be removed soon. Look at Konva change log for more information.';\n        constructor.prototype[method] = function () {\n            Util_1.Util.error(message);\n            var val = this.attrs[attr];\n            return val === undefined ? def : val;\n        };\n        this.addSetter(constructor, attr, validator, function () {\n            Util_1.Util.error(message);\n        });\n        this.addOverloadedGetterSetter(constructor, attr);\n    },\n    backCompat: function (constructor, methods) {\n        Util_1.Util.each(methods, function (oldMethodName, newMethodName) {\n            var method = constructor.prototype[newMethodName];\n            var oldGetter = GET + Util_1.Util._capitalize(oldMethodName);\n            var oldSetter = SET + Util_1.Util._capitalize(oldMethodName);\n            function deprecated() {\n                method.apply(this, arguments);\n                Util_1.Util.error('\"' +\n                    oldMethodName +\n                    '\" method is deprecated and will be removed soon. Use \"\"' +\n                    newMethodName +\n                    '\" instead.');\n            }\n            constructor.prototype[oldMethodName] = deprecated;\n            constructor.prototype[oldGetter] = deprecated;\n            constructor.prototype[oldSetter] = deprecated;\n        });\n    },\n    afterSetFilter: function () {\n        this._filterUpToDate = false;\n    }\n};\n","var TO_STRING_TAG_SUPPORT = require('../internals/to-string-tag-support');\nvar classofRaw = require('../internals/classof-raw');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\n// ES3 wrong here\nvar CORRECT_ARGUMENTS = classofRaw(function () { return arguments; }()) == 'Arguments';\n\n// fallback for IE11 Script Access Denied error\nvar tryGet = function (it, key) {\n  try {\n    return it[key];\n  } catch (error) { /* empty */ }\n};\n\n// getting tag from ES6+ `Object.prototype.toString`\nmodule.exports = TO_STRING_TAG_SUPPORT ? classofRaw : function (it) {\n  var O, tag, result;\n  return it === undefined ? 'Undefined' : it === null ? 'Null'\n    // @@toStringTag case\n    : typeof (tag = tryGet(O = Object(it), TO_STRING_TAG)) == 'string' ? tag\n    // builtinTag case\n    : CORRECT_ARGUMENTS ? classofRaw(O)\n    // ES3 arguments fallback\n    : (result = classofRaw(O)) == 'Object' && typeof O.callee == 'function' ? 'Arguments' : result;\n};\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Util_1 = require(\"./Util\");\nvar Context_1 = require(\"./Context\");\nvar Global_1 = require(\"./Global\");\nvar Factory_1 = require(\"./Factory\");\nvar Validators_1 = require(\"./Validators\");\nvar _pixelRatio;\nfunction getDevicePixelRatio() {\n    if (_pixelRatio) {\n        return _pixelRatio;\n    }\n    var canvas = Util_1.Util.createCanvasElement();\n    var context = canvas.getContext('2d');\n    _pixelRatio = (function () {\n        var devicePixelRatio = Global_1.Konva._global.devicePixelRatio || 1, backingStoreRatio = context.webkitBackingStorePixelRatio ||\n            context.mozBackingStorePixelRatio ||\n            context.msBackingStorePixelRatio ||\n            context.oBackingStorePixelRatio ||\n            context.backingStorePixelRatio ||\n            1;\n        return devicePixelRatio / backingStoreRatio;\n    })();\n    return _pixelRatio;\n}\nvar Canvas = (function () {\n    function Canvas(config) {\n        this.pixelRatio = 1;\n        this.width = 0;\n        this.height = 0;\n        this.isCache = false;\n        var conf = config || {};\n        var pixelRatio = conf.pixelRatio || Global_1.Konva.pixelRatio || getDevicePixelRatio();\n        this.pixelRatio = pixelRatio;\n        this._canvas = Util_1.Util.createCanvasElement();\n        this._canvas.style.padding = '0';\n        this._canvas.style.margin = '0';\n        this._canvas.style.border = '0';\n        this._canvas.style.background = 'transparent';\n        this._canvas.style.position = 'absolute';\n        this._canvas.style.top = '0';\n        this._canvas.style.left = '0';\n    }\n    Canvas.prototype.getContext = function () {\n        return this.context;\n    };\n    Canvas.prototype.getPixelRatio = function () {\n        return this.pixelRatio;\n    };\n    Canvas.prototype.setPixelRatio = function (pixelRatio) {\n        var previousRatio = this.pixelRatio;\n        this.pixelRatio = pixelRatio;\n        this.setSize(this.getWidth() / previousRatio, this.getHeight() / previousRatio);\n    };\n    Canvas.prototype.setWidth = function (width) {\n        this.width = this._canvas.width = width * this.pixelRatio;\n        this._canvas.style.width = width + 'px';\n        var pixelRatio = this.pixelRatio, _context = this.getContext()._context;\n        _context.scale(pixelRatio, pixelRatio);\n    };\n    Canvas.prototype.setHeight = function (height) {\n        this.height = this._canvas.height = height * this.pixelRatio;\n        this._canvas.style.height = height + 'px';\n        var pixelRatio = this.pixelRatio, _context = this.getContext()._context;\n        _context.scale(pixelRatio, pixelRatio);\n    };\n    Canvas.prototype.getWidth = function () {\n        return this.width;\n    };\n    Canvas.prototype.getHeight = function () {\n        return this.height;\n    };\n    Canvas.prototype.setSize = function (width, height) {\n        this.setWidth(width || 0);\n        this.setHeight(height || 0);\n    };\n    Canvas.prototype.toDataURL = function (mimeType, quality) {\n        try {\n            return this._canvas.toDataURL(mimeType, quality);\n        }\n        catch (e) {\n            try {\n                return this._canvas.toDataURL();\n            }\n            catch (err) {\n                Util_1.Util.error('Unable to get data URL. ' +\n                    err.message +\n                    ' For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html.');\n                return '';\n            }\n        }\n    };\n    return Canvas;\n}());\nexports.Canvas = Canvas;\nFactory_1.Factory.addGetterSetter(Canvas, 'pixelRatio', undefined, Validators_1.getNumberValidator());\nvar SceneCanvas = (function (_super) {\n    __extends(SceneCanvas, _super);\n    function SceneCanvas(config) {\n        if (config === void 0) { config = { width: 0, height: 0 }; }\n        var _this = _super.call(this, config) || this;\n        _this.context = new Context_1.SceneContext(_this);\n        _this.setSize(config.width, config.height);\n        return _this;\n    }\n    return SceneCanvas;\n}(Canvas));\nexports.SceneCanvas = SceneCanvas;\nvar HitCanvas = (function (_super) {\n    __extends(HitCanvas, _super);\n    function HitCanvas(config) {\n        if (config === void 0) { config = { width: 0, height: 0 }; }\n        var _this = _super.call(this, config) || this;\n        _this.hitCanvas = true;\n        _this.context = new Context_1.HitContext(_this);\n        _this.setSize(config.width, config.height);\n        return _this;\n    }\n    return HitCanvas;\n}(Canvas));\nexports.HitCanvas = HitCanvas;\n","var shared = require('../internals/shared');\nvar uid = require('../internals/uid');\n\nvar keys = shared('keys');\n\nmodule.exports = function (key) {\n  return keys[key] || (keys[key] = uid(key));\n};\n","// This file is imported into lib/wc client bundles.\n\nif (typeof window !== 'undefined') {\n  var currentScript = window.document.currentScript\n  if (process.env.NEED_CURRENTSCRIPT_POLYFILL) {\n    var getCurrentScript = require('@soda/get-current-script')\n    currentScript = getCurrentScript()\n\n    // for backward compatibility, because previously we directly included the polyfill\n    if (!('currentScript' in document)) {\n      Object.defineProperty(document, 'currentScript', { get: getCurrentScript })\n    }\n  }\n\n  var src = currentScript && currentScript.src.match(/(.+\\/)[^/]+\\.js(\\?.*)?$/)\n  if (src) {\n    __webpack_public_path__ = src[1] // eslint-disable-line\n  }\n}\n\n// Indicate to webpack that this file can be concatenated\nexport default null\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"container\",staticClass:\"luck-draw\",staticStyle:{\"display\":\"inline-block\"}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","export default function _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}","export default function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}","import _typeof from \"../../helpers/esm/typeof\";\nimport assertThisInitialized from \"./assertThisInitialized\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}","import getPrototypeOf from \"./getPrototypeOf\";\nimport isNativeReflectConstruct from \"./isNativeReflectConstruct\";\nimport possibleConstructorReturn from \"./possibleConstructorReturn\";\nexport default function _createSuper(Derived) {\n  var hasNativeReflectConstruct = isNativeReflectConstruct();\n  return function _createSuperInternal() {\n    var Super = getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return possibleConstructorReturn(this, result);\n  };\n}","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __createBinding(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","/**\n  * vue-class-component v7.2.3\n  * (c) 2015-present Evan You\n  * @license MIT\n  */\nimport Vue from 'vue';\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function (obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function (obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) arr2[i] = arr[i];\n\n    return arr2;\n  }\n}\n\nfunction _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n\n// The rational behind the verbose Reflect-feature check below is the fact that there are polyfills\n// which add an implementation for Reflect.defineMetadata but not for Reflect.getOwnMetadataKeys.\n// Without this check consumers will encounter hard to track down runtime errors.\nfunction reflectionIsSupported() {\n  return typeof Reflect !== 'undefined' && Reflect.defineMetadata && Reflect.getOwnMetadataKeys;\n}\nfunction copyReflectionMetadata(to, from) {\n  forwardMetadata(to, from);\n  Object.getOwnPropertyNames(from.prototype).forEach(function (key) {\n    forwardMetadata(to.prototype, from.prototype, key);\n  });\n  Object.getOwnPropertyNames(from).forEach(function (key) {\n    forwardMetadata(to, from, key);\n  });\n}\n\nfunction forwardMetadata(to, from, propertyKey) {\n  var metaKeys = propertyKey ? Reflect.getOwnMetadataKeys(from, propertyKey) : Reflect.getOwnMetadataKeys(from);\n  metaKeys.forEach(function (metaKey) {\n    var metadata = propertyKey ? Reflect.getOwnMetadata(metaKey, from, propertyKey) : Reflect.getOwnMetadata(metaKey, from);\n\n    if (propertyKey) {\n      Reflect.defineMetadata(metaKey, metadata, to, propertyKey);\n    } else {\n      Reflect.defineMetadata(metaKey, metadata, to);\n    }\n  });\n}\n\nvar fakeArray = {\n  __proto__: []\n};\nvar hasProto = fakeArray instanceof Array;\nfunction createDecorator(factory) {\n  return function (target, key, index) {\n    var Ctor = typeof target === 'function' ? target : target.constructor;\n\n    if (!Ctor.__decorators__) {\n      Ctor.__decorators__ = [];\n    }\n\n    if (typeof index !== 'number') {\n      index = undefined;\n    }\n\n    Ctor.__decorators__.push(function (options) {\n      return factory(options, key, index);\n    });\n  };\n}\nfunction mixins() {\n  for (var _len = arguments.length, Ctors = new Array(_len), _key = 0; _key < _len; _key++) {\n    Ctors[_key] = arguments[_key];\n  }\n\n  return Vue.extend({\n    mixins: Ctors\n  });\n}\nfunction isPrimitive(value) {\n  var type = _typeof(value);\n\n  return value == null || type !== 'object' && type !== 'function';\n}\nfunction warn(message) {\n  if (typeof console !== 'undefined') {\n    console.warn('[vue-class-component] ' + message);\n  }\n}\n\nfunction collectDataFromConstructor(vm, Component) {\n  // override _init to prevent to init as Vue instance\n  var originalInit = Component.prototype._init;\n\n  Component.prototype._init = function () {\n    var _this = this;\n\n    // proxy to actual vm\n    var keys = Object.getOwnPropertyNames(vm); // 2.2.0 compat (props are no longer exposed as self properties)\n\n    if (vm.$options.props) {\n      for (var key in vm.$options.props) {\n        if (!vm.hasOwnProperty(key)) {\n          keys.push(key);\n        }\n      }\n    }\n\n    keys.forEach(function (key) {\n      if (key.charAt(0) !== '_') {\n        Object.defineProperty(_this, key, {\n          get: function get() {\n            return vm[key];\n          },\n          set: function set(value) {\n            vm[key] = value;\n          },\n          configurable: true\n        });\n      }\n    });\n  }; // should be acquired class property values\n\n\n  var data = new Component(); // restore original _init to avoid memory leak (#209)\n\n  Component.prototype._init = originalInit; // create plain data object\n\n  var plainData = {};\n  Object.keys(data).forEach(function (key) {\n    if (data[key] !== undefined) {\n      plainData[key] = data[key];\n    }\n  });\n\n  if (process.env.NODE_ENV !== 'production') {\n    if (!(Component.prototype instanceof Vue) && Object.keys(plainData).length > 0) {\n      warn('Component class must inherit Vue or its descendant class ' + 'when class property is used.');\n    }\n  }\n\n  return plainData;\n}\n\nvar $internalHooks = ['data', 'beforeCreate', 'created', 'beforeMount', 'mounted', 'beforeDestroy', 'destroyed', 'beforeUpdate', 'updated', 'activated', 'deactivated', 'render', 'errorCaptured', 'serverPrefetch' // 2.6\n];\nfunction componentFactory(Component) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  options.name = options.name || Component._componentTag || Component.name; // prototype props.\n\n  var proto = Component.prototype;\n  Object.getOwnPropertyNames(proto).forEach(function (key) {\n    if (key === 'constructor') {\n      return;\n    } // hooks\n\n\n    if ($internalHooks.indexOf(key) > -1) {\n      options[key] = proto[key];\n      return;\n    }\n\n    var descriptor = Object.getOwnPropertyDescriptor(proto, key);\n\n    if (descriptor.value !== void 0) {\n      // methods\n      if (typeof descriptor.value === 'function') {\n        (options.methods || (options.methods = {}))[key] = descriptor.value;\n      } else {\n        // typescript decorated data\n        (options.mixins || (options.mixins = [])).push({\n          data: function data() {\n            return _defineProperty({}, key, descriptor.value);\n          }\n        });\n      }\n    } else if (descriptor.get || descriptor.set) {\n      // computed properties\n      (options.computed || (options.computed = {}))[key] = {\n        get: descriptor.get,\n        set: descriptor.set\n      };\n    }\n  });\n  (options.mixins || (options.mixins = [])).push({\n    data: function data() {\n      return collectDataFromConstructor(this, Component);\n    }\n  }); // decorate options\n\n  var decorators = Component.__decorators__;\n\n  if (decorators) {\n    decorators.forEach(function (fn) {\n      return fn(options);\n    });\n    delete Component.__decorators__;\n  } // find super\n\n\n  var superProto = Object.getPrototypeOf(Component.prototype);\n  var Super = superProto instanceof Vue ? superProto.constructor : Vue;\n  var Extended = Super.extend(options);\n  forwardStaticMembers(Extended, Component, Super);\n\n  if (reflectionIsSupported()) {\n    copyReflectionMetadata(Extended, Component);\n  }\n\n  return Extended;\n}\nvar reservedPropertyNames = [// Unique id\n'cid', // Super Vue constructor\n'super', // Component options that will be used by the component\n'options', 'superOptions', 'extendOptions', 'sealedOptions', // Private assets\n'component', 'directive', 'filter'];\nvar shouldIgnore = {\n  prototype: true,\n  arguments: true,\n  callee: true,\n  caller: true\n};\n\nfunction forwardStaticMembers(Extended, Original, Super) {\n  // We have to use getOwnPropertyNames since Babel registers methods as non-enumerable\n  Object.getOwnPropertyNames(Original).forEach(function (key) {\n    // Skip the properties that should not be overwritten\n    if (shouldIgnore[key]) {\n      return;\n    } // Some browsers does not allow reconfigure built-in properties\n\n\n    var extendedDescriptor = Object.getOwnPropertyDescriptor(Extended, key);\n\n    if (extendedDescriptor && !extendedDescriptor.configurable) {\n      return;\n    }\n\n    var descriptor = Object.getOwnPropertyDescriptor(Original, key); // If the user agent does not support `__proto__` or its family (IE <= 10),\n    // the sub class properties may be inherited properties from the super class in TypeScript.\n    // We need to exclude such properties to prevent to overwrite\n    // the component options object which stored on the extended constructor (See #192).\n    // If the value is a referenced value (object or function),\n    // we can check equality of them and exclude it if they have the same reference.\n    // If it is a primitive value, it will be forwarded for safety.\n\n    if (!hasProto) {\n      // Only `cid` is explicitly exluded from property forwarding\n      // because we cannot detect whether it is a inherited property or not\n      // on the no `__proto__` environment even though the property is reserved.\n      if (key === 'cid') {\n        return;\n      }\n\n      var superDescriptor = Object.getOwnPropertyDescriptor(Super, key);\n\n      if (!isPrimitive(descriptor.value) && superDescriptor && superDescriptor.value === descriptor.value) {\n        return;\n      }\n    } // Warn if the users manually declare reserved properties\n\n\n    if (process.env.NODE_ENV !== 'production' && reservedPropertyNames.indexOf(key) >= 0) {\n      warn(\"Static property name '\".concat(key, \"' declared on class '\").concat(Original.name, \"' \") + 'conflicts with reserved property name of Vue internal. ' + 'It may cause unexpected behavior of the component. Consider renaming the property.');\n    }\n\n    Object.defineProperty(Extended, key, descriptor);\n  });\n}\n\nfunction Component(options) {\n  if (typeof options === 'function') {\n    return componentFactory(options);\n  }\n\n  return function (Component) {\n    return componentFactory(Component, options);\n  };\n}\n\nComponent.registerHooks = function registerHooks(keys) {\n  $internalHooks.push.apply($internalHooks, _toConsumableArray(keys));\n};\n\nexport default Component;\nexport { createDecorator, mixins };\n","/** vue-property-decorator verson 8.5.0 MIT LICENSE copyright 2020 kaorun343 */\n/// <reference types='reflect-metadata'/>\n'use strict';\nimport Vue from 'vue';\nimport Component, { createDecorator, mixins } from 'vue-class-component';\nexport { Component, Vue, mixins as Mixins };\n/** Used for keying reactive provide/inject properties */\nvar reactiveInjectKey = '__reactiveInject__';\n/**\n * decorator of an inject\n * @param from key\n * @return PropertyDecorator\n */\nexport function Inject(options) {\n    return createDecorator(function (componentOptions, key) {\n        if (typeof componentOptions.inject === 'undefined') {\n            componentOptions.inject = {};\n        }\n        if (!Array.isArray(componentOptions.inject)) {\n            componentOptions.inject[key] = options || key;\n        }\n    });\n}\n/**\n * decorator of a reactive inject\n * @param from key\n * @return PropertyDecorator\n */\nexport function InjectReactive(options) {\n    return createDecorator(function (componentOptions, key) {\n        if (typeof componentOptions.inject === 'undefined') {\n            componentOptions.inject = {};\n        }\n        if (!Array.isArray(componentOptions.inject)) {\n            var fromKey_1 = !!options ? options.from || options : key;\n            var defaultVal_1 = (!!options && options.default) || undefined;\n            if (!componentOptions.computed)\n                componentOptions.computed = {};\n            componentOptions.computed[key] = function () {\n                var obj = this[reactiveInjectKey];\n                return obj ? obj[fromKey_1] : defaultVal_1;\n            };\n            componentOptions.inject[reactiveInjectKey] = reactiveInjectKey;\n        }\n    });\n}\nfunction produceProvide(original) {\n    var provide = function () {\n        var _this = this;\n        var rv = typeof original === 'function' ? original.call(this) : original;\n        rv = Object.create(rv || null);\n        // set reactive services (propagates previous services if necessary)\n        rv[reactiveInjectKey] = this[reactiveInjectKey] || {};\n        for (var i in provide.managed) {\n            rv[provide.managed[i]] = this[i];\n        }\n        var _loop_1 = function (i) {\n            rv[provide.managedReactive[i]] = this_1[i]; // Duplicates the behavior of `@Provide`\n            Object.defineProperty(rv[reactiveInjectKey], provide.managedReactive[i], {\n                enumerable: true,\n                get: function () { return _this[i]; },\n            });\n        };\n        var this_1 = this;\n        for (var i in provide.managedReactive) {\n            _loop_1(i);\n        }\n        return rv;\n    };\n    provide.managed = {};\n    provide.managedReactive = {};\n    return provide;\n}\nfunction needToProduceProvide(original) {\n    return (typeof original !== 'function' ||\n        (!original.managed && !original.managedReactive));\n}\n/**\n * decorator of a provide\n * @param key key\n * @return PropertyDecorator | void\n */\nexport function Provide(key) {\n    return createDecorator(function (componentOptions, k) {\n        var provide = componentOptions.provide;\n        if (needToProduceProvide(provide)) {\n            provide = componentOptions.provide = produceProvide(provide);\n        }\n        provide.managed[k] = key || k;\n    });\n}\n/**\n * decorator of a reactive provide\n * @param key key\n * @return PropertyDecorator | void\n */\nexport function ProvideReactive(key) {\n    return createDecorator(function (componentOptions, k) {\n        var provide = componentOptions.provide;\n        // inject parent reactive services (if any)\n        if (!Array.isArray(componentOptions.inject)) {\n            componentOptions.inject = componentOptions.inject || {};\n            componentOptions.inject[reactiveInjectKey] = {\n                from: reactiveInjectKey,\n                default: {},\n            };\n        }\n        if (needToProduceProvide(provide)) {\n            provide = componentOptions.provide = produceProvide(provide);\n        }\n        provide.managedReactive[k] = key || k;\n    });\n}\n/** @see {@link https://github.com/vuejs/vue-class-component/blob/master/src/reflect.ts} */\nvar reflectMetadataIsSupported = typeof Reflect !== 'undefined' && typeof Reflect.getMetadata !== 'undefined';\nfunction applyMetadata(options, target, key) {\n    if (reflectMetadataIsSupported) {\n        if (!Array.isArray(options) &&\n            typeof options !== 'function' &&\n            typeof options.type === 'undefined') {\n            var type = Reflect.getMetadata('design:type', target, key);\n            if (type !== Object) {\n                options.type = type;\n            }\n        }\n    }\n}\n/**\n * decorator of model\n * @param  event event name\n * @param options options\n * @return PropertyDecorator\n */\nexport function Model(event, options) {\n    if (options === void 0) { options = {}; }\n    return function (target, key) {\n        applyMetadata(options, target, key);\n        createDecorator(function (componentOptions, k) {\n            ;\n            (componentOptions.props || (componentOptions.props = {}))[k] = options;\n            componentOptions.model = { prop: k, event: event || k };\n        })(target, key);\n    };\n}\n/**\n * decorator of a prop\n * @param  options the options for the prop\n * @return PropertyDecorator | void\n */\nexport function Prop(options) {\n    if (options === void 0) { options = {}; }\n    return function (target, key) {\n        applyMetadata(options, target, key);\n        createDecorator(function (componentOptions, k) {\n            ;\n            (componentOptions.props || (componentOptions.props = {}))[k] = options;\n        })(target, key);\n    };\n}\n/**\n * decorator of a synced prop\n * @param propName the name to interface with from outside, must be different from decorated property\n * @param options the options for the synced prop\n * @return PropertyDecorator | void\n */\nexport function PropSync(propName, options) {\n    if (options === void 0) { options = {}; }\n    // @ts-ignore\n    return function (target, key) {\n        applyMetadata(options, target, key);\n        createDecorator(function (componentOptions, k) {\n            ;\n            (componentOptions.props || (componentOptions.props = {}))[propName] = options;\n            (componentOptions.computed || (componentOptions.computed = {}))[k] = {\n                get: function () {\n                    return this[propName];\n                },\n                set: function (value) {\n                    // @ts-ignore\n                    this.$emit(\"update:\" + propName, value);\n                },\n            };\n        })(target, key);\n    };\n}\n/**\n * decorator of a watch function\n * @param  path the path or the expression to observe\n * @param  WatchOption\n * @return MethodDecorator\n */\nexport function Watch(path, options) {\n    if (options === void 0) { options = {}; }\n    var _a = options.deep, deep = _a === void 0 ? false : _a, _b = options.immediate, immediate = _b === void 0 ? false : _b;\n    return createDecorator(function (componentOptions, handler) {\n        if (typeof componentOptions.watch !== 'object') {\n            componentOptions.watch = Object.create(null);\n        }\n        var watch = componentOptions.watch;\n        if (typeof watch[path] === 'object' && !Array.isArray(watch[path])) {\n            watch[path] = [watch[path]];\n        }\n        else if (typeof watch[path] === 'undefined') {\n            watch[path] = [];\n        }\n        watch[path].push({ handler: handler, deep: deep, immediate: immediate });\n    });\n}\n// Code copied from Vue/src/shared/util.js\nvar hyphenateRE = /\\B([A-Z])/g;\nvar hyphenate = function (str) { return str.replace(hyphenateRE, '-$1').toLowerCase(); };\n/**\n * decorator of an event-emitter function\n * @param  event The name of the event\n * @return MethodDecorator\n */\nexport function Emit(event) {\n    return function (_target, propertyKey, descriptor) {\n        var key = hyphenate(propertyKey);\n        var original = descriptor.value;\n        descriptor.value = function emitter() {\n            var _this = this;\n            var args = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                args[_i] = arguments[_i];\n            }\n            var emit = function (returnValue) {\n                var emitName = event || key;\n                if (returnValue === undefined) {\n                    if (args.length === 0) {\n                        _this.$emit(emitName);\n                    }\n                    else if (args.length === 1) {\n                        _this.$emit(emitName, args[0]);\n                    }\n                    else {\n                        _this.$emit.apply(_this, [emitName].concat(args));\n                    }\n                }\n                else {\n                    if (args.length === 0) {\n                        _this.$emit(emitName, returnValue);\n                    }\n                    else if (args.length === 1) {\n                        _this.$emit(emitName, returnValue, args[0]);\n                    }\n                    else {\n                        _this.$emit.apply(_this, [emitName, returnValue].concat(args));\n                    }\n                }\n            };\n            var returnValue = original.apply(this, args);\n            if (isPromise(returnValue)) {\n                returnValue.then(emit);\n            }\n            else {\n                emit(returnValue);\n            }\n            return returnValue;\n        };\n    };\n}\n/**\n * decorator of a ref prop\n * @param refKey the ref key defined in template\n */\nexport function Ref(refKey) {\n    return createDecorator(function (options, key) {\n        options.computed = options.computed || {};\n        options.computed[key] = {\n            cache: false,\n            get: function () {\n                return this.$refs[refKey || key];\n            },\n        };\n    });\n}\nfunction isPromise(obj) {\n    return obj instanceof Promise || (obj && typeof obj.then === 'function');\n}\n","import Vue from 'vue';\r\nimport Component from 'vue-class-component';\r\nimport { Prop, Ref } from 'vue-property-decorator';\r\nimport { Layer } from 'konva/lib/Layer';\r\nimport { Shape } from 'konva/lib/Shape';\r\nimport { Circle } from 'konva/lib/shapes/Circle';\r\nimport { Text } from 'konva/lib/shapes/Text';\r\nimport { Stage } from 'konva/lib/Stage';\r\nimport { Animation } from 'konva/lib/Animation';\r\nimport { Tween } from 'konva/lib/Tween';\r\nimport { Context } from 'konva/types/Context';\r\n\r\nconst SPEED = 0.001;\r\n@Component({ name: 'LuckDraw' })\r\nexport default class extends Vue {\r\n    /* ============model=========== */\r\n    /* ============props=========== */\r\n    @Prop({ type: Array, required: true }) prizes!: Array<{ text: string, icon?: string }>;\r\n    @Prop({ type: Number, default: 300 }) size!: number;\r\n    @Prop({ type: Number, default: 40 }) btnSize!: number;\r\n    @Prop({ type: Number, default: 25 }) iconWidth!: number;\r\n    @Prop({ type: Number, default: 22 }) borderWidth!: number;\r\n    @Prop({ type: Number, default: 16 }) fontSize!: number;\r\n    @Prop({ type: Array, default: () => ['#FEE200', '#FFF'] }) dotColors!: Array<string>;\r\n    @Prop({ type: Number, default: 24 }) dotCount!: number;\r\n    @Prop({ type: Number, default: 4 }) dotRadius!: number;\r\n    @Prop({ type: Array, default: () => ['#ffd428', '#fff68b'] }) fanneColors!: Array<string>;\r\n\r\n    /* ============data=========== */\r\n    @Ref('container') container!: HTMLDivElement;\r\n\r\n    innerRingLayer: Layer | null = null;\r\n    innerPrizes: Array<{ text: string, icon?: HTMLImageElement, angle: number }> = [];\r\n    rotateAngle = 0; // 记录内圈转盘转动的总角度\r\n    speed = SPEED; // 旋转一度需要多少秒\r\n    slowDown = 0; // 减速程度\r\n    checkedIndex: number | null = null; // 表示抽中那个奖品\r\n    running = false;\r\n    slowDownTurns = 0; // 记录找到奖品后减速的圈数\r\n\r\n    /* ============computed=========== */\r\n    get radius() {\r\n        return this.size * 0.5;\r\n    }\r\n\r\n    get count() {\r\n        return this.prizes.length;\r\n    }\r\n\r\n    /** 扇形的角弧度 */\r\n    get fanneAngle() {\r\n        return 360 / this.count;\r\n    }\r\n\r\n    /* ============methods normal=========== */\r\n    /** 外圈 */\r\n    drawOutRing() {\r\n        const layer = new Layer({\r\n            x: this.radius,\r\n            y: this.radius,\r\n            offsetX: this.radius,\r\n            offsetY: this.radius,\r\n        });\r\n        layer.add(new Circle({\r\n            x: this.radius,\r\n            y: this.radius,\r\n            radius: this.radius,\r\n            rotation: 10,\r\n            fill: '#f05828',\r\n        }));\r\n        // 外圈上的圆点\r\n        const dotAngle = 360 / this.dotCount;\r\n        const offsetY = this.radius - this.borderWidth * 0.5;\r\n        for (let i = 0; i < this.dotCount; i++) {\r\n            layer.add(new Circle({\r\n                x: this.radius,\r\n                y: this.radius,\r\n                offsetY,\r\n                rotation: dotAngle * i,\r\n                radius: this.dotRadius,\r\n                fill: this.dotColors[i % this.dotColors.length],\r\n                shadowBlur: 10,\r\n                shadowColor: this.dotColors[i % this.dotColors.length],\r\n            }));\r\n        }\r\n        return layer;\r\n    }\r\n\r\n    /** 内圈 */\r\n    drawInnerRing() {\r\n        const layer = new Layer({\r\n            x: this.radius,\r\n            y: this.radius,\r\n            offsetX: this.radius,\r\n            offsetY: this.radius,\r\n        });\r\n        // 扇形角弧度\r\n        const fanneAngle = 2 * Math.PI / this.count;\r\n        // 画圆弧时，默认起始弧度从水平向右方向，顺时针开始，这里先将起始弧度减去Math.PI * 0.5，表示从竖直向上方向顺时针，再减去扇形弧度的一半，以保证画的扇形的角是指向下面的\r\n        const startAngle = -Math.PI * 0.5 - fanneAngle / 2;\r\n        const endAngle = startAngle + fanneAngle;\r\n        for (let i = 0; i < this.count; i++) {\r\n            const { text, icon } = this.innerPrizes[i];\r\n            layer.add(new Shape({\r\n                x: this.radius,\r\n                y: this.radius,\r\n                fill: this.fanneColors[i % this.fanneColors.length],\r\n                stroke: '#fff',\r\n                strokeWidth: 0.5,\r\n                sceneFunc: (context, shape) => {\r\n                    context.rotate(fanneAngle * i);\r\n                    // 画扇形背景\r\n                    context.beginPath();\r\n                    context.moveTo(0, 0);\r\n                    context.arc(0, 0, this.radius - this.borderWidth, startAngle, endAngle, false);\r\n                    context.closePath();\r\n                    context.fillStrokeShape(shape);\r\n                    // 画文字和图标\r\n                    context.save();\r\n                    context._context.textBaseline = 'top';\r\n                    context._context.fillStyle = '#A17500';\r\n                    context._context.font = `${this.fontSize}px Microsoft YaHei`;\r\n                    const { width } = context.measureText(text);\r\n                    const textY = this.borderWidth + 10 - this.radius;\r\n                    context.fillText(text, -width * 0.5, textY);\r\n                    if (icon) {\r\n                        const iconHeight = this.iconWidth / icon.width * icon.height;\r\n                        context.drawImage(icon, -this.iconWidth * 0.5, textY + this.fontSize + 10, this.iconWidth, iconHeight);\r\n                    }\r\n                    context.restore();\r\n                },\r\n            }));\r\n        }\r\n        return layer;\r\n    }\r\n\r\n    drawBtn() {\r\n        const layer = new Layer();\r\n        const outerRing = this.btnSize;\r\n        const innerRing = this.btnSize - 5;\r\n        const btnSceneFunc = (context: Context, shape: Shape) => {\r\n            const radius: number = shape.getAttr('radius');\r\n            context.beginPath();\r\n            // 计算箭头y坐标\r\n            const y = this.radius - radius * 1.4;\r\n            context.moveTo(this.radius, y);\r\n            context.arc(this.radius, this.radius, radius, -Math.PI * 0.44, Math.PI + Math.PI * 0.44, false);\r\n            context.closePath();\r\n            context.fillShape(shape);\r\n        };\r\n\r\n        layer.add(new Shape({\r\n            sceneFunc: btnSceneFunc,\r\n            fill: '#fff',\r\n            shadowBlur: 10,\r\n            shadowColor: '#aaa',\r\n        }).setAttr('radius', outerRing));\r\n\r\n        layer.add(new Shape({\r\n            sceneFunc: btnSceneFunc,\r\n            fill: '#fa4d29',\r\n            shadowBlur: 5,\r\n            shadowColor: '#FF5229',\r\n        }).setAttr('radius', innerRing));\r\n\r\n        const text = new Text({\r\n            text: '立即\\n抽奖',\r\n            x: this.radius - innerRing,\r\n            y: this.radius - innerRing,\r\n            width: innerRing * 2,\r\n            height: innerRing * 2,\r\n            align: 'center',\r\n            verticalAlign: 'middle',\r\n            fontSize: innerRing / 1.8,\r\n            fontFamily: 'Microsoft YaHei',\r\n            fill: '#fff',\r\n        });\r\n        text.on('mouseenter', () => {\r\n            this.container.style.cursor = 'pointer';\r\n        });\r\n        text.on('mouseout', () => {\r\n            this.container.style.cursor = 'default';\r\n        });\r\n        text.on('click touchend', this.onLuckDraw);\r\n        layer.add(text);\r\n        return layer;\r\n    }\r\n\r\n    async handleInnerPrizes() {\r\n        this.innerPrizes = await Promise.all(this.prizes.map(({ text, icon }, i) => {\r\n            return new Promise<any>((resolve, reject) => {\r\n                // 表示每个奖品在转盘竖直向上顺时针偏离的角度，用于旋转转盘角度以达到抽中该奖品的目的\r\n                const angle = this.fanneAngle * i;\r\n                if (!icon) {\r\n                    return resolve({ text, angle });\r\n                }\r\n                const img = document.createElement('img');\r\n                img.onload = () => {\r\n                    resolve({ text, icon: img, angle });\r\n                };\r\n                img.onerror = e => reject(e);\r\n                img.src = icon;\r\n            });\r\n        }));\r\n    }\r\n\r\n    /** 处理抽奖时转盘转动的动画 */\r\n    handleInnerRingAnimation() {\r\n        if (!this.running) return;\r\n        // 逆时针旋转，一次转动一格（即一个扇形区域）\r\n        this.rotateAngle += this.fanneAngle;\r\n\r\n        // 转动了几圈\r\n        const turnsNum = Math.floor(Math.abs(this.rotateAngle) / 360);\r\n        // 将角度转换成1圈内的角度，方便判断旋转到了那个奖品（此角度+奖品所在角度=360时，表示该奖品旋转到了正上方，表示选中该奖品）\r\n        let angle = this.rotateAngle - Math.floor(this.rotateAngle / 360) * 360;\r\n        if (angle == 0) {\r\n            // 不然无法选中索引为0的奖品\r\n            angle = 360;\r\n        }\r\n        // 稳定转n圈以上，并且选中奖品首次旋转到正上方时，开始慢慢减速，若外部一直没有调用check选择抽中奖品，那么将会一直转\r\n        if (turnsNum > 2 && this.checkedIndex != null && angle + this.innerPrizes[this.checkedIndex].angle == 360) {\r\n            // 记录减速旋转的圈数\r\n            this.slowDownTurns++;\r\n        }\r\n        // 开始减速\r\n        if (this.slowDownTurns > 0) {\r\n            this.speed += 0.0001 * this.slowDown;\r\n            this.slowDown += 0.5;// 减速程度越来越大\r\n        }\r\n        new Tween({\r\n            duration: this.fanneAngle * this.speed,\r\n            node: this.innerRingLayer,\r\n            rotation: this.rotateAngle,\r\n            onFinish: () => {\r\n                // 当减速n圈后再次到达奖品位置处时，停止旋转，表示抽中该奖品\r\n                if (this.slowDownTurns == 4 && angle + this.innerPrizes[this.checkedIndex!].angle == 360) {\r\n                    this.stop();\r\n                    this.$emit('finish', this.checkedIndex);\r\n                } else {\r\n                    this.handleInnerRingAnimation();\r\n                }\r\n            },\r\n        }).play();\r\n    }\r\n\r\n    /** 外部调用（请求服务器得到奖品索引后，调用此方法表示抽中该奖品） */\r\n    check(index: number) {\r\n        if (index < 0 || index > this.count - 1) {\r\n            this.stop();\r\n            throw new Error('奖品索引越界');\r\n        }\r\n        this.checkedIndex = index;\r\n    }\r\n\r\n    stop() {\r\n        this.running = false;\r\n    }\r\n\r\n    /* ============methods event=========== */\r\n    onLuckDraw() {\r\n        // 当前正在抽奖，返回不做处理\r\n        if (this.running) {\r\n            return;\r\n        }\r\n        this.speed = SPEED;\r\n        this.rotateAngle = 0;\r\n        this.slowDownTurns = 0;\r\n        this.slowDown = 0;\r\n        this.checkedIndex = null;\r\n        this.running = true;\r\n        this.handleInnerRingAnimation();\r\n        this.$emit('start');\r\n    }\r\n\r\n    /* ============Lifecycle Hooks=========== */\r\n    mounted() {\r\n        this.$nextTick(async () => {\r\n            const stage = new Stage({\r\n                container: this.container,\r\n                width: this.size,\r\n                height: this.size,\r\n            });\r\n            // 外圈\r\n            const outerRingLayer = this.drawOutRing();\r\n            // 外圈动画\r\n            new Animation(() => {\r\n                outerRingLayer.rotate(0.2);\r\n            }, outerRingLayer).start();\r\n            stage.add(outerRingLayer);\r\n\r\n            // 内圈转盘\r\n            await this.handleInnerPrizes();\r\n            this.innerRingLayer = this.drawInnerRing();\r\n            stage.add(this.innerRingLayer);\r\n\r\n            // 抽奖按钮\r\n            stage.add(this.drawBtn());\r\n        });\r\n    }\r\n\r\n    /* ============watch=========== */\r\n}\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/eslint-loader/index.js??ref--13-0!./luck-draw.ts?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/eslint-loader/index.js??ref--13-0!./luck-draw.ts?vue&type=script&lang=ts&\"","/* globals __VUE_SSR_CONTEXT__ */\n\n// IMPORTANT: Do NOT use ES2015 features in this file (except for modules).\n// This module is a runtime utility for cleaner component module output and will\n// be included in the final webpack user bundle.\n\nexport default function normalizeComponent (\n  scriptExports,\n  render,\n  staticRenderFns,\n  functionalTemplate,\n  injectStyles,\n  scopeId,\n  moduleIdentifier, /* server only */\n  shadowMode /* vue-cli only */\n) {\n  // Vue.extend constructor export interop\n  var options = typeof scriptExports === 'function'\n    ? scriptExports.options\n    : scriptExports\n\n  // render functions\n  if (render) {\n    options.render = render\n    options.staticRenderFns = staticRenderFns\n    options._compiled = true\n  }\n\n  // functional template\n  if (functionalTemplate) {\n    options.functional = true\n  }\n\n  // scopedId\n  if (scopeId) {\n    options._scopeId = 'data-v-' + scopeId\n  }\n\n  var hook\n  if (moduleIdentifier) { // server build\n    hook = function (context) {\n      // 2.3 injection\n      context =\n        context || // cached call\n        (this.$vnode && this.$vnode.ssrContext) || // stateful\n        (this.parent && this.parent.$vnode && this.parent.$vnode.ssrContext) // functional\n      // 2.2 with runInNewContext: true\n      if (!context && typeof __VUE_SSR_CONTEXT__ !== 'undefined') {\n        context = __VUE_SSR_CONTEXT__\n      }\n      // inject component styles\n      if (injectStyles) {\n        injectStyles.call(this, context)\n      }\n      // register component module identifier for async chunk inferrence\n      if (context && context._registeredComponents) {\n        context._registeredComponents.add(moduleIdentifier)\n      }\n    }\n    // used by ssr in case component is cached and beforeCreate\n    // never gets called\n    options._ssrRegister = hook\n  } else if (injectStyles) {\n    hook = shadowMode\n      ? function () {\n        injectStyles.call(\n          this,\n          (options.functional ? this.parent : this).$root.$options.shadowRoot\n        )\n      }\n      : injectStyles\n  }\n\n  if (hook) {\n    if (options.functional) {\n      // for template-only hot-reload because in that case the render fn doesn't\n      // go through the normalizer\n      options._injectStyles = hook\n      // register for functional component in vue file\n      var originalRender = options.render\n      options.render = function renderWithStyleInjection (h, context) {\n        hook.call(context)\n        return originalRender(h, context)\n      }\n    } else {\n      // inject component registration as beforeCreate hook\n      var existing = options.beforeCreate\n      options.beforeCreate = existing\n        ? [].concat(existing, hook)\n        : [hook]\n    }\n  }\n\n  return {\n    exports: scriptExports,\n    options: options\n  }\n}\n","import { render, staticRenderFns } from \"./luck-draw.vue?vue&type=template&id=6d3d5dee&\"\nimport script from \"./luck-draw.ts?vue&type=script&lang=ts&\"\nexport * from \"./luck-draw.ts?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import LuckDraw from './luck-draw/luck-draw.vue';\r\n\r\nexport default {\r\n    install: function (Vue: any) {\r\n        Vue.component('LuckDraw', LuckDraw);\r\n    },\r\n};\r\n\r\nexport { LuckDraw };\r\n","import './setPublicPath'\nimport mod from '~entry'\nexport default mod\nexport * from '~entry'\n","// toObject with fallback for non-array-like ES3 strings\nvar IndexedObject = require('../internals/indexed-object');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\n\nmodule.exports = function (it) {\n  return IndexedObject(requireObjectCoercible(it));\n};\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Util_1 = require(\"./Util\");\nvar Factory_1 = require(\"./Factory\");\nvar Node_1 = require(\"./Node\");\nvar Validators_1 = require(\"./Validators\");\nvar Global_1 = require(\"./Global\");\nvar PointerEvents = require(\"./PointerEvents\");\nvar HAS_SHADOW = 'hasShadow';\nvar SHADOW_RGBA = 'shadowRGBA';\nvar patternImage = 'patternImage';\nvar linearGradient = 'linearGradient';\nvar radialGradient = 'radialGradient';\nvar dummyContext;\nfunction getDummyContext() {\n    if (dummyContext) {\n        return dummyContext;\n    }\n    dummyContext = Util_1.Util.createCanvasElement().getContext('2d');\n    return dummyContext;\n}\nexports.shapes = {};\nfunction _fillFunc(context) {\n    context.fill();\n}\nfunction _strokeFunc(context) {\n    context.stroke();\n}\nfunction _fillFuncHit(context) {\n    context.fill();\n}\nfunction _strokeFuncHit(context) {\n    context.stroke();\n}\nfunction _clearHasShadowCache() {\n    this._clearCache(HAS_SHADOW);\n}\nfunction _clearGetShadowRGBACache() {\n    this._clearCache(SHADOW_RGBA);\n}\nfunction _clearFillPatternCache() {\n    this._clearCache(patternImage);\n}\nfunction _clearLinearGradientCache() {\n    this._clearCache(linearGradient);\n}\nfunction _clearRadialGradientCache() {\n    this._clearCache(radialGradient);\n}\nvar Shape = (function (_super) {\n    __extends(Shape, _super);\n    function Shape(config) {\n        var _this = _super.call(this, config) || this;\n        var key;\n        while (true) {\n            key = Util_1.Util.getRandomColor();\n            if (key && !(key in exports.shapes)) {\n                break;\n            }\n        }\n        _this.colorKey = key;\n        exports.shapes[key] = _this;\n        _this.on('shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva', _clearHasShadowCache);\n        _this.on('shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva', _clearGetShadowRGBACache);\n        _this.on('fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva', _clearFillPatternCache);\n        _this.on('fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva', _clearLinearGradientCache);\n        _this.on('fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva', _clearRadialGradientCache);\n        return _this;\n    }\n    Shape.prototype.getContext = function () {\n        return this.getLayer().getContext();\n    };\n    Shape.prototype.getCanvas = function () {\n        return this.getLayer().getCanvas();\n    };\n    Shape.prototype.getSceneFunc = function () {\n        return this.attrs.sceneFunc || this['_sceneFunc'];\n    };\n    Shape.prototype.getHitFunc = function () {\n        return this.attrs.hitFunc || this['_hitFunc'];\n    };\n    Shape.prototype.hasShadow = function () {\n        return this._getCache(HAS_SHADOW, this._hasShadow);\n    };\n    Shape.prototype._hasShadow = function () {\n        return (this.shadowEnabled() &&\n            this.shadowOpacity() !== 0 &&\n            !!(this.shadowColor() ||\n                this.shadowBlur() ||\n                this.shadowOffsetX() ||\n                this.shadowOffsetY()));\n    };\n    Shape.prototype._getFillPattern = function () {\n        return this._getCache(patternImage, this.__getFillPattern);\n    };\n    Shape.prototype.__getFillPattern = function () {\n        if (this.fillPatternImage()) {\n            var ctx = getDummyContext();\n            var pattern = ctx.createPattern(this.fillPatternImage(), this.fillPatternRepeat() || 'repeat');\n            return pattern;\n        }\n    };\n    Shape.prototype._getLinearGradient = function () {\n        return this._getCache(linearGradient, this.__getLinearGradient);\n    };\n    Shape.prototype.__getLinearGradient = function () {\n        var colorStops = this.fillLinearGradientColorStops();\n        if (colorStops) {\n            var ctx = getDummyContext();\n            var start = this.fillLinearGradientStartPoint();\n            var end = this.fillLinearGradientEndPoint();\n            var grd = ctx.createLinearGradient(start.x, start.y, end.x, end.y);\n            for (var n = 0; n < colorStops.length; n += 2) {\n                grd.addColorStop(colorStops[n], colorStops[n + 1]);\n            }\n            return grd;\n        }\n    };\n    Shape.prototype._getRadialGradient = function () {\n        return this._getCache(radialGradient, this.__getRadialGradient);\n    };\n    Shape.prototype.__getRadialGradient = function () {\n        var colorStops = this.fillRadialGradientColorStops();\n        if (colorStops) {\n            var ctx = getDummyContext();\n            var start = this.fillRadialGradientStartPoint();\n            var end = this.fillRadialGradientEndPoint();\n            var grd = ctx.createRadialGradient(start.x, start.y, this.fillRadialGradientStartRadius(), end.x, end.y, this.fillRadialGradientEndRadius());\n            for (var n = 0; n < colorStops.length; n += 2) {\n                grd.addColorStop(colorStops[n], colorStops[n + 1]);\n            }\n            return grd;\n        }\n    };\n    Shape.prototype.getShadowRGBA = function () {\n        return this._getCache(SHADOW_RGBA, this._getShadowRGBA);\n    };\n    Shape.prototype._getShadowRGBA = function () {\n        if (this.hasShadow()) {\n            var rgba = Util_1.Util.colorToRGBA(this.shadowColor());\n            return ('rgba(' +\n                rgba.r +\n                ',' +\n                rgba.g +\n                ',' +\n                rgba.b +\n                ',' +\n                rgba.a * (this.shadowOpacity() || 1) +\n                ')');\n        }\n    };\n    Shape.prototype.hasFill = function () {\n        return (this.fillEnabled() &&\n            !!(this.fill() ||\n                this.fillPatternImage() ||\n                this.fillLinearGradientColorStops() ||\n                this.fillRadialGradientColorStops()));\n    };\n    Shape.prototype.hasStroke = function () {\n        return (this.strokeEnabled() &&\n            this.strokeWidth() &&\n            !!(this.stroke() || this.strokeLinearGradientColorStops()));\n    };\n    Shape.prototype.hasHitStroke = function () {\n        var width = this.hitStrokeWidth();\n        if (width === 'auto') {\n            return this.hasStroke();\n        }\n        return this.strokeEnabled() && !!width;\n    };\n    Shape.prototype.intersects = function (point) {\n        var stage = this.getStage(), bufferHitCanvas = stage.bufferHitCanvas, p;\n        bufferHitCanvas.getContext().clear();\n        this.drawHit(bufferHitCanvas);\n        p = bufferHitCanvas.context.getImageData(Math.round(point.x), Math.round(point.y), 1, 1).data;\n        return p[3] > 0;\n    };\n    Shape.prototype.destroy = function () {\n        Node_1.Node.prototype.destroy.call(this);\n        delete exports.shapes[this.colorKey];\n        delete this.colorKey;\n        return this;\n    };\n    Shape.prototype._useBufferCanvas = function (caching) {\n        return !!((!caching || this.hasShadow()) &&\n            this.perfectDrawEnabled() &&\n            this.getAbsoluteOpacity() !== 1 &&\n            this.hasFill() &&\n            this.hasStroke() &&\n            this.getStage());\n    };\n    Shape.prototype.setStrokeHitEnabled = function (val) {\n        Util_1.Util.warn('strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead.');\n        if (val) {\n            this.hitStrokeWidth('auto');\n        }\n        else {\n            this.hitStrokeWidth(0);\n        }\n    };\n    Shape.prototype.getStrokeHitEnabled = function () {\n        if (this.hitStrokeWidth() === 0) {\n            return false;\n        }\n        else {\n            return true;\n        }\n    };\n    Shape.prototype.getSelfRect = function () {\n        var size = this.size();\n        return {\n            x: this._centroid ? -size.width / 2 : 0,\n            y: this._centroid ? -size.height / 2 : 0,\n            width: size.width,\n            height: size.height\n        };\n    };\n    Shape.prototype.getClientRect = function (attrs) {\n        attrs = attrs || {};\n        var skipTransform = attrs.skipTransform;\n        var relativeTo = attrs.relativeTo;\n        var fillRect = this.getSelfRect();\n        var applyStroke = !attrs.skipStroke && this.hasStroke();\n        var strokeWidth = (applyStroke && this.strokeWidth()) || 0;\n        var fillAndStrokeWidth = fillRect.width + strokeWidth;\n        var fillAndStrokeHeight = fillRect.height + strokeWidth;\n        var applyShadow = !attrs.skipShadow && this.hasShadow();\n        var shadowOffsetX = applyShadow ? this.shadowOffsetX() : 0;\n        var shadowOffsetY = applyShadow ? this.shadowOffsetY() : 0;\n        var preWidth = fillAndStrokeWidth + Math.abs(shadowOffsetX);\n        var preHeight = fillAndStrokeHeight + Math.abs(shadowOffsetY);\n        var blurRadius = (applyShadow && this.shadowBlur()) || 0;\n        var width = preWidth + blurRadius * 2;\n        var height = preHeight + blurRadius * 2;\n        var roundingOffset = 0;\n        if (Math.round(strokeWidth / 2) !== strokeWidth / 2) {\n            roundingOffset = 1;\n        }\n        var rect = {\n            width: width + roundingOffset,\n            height: height + roundingOffset,\n            x: -Math.round(strokeWidth / 2 + blurRadius) +\n                Math.min(shadowOffsetX, 0) +\n                fillRect.x,\n            y: -Math.round(strokeWidth / 2 + blurRadius) +\n                Math.min(shadowOffsetY, 0) +\n                fillRect.y\n        };\n        if (!skipTransform) {\n            return this._transformedRect(rect, relativeTo);\n        }\n        return rect;\n    };\n    Shape.prototype.drawScene = function (can, top, caching, skipBuffer) {\n        var layer = this.getLayer(), canvas = can || layer.getCanvas(), context = canvas.getContext(), cachedCanvas = this._getCanvasCache(), drawFunc = this.sceneFunc(), hasShadow = this.hasShadow(), hasStroke = this.hasStroke(), stage, bufferCanvas, bufferContext;\n        if (!this.isVisible() && !caching) {\n            return this;\n        }\n        if (cachedCanvas) {\n            context.save();\n            layer._applyTransform(this, context, top);\n            this._drawCachedSceneCanvas(context);\n            context.restore();\n            return this;\n        }\n        if (!drawFunc) {\n            return this;\n        }\n        context.save();\n        if (this._useBufferCanvas(caching) && !skipBuffer) {\n            stage = this.getStage();\n            bufferCanvas = stage.bufferCanvas;\n            bufferContext = bufferCanvas.getContext();\n            bufferContext.clear();\n            bufferContext.save();\n            bufferContext._applyLineJoin(this);\n            if (!caching) {\n                if (layer) {\n                    layer._applyTransform(this, bufferContext, top);\n                }\n                else {\n                    var m = this.getAbsoluteTransform(top).getMatrix();\n                    context.transform(m[0], m[1], m[2], m[3], m[4], m[5]);\n                }\n            }\n            drawFunc.call(this, bufferContext, this);\n            bufferContext.restore();\n            var ratio = bufferCanvas.pixelRatio;\n            if (hasShadow && !canvas.hitCanvas) {\n                context.save();\n                context._applyShadow(this);\n                context._applyOpacity(this);\n                context._applyGlobalCompositeOperation(this);\n                context.drawImage(bufferCanvas._canvas, 0, 0, bufferCanvas.width / ratio, bufferCanvas.height / ratio);\n                context.restore();\n            }\n            else {\n                context._applyOpacity(this);\n                context._applyGlobalCompositeOperation(this);\n                context.drawImage(bufferCanvas._canvas, 0, 0, bufferCanvas.width / ratio, bufferCanvas.height / ratio);\n            }\n        }\n        else {\n            context._applyLineJoin(this);\n            if (!caching) {\n                if (layer) {\n                    layer._applyTransform(this, context, top);\n                }\n                else {\n                    var o = this.getAbsoluteTransform(top).getMatrix();\n                    context.transform(o[0], o[1], o[2], o[3], o[4], o[5]);\n                }\n            }\n            if (hasShadow && hasStroke && !canvas.hitCanvas) {\n                context.save();\n                if (!caching) {\n                    context._applyOpacity(this);\n                    context._applyGlobalCompositeOperation(this);\n                }\n                context._applyShadow(this);\n                drawFunc.call(this, context, this);\n                context.restore();\n                if (this.hasFill() && this.shadowForStrokeEnabled()) {\n                    drawFunc.call(this, context, this);\n                }\n            }\n            else if (hasShadow && !canvas.hitCanvas) {\n                context.save();\n                if (!caching) {\n                    context._applyOpacity(this);\n                    context._applyGlobalCompositeOperation(this);\n                }\n                context._applyShadow(this);\n                drawFunc.call(this, context, this);\n                context.restore();\n            }\n            else {\n                if (!caching) {\n                    context._applyOpacity(this);\n                    context._applyGlobalCompositeOperation(this);\n                }\n                drawFunc.call(this, context, this);\n            }\n        }\n        context.restore();\n        return this;\n    };\n    Shape.prototype.drawHit = function (can, top, caching) {\n        var layer = this.getLayer(), canvas = can || layer.hitCanvas, context = canvas && canvas.getContext(), drawFunc = this.hitFunc() || this.sceneFunc(), cachedCanvas = this._getCanvasCache(), cachedHitCanvas = cachedCanvas && cachedCanvas.hit;\n        if (!this.colorKey) {\n            console.log(this);\n            Util_1.Util.warn('Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. See the shape in logs above. If you want to reuse shape you should call remove() instead of destroy()');\n        }\n        if (!this.shouldDrawHit() && !caching) {\n            return this;\n        }\n        if (cachedHitCanvas) {\n            context.save();\n            layer._applyTransform(this, context, top);\n            this._drawCachedHitCanvas(context);\n            context.restore();\n            return this;\n        }\n        if (!drawFunc) {\n            return this;\n        }\n        context.save();\n        context._applyLineJoin(this);\n        if (!caching) {\n            if (layer) {\n                layer._applyTransform(this, context, top);\n            }\n            else {\n                var o = this.getAbsoluteTransform(top).getMatrix();\n                context.transform(o[0], o[1], o[2], o[3], o[4], o[5]);\n            }\n        }\n        drawFunc.call(this, context, this);\n        context.restore();\n        return this;\n    };\n    Shape.prototype.drawHitFromCache = function (alphaThreshold) {\n        if (alphaThreshold === void 0) { alphaThreshold = 0; }\n        var cachedCanvas = this._getCanvasCache(), sceneCanvas = this._getCachedSceneCanvas(), hitCanvas = cachedCanvas.hit, hitContext = hitCanvas.getContext(), hitWidth = hitCanvas.getWidth(), hitHeight = hitCanvas.getHeight(), hitImageData, hitData, len, rgbColorKey, i, alpha;\n        hitContext.clear();\n        hitContext.drawImage(sceneCanvas._canvas, 0, 0, hitWidth, hitHeight);\n        try {\n            hitImageData = hitContext.getImageData(0, 0, hitWidth, hitHeight);\n            hitData = hitImageData.data;\n            len = hitData.length;\n            rgbColorKey = Util_1.Util._hexToRgb(this.colorKey);\n            for (i = 0; i < len; i += 4) {\n                alpha = hitData[i + 3];\n                if (alpha > alphaThreshold) {\n                    hitData[i] = rgbColorKey.r;\n                    hitData[i + 1] = rgbColorKey.g;\n                    hitData[i + 2] = rgbColorKey.b;\n                    hitData[i + 3] = 255;\n                }\n                else {\n                    hitData[i + 3] = 0;\n                }\n            }\n            hitContext.putImageData(hitImageData, 0, 0);\n        }\n        catch (e) {\n            Util_1.Util.error('Unable to draw hit graph from cached scene canvas. ' + e.message);\n        }\n        return this;\n    };\n    Shape.prototype.hasPointerCapture = function (pointerId) {\n        return PointerEvents.hasPointerCapture(pointerId, this);\n    };\n    Shape.prototype.setPointerCapture = function (pointerId) {\n        PointerEvents.setPointerCapture(pointerId, this);\n    };\n    Shape.prototype.releaseCapture = function (pointerId) {\n        PointerEvents.releaseCapture(pointerId, this);\n    };\n    return Shape;\n}(Node_1.Node));\nexports.Shape = Shape;\nShape.prototype._fillFunc = _fillFunc;\nShape.prototype._strokeFunc = _strokeFunc;\nShape.prototype._fillFuncHit = _fillFuncHit;\nShape.prototype._strokeFuncHit = _strokeFuncHit;\nShape.prototype._centroid = false;\nShape.prototype.nodeType = 'Shape';\nGlobal_1._registerNode(Shape);\nFactory_1.Factory.addGetterSetter(Shape, 'stroke', undefined, Validators_1.getStringValidator());\nFactory_1.Factory.addGetterSetter(Shape, 'strokeWidth', 2, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Shape, 'hitStrokeWidth', 'auto', Validators_1.getNumberOrAutoValidator());\nFactory_1.Factory.addGetterSetter(Shape, 'strokeHitEnabled', true, Validators_1.getBooleanValidator());\nFactory_1.Factory.addGetterSetter(Shape, 'perfectDrawEnabled', true, Validators_1.getBooleanValidator());\nFactory_1.Factory.addGetterSetter(Shape, 'shadowForStrokeEnabled', true, Validators_1.getBooleanValidator());\nFactory_1.Factory.addGetterSetter(Shape, 'lineJoin');\nFactory_1.Factory.addGetterSetter(Shape, 'lineCap');\nFactory_1.Factory.addGetterSetter(Shape, 'sceneFunc');\nFactory_1.Factory.addGetterSetter(Shape, 'hitFunc');\nFactory_1.Factory.addGetterSetter(Shape, 'dash');\nFactory_1.Factory.addGetterSetter(Shape, 'dashOffset', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Shape, 'shadowColor', undefined, Validators_1.getStringValidator());\nFactory_1.Factory.addGetterSetter(Shape, 'shadowBlur', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Shape, 'shadowOpacity', 1, Validators_1.getNumberValidator());\nFactory_1.Factory.addComponentsGetterSetter(Shape, 'shadowOffset', ['x', 'y']);\nFactory_1.Factory.addGetterSetter(Shape, 'shadowOffsetX', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Shape, 'shadowOffsetY', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Shape, 'fillPatternImage');\nFactory_1.Factory.addGetterSetter(Shape, 'fill', undefined, Validators_1.getStringValidator());\nFactory_1.Factory.addGetterSetter(Shape, 'fillPatternX', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Shape, 'fillPatternY', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Shape, 'fillLinearGradientColorStops');\nFactory_1.Factory.addGetterSetter(Shape, 'strokeLinearGradientColorStops');\nFactory_1.Factory.addGetterSetter(Shape, 'fillRadialGradientStartRadius', 0);\nFactory_1.Factory.addGetterSetter(Shape, 'fillRadialGradientEndRadius', 0);\nFactory_1.Factory.addGetterSetter(Shape, 'fillRadialGradientColorStops');\nFactory_1.Factory.addGetterSetter(Shape, 'fillPatternRepeat', 'repeat');\nFactory_1.Factory.addGetterSetter(Shape, 'fillEnabled', true);\nFactory_1.Factory.addGetterSetter(Shape, 'strokeEnabled', true);\nFactory_1.Factory.addGetterSetter(Shape, 'shadowEnabled', true);\nFactory_1.Factory.addGetterSetter(Shape, 'dashEnabled', true);\nFactory_1.Factory.addGetterSetter(Shape, 'strokeScaleEnabled', true);\nFactory_1.Factory.addGetterSetter(Shape, 'fillPriority', 'color');\nFactory_1.Factory.addComponentsGetterSetter(Shape, 'fillPatternOffset', ['x', 'y']);\nFactory_1.Factory.addGetterSetter(Shape, 'fillPatternOffsetX', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Shape, 'fillPatternOffsetY', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addComponentsGetterSetter(Shape, 'fillPatternScale', ['x', 'y']);\nFactory_1.Factory.addGetterSetter(Shape, 'fillPatternScaleX', 1, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Shape, 'fillPatternScaleY', 1, Validators_1.getNumberValidator());\nFactory_1.Factory.addComponentsGetterSetter(Shape, 'fillLinearGradientStartPoint', [\n    'x',\n    'y'\n]);\nFactory_1.Factory.addComponentsGetterSetter(Shape, 'strokeLinearGradientStartPoint', [\n    'x',\n    'y'\n]);\nFactory_1.Factory.addGetterSetter(Shape, 'fillLinearGradientStartPointX', 0);\nFactory_1.Factory.addGetterSetter(Shape, 'strokeLinearGradientStartPointX', 0);\nFactory_1.Factory.addGetterSetter(Shape, 'fillLinearGradientStartPointY', 0);\nFactory_1.Factory.addGetterSetter(Shape, 'strokeLinearGradientStartPointY', 0);\nFactory_1.Factory.addComponentsGetterSetter(Shape, 'fillLinearGradientEndPoint', [\n    'x',\n    'y'\n]);\nFactory_1.Factory.addComponentsGetterSetter(Shape, 'strokeLinearGradientEndPoint', [\n    'x',\n    'y'\n]);\nFactory_1.Factory.addGetterSetter(Shape, 'fillLinearGradientEndPointX', 0);\nFactory_1.Factory.addGetterSetter(Shape, 'strokeLinearGradientEndPointX', 0);\nFactory_1.Factory.addGetterSetter(Shape, 'fillLinearGradientEndPointY', 0);\nFactory_1.Factory.addGetterSetter(Shape, 'strokeLinearGradientEndPointY', 0);\nFactory_1.Factory.addComponentsGetterSetter(Shape, 'fillRadialGradientStartPoint', [\n    'x',\n    'y'\n]);\nFactory_1.Factory.addGetterSetter(Shape, 'fillRadialGradientStartPointX', 0);\nFactory_1.Factory.addGetterSetter(Shape, 'fillRadialGradientStartPointY', 0);\nFactory_1.Factory.addComponentsGetterSetter(Shape, 'fillRadialGradientEndPoint', [\n    'x',\n    'y'\n]);\nFactory_1.Factory.addGetterSetter(Shape, 'fillRadialGradientEndPointX', 0);\nFactory_1.Factory.addGetterSetter(Shape, 'fillRadialGradientEndPointY', 0);\nFactory_1.Factory.addGetterSetter(Shape, 'fillPatternRotation', 0);\nFactory_1.Factory.backCompat(Shape, {\n    dashArray: 'dash',\n    getDashArray: 'getDash',\n    setDashArray: 'getDash',\n    drawFunc: 'sceneFunc',\n    getDrawFunc: 'getSceneFunc',\n    setDrawFunc: 'setSceneFunc',\n    drawHitFunc: 'hitFunc',\n    getDrawHitFunc: 'getHitFunc',\n    setDrawHitFunc: 'setHitFunc'\n});\nUtil_1.Collection.mapMethods(Shape);\n","// iterable DOM collections\n// flag - `iterable` interface - 'entries', 'keys', 'values', 'forEach' methods\nmodule.exports = {\n  CSSRuleList: 0,\n  CSSStyleDeclaration: 0,\n  CSSValueList: 0,\n  ClientRectList: 0,\n  DOMRectList: 0,\n  DOMStringList: 0,\n  DOMTokenList: 1,\n  DataTransferItemList: 0,\n  FileList: 0,\n  HTMLAllCollection: 0,\n  HTMLCollection: 0,\n  HTMLFormElement: 0,\n  HTMLSelectElement: 0,\n  MediaList: 0,\n  MimeTypeArray: 0,\n  NamedNodeMap: 0,\n  NodeList: 1,\n  PaintRequestList: 0,\n  Plugin: 0,\n  PluginArray: 0,\n  SVGLengthList: 0,\n  SVGNumberList: 0,\n  SVGPathSegList: 0,\n  SVGPointList: 0,\n  SVGStringList: 0,\n  SVGTransformList: 0,\n  SourceBufferList: 0,\n  StyleSheetList: 0,\n  TextTrackCueList: 0,\n  TextTrackList: 0,\n  TouchList: 0\n};\n","var NATIVE_SYMBOL = require('../internals/native-symbol');\n\nmodule.exports = NATIVE_SYMBOL\n  // eslint-disable-next-line no-undef\n  && !Symbol.sham\n  // eslint-disable-next-line no-undef\n  && typeof Symbol.iterator == 'symbol';\n","var global = require('../internals/global');\n\nmodule.exports = global.Promise;\n"],"sourceRoot":""}